(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function t(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(o){if(o.ep)return;o.ep=!0;const l=t(o);fetch(o.href,l)}})();function E_(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Ad={exports:{}},Oa={},Rd={exports:{}},xe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dg;function AE(){if(Dg)return xe;Dg=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),c=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),E=Symbol.iterator;function S(V){return V===null||typeof V!="object"?null:(V=E&&V[E]||V["@@iterator"],typeof V=="function"?V:null)}var M={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},j=Object.assign,B={};function D(V,Q,ge){this.props=V,this.context=Q,this.refs=B,this.updater=ge||M}D.prototype.isReactComponent={},D.prototype.setState=function(V,Q){if(typeof V!="object"&&typeof V!="function"&&V!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,V,Q,"setState")},D.prototype.forceUpdate=function(V){this.updater.enqueueForceUpdate(this,V,"forceUpdate")};function ee(){}ee.prototype=D.prototype;function W(V,Q,ge){this.props=V,this.context=Q,this.refs=B,this.updater=ge||M}var X=W.prototype=new ee;X.constructor=W,j(X,D.prototype),X.isPureReactComponent=!0;var ne=Array.isArray,me=Object.prototype.hasOwnProperty,fe={current:null},k={key:!0,ref:!0,__self:!0,__source:!0};function I(V,Q,ge){var ke,Pe={},Le=null,Be=null;if(Q!=null)for(ke in Q.ref!==void 0&&(Be=Q.ref),Q.key!==void 0&&(Le=""+Q.key),Q)me.call(Q,ke)&&!k.hasOwnProperty(ke)&&(Pe[ke]=Q[ke]);var $e=arguments.length-2;if($e===1)Pe.children=ge;else if(1<$e){for(var Ke=Array($e),It=0;It<$e;It++)Ke[It]=arguments[It+2];Pe.children=Ke}if(V&&V.defaultProps)for(ke in $e=V.defaultProps,$e)Pe[ke]===void 0&&(Pe[ke]=$e[ke]);return{$$typeof:n,type:V,key:Le,ref:Be,props:Pe,_owner:fe.current}}function R(V,Q){return{$$typeof:n,type:V.type,key:Q,ref:V.ref,props:V.props,_owner:V._owner}}function x(V){return typeof V=="object"&&V!==null&&V.$$typeof===n}function b(V){var Q={"=":"=0",":":"=2"};return"$"+V.replace(/[=:]/g,function(ge){return Q[ge]})}var O=/\/+/g;function C(V,Q){return typeof V=="object"&&V!==null&&V.key!=null?b(""+V.key):Q.toString(36)}function nt(V,Q,ge,ke,Pe){var Le=typeof V;(Le==="undefined"||Le==="boolean")&&(V=null);var Be=!1;if(V===null)Be=!0;else switch(Le){case"string":case"number":Be=!0;break;case"object":switch(V.$$typeof){case n:case e:Be=!0}}if(Be)return Be=V,Pe=Pe(Be),V=ke===""?"."+C(Be,0):ke,ne(Pe)?(ge="",V!=null&&(ge=V.replace(O,"$&/")+"/"),nt(Pe,Q,ge,"",function(It){return It})):Pe!=null&&(x(Pe)&&(Pe=R(Pe,ge+(!Pe.key||Be&&Be.key===Pe.key?"":(""+Pe.key).replace(O,"$&/")+"/")+V)),Q.push(Pe)),1;if(Be=0,ke=ke===""?".":ke+":",ne(V))for(var $e=0;$e<V.length;$e++){Le=V[$e];var Ke=ke+C(Le,$e);Be+=nt(Le,Q,ge,Ke,Pe)}else if(Ke=S(V),typeof Ke=="function")for(V=Ke.call(V),$e=0;!(Le=V.next()).done;)Le=Le.value,Ke=ke+C(Le,$e++),Be+=nt(Le,Q,ge,Ke,Pe);else if(Le==="object")throw Q=String(V),Error("Objects are not valid as a React child (found: "+(Q==="[object Object]"?"object with keys {"+Object.keys(V).join(", ")+"}":Q)+"). If you meant to render a collection of children, use an array instead.");return Be}function pt(V,Q,ge){if(V==null)return V;var ke=[],Pe=0;return nt(V,ke,"","",function(Le){return Q.call(ge,Le,Pe++)}),ke}function mt(V){if(V._status===-1){var Q=V._result;Q=Q(),Q.then(function(ge){(V._status===0||V._status===-1)&&(V._status=1,V._result=ge)},function(ge){(V._status===0||V._status===-1)&&(V._status=2,V._result=ge)}),V._status===-1&&(V._status=0,V._result=Q)}if(V._status===1)return V._result.default;throw V._result}var je={current:null},re={transition:null},_e={ReactCurrentDispatcher:je,ReactCurrentBatchConfig:re,ReactCurrentOwner:fe};function oe(){throw Error("act(...) is not supported in production builds of React.")}return xe.Children={map:pt,forEach:function(V,Q,ge){pt(V,function(){Q.apply(this,arguments)},ge)},count:function(V){var Q=0;return pt(V,function(){Q++}),Q},toArray:function(V){return pt(V,function(Q){return Q})||[]},only:function(V){if(!x(V))throw Error("React.Children.only expected to receive a single React element child.");return V}},xe.Component=D,xe.Fragment=t,xe.Profiler=o,xe.PureComponent=W,xe.StrictMode=i,xe.Suspense=m,xe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=_e,xe.act=oe,xe.cloneElement=function(V,Q,ge){if(V==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+V+".");var ke=j({},V.props),Pe=V.key,Le=V.ref,Be=V._owner;if(Q!=null){if(Q.ref!==void 0&&(Le=Q.ref,Be=fe.current),Q.key!==void 0&&(Pe=""+Q.key),V.type&&V.type.defaultProps)var $e=V.type.defaultProps;for(Ke in Q)me.call(Q,Ke)&&!k.hasOwnProperty(Ke)&&(ke[Ke]=Q[Ke]===void 0&&$e!==void 0?$e[Ke]:Q[Ke])}var Ke=arguments.length-2;if(Ke===1)ke.children=ge;else if(1<Ke){$e=Array(Ke);for(var It=0;It<Ke;It++)$e[It]=arguments[It+2];ke.children=$e}return{$$typeof:n,type:V.type,key:Pe,ref:Le,props:ke,_owner:Be}},xe.createContext=function(V){return V={$$typeof:c,_currentValue:V,_currentValue2:V,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},V.Provider={$$typeof:l,_context:V},V.Consumer=V},xe.createElement=I,xe.createFactory=function(V){var Q=I.bind(null,V);return Q.type=V,Q},xe.createRef=function(){return{current:null}},xe.forwardRef=function(V){return{$$typeof:f,render:V}},xe.isValidElement=x,xe.lazy=function(V){return{$$typeof:v,_payload:{_status:-1,_result:V},_init:mt}},xe.memo=function(V,Q){return{$$typeof:y,type:V,compare:Q===void 0?null:Q}},xe.startTransition=function(V){var Q=re.transition;re.transition={};try{V()}finally{re.transition=Q}},xe.unstable_act=oe,xe.useCallback=function(V,Q){return je.current.useCallback(V,Q)},xe.useContext=function(V){return je.current.useContext(V)},xe.useDebugValue=function(){},xe.useDeferredValue=function(V){return je.current.useDeferredValue(V)},xe.useEffect=function(V,Q){return je.current.useEffect(V,Q)},xe.useId=function(){return je.current.useId()},xe.useImperativeHandle=function(V,Q,ge){return je.current.useImperativeHandle(V,Q,ge)},xe.useInsertionEffect=function(V,Q){return je.current.useInsertionEffect(V,Q)},xe.useLayoutEffect=function(V,Q){return je.current.useLayoutEffect(V,Q)},xe.useMemo=function(V,Q){return je.current.useMemo(V,Q)},xe.useReducer=function(V,Q,ge){return je.current.useReducer(V,Q,ge)},xe.useRef=function(V){return je.current.useRef(V)},xe.useState=function(V){return je.current.useState(V)},xe.useSyncExternalStore=function(V,Q,ge){return je.current.useSyncExternalStore(V,Q,ge)},xe.useTransition=function(){return je.current.useTransition()},xe.version="18.3.1",xe}var Og;function kf(){return Og||(Og=1,Rd.exports=AE()),Rd.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lg;function RE(){if(Lg)return Oa;Lg=1;var n=kf(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,o=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(f,m,y){var v,E={},S=null,M=null;y!==void 0&&(S=""+y),m.key!==void 0&&(S=""+m.key),m.ref!==void 0&&(M=m.ref);for(v in m)i.call(m,v)&&!l.hasOwnProperty(v)&&(E[v]=m[v]);if(f&&f.defaultProps)for(v in m=f.defaultProps,m)E[v]===void 0&&(E[v]=m[v]);return{$$typeof:e,type:f,key:S,ref:M,props:E,_owner:o.current}}return Oa.Fragment=t,Oa.jsx=c,Oa.jsxs=c,Oa}var Vg;function CE(){return Vg||(Vg=1,Ad.exports=RE()),Ad.exports}var L=CE(),he=kf();const Ue=E_(he);var Ou={},Cd={exports:{}},sn={},kd={exports:{}},Pd={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mg;function kE(){return Mg||(Mg=1,function(n){function e(re,_e){var oe=re.length;re.push(_e);e:for(;0<oe;){var V=oe-1>>>1,Q=re[V];if(0<o(Q,_e))re[V]=_e,re[oe]=Q,oe=V;else break e}}function t(re){return re.length===0?null:re[0]}function i(re){if(re.length===0)return null;var _e=re[0],oe=re.pop();if(oe!==_e){re[0]=oe;e:for(var V=0,Q=re.length,ge=Q>>>1;V<ge;){var ke=2*(V+1)-1,Pe=re[ke],Le=ke+1,Be=re[Le];if(0>o(Pe,oe))Le<Q&&0>o(Be,Pe)?(re[V]=Be,re[Le]=oe,V=Le):(re[V]=Pe,re[ke]=oe,V=ke);else if(Le<Q&&0>o(Be,oe))re[V]=Be,re[Le]=oe,V=Le;else break e}}return _e}function o(re,_e){var oe=re.sortIndex-_e.sortIndex;return oe!==0?oe:re.id-_e.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var c=Date,f=c.now();n.unstable_now=function(){return c.now()-f}}var m=[],y=[],v=1,E=null,S=3,M=!1,j=!1,B=!1,D=typeof setTimeout=="function"?setTimeout:null,ee=typeof clearTimeout=="function"?clearTimeout:null,W=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function X(re){for(var _e=t(y);_e!==null;){if(_e.callback===null)i(y);else if(_e.startTime<=re)i(y),_e.sortIndex=_e.expirationTime,e(m,_e);else break;_e=t(y)}}function ne(re){if(B=!1,X(re),!j)if(t(m)!==null)j=!0,mt(me);else{var _e=t(y);_e!==null&&je(ne,_e.startTime-re)}}function me(re,_e){j=!1,B&&(B=!1,ee(I),I=-1),M=!0;var oe=S;try{for(X(_e),E=t(m);E!==null&&(!(E.expirationTime>_e)||re&&!b());){var V=E.callback;if(typeof V=="function"){E.callback=null,S=E.priorityLevel;var Q=V(E.expirationTime<=_e);_e=n.unstable_now(),typeof Q=="function"?E.callback=Q:E===t(m)&&i(m),X(_e)}else i(m);E=t(m)}if(E!==null)var ge=!0;else{var ke=t(y);ke!==null&&je(ne,ke.startTime-_e),ge=!1}return ge}finally{E=null,S=oe,M=!1}}var fe=!1,k=null,I=-1,R=5,x=-1;function b(){return!(n.unstable_now()-x<R)}function O(){if(k!==null){var re=n.unstable_now();x=re;var _e=!0;try{_e=k(!0,re)}finally{_e?C():(fe=!1,k=null)}}else fe=!1}var C;if(typeof W=="function")C=function(){W(O)};else if(typeof MessageChannel<"u"){var nt=new MessageChannel,pt=nt.port2;nt.port1.onmessage=O,C=function(){pt.postMessage(null)}}else C=function(){D(O,0)};function mt(re){k=re,fe||(fe=!0,C())}function je(re,_e){I=D(function(){re(n.unstable_now())},_e)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(re){re.callback=null},n.unstable_continueExecution=function(){j||M||(j=!0,mt(me))},n.unstable_forceFrameRate=function(re){0>re||125<re?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<re?Math.floor(1e3/re):5},n.unstable_getCurrentPriorityLevel=function(){return S},n.unstable_getFirstCallbackNode=function(){return t(m)},n.unstable_next=function(re){switch(S){case 1:case 2:case 3:var _e=3;break;default:_e=S}var oe=S;S=_e;try{return re()}finally{S=oe}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(re,_e){switch(re){case 1:case 2:case 3:case 4:case 5:break;default:re=3}var oe=S;S=re;try{return _e()}finally{S=oe}},n.unstable_scheduleCallback=function(re,_e,oe){var V=n.unstable_now();switch(typeof oe=="object"&&oe!==null?(oe=oe.delay,oe=typeof oe=="number"&&0<oe?V+oe:V):oe=V,re){case 1:var Q=-1;break;case 2:Q=250;break;case 5:Q=1073741823;break;case 4:Q=1e4;break;default:Q=5e3}return Q=oe+Q,re={id:v++,callback:_e,priorityLevel:re,startTime:oe,expirationTime:Q,sortIndex:-1},oe>V?(re.sortIndex=oe,e(y,re),t(m)===null&&re===t(y)&&(B?(ee(I),I=-1):B=!0,je(ne,oe-V))):(re.sortIndex=Q,e(m,re),j||M||(j=!0,mt(me))),re},n.unstable_shouldYield=b,n.unstable_wrapCallback=function(re){var _e=S;return function(){var oe=S;S=_e;try{return re.apply(this,arguments)}finally{S=oe}}}}(Pd)),Pd}var Fg;function PE(){return Fg||(Fg=1,kd.exports=kE()),kd.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ug;function xE(){if(Ug)return sn;Ug=1;var n=kf(),e=PE();function t(r){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+r,a=1;a<arguments.length;a++)s+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+r+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,o={};function l(r,s){c(r,s),c(r+"Capture",s)}function c(r,s){for(o[r]=s,r=0;r<s.length;r++)i.add(s[r])}var f=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),m=Object.prototype.hasOwnProperty,y=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,v={},E={};function S(r){return m.call(E,r)?!0:m.call(v,r)?!1:y.test(r)?E[r]=!0:(v[r]=!0,!1)}function M(r,s,a,h){if(a!==null&&a.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return h?!1:a!==null?!a.acceptsBooleans:(r=r.toLowerCase().slice(0,5),r!=="data-"&&r!=="aria-");default:return!1}}function j(r,s,a,h){if(s===null||typeof s>"u"||M(r,s,a,h))return!0;if(h)return!1;if(a!==null)switch(a.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function B(r,s,a,h,d,g,w){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=h,this.attributeNamespace=d,this.mustUseProperty=a,this.propertyName=r,this.type=s,this.sanitizeURL=g,this.removeEmptyString=w}var D={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(r){D[r]=new B(r,0,!1,r,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(r){var s=r[0];D[s]=new B(s,1,!1,r[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(r){D[r]=new B(r,2,!1,r.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(r){D[r]=new B(r,2,!1,r,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(r){D[r]=new B(r,3,!1,r.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(r){D[r]=new B(r,3,!0,r,null,!1,!1)}),["capture","download"].forEach(function(r){D[r]=new B(r,4,!1,r,null,!1,!1)}),["cols","rows","size","span"].forEach(function(r){D[r]=new B(r,6,!1,r,null,!1,!1)}),["rowSpan","start"].forEach(function(r){D[r]=new B(r,5,!1,r.toLowerCase(),null,!1,!1)});var ee=/[\-:]([a-z])/g;function W(r){return r[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(r){var s=r.replace(ee,W);D[s]=new B(s,1,!1,r,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(r){var s=r.replace(ee,W);D[s]=new B(s,1,!1,r,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(r){var s=r.replace(ee,W);D[s]=new B(s,1,!1,r,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(r){D[r]=new B(r,1,!1,r.toLowerCase(),null,!1,!1)}),D.xlinkHref=new B("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(r){D[r]=new B(r,1,!1,r.toLowerCase(),null,!0,!0)});function X(r,s,a,h){var d=D.hasOwnProperty(s)?D[s]:null;(d!==null?d.type!==0:h||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(j(s,a,d,h)&&(a=null),h||d===null?S(s)&&(a===null?r.removeAttribute(s):r.setAttribute(s,""+a)):d.mustUseProperty?r[d.propertyName]=a===null?d.type===3?!1:"":a:(s=d.attributeName,h=d.attributeNamespace,a===null?r.removeAttribute(s):(d=d.type,a=d===3||d===4&&a===!0?"":""+a,h?r.setAttributeNS(h,s,a):r.setAttribute(s,a))))}var ne=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,me=Symbol.for("react.element"),fe=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),R=Symbol.for("react.profiler"),x=Symbol.for("react.provider"),b=Symbol.for("react.context"),O=Symbol.for("react.forward_ref"),C=Symbol.for("react.suspense"),nt=Symbol.for("react.suspense_list"),pt=Symbol.for("react.memo"),mt=Symbol.for("react.lazy"),je=Symbol.for("react.offscreen"),re=Symbol.iterator;function _e(r){return r===null||typeof r!="object"?null:(r=re&&r[re]||r["@@iterator"],typeof r=="function"?r:null)}var oe=Object.assign,V;function Q(r){if(V===void 0)try{throw Error()}catch(a){var s=a.stack.trim().match(/\n( *(at )?)/);V=s&&s[1]||""}return`
`+V+r}var ge=!1;function ke(r,s){if(!r||ge)return"";ge=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch($){var h=$}Reflect.construct(r,[],s)}else{try{s.call()}catch($){h=$}r.call(s.prototype)}else{try{throw Error()}catch($){h=$}r()}}catch($){if($&&h&&typeof $.stack=="string"){for(var d=$.stack.split(`
`),g=h.stack.split(`
`),w=d.length-1,A=g.length-1;1<=w&&0<=A&&d[w]!==g[A];)A--;for(;1<=w&&0<=A;w--,A--)if(d[w]!==g[A]){if(w!==1||A!==1)do if(w--,A--,0>A||d[w]!==g[A]){var P=`
`+d[w].replace(" at new "," at ");return r.displayName&&P.includes("<anonymous>")&&(P=P.replace("<anonymous>",r.displayName)),P}while(1<=w&&0<=A);break}}}finally{ge=!1,Error.prepareStackTrace=a}return(r=r?r.displayName||r.name:"")?Q(r):""}function Pe(r){switch(r.tag){case 5:return Q(r.type);case 16:return Q("Lazy");case 13:return Q("Suspense");case 19:return Q("SuspenseList");case 0:case 2:case 15:return r=ke(r.type,!1),r;case 11:return r=ke(r.type.render,!1),r;case 1:return r=ke(r.type,!0),r;default:return""}}function Le(r){if(r==null)return null;if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case k:return"Fragment";case fe:return"Portal";case R:return"Profiler";case I:return"StrictMode";case C:return"Suspense";case nt:return"SuspenseList"}if(typeof r=="object")switch(r.$$typeof){case b:return(r.displayName||"Context")+".Consumer";case x:return(r._context.displayName||"Context")+".Provider";case O:var s=r.render;return r=r.displayName,r||(r=s.displayName||s.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case pt:return s=r.displayName||null,s!==null?s:Le(r.type)||"Memo";case mt:s=r._payload,r=r._init;try{return Le(r(s))}catch{}}return null}function Be(r){var s=r.type;switch(r.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return r=s.render,r=r.displayName||r.name||"",s.displayName||(r!==""?"ForwardRef("+r+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Le(s);case 8:return s===I?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function $e(r){switch(typeof r){case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function Ke(r){var s=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function It(r){var s=Ke(r)?"checked":"value",a=Object.getOwnPropertyDescriptor(r.constructor.prototype,s),h=""+r[s];if(!r.hasOwnProperty(s)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var d=a.get,g=a.set;return Object.defineProperty(r,s,{configurable:!0,get:function(){return d.call(this)},set:function(w){h=""+w,g.call(this,w)}}),Object.defineProperty(r,s,{enumerable:a.enumerable}),{getValue:function(){return h},setValue:function(w){h=""+w},stopTracking:function(){r._valueTracker=null,delete r[s]}}}}function dr(r){r._valueTracker||(r._valueTracker=It(r))}function Es(r){if(!r)return!1;var s=r._valueTracker;if(!s)return!0;var a=s.getValue(),h="";return r&&(h=Ke(r)?r.checked?"true":"false":r.value),r=h,r!==a?(s.setValue(r),!0):!1}function qr(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}function bi(r,s){var a=s.checked;return oe({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??r._wrapperState.initialChecked})}function Ts(r,s){var a=s.defaultValue==null?"":s.defaultValue,h=s.checked!=null?s.checked:s.defaultChecked;a=$e(s.value!=null?s.value:a),r._wrapperState={initialChecked:h,initialValue:a,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function jo(r,s){s=s.checked,s!=null&&X(r,"checked",s,!1)}function zo(r,s){jo(r,s);var a=$e(s.value),h=s.type;if(a!=null)h==="number"?(a===0&&r.value===""||r.value!=a)&&(r.value=""+a):r.value!==""+a&&(r.value=""+a);else if(h==="submit"||h==="reset"){r.removeAttribute("value");return}s.hasOwnProperty("value")?Is(r,s.type,a):s.hasOwnProperty("defaultValue")&&Is(r,s.type,$e(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(r.defaultChecked=!!s.defaultChecked)}function vl(r,s,a){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var h=s.type;if(!(h!=="submit"&&h!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+r._wrapperState.initialValue,a||s===r.value||(r.value=s),r.defaultValue=s}a=r.name,a!==""&&(r.name=""),r.defaultChecked=!!r._wrapperState.initialChecked,a!==""&&(r.name=a)}function Is(r,s,a){(s!=="number"||qr(r.ownerDocument)!==r)&&(a==null?r.defaultValue=""+r._wrapperState.initialValue:r.defaultValue!==""+a&&(r.defaultValue=""+a))}var fr=Array.isArray;function pr(r,s,a,h){if(r=r.options,s){s={};for(var d=0;d<a.length;d++)s["$"+a[d]]=!0;for(a=0;a<r.length;a++)d=s.hasOwnProperty("$"+r[a].value),r[a].selected!==d&&(r[a].selected=d),d&&h&&(r[a].defaultSelected=!0)}else{for(a=""+$e(a),s=null,d=0;d<r.length;d++){if(r[d].value===a){r[d].selected=!0,h&&(r[d].defaultSelected=!0);return}s!==null||r[d].disabled||(s=r[d])}s!==null&&(s.selected=!0)}}function Bo(r,s){if(s.dangerouslySetInnerHTML!=null)throw Error(t(91));return oe({},s,{value:void 0,defaultValue:void 0,children:""+r._wrapperState.initialValue})}function Ss(r,s){var a=s.value;if(a==null){if(a=s.children,s=s.defaultValue,a!=null){if(s!=null)throw Error(t(92));if(fr(a)){if(1<a.length)throw Error(t(93));a=a[0]}s=a}s==null&&(s=""),a=s}r._wrapperState={initialValue:$e(a)}}function As(r,s){var a=$e(s.value),h=$e(s.defaultValue);a!=null&&(a=""+a,a!==r.value&&(r.value=a),s.defaultValue==null&&r.defaultValue!==a&&(r.defaultValue=a)),h!=null&&(r.defaultValue=""+h)}function $o(r){var s=r.textContent;s===r._wrapperState.initialValue&&s!==""&&s!==null&&(r.value=s)}function gt(r){switch(r){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function yt(r,s){return r==null||r==="http://www.w3.org/1999/xhtml"?gt(s):r==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":r}var mr,qo=function(r){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,a,h,d){MSApp.execUnsafeLocalFunction(function(){return r(s,a,h,d)})}:r}(function(r,s){if(r.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in r)r.innerHTML=s;else{for(mr=mr||document.createElement("div"),mr.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=mr.firstChild;r.firstChild;)r.removeChild(r.firstChild);for(;s.firstChild;)r.appendChild(s.firstChild)}});function Hr(r,s){if(s){var a=r.firstChild;if(a&&a===r.lastChild&&a.nodeType===3){a.nodeValue=s;return}}r.textContent=s}var Di={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Oi=["Webkit","ms","Moz","O"];Object.keys(Di).forEach(function(r){Oi.forEach(function(s){s=s+r.charAt(0).toUpperCase()+r.substring(1),Di[s]=Di[r]})});function Ho(r,s,a){return s==null||typeof s=="boolean"||s===""?"":a||typeof s!="number"||s===0||Di.hasOwnProperty(r)&&Di[r]?(""+s).trim():s+"px"}function Wo(r,s){r=r.style;for(var a in s)if(s.hasOwnProperty(a)){var h=a.indexOf("--")===0,d=Ho(a,s[a],h);a==="float"&&(a="cssFloat"),h?r.setProperty(a,d):r[a]=d}}var Ko=oe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Go(r,s){if(s){if(Ko[r]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(t(137,r));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(t(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(t(61))}if(s.style!=null&&typeof s.style!="object")throw Error(t(62))}}function Qo(r,s){if(r.indexOf("-")===-1)return typeof s.is=="string";switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Li=null;function Rs(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var Cs=null,vn=null,Gn=null;function ks(r){if(r=va(r)){if(typeof Cs!="function")throw Error(t(280));var s=r.stateNode;s&&(s=Ql(s),Cs(r.stateNode,r.type,s))}}function Qn(r){vn?Gn?Gn.push(r):Gn=[r]:vn=r}function Xo(){if(vn){var r=vn,s=Gn;if(Gn=vn=null,ks(r),s)for(r=0;r<s.length;r++)ks(s[r])}}function Vi(r,s){return r(s)}function Yo(){}var gr=!1;function Jo(r,s,a){if(gr)return r(s,a);gr=!0;try{return Vi(r,s,a)}finally{gr=!1,(vn!==null||Gn!==null)&&(Yo(),Xo())}}function at(r,s){var a=r.stateNode;if(a===null)return null;var h=Ql(a);if(h===null)return null;a=h[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(r=r.type,h=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!h;break e;default:r=!1}if(r)return null;if(a&&typeof a!="function")throw Error(t(231,s,typeof a));return a}var Ps=!1;if(f)try{var xn={};Object.defineProperty(xn,"passive",{get:function(){Ps=!0}}),window.addEventListener("test",xn,xn),window.removeEventListener("test",xn,xn)}catch{Ps=!1}function Mi(r,s,a,h,d,g,w,A,P){var $=Array.prototype.slice.call(arguments,3);try{s.apply(a,$)}catch(J){this.onError(J)}}var Fi=!1,xs=null,Nn=!1,Zo=null,Zc={onError:function(r){Fi=!0,xs=r}};function Ns(r,s,a,h,d,g,w,A,P){Fi=!1,xs=null,Mi.apply(Zc,arguments)}function wl(r,s,a,h,d,g,w,A,P){if(Ns.apply(this,arguments),Fi){if(Fi){var $=xs;Fi=!1,xs=null}else throw Error(t(198));Nn||(Nn=!0,Zo=$)}}function bn(r){var s=r,a=r;if(r.alternate)for(;s.return;)s=s.return;else{r=s;do s=r,s.flags&4098&&(a=s.return),r=s.return;while(r)}return s.tag===3?a:null}function Ui(r){if(r.tag===13){var s=r.memoizedState;if(s===null&&(r=r.alternate,r!==null&&(s=r.memoizedState)),s!==null)return s.dehydrated}return null}function Dn(r){if(bn(r)!==r)throw Error(t(188))}function El(r){var s=r.alternate;if(!s){if(s=bn(r),s===null)throw Error(t(188));return s!==r?null:r}for(var a=r,h=s;;){var d=a.return;if(d===null)break;var g=d.alternate;if(g===null){if(h=d.return,h!==null){a=h;continue}break}if(d.child===g.child){for(g=d.child;g;){if(g===a)return Dn(d),r;if(g===h)return Dn(d),s;g=g.sibling}throw Error(t(188))}if(a.return!==h.return)a=d,h=g;else{for(var w=!1,A=d.child;A;){if(A===a){w=!0,a=d,h=g;break}if(A===h){w=!0,h=d,a=g;break}A=A.sibling}if(!w){for(A=g.child;A;){if(A===a){w=!0,a=g,h=d;break}if(A===h){w=!0,h=g,a=d;break}A=A.sibling}if(!w)throw Error(t(189))}}if(a.alternate!==h)throw Error(t(190))}if(a.tag!==3)throw Error(t(188));return a.stateNode.current===a?r:s}function ea(r){return r=El(r),r!==null?bs(r):null}function bs(r){if(r.tag===5||r.tag===6)return r;for(r=r.child;r!==null;){var s=bs(r);if(s!==null)return s;r=r.sibling}return null}var Ds=e.unstable_scheduleCallback,ta=e.unstable_cancelCallback,Tl=e.unstable_shouldYield,eh=e.unstable_requestPaint,Ge=e.unstable_now,Il=e.unstable_getCurrentPriorityLevel,ji=e.unstable_ImmediatePriority,Wr=e.unstable_UserBlockingPriority,wn=e.unstable_NormalPriority,na=e.unstable_LowPriority,Sl=e.unstable_IdlePriority,zi=null,cn=null;function Al(r){if(cn&&typeof cn.onCommitFiberRoot=="function")try{cn.onCommitFiberRoot(zi,r,void 0,(r.current.flags&128)===128)}catch{}}var Wt=Math.clz32?Math.clz32:Cl,ra=Math.log,Rl=Math.LN2;function Cl(r){return r>>>=0,r===0?32:31-(ra(r)/Rl|0)|0}var Os=64,Ls=4194304;function Kr(r){switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return r&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return r}}function Bi(r,s){var a=r.pendingLanes;if(a===0)return 0;var h=0,d=r.suspendedLanes,g=r.pingedLanes,w=a&268435455;if(w!==0){var A=w&~d;A!==0?h=Kr(A):(g&=w,g!==0&&(h=Kr(g)))}else w=a&~d,w!==0?h=Kr(w):g!==0&&(h=Kr(g));if(h===0)return 0;if(s!==0&&s!==h&&!(s&d)&&(d=h&-h,g=s&-s,d>=g||d===16&&(g&4194240)!==0))return s;if(h&4&&(h|=a&16),s=r.entangledLanes,s!==0)for(r=r.entanglements,s&=h;0<s;)a=31-Wt(s),d=1<<a,h|=r[a],s&=~d;return h}function th(r,s){switch(r){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function yr(r,s){for(var a=r.suspendedLanes,h=r.pingedLanes,d=r.expirationTimes,g=r.pendingLanes;0<g;){var w=31-Wt(g),A=1<<w,P=d[w];P===-1?(!(A&a)||A&h)&&(d[w]=th(A,s)):P<=s&&(r.expiredLanes|=A),g&=~A}}function hn(r){return r=r.pendingLanes&-1073741825,r!==0?r:r&1073741824?1073741824:0}function $i(){var r=Os;return Os<<=1,!(Os&4194240)&&(Os=64),r}function Gr(r){for(var s=[],a=0;31>a;a++)s.push(r);return s}function Qr(r,s,a){r.pendingLanes|=s,s!==536870912&&(r.suspendedLanes=0,r.pingedLanes=0),r=r.eventTimes,s=31-Wt(s),r[s]=a}function We(r,s){var a=r.pendingLanes&~s;r.pendingLanes=s,r.suspendedLanes=0,r.pingedLanes=0,r.expiredLanes&=s,r.mutableReadLanes&=s,r.entangledLanes&=s,s=r.entanglements;var h=r.eventTimes;for(r=r.expirationTimes;0<a;){var d=31-Wt(a),g=1<<d;s[d]=0,h[d]=-1,r[d]=-1,a&=~g}}function Xr(r,s){var a=r.entangledLanes|=s;for(r=r.entanglements;a;){var h=31-Wt(a),d=1<<h;d&s|r[h]&s&&(r[h]|=s),a&=~d}}var De=0;function Yr(r){return r&=-r,1<r?4<r?r&268435455?16:536870912:4:1}var kl,Vs,Pl,xl,Nl,ia=!1,Xn=[],xt=null,On=null,Ln=null,Jr=new Map,En=new Map,Yn=[],nh="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function bl(r,s){switch(r){case"focusin":case"focusout":xt=null;break;case"dragenter":case"dragleave":On=null;break;case"mouseover":case"mouseout":Ln=null;break;case"pointerover":case"pointerout":Jr.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":En.delete(s.pointerId)}}function Yt(r,s,a,h,d,g){return r===null||r.nativeEvent!==g?(r={blockedOn:s,domEventName:a,eventSystemFlags:h,nativeEvent:g,targetContainers:[d]},s!==null&&(s=va(s),s!==null&&Vs(s)),r):(r.eventSystemFlags|=h,s=r.targetContainers,d!==null&&s.indexOf(d)===-1&&s.push(d),r)}function rh(r,s,a,h,d){switch(s){case"focusin":return xt=Yt(xt,r,s,a,h,d),!0;case"dragenter":return On=Yt(On,r,s,a,h,d),!0;case"mouseover":return Ln=Yt(Ln,r,s,a,h,d),!0;case"pointerover":var g=d.pointerId;return Jr.set(g,Yt(Jr.get(g)||null,r,s,a,h,d)),!0;case"gotpointercapture":return g=d.pointerId,En.set(g,Yt(En.get(g)||null,r,s,a,h,d)),!0}return!1}function Dl(r){var s=Gi(r.target);if(s!==null){var a=bn(s);if(a!==null){if(s=a.tag,s===13){if(s=Ui(a),s!==null){r.blockedOn=s,Nl(r.priority,function(){Pl(a)});return}}else if(s===3&&a.stateNode.current.memoizedState.isDehydrated){r.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}r.blockedOn=null}function _r(r){if(r.blockedOn!==null)return!1;for(var s=r.targetContainers;0<s.length;){var a=Ms(r.domEventName,r.eventSystemFlags,s[0],r.nativeEvent);if(a===null){a=r.nativeEvent;var h=new a.constructor(a.type,a);Li=h,a.target.dispatchEvent(h),Li=null}else return s=va(a),s!==null&&Vs(s),r.blockedOn=a,!1;s.shift()}return!0}function qi(r,s,a){_r(r)&&a.delete(s)}function Ol(){ia=!1,xt!==null&&_r(xt)&&(xt=null),On!==null&&_r(On)&&(On=null),Ln!==null&&_r(Ln)&&(Ln=null),Jr.forEach(qi),En.forEach(qi)}function Vn(r,s){r.blockedOn===s&&(r.blockedOn=null,ia||(ia=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Ol)))}function Mn(r){function s(d){return Vn(d,r)}if(0<Xn.length){Vn(Xn[0],r);for(var a=1;a<Xn.length;a++){var h=Xn[a];h.blockedOn===r&&(h.blockedOn=null)}}for(xt!==null&&Vn(xt,r),On!==null&&Vn(On,r),Ln!==null&&Vn(Ln,r),Jr.forEach(s),En.forEach(s),a=0;a<Yn.length;a++)h=Yn[a],h.blockedOn===r&&(h.blockedOn=null);for(;0<Yn.length&&(a=Yn[0],a.blockedOn===null);)Dl(a),a.blockedOn===null&&Yn.shift()}var vr=ne.ReactCurrentBatchConfig,Zr=!0;function et(r,s,a,h){var d=De,g=vr.transition;vr.transition=null;try{De=1,sa(r,s,a,h)}finally{De=d,vr.transition=g}}function ih(r,s,a,h){var d=De,g=vr.transition;vr.transition=null;try{De=4,sa(r,s,a,h)}finally{De=d,vr.transition=g}}function sa(r,s,a,h){if(Zr){var d=Ms(r,s,a,h);if(d===null)mh(r,s,h,Hi,a),bl(r,h);else if(rh(d,r,s,a,h))h.stopPropagation();else if(bl(r,h),s&4&&-1<nh.indexOf(r)){for(;d!==null;){var g=va(d);if(g!==null&&kl(g),g=Ms(r,s,a,h),g===null&&mh(r,s,h,Hi,a),g===d)break;d=g}d!==null&&h.stopPropagation()}else mh(r,s,h,null,a)}}var Hi=null;function Ms(r,s,a,h){if(Hi=null,r=Rs(h),r=Gi(r),r!==null)if(s=bn(r),s===null)r=null;else if(a=s.tag,a===13){if(r=Ui(s),r!==null)return r;r=null}else if(a===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;r=null}else s!==r&&(r=null);return Hi=r,null}function oa(r){switch(r){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Il()){case ji:return 1;case Wr:return 4;case wn:case na:return 16;case Sl:return 536870912;default:return 16}default:return 16}}var dn=null,Fs=null,Jt=null;function aa(){if(Jt)return Jt;var r,s=Fs,a=s.length,h,d="value"in dn?dn.value:dn.textContent,g=d.length;for(r=0;r<a&&s[r]===d[r];r++);var w=a-r;for(h=1;h<=w&&s[a-h]===d[g-h];h++);return Jt=d.slice(r,1<h?1-h:void 0)}function Us(r){var s=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&s===13&&(r=13)):r=s,r===10&&(r=13),32<=r||r===13?r:0}function Jn(){return!0}function la(){return!1}function Nt(r){function s(a,h,d,g,w){this._reactName=a,this._targetInst=d,this.type=h,this.nativeEvent=g,this.target=w,this.currentTarget=null;for(var A in r)r.hasOwnProperty(A)&&(a=r[A],this[A]=a?a(g):g[A]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?Jn:la,this.isPropagationStopped=la,this}return oe(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Jn)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Jn)},persist:function(){},isPersistent:Jn}),s}var Fn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},js=Nt(Fn),Zn=oe({},Fn,{view:0,detail:0}),sh=Nt(Zn),zs,wr,ei,Wi=oe({},Zn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:er,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==ei&&(ei&&r.type==="mousemove"?(zs=r.screenX-ei.screenX,wr=r.screenY-ei.screenY):wr=zs=0,ei=r),zs)},movementY:function(r){return"movementY"in r?r.movementY:wr}}),Bs=Nt(Wi),ua=oe({},Wi,{dataTransfer:0}),Ll=Nt(ua),$s=oe({},Zn,{relatedTarget:0}),qs=Nt($s),Vl=oe({},Fn,{animationName:0,elapsedTime:0,pseudoElement:0}),Er=Nt(Vl),Ml=oe({},Fn,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),Fl=Nt(Ml),Ul=oe({},Fn,{data:0}),ca=Nt(Ul),Hs={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Kt={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},jl={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function zl(r){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(r):(r=jl[r])?!!s[r]:!1}function er(){return zl}var u=oe({},Zn,{key:function(r){if(r.key){var s=Hs[r.key]||r.key;if(s!=="Unidentified")return s}return r.type==="keypress"?(r=Us(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?Kt[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:er,charCode:function(r){return r.type==="keypress"?Us(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?Us(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),p=Nt(u),_=oe({},Wi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),T=Nt(_),F=oe({},Zn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:er}),q=Nt(F),ie=oe({},Fn,{propertyName:0,elapsedTime:0,pseudoElement:0}),He=Nt(ie),_t=oe({},Wi,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),Ve=Nt(_t),St=[9,13,27,32],ct=f&&"CompositionEvent"in window,Tn=null;f&&"documentMode"in document&&(Tn=document.documentMode);var fn=f&&"TextEvent"in window&&!Tn,Ki=f&&(!ct||Tn&&8<Tn&&11>=Tn),Ws=" ",Cp=!1;function kp(r,s){switch(r){case"keyup":return St.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Pp(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var Ks=!1;function Tw(r,s){switch(r){case"compositionend":return Pp(s);case"keypress":return s.which!==32?null:(Cp=!0,Ws);case"textInput":return r=s.data,r===Ws&&Cp?null:r;default:return null}}function Iw(r,s){if(Ks)return r==="compositionend"||!ct&&kp(r,s)?(r=aa(),Jt=Fs=dn=null,Ks=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Ki&&s.locale!=="ko"?null:s.data;default:return null}}var Sw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function xp(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s==="input"?!!Sw[r.type]:s==="textarea"}function Np(r,s,a,h){Qn(h),s=Wl(s,"onChange"),0<s.length&&(a=new js("onChange","change",null,a,h),r.push({event:a,listeners:s}))}var ha=null,da=null;function Aw(r){Qp(r,0)}function Bl(r){var s=Js(r);if(Es(s))return r}function Rw(r,s){if(r==="change")return s}var bp=!1;if(f){var oh;if(f){var ah="oninput"in document;if(!ah){var Dp=document.createElement("div");Dp.setAttribute("oninput","return;"),ah=typeof Dp.oninput=="function"}oh=ah}else oh=!1;bp=oh&&(!document.documentMode||9<document.documentMode)}function Op(){ha&&(ha.detachEvent("onpropertychange",Lp),da=ha=null)}function Lp(r){if(r.propertyName==="value"&&Bl(da)){var s=[];Np(s,da,r,Rs(r)),Jo(Aw,s)}}function Cw(r,s,a){r==="focusin"?(Op(),ha=s,da=a,ha.attachEvent("onpropertychange",Lp)):r==="focusout"&&Op()}function kw(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return Bl(da)}function Pw(r,s){if(r==="click")return Bl(s)}function xw(r,s){if(r==="input"||r==="change")return Bl(s)}function Nw(r,s){return r===s&&(r!==0||1/r===1/s)||r!==r&&s!==s}var Un=typeof Object.is=="function"?Object.is:Nw;function fa(r,s){if(Un(r,s))return!0;if(typeof r!="object"||r===null||typeof s!="object"||s===null)return!1;var a=Object.keys(r),h=Object.keys(s);if(a.length!==h.length)return!1;for(h=0;h<a.length;h++){var d=a[h];if(!m.call(s,d)||!Un(r[d],s[d]))return!1}return!0}function Vp(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function Mp(r,s){var a=Vp(r);r=0;for(var h;a;){if(a.nodeType===3){if(h=r+a.textContent.length,r<=s&&h>=s)return{node:a,offset:s-r};r=h}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Vp(a)}}function Fp(r,s){return r&&s?r===s?!0:r&&r.nodeType===3?!1:s&&s.nodeType===3?Fp(r,s.parentNode):"contains"in r?r.contains(s):r.compareDocumentPosition?!!(r.compareDocumentPosition(s)&16):!1:!1}function Up(){for(var r=window,s=qr();s instanceof r.HTMLIFrameElement;){try{var a=typeof s.contentWindow.location.href=="string"}catch{a=!1}if(a)r=s.contentWindow;else break;s=qr(r.document)}return s}function lh(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s&&(s==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||s==="textarea"||r.contentEditable==="true")}function bw(r){var s=Up(),a=r.focusedElem,h=r.selectionRange;if(s!==a&&a&&a.ownerDocument&&Fp(a.ownerDocument.documentElement,a)){if(h!==null&&lh(a)){if(s=h.start,r=h.end,r===void 0&&(r=s),"selectionStart"in a)a.selectionStart=s,a.selectionEnd=Math.min(r,a.value.length);else if(r=(s=a.ownerDocument||document)&&s.defaultView||window,r.getSelection){r=r.getSelection();var d=a.textContent.length,g=Math.min(h.start,d);h=h.end===void 0?g:Math.min(h.end,d),!r.extend&&g>h&&(d=h,h=g,g=d),d=Mp(a,g);var w=Mp(a,h);d&&w&&(r.rangeCount!==1||r.anchorNode!==d.node||r.anchorOffset!==d.offset||r.focusNode!==w.node||r.focusOffset!==w.offset)&&(s=s.createRange(),s.setStart(d.node,d.offset),r.removeAllRanges(),g>h?(r.addRange(s),r.extend(w.node,w.offset)):(s.setEnd(w.node,w.offset),r.addRange(s)))}}for(s=[],r=a;r=r.parentNode;)r.nodeType===1&&s.push({element:r,left:r.scrollLeft,top:r.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<s.length;a++)r=s[a],r.element.scrollLeft=r.left,r.element.scrollTop=r.top}}var Dw=f&&"documentMode"in document&&11>=document.documentMode,Gs=null,uh=null,pa=null,ch=!1;function jp(r,s,a){var h=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;ch||Gs==null||Gs!==qr(h)||(h=Gs,"selectionStart"in h&&lh(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),pa&&fa(pa,h)||(pa=h,h=Wl(uh,"onSelect"),0<h.length&&(s=new js("onSelect","select",null,s,a),r.push({event:s,listeners:h}),s.target=Gs)))}function $l(r,s){var a={};return a[r.toLowerCase()]=s.toLowerCase(),a["Webkit"+r]="webkit"+s,a["Moz"+r]="moz"+s,a}var Qs={animationend:$l("Animation","AnimationEnd"),animationiteration:$l("Animation","AnimationIteration"),animationstart:$l("Animation","AnimationStart"),transitionend:$l("Transition","TransitionEnd")},hh={},zp={};f&&(zp=document.createElement("div").style,"AnimationEvent"in window||(delete Qs.animationend.animation,delete Qs.animationiteration.animation,delete Qs.animationstart.animation),"TransitionEvent"in window||delete Qs.transitionend.transition);function ql(r){if(hh[r])return hh[r];if(!Qs[r])return r;var s=Qs[r],a;for(a in s)if(s.hasOwnProperty(a)&&a in zp)return hh[r]=s[a];return r}var Bp=ql("animationend"),$p=ql("animationiteration"),qp=ql("animationstart"),Hp=ql("transitionend"),Wp=new Map,Kp="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ti(r,s){Wp.set(r,s),l(s,[r])}for(var dh=0;dh<Kp.length;dh++){var fh=Kp[dh],Ow=fh.toLowerCase(),Lw=fh[0].toUpperCase()+fh.slice(1);ti(Ow,"on"+Lw)}ti(Bp,"onAnimationEnd"),ti($p,"onAnimationIteration"),ti(qp,"onAnimationStart"),ti("dblclick","onDoubleClick"),ti("focusin","onFocus"),ti("focusout","onBlur"),ti(Hp,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ma="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Vw=new Set("cancel close invalid load scroll toggle".split(" ").concat(ma));function Gp(r,s,a){var h=r.type||"unknown-event";r.currentTarget=a,wl(h,s,void 0,r),r.currentTarget=null}function Qp(r,s){s=(s&4)!==0;for(var a=0;a<r.length;a++){var h=r[a],d=h.event;h=h.listeners;e:{var g=void 0;if(s)for(var w=h.length-1;0<=w;w--){var A=h[w],P=A.instance,$=A.currentTarget;if(A=A.listener,P!==g&&d.isPropagationStopped())break e;Gp(d,A,$),g=P}else for(w=0;w<h.length;w++){if(A=h[w],P=A.instance,$=A.currentTarget,A=A.listener,P!==g&&d.isPropagationStopped())break e;Gp(d,A,$),g=P}}}if(Nn)throw r=Zo,Nn=!1,Zo=null,r}function Ye(r,s){var a=s[Eh];a===void 0&&(a=s[Eh]=new Set);var h=r+"__bubble";a.has(h)||(Xp(s,r,2,!1),a.add(h))}function ph(r,s,a){var h=0;s&&(h|=4),Xp(a,r,h,s)}var Hl="_reactListening"+Math.random().toString(36).slice(2);function ga(r){if(!r[Hl]){r[Hl]=!0,i.forEach(function(a){a!=="selectionchange"&&(Vw.has(a)||ph(a,!1,r),ph(a,!0,r))});var s=r.nodeType===9?r:r.ownerDocument;s===null||s[Hl]||(s[Hl]=!0,ph("selectionchange",!1,s))}}function Xp(r,s,a,h){switch(oa(s)){case 1:var d=et;break;case 4:d=ih;break;default:d=sa}a=d.bind(null,s,a,r),d=void 0,!Ps||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(d=!0),h?d!==void 0?r.addEventListener(s,a,{capture:!0,passive:d}):r.addEventListener(s,a,!0):d!==void 0?r.addEventListener(s,a,{passive:d}):r.addEventListener(s,a,!1)}function mh(r,s,a,h,d){var g=h;if(!(s&1)&&!(s&2)&&h!==null)e:for(;;){if(h===null)return;var w=h.tag;if(w===3||w===4){var A=h.stateNode.containerInfo;if(A===d||A.nodeType===8&&A.parentNode===d)break;if(w===4)for(w=h.return;w!==null;){var P=w.tag;if((P===3||P===4)&&(P=w.stateNode.containerInfo,P===d||P.nodeType===8&&P.parentNode===d))return;w=w.return}for(;A!==null;){if(w=Gi(A),w===null)return;if(P=w.tag,P===5||P===6){h=g=w;continue e}A=A.parentNode}}h=h.return}Jo(function(){var $=g,J=Rs(a),Z=[];e:{var Y=Wp.get(r);if(Y!==void 0){var se=js,ce=r;switch(r){case"keypress":if(Us(a)===0)break e;case"keydown":case"keyup":se=p;break;case"focusin":ce="focus",se=qs;break;case"focusout":ce="blur",se=qs;break;case"beforeblur":case"afterblur":se=qs;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":se=Bs;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":se=Ll;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":se=q;break;case Bp:case $p:case qp:se=Er;break;case Hp:se=He;break;case"scroll":se=sh;break;case"wheel":se=Ve;break;case"copy":case"cut":case"paste":se=Fl;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":se=T}var de=(s&4)!==0,lt=!de&&r==="scroll",U=de?Y!==null?Y+"Capture":null:Y;de=[];for(var N=$,z;N!==null;){z=N;var te=z.stateNode;if(z.tag===5&&te!==null&&(z=te,U!==null&&(te=at(N,U),te!=null&&de.push(ya(N,te,z)))),lt)break;N=N.return}0<de.length&&(Y=new se(Y,ce,null,a,J),Z.push({event:Y,listeners:de}))}}if(!(s&7)){e:{if(Y=r==="mouseover"||r==="pointerover",se=r==="mouseout"||r==="pointerout",Y&&a!==Li&&(ce=a.relatedTarget||a.fromElement)&&(Gi(ce)||ce[Tr]))break e;if((se||Y)&&(Y=J.window===J?J:(Y=J.ownerDocument)?Y.defaultView||Y.parentWindow:window,se?(ce=a.relatedTarget||a.toElement,se=$,ce=ce?Gi(ce):null,ce!==null&&(lt=bn(ce),ce!==lt||ce.tag!==5&&ce.tag!==6)&&(ce=null)):(se=null,ce=$),se!==ce)){if(de=Bs,te="onMouseLeave",U="onMouseEnter",N="mouse",(r==="pointerout"||r==="pointerover")&&(de=T,te="onPointerLeave",U="onPointerEnter",N="pointer"),lt=se==null?Y:Js(se),z=ce==null?Y:Js(ce),Y=new de(te,N+"leave",se,a,J),Y.target=lt,Y.relatedTarget=z,te=null,Gi(J)===$&&(de=new de(U,N+"enter",ce,a,J),de.target=z,de.relatedTarget=lt,te=de),lt=te,se&&ce)t:{for(de=se,U=ce,N=0,z=de;z;z=Xs(z))N++;for(z=0,te=U;te;te=Xs(te))z++;for(;0<N-z;)de=Xs(de),N--;for(;0<z-N;)U=Xs(U),z--;for(;N--;){if(de===U||U!==null&&de===U.alternate)break t;de=Xs(de),U=Xs(U)}de=null}else de=null;se!==null&&Yp(Z,Y,se,de,!1),ce!==null&&lt!==null&&Yp(Z,lt,ce,de,!0)}}e:{if(Y=$?Js($):window,se=Y.nodeName&&Y.nodeName.toLowerCase(),se==="select"||se==="input"&&Y.type==="file")var pe=Rw;else if(xp(Y))if(bp)pe=xw;else{pe=kw;var ve=Cw}else(se=Y.nodeName)&&se.toLowerCase()==="input"&&(Y.type==="checkbox"||Y.type==="radio")&&(pe=Pw);if(pe&&(pe=pe(r,$))){Np(Z,pe,a,J);break e}ve&&ve(r,Y,$),r==="focusout"&&(ve=Y._wrapperState)&&ve.controlled&&Y.type==="number"&&Is(Y,"number",Y.value)}switch(ve=$?Js($):window,r){case"focusin":(xp(ve)||ve.contentEditable==="true")&&(Gs=ve,uh=$,pa=null);break;case"focusout":pa=uh=Gs=null;break;case"mousedown":ch=!0;break;case"contextmenu":case"mouseup":case"dragend":ch=!1,jp(Z,a,J);break;case"selectionchange":if(Dw)break;case"keydown":case"keyup":jp(Z,a,J)}var we;if(ct)e:{switch(r){case"compositionstart":var Ee="onCompositionStart";break e;case"compositionend":Ee="onCompositionEnd";break e;case"compositionupdate":Ee="onCompositionUpdate";break e}Ee=void 0}else Ks?kp(r,a)&&(Ee="onCompositionEnd"):r==="keydown"&&a.keyCode===229&&(Ee="onCompositionStart");Ee&&(Ki&&a.locale!=="ko"&&(Ks||Ee!=="onCompositionStart"?Ee==="onCompositionEnd"&&Ks&&(we=aa()):(dn=J,Fs="value"in dn?dn.value:dn.textContent,Ks=!0)),ve=Wl($,Ee),0<ve.length&&(Ee=new ca(Ee,r,null,a,J),Z.push({event:Ee,listeners:ve}),we?Ee.data=we:(we=Pp(a),we!==null&&(Ee.data=we)))),(we=fn?Tw(r,a):Iw(r,a))&&($=Wl($,"onBeforeInput"),0<$.length&&(J=new ca("onBeforeInput","beforeinput",null,a,J),Z.push({event:J,listeners:$}),J.data=we))}Qp(Z,s)})}function ya(r,s,a){return{instance:r,listener:s,currentTarget:a}}function Wl(r,s){for(var a=s+"Capture",h=[];r!==null;){var d=r,g=d.stateNode;d.tag===5&&g!==null&&(d=g,g=at(r,a),g!=null&&h.unshift(ya(r,g,d)),g=at(r,s),g!=null&&h.push(ya(r,g,d))),r=r.return}return h}function Xs(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5);return r||null}function Yp(r,s,a,h,d){for(var g=s._reactName,w=[];a!==null&&a!==h;){var A=a,P=A.alternate,$=A.stateNode;if(P!==null&&P===h)break;A.tag===5&&$!==null&&(A=$,d?(P=at(a,g),P!=null&&w.unshift(ya(a,P,A))):d||(P=at(a,g),P!=null&&w.push(ya(a,P,A)))),a=a.return}w.length!==0&&r.push({event:s,listeners:w})}var Mw=/\r\n?/g,Fw=/\u0000|\uFFFD/g;function Jp(r){return(typeof r=="string"?r:""+r).replace(Mw,`
`).replace(Fw,"")}function Kl(r,s,a){if(s=Jp(s),Jp(r)!==s&&a)throw Error(t(425))}function Gl(){}var gh=null,yh=null;function _h(r,s){return r==="textarea"||r==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var vh=typeof setTimeout=="function"?setTimeout:void 0,Uw=typeof clearTimeout=="function"?clearTimeout:void 0,Zp=typeof Promise=="function"?Promise:void 0,jw=typeof queueMicrotask=="function"?queueMicrotask:typeof Zp<"u"?function(r){return Zp.resolve(null).then(r).catch(zw)}:vh;function zw(r){setTimeout(function(){throw r})}function wh(r,s){var a=s,h=0;do{var d=a.nextSibling;if(r.removeChild(a),d&&d.nodeType===8)if(a=d.data,a==="/$"){if(h===0){r.removeChild(d),Mn(s);return}h--}else a!=="$"&&a!=="$?"&&a!=="$!"||h++;a=d}while(a);Mn(s)}function ni(r){for(;r!=null;r=r.nextSibling){var s=r.nodeType;if(s===1||s===3)break;if(s===8){if(s=r.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return r}function em(r){r=r.previousSibling;for(var s=0;r;){if(r.nodeType===8){var a=r.data;if(a==="$"||a==="$!"||a==="$?"){if(s===0)return r;s--}else a==="/$"&&s++}r=r.previousSibling}return null}var Ys=Math.random().toString(36).slice(2),tr="__reactFiber$"+Ys,_a="__reactProps$"+Ys,Tr="__reactContainer$"+Ys,Eh="__reactEvents$"+Ys,Bw="__reactListeners$"+Ys,$w="__reactHandles$"+Ys;function Gi(r){var s=r[tr];if(s)return s;for(var a=r.parentNode;a;){if(s=a[Tr]||a[tr]){if(a=s.alternate,s.child!==null||a!==null&&a.child!==null)for(r=em(r);r!==null;){if(a=r[tr])return a;r=em(r)}return s}r=a,a=r.parentNode}return null}function va(r){return r=r[tr]||r[Tr],!r||r.tag!==5&&r.tag!==6&&r.tag!==13&&r.tag!==3?null:r}function Js(r){if(r.tag===5||r.tag===6)return r.stateNode;throw Error(t(33))}function Ql(r){return r[_a]||null}var Th=[],Zs=-1;function ri(r){return{current:r}}function Je(r){0>Zs||(r.current=Th[Zs],Th[Zs]=null,Zs--)}function Qe(r,s){Zs++,Th[Zs]=r.current,r.current=s}var ii={},Mt=ri(ii),Zt=ri(!1),Qi=ii;function eo(r,s){var a=r.type.contextTypes;if(!a)return ii;var h=r.stateNode;if(h&&h.__reactInternalMemoizedUnmaskedChildContext===s)return h.__reactInternalMemoizedMaskedChildContext;var d={},g;for(g in a)d[g]=s[g];return h&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=s,r.__reactInternalMemoizedMaskedChildContext=d),d}function en(r){return r=r.childContextTypes,r!=null}function Xl(){Je(Zt),Je(Mt)}function tm(r,s,a){if(Mt.current!==ii)throw Error(t(168));Qe(Mt,s),Qe(Zt,a)}function nm(r,s,a){var h=r.stateNode;if(s=s.childContextTypes,typeof h.getChildContext!="function")return a;h=h.getChildContext();for(var d in h)if(!(d in s))throw Error(t(108,Be(r)||"Unknown",d));return oe({},a,h)}function Yl(r){return r=(r=r.stateNode)&&r.__reactInternalMemoizedMergedChildContext||ii,Qi=Mt.current,Qe(Mt,r),Qe(Zt,Zt.current),!0}function rm(r,s,a){var h=r.stateNode;if(!h)throw Error(t(169));a?(r=nm(r,s,Qi),h.__reactInternalMemoizedMergedChildContext=r,Je(Zt),Je(Mt),Qe(Mt,r)):Je(Zt),Qe(Zt,a)}var Ir=null,Jl=!1,Ih=!1;function im(r){Ir===null?Ir=[r]:Ir.push(r)}function qw(r){Jl=!0,im(r)}function si(){if(!Ih&&Ir!==null){Ih=!0;var r=0,s=De;try{var a=Ir;for(De=1;r<a.length;r++){var h=a[r];do h=h(!0);while(h!==null)}Ir=null,Jl=!1}catch(d){throw Ir!==null&&(Ir=Ir.slice(r+1)),Ds(ji,si),d}finally{De=s,Ih=!1}}return null}var to=[],no=0,Zl=null,eu=0,In=[],Sn=0,Xi=null,Sr=1,Ar="";function Yi(r,s){to[no++]=eu,to[no++]=Zl,Zl=r,eu=s}function sm(r,s,a){In[Sn++]=Sr,In[Sn++]=Ar,In[Sn++]=Xi,Xi=r;var h=Sr;r=Ar;var d=32-Wt(h)-1;h&=~(1<<d),a+=1;var g=32-Wt(s)+d;if(30<g){var w=d-d%5;g=(h&(1<<w)-1).toString(32),h>>=w,d-=w,Sr=1<<32-Wt(s)+d|a<<d|h,Ar=g+r}else Sr=1<<g|a<<d|h,Ar=r}function Sh(r){r.return!==null&&(Yi(r,1),sm(r,1,0))}function Ah(r){for(;r===Zl;)Zl=to[--no],to[no]=null,eu=to[--no],to[no]=null;for(;r===Xi;)Xi=In[--Sn],In[Sn]=null,Ar=In[--Sn],In[Sn]=null,Sr=In[--Sn],In[Sn]=null}var pn=null,mn=null,tt=!1,jn=null;function om(r,s){var a=kn(5,null,null,0);a.elementType="DELETED",a.stateNode=s,a.return=r,s=r.deletions,s===null?(r.deletions=[a],r.flags|=16):s.push(a)}function am(r,s){switch(r.tag){case 5:var a=r.type;return s=s.nodeType!==1||a.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(r.stateNode=s,pn=r,mn=ni(s.firstChild),!0):!1;case 6:return s=r.pendingProps===""||s.nodeType!==3?null:s,s!==null?(r.stateNode=s,pn=r,mn=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(a=Xi!==null?{id:Sr,overflow:Ar}:null,r.memoizedState={dehydrated:s,treeContext:a,retryLane:1073741824},a=kn(18,null,null,0),a.stateNode=s,a.return=r,r.child=a,pn=r,mn=null,!0):!1;default:return!1}}function Rh(r){return(r.mode&1)!==0&&(r.flags&128)===0}function Ch(r){if(tt){var s=mn;if(s){var a=s;if(!am(r,s)){if(Rh(r))throw Error(t(418));s=ni(a.nextSibling);var h=pn;s&&am(r,s)?om(h,a):(r.flags=r.flags&-4097|2,tt=!1,pn=r)}}else{if(Rh(r))throw Error(t(418));r.flags=r.flags&-4097|2,tt=!1,pn=r}}}function lm(r){for(r=r.return;r!==null&&r.tag!==5&&r.tag!==3&&r.tag!==13;)r=r.return;pn=r}function tu(r){if(r!==pn)return!1;if(!tt)return lm(r),tt=!0,!1;var s;if((s=r.tag!==3)&&!(s=r.tag!==5)&&(s=r.type,s=s!=="head"&&s!=="body"&&!_h(r.type,r.memoizedProps)),s&&(s=mn)){if(Rh(r))throw um(),Error(t(418));for(;s;)om(r,s),s=ni(s.nextSibling)}if(lm(r),r.tag===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(t(317));e:{for(r=r.nextSibling,s=0;r;){if(r.nodeType===8){var a=r.data;if(a==="/$"){if(s===0){mn=ni(r.nextSibling);break e}s--}else a!=="$"&&a!=="$!"&&a!=="$?"||s++}r=r.nextSibling}mn=null}}else mn=pn?ni(r.stateNode.nextSibling):null;return!0}function um(){for(var r=mn;r;)r=ni(r.nextSibling)}function ro(){mn=pn=null,tt=!1}function kh(r){jn===null?jn=[r]:jn.push(r)}var Hw=ne.ReactCurrentBatchConfig;function wa(r,s,a){if(r=a.ref,r!==null&&typeof r!="function"&&typeof r!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(t(309));var h=a.stateNode}if(!h)throw Error(t(147,r));var d=h,g=""+r;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===g?s.ref:(s=function(w){var A=d.refs;w===null?delete A[g]:A[g]=w},s._stringRef=g,s)}if(typeof r!="string")throw Error(t(284));if(!a._owner)throw Error(t(290,r))}return r}function nu(r,s){throw r=Object.prototype.toString.call(s),Error(t(31,r==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":r))}function cm(r){var s=r._init;return s(r._payload)}function hm(r){function s(U,N){if(r){var z=U.deletions;z===null?(U.deletions=[N],U.flags|=16):z.push(N)}}function a(U,N){if(!r)return null;for(;N!==null;)s(U,N),N=N.sibling;return null}function h(U,N){for(U=new Map;N!==null;)N.key!==null?U.set(N.key,N):U.set(N.index,N),N=N.sibling;return U}function d(U,N){return U=fi(U,N),U.index=0,U.sibling=null,U}function g(U,N,z){return U.index=z,r?(z=U.alternate,z!==null?(z=z.index,z<N?(U.flags|=2,N):z):(U.flags|=2,N)):(U.flags|=1048576,N)}function w(U){return r&&U.alternate===null&&(U.flags|=2),U}function A(U,N,z,te){return N===null||N.tag!==6?(N=vd(z,U.mode,te),N.return=U,N):(N=d(N,z),N.return=U,N)}function P(U,N,z,te){var pe=z.type;return pe===k?J(U,N,z.props.children,te,z.key):N!==null&&(N.elementType===pe||typeof pe=="object"&&pe!==null&&pe.$$typeof===mt&&cm(pe)===N.type)?(te=d(N,z.props),te.ref=wa(U,N,z),te.return=U,te):(te=Ru(z.type,z.key,z.props,null,U.mode,te),te.ref=wa(U,N,z),te.return=U,te)}function $(U,N,z,te){return N===null||N.tag!==4||N.stateNode.containerInfo!==z.containerInfo||N.stateNode.implementation!==z.implementation?(N=wd(z,U.mode,te),N.return=U,N):(N=d(N,z.children||[]),N.return=U,N)}function J(U,N,z,te,pe){return N===null||N.tag!==7?(N=ss(z,U.mode,te,pe),N.return=U,N):(N=d(N,z),N.return=U,N)}function Z(U,N,z){if(typeof N=="string"&&N!==""||typeof N=="number")return N=vd(""+N,U.mode,z),N.return=U,N;if(typeof N=="object"&&N!==null){switch(N.$$typeof){case me:return z=Ru(N.type,N.key,N.props,null,U.mode,z),z.ref=wa(U,null,N),z.return=U,z;case fe:return N=wd(N,U.mode,z),N.return=U,N;case mt:var te=N._init;return Z(U,te(N._payload),z)}if(fr(N)||_e(N))return N=ss(N,U.mode,z,null),N.return=U,N;nu(U,N)}return null}function Y(U,N,z,te){var pe=N!==null?N.key:null;if(typeof z=="string"&&z!==""||typeof z=="number")return pe!==null?null:A(U,N,""+z,te);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case me:return z.key===pe?P(U,N,z,te):null;case fe:return z.key===pe?$(U,N,z,te):null;case mt:return pe=z._init,Y(U,N,pe(z._payload),te)}if(fr(z)||_e(z))return pe!==null?null:J(U,N,z,te,null);nu(U,z)}return null}function se(U,N,z,te,pe){if(typeof te=="string"&&te!==""||typeof te=="number")return U=U.get(z)||null,A(N,U,""+te,pe);if(typeof te=="object"&&te!==null){switch(te.$$typeof){case me:return U=U.get(te.key===null?z:te.key)||null,P(N,U,te,pe);case fe:return U=U.get(te.key===null?z:te.key)||null,$(N,U,te,pe);case mt:var ve=te._init;return se(U,N,z,ve(te._payload),pe)}if(fr(te)||_e(te))return U=U.get(z)||null,J(N,U,te,pe,null);nu(N,te)}return null}function ce(U,N,z,te){for(var pe=null,ve=null,we=N,Ee=N=0,Ct=null;we!==null&&Ee<z.length;Ee++){we.index>Ee?(Ct=we,we=null):Ct=we.sibling;var ze=Y(U,we,z[Ee],te);if(ze===null){we===null&&(we=Ct);break}r&&we&&ze.alternate===null&&s(U,we),N=g(ze,N,Ee),ve===null?pe=ze:ve.sibling=ze,ve=ze,we=Ct}if(Ee===z.length)return a(U,we),tt&&Yi(U,Ee),pe;if(we===null){for(;Ee<z.length;Ee++)we=Z(U,z[Ee],te),we!==null&&(N=g(we,N,Ee),ve===null?pe=we:ve.sibling=we,ve=we);return tt&&Yi(U,Ee),pe}for(we=h(U,we);Ee<z.length;Ee++)Ct=se(we,U,Ee,z[Ee],te),Ct!==null&&(r&&Ct.alternate!==null&&we.delete(Ct.key===null?Ee:Ct.key),N=g(Ct,N,Ee),ve===null?pe=Ct:ve.sibling=Ct,ve=Ct);return r&&we.forEach(function(pi){return s(U,pi)}),tt&&Yi(U,Ee),pe}function de(U,N,z,te){var pe=_e(z);if(typeof pe!="function")throw Error(t(150));if(z=pe.call(z),z==null)throw Error(t(151));for(var ve=pe=null,we=N,Ee=N=0,Ct=null,ze=z.next();we!==null&&!ze.done;Ee++,ze=z.next()){we.index>Ee?(Ct=we,we=null):Ct=we.sibling;var pi=Y(U,we,ze.value,te);if(pi===null){we===null&&(we=Ct);break}r&&we&&pi.alternate===null&&s(U,we),N=g(pi,N,Ee),ve===null?pe=pi:ve.sibling=pi,ve=pi,we=Ct}if(ze.done)return a(U,we),tt&&Yi(U,Ee),pe;if(we===null){for(;!ze.done;Ee++,ze=z.next())ze=Z(U,ze.value,te),ze!==null&&(N=g(ze,N,Ee),ve===null?pe=ze:ve.sibling=ze,ve=ze);return tt&&Yi(U,Ee),pe}for(we=h(U,we);!ze.done;Ee++,ze=z.next())ze=se(we,U,Ee,ze.value,te),ze!==null&&(r&&ze.alternate!==null&&we.delete(ze.key===null?Ee:ze.key),N=g(ze,N,Ee),ve===null?pe=ze:ve.sibling=ze,ve=ze);return r&&we.forEach(function(SE){return s(U,SE)}),tt&&Yi(U,Ee),pe}function lt(U,N,z,te){if(typeof z=="object"&&z!==null&&z.type===k&&z.key===null&&(z=z.props.children),typeof z=="object"&&z!==null){switch(z.$$typeof){case me:e:{for(var pe=z.key,ve=N;ve!==null;){if(ve.key===pe){if(pe=z.type,pe===k){if(ve.tag===7){a(U,ve.sibling),N=d(ve,z.props.children),N.return=U,U=N;break e}}else if(ve.elementType===pe||typeof pe=="object"&&pe!==null&&pe.$$typeof===mt&&cm(pe)===ve.type){a(U,ve.sibling),N=d(ve,z.props),N.ref=wa(U,ve,z),N.return=U,U=N;break e}a(U,ve);break}else s(U,ve);ve=ve.sibling}z.type===k?(N=ss(z.props.children,U.mode,te,z.key),N.return=U,U=N):(te=Ru(z.type,z.key,z.props,null,U.mode,te),te.ref=wa(U,N,z),te.return=U,U=te)}return w(U);case fe:e:{for(ve=z.key;N!==null;){if(N.key===ve)if(N.tag===4&&N.stateNode.containerInfo===z.containerInfo&&N.stateNode.implementation===z.implementation){a(U,N.sibling),N=d(N,z.children||[]),N.return=U,U=N;break e}else{a(U,N);break}else s(U,N);N=N.sibling}N=wd(z,U.mode,te),N.return=U,U=N}return w(U);case mt:return ve=z._init,lt(U,N,ve(z._payload),te)}if(fr(z))return ce(U,N,z,te);if(_e(z))return de(U,N,z,te);nu(U,z)}return typeof z=="string"&&z!==""||typeof z=="number"?(z=""+z,N!==null&&N.tag===6?(a(U,N.sibling),N=d(N,z),N.return=U,U=N):(a(U,N),N=vd(z,U.mode,te),N.return=U,U=N),w(U)):a(U,N)}return lt}var io=hm(!0),dm=hm(!1),ru=ri(null),iu=null,so=null,Ph=null;function xh(){Ph=so=iu=null}function Nh(r){var s=ru.current;Je(ru),r._currentValue=s}function bh(r,s,a){for(;r!==null;){var h=r.alternate;if((r.childLanes&s)!==s?(r.childLanes|=s,h!==null&&(h.childLanes|=s)):h!==null&&(h.childLanes&s)!==s&&(h.childLanes|=s),r===a)break;r=r.return}}function oo(r,s){iu=r,Ph=so=null,r=r.dependencies,r!==null&&r.firstContext!==null&&(r.lanes&s&&(tn=!0),r.firstContext=null)}function An(r){var s=r._currentValue;if(Ph!==r)if(r={context:r,memoizedValue:s,next:null},so===null){if(iu===null)throw Error(t(308));so=r,iu.dependencies={lanes:0,firstContext:r}}else so=so.next=r;return s}var Ji=null;function Dh(r){Ji===null?Ji=[r]:Ji.push(r)}function fm(r,s,a,h){var d=s.interleaved;return d===null?(a.next=a,Dh(s)):(a.next=d.next,d.next=a),s.interleaved=a,Rr(r,h)}function Rr(r,s){r.lanes|=s;var a=r.alternate;for(a!==null&&(a.lanes|=s),a=r,r=r.return;r!==null;)r.childLanes|=s,a=r.alternate,a!==null&&(a.childLanes|=s),a=r,r=r.return;return a.tag===3?a.stateNode:null}var oi=!1;function Oh(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function pm(r,s){r=r.updateQueue,s.updateQueue===r&&(s.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,effects:r.effects})}function Cr(r,s){return{eventTime:r,lane:s,tag:0,payload:null,callback:null,next:null}}function ai(r,s,a){var h=r.updateQueue;if(h===null)return null;if(h=h.shared,Fe&2){var d=h.pending;return d===null?s.next=s:(s.next=d.next,d.next=s),h.pending=s,Rr(r,a)}return d=h.interleaved,d===null?(s.next=s,Dh(h)):(s.next=d.next,d.next=s),h.interleaved=s,Rr(r,a)}function su(r,s,a){if(s=s.updateQueue,s!==null&&(s=s.shared,(a&4194240)!==0)){var h=s.lanes;h&=r.pendingLanes,a|=h,s.lanes=a,Xr(r,a)}}function mm(r,s){var a=r.updateQueue,h=r.alternate;if(h!==null&&(h=h.updateQueue,a===h)){var d=null,g=null;if(a=a.firstBaseUpdate,a!==null){do{var w={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};g===null?d=g=w:g=g.next=w,a=a.next}while(a!==null);g===null?d=g=s:g=g.next=s}else d=g=s;a={baseState:h.baseState,firstBaseUpdate:d,lastBaseUpdate:g,shared:h.shared,effects:h.effects},r.updateQueue=a;return}r=a.lastBaseUpdate,r===null?a.firstBaseUpdate=s:r.next=s,a.lastBaseUpdate=s}function ou(r,s,a,h){var d=r.updateQueue;oi=!1;var g=d.firstBaseUpdate,w=d.lastBaseUpdate,A=d.shared.pending;if(A!==null){d.shared.pending=null;var P=A,$=P.next;P.next=null,w===null?g=$:w.next=$,w=P;var J=r.alternate;J!==null&&(J=J.updateQueue,A=J.lastBaseUpdate,A!==w&&(A===null?J.firstBaseUpdate=$:A.next=$,J.lastBaseUpdate=P))}if(g!==null){var Z=d.baseState;w=0,J=$=P=null,A=g;do{var Y=A.lane,se=A.eventTime;if((h&Y)===Y){J!==null&&(J=J.next={eventTime:se,lane:0,tag:A.tag,payload:A.payload,callback:A.callback,next:null});e:{var ce=r,de=A;switch(Y=s,se=a,de.tag){case 1:if(ce=de.payload,typeof ce=="function"){Z=ce.call(se,Z,Y);break e}Z=ce;break e;case 3:ce.flags=ce.flags&-65537|128;case 0:if(ce=de.payload,Y=typeof ce=="function"?ce.call(se,Z,Y):ce,Y==null)break e;Z=oe({},Z,Y);break e;case 2:oi=!0}}A.callback!==null&&A.lane!==0&&(r.flags|=64,Y=d.effects,Y===null?d.effects=[A]:Y.push(A))}else se={eventTime:se,lane:Y,tag:A.tag,payload:A.payload,callback:A.callback,next:null},J===null?($=J=se,P=Z):J=J.next=se,w|=Y;if(A=A.next,A===null){if(A=d.shared.pending,A===null)break;Y=A,A=Y.next,Y.next=null,d.lastBaseUpdate=Y,d.shared.pending=null}}while(!0);if(J===null&&(P=Z),d.baseState=P,d.firstBaseUpdate=$,d.lastBaseUpdate=J,s=d.shared.interleaved,s!==null){d=s;do w|=d.lane,d=d.next;while(d!==s)}else g===null&&(d.shared.lanes=0);ts|=w,r.lanes=w,r.memoizedState=Z}}function gm(r,s,a){if(r=s.effects,s.effects=null,r!==null)for(s=0;s<r.length;s++){var h=r[s],d=h.callback;if(d!==null){if(h.callback=null,h=a,typeof d!="function")throw Error(t(191,d));d.call(h)}}}var Ea={},nr=ri(Ea),Ta=ri(Ea),Ia=ri(Ea);function Zi(r){if(r===Ea)throw Error(t(174));return r}function Lh(r,s){switch(Qe(Ia,s),Qe(Ta,r),Qe(nr,Ea),r=s.nodeType,r){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:yt(null,"");break;default:r=r===8?s.parentNode:s,s=r.namespaceURI||null,r=r.tagName,s=yt(s,r)}Je(nr),Qe(nr,s)}function ao(){Je(nr),Je(Ta),Je(Ia)}function ym(r){Zi(Ia.current);var s=Zi(nr.current),a=yt(s,r.type);s!==a&&(Qe(Ta,r),Qe(nr,a))}function Vh(r){Ta.current===r&&(Je(nr),Je(Ta))}var rt=ri(0);function au(r){for(var s=r;s!==null;){if(s.tag===13){var a=s.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if(s.flags&128)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Mh=[];function Fh(){for(var r=0;r<Mh.length;r++)Mh[r]._workInProgressVersionPrimary=null;Mh.length=0}var lu=ne.ReactCurrentDispatcher,Uh=ne.ReactCurrentBatchConfig,es=0,it=null,vt=null,At=null,uu=!1,Sa=!1,Aa=0,Ww=0;function Ft(){throw Error(t(321))}function jh(r,s){if(s===null)return!1;for(var a=0;a<s.length&&a<r.length;a++)if(!Un(r[a],s[a]))return!1;return!0}function zh(r,s,a,h,d,g){if(es=g,it=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,lu.current=r===null||r.memoizedState===null?Xw:Yw,r=a(h,d),Sa){g=0;do{if(Sa=!1,Aa=0,25<=g)throw Error(t(301));g+=1,At=vt=null,s.updateQueue=null,lu.current=Jw,r=a(h,d)}while(Sa)}if(lu.current=du,s=vt!==null&&vt.next!==null,es=0,At=vt=it=null,uu=!1,s)throw Error(t(300));return r}function Bh(){var r=Aa!==0;return Aa=0,r}function rr(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return At===null?it.memoizedState=At=r:At=At.next=r,At}function Rn(){if(vt===null){var r=it.alternate;r=r!==null?r.memoizedState:null}else r=vt.next;var s=At===null?it.memoizedState:At.next;if(s!==null)At=s,vt=r;else{if(r===null)throw Error(t(310));vt=r,r={memoizedState:vt.memoizedState,baseState:vt.baseState,baseQueue:vt.baseQueue,queue:vt.queue,next:null},At===null?it.memoizedState=At=r:At=At.next=r}return At}function Ra(r,s){return typeof s=="function"?s(r):s}function $h(r){var s=Rn(),a=s.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=r;var h=vt,d=h.baseQueue,g=a.pending;if(g!==null){if(d!==null){var w=d.next;d.next=g.next,g.next=w}h.baseQueue=d=g,a.pending=null}if(d!==null){g=d.next,h=h.baseState;var A=w=null,P=null,$=g;do{var J=$.lane;if((es&J)===J)P!==null&&(P=P.next={lane:0,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null}),h=$.hasEagerState?$.eagerState:r(h,$.action);else{var Z={lane:J,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null};P===null?(A=P=Z,w=h):P=P.next=Z,it.lanes|=J,ts|=J}$=$.next}while($!==null&&$!==g);P===null?w=h:P.next=A,Un(h,s.memoizedState)||(tn=!0),s.memoizedState=h,s.baseState=w,s.baseQueue=P,a.lastRenderedState=h}if(r=a.interleaved,r!==null){d=r;do g=d.lane,it.lanes|=g,ts|=g,d=d.next;while(d!==r)}else d===null&&(a.lanes=0);return[s.memoizedState,a.dispatch]}function qh(r){var s=Rn(),a=s.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=r;var h=a.dispatch,d=a.pending,g=s.memoizedState;if(d!==null){a.pending=null;var w=d=d.next;do g=r(g,w.action),w=w.next;while(w!==d);Un(g,s.memoizedState)||(tn=!0),s.memoizedState=g,s.baseQueue===null&&(s.baseState=g),a.lastRenderedState=g}return[g,h]}function _m(){}function vm(r,s){var a=it,h=Rn(),d=s(),g=!Un(h.memoizedState,d);if(g&&(h.memoizedState=d,tn=!0),h=h.queue,Hh(Tm.bind(null,a,h,r),[r]),h.getSnapshot!==s||g||At!==null&&At.memoizedState.tag&1){if(a.flags|=2048,Ca(9,Em.bind(null,a,h,d,s),void 0,null),Rt===null)throw Error(t(349));es&30||wm(a,s,d)}return d}function wm(r,s,a){r.flags|=16384,r={getSnapshot:s,value:a},s=it.updateQueue,s===null?(s={lastEffect:null,stores:null},it.updateQueue=s,s.stores=[r]):(a=s.stores,a===null?s.stores=[r]:a.push(r))}function Em(r,s,a,h){s.value=a,s.getSnapshot=h,Im(s)&&Sm(r)}function Tm(r,s,a){return a(function(){Im(s)&&Sm(r)})}function Im(r){var s=r.getSnapshot;r=r.value;try{var a=s();return!Un(r,a)}catch{return!0}}function Sm(r){var s=Rr(r,1);s!==null&&qn(s,r,1,-1)}function Am(r){var s=rr();return typeof r=="function"&&(r=r()),s.memoizedState=s.baseState=r,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ra,lastRenderedState:r},s.queue=r,r=r.dispatch=Qw.bind(null,it,r),[s.memoizedState,r]}function Ca(r,s,a,h){return r={tag:r,create:s,destroy:a,deps:h,next:null},s=it.updateQueue,s===null?(s={lastEffect:null,stores:null},it.updateQueue=s,s.lastEffect=r.next=r):(a=s.lastEffect,a===null?s.lastEffect=r.next=r:(h=a.next,a.next=r,r.next=h,s.lastEffect=r)),r}function Rm(){return Rn().memoizedState}function cu(r,s,a,h){var d=rr();it.flags|=r,d.memoizedState=Ca(1|s,a,void 0,h===void 0?null:h)}function hu(r,s,a,h){var d=Rn();h=h===void 0?null:h;var g=void 0;if(vt!==null){var w=vt.memoizedState;if(g=w.destroy,h!==null&&jh(h,w.deps)){d.memoizedState=Ca(s,a,g,h);return}}it.flags|=r,d.memoizedState=Ca(1|s,a,g,h)}function Cm(r,s){return cu(8390656,8,r,s)}function Hh(r,s){return hu(2048,8,r,s)}function km(r,s){return hu(4,2,r,s)}function Pm(r,s){return hu(4,4,r,s)}function xm(r,s){if(typeof s=="function")return r=r(),s(r),function(){s(null)};if(s!=null)return r=r(),s.current=r,function(){s.current=null}}function Nm(r,s,a){return a=a!=null?a.concat([r]):null,hu(4,4,xm.bind(null,s,r),a)}function Wh(){}function bm(r,s){var a=Rn();s=s===void 0?null:s;var h=a.memoizedState;return h!==null&&s!==null&&jh(s,h[1])?h[0]:(a.memoizedState=[r,s],r)}function Dm(r,s){var a=Rn();s=s===void 0?null:s;var h=a.memoizedState;return h!==null&&s!==null&&jh(s,h[1])?h[0]:(r=r(),a.memoizedState=[r,s],r)}function Om(r,s,a){return es&21?(Un(a,s)||(a=$i(),it.lanes|=a,ts|=a,r.baseState=!0),s):(r.baseState&&(r.baseState=!1,tn=!0),r.memoizedState=a)}function Kw(r,s){var a=De;De=a!==0&&4>a?a:4,r(!0);var h=Uh.transition;Uh.transition={};try{r(!1),s()}finally{De=a,Uh.transition=h}}function Lm(){return Rn().memoizedState}function Gw(r,s,a){var h=hi(r);if(a={lane:h,action:a,hasEagerState:!1,eagerState:null,next:null},Vm(r))Mm(s,a);else if(a=fm(r,s,a,h),a!==null){var d=Qt();qn(a,r,h,d),Fm(a,s,h)}}function Qw(r,s,a){var h=hi(r),d={lane:h,action:a,hasEagerState:!1,eagerState:null,next:null};if(Vm(r))Mm(s,d);else{var g=r.alternate;if(r.lanes===0&&(g===null||g.lanes===0)&&(g=s.lastRenderedReducer,g!==null))try{var w=s.lastRenderedState,A=g(w,a);if(d.hasEagerState=!0,d.eagerState=A,Un(A,w)){var P=s.interleaved;P===null?(d.next=d,Dh(s)):(d.next=P.next,P.next=d),s.interleaved=d;return}}catch{}finally{}a=fm(r,s,d,h),a!==null&&(d=Qt(),qn(a,r,h,d),Fm(a,s,h))}}function Vm(r){var s=r.alternate;return r===it||s!==null&&s===it}function Mm(r,s){Sa=uu=!0;var a=r.pending;a===null?s.next=s:(s.next=a.next,a.next=s),r.pending=s}function Fm(r,s,a){if(a&4194240){var h=s.lanes;h&=r.pendingLanes,a|=h,s.lanes=a,Xr(r,a)}}var du={readContext:An,useCallback:Ft,useContext:Ft,useEffect:Ft,useImperativeHandle:Ft,useInsertionEffect:Ft,useLayoutEffect:Ft,useMemo:Ft,useReducer:Ft,useRef:Ft,useState:Ft,useDebugValue:Ft,useDeferredValue:Ft,useTransition:Ft,useMutableSource:Ft,useSyncExternalStore:Ft,useId:Ft,unstable_isNewReconciler:!1},Xw={readContext:An,useCallback:function(r,s){return rr().memoizedState=[r,s===void 0?null:s],r},useContext:An,useEffect:Cm,useImperativeHandle:function(r,s,a){return a=a!=null?a.concat([r]):null,cu(4194308,4,xm.bind(null,s,r),a)},useLayoutEffect:function(r,s){return cu(4194308,4,r,s)},useInsertionEffect:function(r,s){return cu(4,2,r,s)},useMemo:function(r,s){var a=rr();return s=s===void 0?null:s,r=r(),a.memoizedState=[r,s],r},useReducer:function(r,s,a){var h=rr();return s=a!==void 0?a(s):s,h.memoizedState=h.baseState=s,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:s},h.queue=r,r=r.dispatch=Gw.bind(null,it,r),[h.memoizedState,r]},useRef:function(r){var s=rr();return r={current:r},s.memoizedState=r},useState:Am,useDebugValue:Wh,useDeferredValue:function(r){return rr().memoizedState=r},useTransition:function(){var r=Am(!1),s=r[0];return r=Kw.bind(null,r[1]),rr().memoizedState=r,[s,r]},useMutableSource:function(){},useSyncExternalStore:function(r,s,a){var h=it,d=rr();if(tt){if(a===void 0)throw Error(t(407));a=a()}else{if(a=s(),Rt===null)throw Error(t(349));es&30||wm(h,s,a)}d.memoizedState=a;var g={value:a,getSnapshot:s};return d.queue=g,Cm(Tm.bind(null,h,g,r),[r]),h.flags|=2048,Ca(9,Em.bind(null,h,g,a,s),void 0,null),a},useId:function(){var r=rr(),s=Rt.identifierPrefix;if(tt){var a=Ar,h=Sr;a=(h&~(1<<32-Wt(h)-1)).toString(32)+a,s=":"+s+"R"+a,a=Aa++,0<a&&(s+="H"+a.toString(32)),s+=":"}else a=Ww++,s=":"+s+"r"+a.toString(32)+":";return r.memoizedState=s},unstable_isNewReconciler:!1},Yw={readContext:An,useCallback:bm,useContext:An,useEffect:Hh,useImperativeHandle:Nm,useInsertionEffect:km,useLayoutEffect:Pm,useMemo:Dm,useReducer:$h,useRef:Rm,useState:function(){return $h(Ra)},useDebugValue:Wh,useDeferredValue:function(r){var s=Rn();return Om(s,vt.memoizedState,r)},useTransition:function(){var r=$h(Ra)[0],s=Rn().memoizedState;return[r,s]},useMutableSource:_m,useSyncExternalStore:vm,useId:Lm,unstable_isNewReconciler:!1},Jw={readContext:An,useCallback:bm,useContext:An,useEffect:Hh,useImperativeHandle:Nm,useInsertionEffect:km,useLayoutEffect:Pm,useMemo:Dm,useReducer:qh,useRef:Rm,useState:function(){return qh(Ra)},useDebugValue:Wh,useDeferredValue:function(r){var s=Rn();return vt===null?s.memoizedState=r:Om(s,vt.memoizedState,r)},useTransition:function(){var r=qh(Ra)[0],s=Rn().memoizedState;return[r,s]},useMutableSource:_m,useSyncExternalStore:vm,useId:Lm,unstable_isNewReconciler:!1};function zn(r,s){if(r&&r.defaultProps){s=oe({},s),r=r.defaultProps;for(var a in r)s[a]===void 0&&(s[a]=r[a]);return s}return s}function Kh(r,s,a,h){s=r.memoizedState,a=a(h,s),a=a==null?s:oe({},s,a),r.memoizedState=a,r.lanes===0&&(r.updateQueue.baseState=a)}var fu={isMounted:function(r){return(r=r._reactInternals)?bn(r)===r:!1},enqueueSetState:function(r,s,a){r=r._reactInternals;var h=Qt(),d=hi(r),g=Cr(h,d);g.payload=s,a!=null&&(g.callback=a),s=ai(r,g,d),s!==null&&(qn(s,r,d,h),su(s,r,d))},enqueueReplaceState:function(r,s,a){r=r._reactInternals;var h=Qt(),d=hi(r),g=Cr(h,d);g.tag=1,g.payload=s,a!=null&&(g.callback=a),s=ai(r,g,d),s!==null&&(qn(s,r,d,h),su(s,r,d))},enqueueForceUpdate:function(r,s){r=r._reactInternals;var a=Qt(),h=hi(r),d=Cr(a,h);d.tag=2,s!=null&&(d.callback=s),s=ai(r,d,h),s!==null&&(qn(s,r,h,a),su(s,r,h))}};function Um(r,s,a,h,d,g,w){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(h,g,w):s.prototype&&s.prototype.isPureReactComponent?!fa(a,h)||!fa(d,g):!0}function jm(r,s,a){var h=!1,d=ii,g=s.contextType;return typeof g=="object"&&g!==null?g=An(g):(d=en(s)?Qi:Mt.current,h=s.contextTypes,g=(h=h!=null)?eo(r,d):ii),s=new s(a,g),r.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=fu,r.stateNode=s,s._reactInternals=r,h&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=d,r.__reactInternalMemoizedMaskedChildContext=g),s}function zm(r,s,a,h){r=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(a,h),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(a,h),s.state!==r&&fu.enqueueReplaceState(s,s.state,null)}function Gh(r,s,a,h){var d=r.stateNode;d.props=a,d.state=r.memoizedState,d.refs={},Oh(r);var g=s.contextType;typeof g=="object"&&g!==null?d.context=An(g):(g=en(s)?Qi:Mt.current,d.context=eo(r,g)),d.state=r.memoizedState,g=s.getDerivedStateFromProps,typeof g=="function"&&(Kh(r,s,g,a),d.state=r.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(s=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),s!==d.state&&fu.enqueueReplaceState(d,d.state,null),ou(r,a,d,h),d.state=r.memoizedState),typeof d.componentDidMount=="function"&&(r.flags|=4194308)}function lo(r,s){try{var a="",h=s;do a+=Pe(h),h=h.return;while(h);var d=a}catch(g){d=`
Error generating stack: `+g.message+`
`+g.stack}return{value:r,source:s,stack:d,digest:null}}function Qh(r,s,a){return{value:r,source:null,stack:a??null,digest:s??null}}function Xh(r,s){try{console.error(s.value)}catch(a){setTimeout(function(){throw a})}}var Zw=typeof WeakMap=="function"?WeakMap:Map;function Bm(r,s,a){a=Cr(-1,a),a.tag=3,a.payload={element:null};var h=s.value;return a.callback=function(){wu||(wu=!0,hd=h),Xh(r,s)},a}function $m(r,s,a){a=Cr(-1,a),a.tag=3;var h=r.type.getDerivedStateFromError;if(typeof h=="function"){var d=s.value;a.payload=function(){return h(d)},a.callback=function(){Xh(r,s)}}var g=r.stateNode;return g!==null&&typeof g.componentDidCatch=="function"&&(a.callback=function(){Xh(r,s),typeof h!="function"&&(ui===null?ui=new Set([this]):ui.add(this));var w=s.stack;this.componentDidCatch(s.value,{componentStack:w!==null?w:""})}),a}function qm(r,s,a){var h=r.pingCache;if(h===null){h=r.pingCache=new Zw;var d=new Set;h.set(s,d)}else d=h.get(s),d===void 0&&(d=new Set,h.set(s,d));d.has(a)||(d.add(a),r=fE.bind(null,r,s,a),s.then(r,r))}function Hm(r){do{var s;if((s=r.tag===13)&&(s=r.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return r;r=r.return}while(r!==null);return null}function Wm(r,s,a,h,d){return r.mode&1?(r.flags|=65536,r.lanes=d,r):(r===s?r.flags|=65536:(r.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(s=Cr(-1,1),s.tag=2,ai(a,s,1))),a.lanes|=1),r)}var eE=ne.ReactCurrentOwner,tn=!1;function Gt(r,s,a,h){s.child=r===null?dm(s,null,a,h):io(s,r.child,a,h)}function Km(r,s,a,h,d){a=a.render;var g=s.ref;return oo(s,d),h=zh(r,s,a,h,g,d),a=Bh(),r!==null&&!tn?(s.updateQueue=r.updateQueue,s.flags&=-2053,r.lanes&=~d,kr(r,s,d)):(tt&&a&&Sh(s),s.flags|=1,Gt(r,s,h,d),s.child)}function Gm(r,s,a,h,d){if(r===null){var g=a.type;return typeof g=="function"&&!_d(g)&&g.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(s.tag=15,s.type=g,Qm(r,s,g,h,d)):(r=Ru(a.type,null,h,s,s.mode,d),r.ref=s.ref,r.return=s,s.child=r)}if(g=r.child,!(r.lanes&d)){var w=g.memoizedProps;if(a=a.compare,a=a!==null?a:fa,a(w,h)&&r.ref===s.ref)return kr(r,s,d)}return s.flags|=1,r=fi(g,h),r.ref=s.ref,r.return=s,s.child=r}function Qm(r,s,a,h,d){if(r!==null){var g=r.memoizedProps;if(fa(g,h)&&r.ref===s.ref)if(tn=!1,s.pendingProps=h=g,(r.lanes&d)!==0)r.flags&131072&&(tn=!0);else return s.lanes=r.lanes,kr(r,s,d)}return Yh(r,s,a,h,d)}function Xm(r,s,a){var h=s.pendingProps,d=h.children,g=r!==null?r.memoizedState:null;if(h.mode==="hidden")if(!(s.mode&1))s.memoizedState={baseLanes:0,cachePool:null,transitions:null},Qe(co,gn),gn|=a;else{if(!(a&1073741824))return r=g!==null?g.baseLanes|a:a,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:r,cachePool:null,transitions:null},s.updateQueue=null,Qe(co,gn),gn|=r,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},h=g!==null?g.baseLanes:a,Qe(co,gn),gn|=h}else g!==null?(h=g.baseLanes|a,s.memoizedState=null):h=a,Qe(co,gn),gn|=h;return Gt(r,s,d,a),s.child}function Ym(r,s){var a=s.ref;(r===null&&a!==null||r!==null&&r.ref!==a)&&(s.flags|=512,s.flags|=2097152)}function Yh(r,s,a,h,d){var g=en(a)?Qi:Mt.current;return g=eo(s,g),oo(s,d),a=zh(r,s,a,h,g,d),h=Bh(),r!==null&&!tn?(s.updateQueue=r.updateQueue,s.flags&=-2053,r.lanes&=~d,kr(r,s,d)):(tt&&h&&Sh(s),s.flags|=1,Gt(r,s,a,d),s.child)}function Jm(r,s,a,h,d){if(en(a)){var g=!0;Yl(s)}else g=!1;if(oo(s,d),s.stateNode===null)mu(r,s),jm(s,a,h),Gh(s,a,h,d),h=!0;else if(r===null){var w=s.stateNode,A=s.memoizedProps;w.props=A;var P=w.context,$=a.contextType;typeof $=="object"&&$!==null?$=An($):($=en(a)?Qi:Mt.current,$=eo(s,$));var J=a.getDerivedStateFromProps,Z=typeof J=="function"||typeof w.getSnapshotBeforeUpdate=="function";Z||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(A!==h||P!==$)&&zm(s,w,h,$),oi=!1;var Y=s.memoizedState;w.state=Y,ou(s,h,w,d),P=s.memoizedState,A!==h||Y!==P||Zt.current||oi?(typeof J=="function"&&(Kh(s,a,J,h),P=s.memoizedState),(A=oi||Um(s,a,A,h,Y,P,$))?(Z||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(s.flags|=4194308)):(typeof w.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=h,s.memoizedState=P),w.props=h,w.state=P,w.context=$,h=A):(typeof w.componentDidMount=="function"&&(s.flags|=4194308),h=!1)}else{w=s.stateNode,pm(r,s),A=s.memoizedProps,$=s.type===s.elementType?A:zn(s.type,A),w.props=$,Z=s.pendingProps,Y=w.context,P=a.contextType,typeof P=="object"&&P!==null?P=An(P):(P=en(a)?Qi:Mt.current,P=eo(s,P));var se=a.getDerivedStateFromProps;(J=typeof se=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(A!==Z||Y!==P)&&zm(s,w,h,P),oi=!1,Y=s.memoizedState,w.state=Y,ou(s,h,w,d);var ce=s.memoizedState;A!==Z||Y!==ce||Zt.current||oi?(typeof se=="function"&&(Kh(s,a,se,h),ce=s.memoizedState),($=oi||Um(s,a,$,h,Y,ce,P)||!1)?(J||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(h,ce,P),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(h,ce,P)),typeof w.componentDidUpdate=="function"&&(s.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof w.componentDidUpdate!="function"||A===r.memoizedProps&&Y===r.memoizedState||(s.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||A===r.memoizedProps&&Y===r.memoizedState||(s.flags|=1024),s.memoizedProps=h,s.memoizedState=ce),w.props=h,w.state=ce,w.context=P,h=$):(typeof w.componentDidUpdate!="function"||A===r.memoizedProps&&Y===r.memoizedState||(s.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||A===r.memoizedProps&&Y===r.memoizedState||(s.flags|=1024),h=!1)}return Jh(r,s,a,h,g,d)}function Jh(r,s,a,h,d,g){Ym(r,s);var w=(s.flags&128)!==0;if(!h&&!w)return d&&rm(s,a,!1),kr(r,s,g);h=s.stateNode,eE.current=s;var A=w&&typeof a.getDerivedStateFromError!="function"?null:h.render();return s.flags|=1,r!==null&&w?(s.child=io(s,r.child,null,g),s.child=io(s,null,A,g)):Gt(r,s,A,g),s.memoizedState=h.state,d&&rm(s,a,!0),s.child}function Zm(r){var s=r.stateNode;s.pendingContext?tm(r,s.pendingContext,s.pendingContext!==s.context):s.context&&tm(r,s.context,!1),Lh(r,s.containerInfo)}function eg(r,s,a,h,d){return ro(),kh(d),s.flags|=256,Gt(r,s,a,h),s.child}var Zh={dehydrated:null,treeContext:null,retryLane:0};function ed(r){return{baseLanes:r,cachePool:null,transitions:null}}function tg(r,s,a){var h=s.pendingProps,d=rt.current,g=!1,w=(s.flags&128)!==0,A;if((A=w)||(A=r!==null&&r.memoizedState===null?!1:(d&2)!==0),A?(g=!0,s.flags&=-129):(r===null||r.memoizedState!==null)&&(d|=1),Qe(rt,d&1),r===null)return Ch(s),r=s.memoizedState,r!==null&&(r=r.dehydrated,r!==null)?(s.mode&1?r.data==="$!"?s.lanes=8:s.lanes=1073741824:s.lanes=1,null):(w=h.children,r=h.fallback,g?(h=s.mode,g=s.child,w={mode:"hidden",children:w},!(h&1)&&g!==null?(g.childLanes=0,g.pendingProps=w):g=Cu(w,h,0,null),r=ss(r,h,a,null),g.return=s,r.return=s,g.sibling=r,s.child=g,s.child.memoizedState=ed(a),s.memoizedState=Zh,r):td(s,w));if(d=r.memoizedState,d!==null&&(A=d.dehydrated,A!==null))return tE(r,s,w,h,A,d,a);if(g){g=h.fallback,w=s.mode,d=r.child,A=d.sibling;var P={mode:"hidden",children:h.children};return!(w&1)&&s.child!==d?(h=s.child,h.childLanes=0,h.pendingProps=P,s.deletions=null):(h=fi(d,P),h.subtreeFlags=d.subtreeFlags&14680064),A!==null?g=fi(A,g):(g=ss(g,w,a,null),g.flags|=2),g.return=s,h.return=s,h.sibling=g,s.child=h,h=g,g=s.child,w=r.child.memoizedState,w=w===null?ed(a):{baseLanes:w.baseLanes|a,cachePool:null,transitions:w.transitions},g.memoizedState=w,g.childLanes=r.childLanes&~a,s.memoizedState=Zh,h}return g=r.child,r=g.sibling,h=fi(g,{mode:"visible",children:h.children}),!(s.mode&1)&&(h.lanes=a),h.return=s,h.sibling=null,r!==null&&(a=s.deletions,a===null?(s.deletions=[r],s.flags|=16):a.push(r)),s.child=h,s.memoizedState=null,h}function td(r,s){return s=Cu({mode:"visible",children:s},r.mode,0,null),s.return=r,r.child=s}function pu(r,s,a,h){return h!==null&&kh(h),io(s,r.child,null,a),r=td(s,s.pendingProps.children),r.flags|=2,s.memoizedState=null,r}function tE(r,s,a,h,d,g,w){if(a)return s.flags&256?(s.flags&=-257,h=Qh(Error(t(422))),pu(r,s,w,h)):s.memoizedState!==null?(s.child=r.child,s.flags|=128,null):(g=h.fallback,d=s.mode,h=Cu({mode:"visible",children:h.children},d,0,null),g=ss(g,d,w,null),g.flags|=2,h.return=s,g.return=s,h.sibling=g,s.child=h,s.mode&1&&io(s,r.child,null,w),s.child.memoizedState=ed(w),s.memoizedState=Zh,g);if(!(s.mode&1))return pu(r,s,w,null);if(d.data==="$!"){if(h=d.nextSibling&&d.nextSibling.dataset,h)var A=h.dgst;return h=A,g=Error(t(419)),h=Qh(g,h,void 0),pu(r,s,w,h)}if(A=(w&r.childLanes)!==0,tn||A){if(h=Rt,h!==null){switch(w&-w){case 4:d=2;break;case 16:d=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:d=32;break;case 536870912:d=268435456;break;default:d=0}d=d&(h.suspendedLanes|w)?0:d,d!==0&&d!==g.retryLane&&(g.retryLane=d,Rr(r,d),qn(h,r,d,-1))}return yd(),h=Qh(Error(t(421))),pu(r,s,w,h)}return d.data==="$?"?(s.flags|=128,s.child=r.child,s=pE.bind(null,r),d._reactRetry=s,null):(r=g.treeContext,mn=ni(d.nextSibling),pn=s,tt=!0,jn=null,r!==null&&(In[Sn++]=Sr,In[Sn++]=Ar,In[Sn++]=Xi,Sr=r.id,Ar=r.overflow,Xi=s),s=td(s,h.children),s.flags|=4096,s)}function ng(r,s,a){r.lanes|=s;var h=r.alternate;h!==null&&(h.lanes|=s),bh(r.return,s,a)}function nd(r,s,a,h,d){var g=r.memoizedState;g===null?r.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:h,tail:a,tailMode:d}:(g.isBackwards=s,g.rendering=null,g.renderingStartTime=0,g.last=h,g.tail=a,g.tailMode=d)}function rg(r,s,a){var h=s.pendingProps,d=h.revealOrder,g=h.tail;if(Gt(r,s,h.children,a),h=rt.current,h&2)h=h&1|2,s.flags|=128;else{if(r!==null&&r.flags&128)e:for(r=s.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&ng(r,a,s);else if(r.tag===19)ng(r,a,s);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break e;for(;r.sibling===null;){if(r.return===null||r.return===s)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}h&=1}if(Qe(rt,h),!(s.mode&1))s.memoizedState=null;else switch(d){case"forwards":for(a=s.child,d=null;a!==null;)r=a.alternate,r!==null&&au(r)===null&&(d=a),a=a.sibling;a=d,a===null?(d=s.child,s.child=null):(d=a.sibling,a.sibling=null),nd(s,!1,d,a,g);break;case"backwards":for(a=null,d=s.child,s.child=null;d!==null;){if(r=d.alternate,r!==null&&au(r)===null){s.child=d;break}r=d.sibling,d.sibling=a,a=d,d=r}nd(s,!0,a,null,g);break;case"together":nd(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function mu(r,s){!(s.mode&1)&&r!==null&&(r.alternate=null,s.alternate=null,s.flags|=2)}function kr(r,s,a){if(r!==null&&(s.dependencies=r.dependencies),ts|=s.lanes,!(a&s.childLanes))return null;if(r!==null&&s.child!==r.child)throw Error(t(153));if(s.child!==null){for(r=s.child,a=fi(r,r.pendingProps),s.child=a,a.return=s;r.sibling!==null;)r=r.sibling,a=a.sibling=fi(r,r.pendingProps),a.return=s;a.sibling=null}return s.child}function nE(r,s,a){switch(s.tag){case 3:Zm(s),ro();break;case 5:ym(s);break;case 1:en(s.type)&&Yl(s);break;case 4:Lh(s,s.stateNode.containerInfo);break;case 10:var h=s.type._context,d=s.memoizedProps.value;Qe(ru,h._currentValue),h._currentValue=d;break;case 13:if(h=s.memoizedState,h!==null)return h.dehydrated!==null?(Qe(rt,rt.current&1),s.flags|=128,null):a&s.child.childLanes?tg(r,s,a):(Qe(rt,rt.current&1),r=kr(r,s,a),r!==null?r.sibling:null);Qe(rt,rt.current&1);break;case 19:if(h=(a&s.childLanes)!==0,r.flags&128){if(h)return rg(r,s,a);s.flags|=128}if(d=s.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),Qe(rt,rt.current),h)break;return null;case 22:case 23:return s.lanes=0,Xm(r,s,a)}return kr(r,s,a)}var ig,rd,sg,og;ig=function(r,s){for(var a=s.child;a!==null;){if(a.tag===5||a.tag===6)r.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},rd=function(){},sg=function(r,s,a,h){var d=r.memoizedProps;if(d!==h){r=s.stateNode,Zi(nr.current);var g=null;switch(a){case"input":d=bi(r,d),h=bi(r,h),g=[];break;case"select":d=oe({},d,{value:void 0}),h=oe({},h,{value:void 0}),g=[];break;case"textarea":d=Bo(r,d),h=Bo(r,h),g=[];break;default:typeof d.onClick!="function"&&typeof h.onClick=="function"&&(r.onclick=Gl)}Go(a,h);var w;a=null;for($ in d)if(!h.hasOwnProperty($)&&d.hasOwnProperty($)&&d[$]!=null)if($==="style"){var A=d[$];for(w in A)A.hasOwnProperty(w)&&(a||(a={}),a[w]="")}else $!=="dangerouslySetInnerHTML"&&$!=="children"&&$!=="suppressContentEditableWarning"&&$!=="suppressHydrationWarning"&&$!=="autoFocus"&&(o.hasOwnProperty($)?g||(g=[]):(g=g||[]).push($,null));for($ in h){var P=h[$];if(A=d!=null?d[$]:void 0,h.hasOwnProperty($)&&P!==A&&(P!=null||A!=null))if($==="style")if(A){for(w in A)!A.hasOwnProperty(w)||P&&P.hasOwnProperty(w)||(a||(a={}),a[w]="");for(w in P)P.hasOwnProperty(w)&&A[w]!==P[w]&&(a||(a={}),a[w]=P[w])}else a||(g||(g=[]),g.push($,a)),a=P;else $==="dangerouslySetInnerHTML"?(P=P?P.__html:void 0,A=A?A.__html:void 0,P!=null&&A!==P&&(g=g||[]).push($,P)):$==="children"?typeof P!="string"&&typeof P!="number"||(g=g||[]).push($,""+P):$!=="suppressContentEditableWarning"&&$!=="suppressHydrationWarning"&&(o.hasOwnProperty($)?(P!=null&&$==="onScroll"&&Ye("scroll",r),g||A===P||(g=[])):(g=g||[]).push($,P))}a&&(g=g||[]).push("style",a);var $=g;(s.updateQueue=$)&&(s.flags|=4)}},og=function(r,s,a,h){a!==h&&(s.flags|=4)};function ka(r,s){if(!tt)switch(r.tailMode){case"hidden":s=r.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?r.tail=null:a.sibling=null;break;case"collapsed":a=r.tail;for(var h=null;a!==null;)a.alternate!==null&&(h=a),a=a.sibling;h===null?s||r.tail===null?r.tail=null:r.tail.sibling=null:h.sibling=null}}function Ut(r){var s=r.alternate!==null&&r.alternate.child===r.child,a=0,h=0;if(s)for(var d=r.child;d!==null;)a|=d.lanes|d.childLanes,h|=d.subtreeFlags&14680064,h|=d.flags&14680064,d.return=r,d=d.sibling;else for(d=r.child;d!==null;)a|=d.lanes|d.childLanes,h|=d.subtreeFlags,h|=d.flags,d.return=r,d=d.sibling;return r.subtreeFlags|=h,r.childLanes=a,s}function rE(r,s,a){var h=s.pendingProps;switch(Ah(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ut(s),null;case 1:return en(s.type)&&Xl(),Ut(s),null;case 3:return h=s.stateNode,ao(),Je(Zt),Je(Mt),Fh(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(r===null||r.child===null)&&(tu(s)?s.flags|=4:r===null||r.memoizedState.isDehydrated&&!(s.flags&256)||(s.flags|=1024,jn!==null&&(pd(jn),jn=null))),rd(r,s),Ut(s),null;case 5:Vh(s);var d=Zi(Ia.current);if(a=s.type,r!==null&&s.stateNode!=null)sg(r,s,a,h,d),r.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!h){if(s.stateNode===null)throw Error(t(166));return Ut(s),null}if(r=Zi(nr.current),tu(s)){h=s.stateNode,a=s.type;var g=s.memoizedProps;switch(h[tr]=s,h[_a]=g,r=(s.mode&1)!==0,a){case"dialog":Ye("cancel",h),Ye("close",h);break;case"iframe":case"object":case"embed":Ye("load",h);break;case"video":case"audio":for(d=0;d<ma.length;d++)Ye(ma[d],h);break;case"source":Ye("error",h);break;case"img":case"image":case"link":Ye("error",h),Ye("load",h);break;case"details":Ye("toggle",h);break;case"input":Ts(h,g),Ye("invalid",h);break;case"select":h._wrapperState={wasMultiple:!!g.multiple},Ye("invalid",h);break;case"textarea":Ss(h,g),Ye("invalid",h)}Go(a,g),d=null;for(var w in g)if(g.hasOwnProperty(w)){var A=g[w];w==="children"?typeof A=="string"?h.textContent!==A&&(g.suppressHydrationWarning!==!0&&Kl(h.textContent,A,r),d=["children",A]):typeof A=="number"&&h.textContent!==""+A&&(g.suppressHydrationWarning!==!0&&Kl(h.textContent,A,r),d=["children",""+A]):o.hasOwnProperty(w)&&A!=null&&w==="onScroll"&&Ye("scroll",h)}switch(a){case"input":dr(h),vl(h,g,!0);break;case"textarea":dr(h),$o(h);break;case"select":case"option":break;default:typeof g.onClick=="function"&&(h.onclick=Gl)}h=d,s.updateQueue=h,h!==null&&(s.flags|=4)}else{w=d.nodeType===9?d:d.ownerDocument,r==="http://www.w3.org/1999/xhtml"&&(r=gt(a)),r==="http://www.w3.org/1999/xhtml"?a==="script"?(r=w.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild)):typeof h.is=="string"?r=w.createElement(a,{is:h.is}):(r=w.createElement(a),a==="select"&&(w=r,h.multiple?w.multiple=!0:h.size&&(w.size=h.size))):r=w.createElementNS(r,a),r[tr]=s,r[_a]=h,ig(r,s,!1,!1),s.stateNode=r;e:{switch(w=Qo(a,h),a){case"dialog":Ye("cancel",r),Ye("close",r),d=h;break;case"iframe":case"object":case"embed":Ye("load",r),d=h;break;case"video":case"audio":for(d=0;d<ma.length;d++)Ye(ma[d],r);d=h;break;case"source":Ye("error",r),d=h;break;case"img":case"image":case"link":Ye("error",r),Ye("load",r),d=h;break;case"details":Ye("toggle",r),d=h;break;case"input":Ts(r,h),d=bi(r,h),Ye("invalid",r);break;case"option":d=h;break;case"select":r._wrapperState={wasMultiple:!!h.multiple},d=oe({},h,{value:void 0}),Ye("invalid",r);break;case"textarea":Ss(r,h),d=Bo(r,h),Ye("invalid",r);break;default:d=h}Go(a,d),A=d;for(g in A)if(A.hasOwnProperty(g)){var P=A[g];g==="style"?Wo(r,P):g==="dangerouslySetInnerHTML"?(P=P?P.__html:void 0,P!=null&&qo(r,P)):g==="children"?typeof P=="string"?(a!=="textarea"||P!=="")&&Hr(r,P):typeof P=="number"&&Hr(r,""+P):g!=="suppressContentEditableWarning"&&g!=="suppressHydrationWarning"&&g!=="autoFocus"&&(o.hasOwnProperty(g)?P!=null&&g==="onScroll"&&Ye("scroll",r):P!=null&&X(r,g,P,w))}switch(a){case"input":dr(r),vl(r,h,!1);break;case"textarea":dr(r),$o(r);break;case"option":h.value!=null&&r.setAttribute("value",""+$e(h.value));break;case"select":r.multiple=!!h.multiple,g=h.value,g!=null?pr(r,!!h.multiple,g,!1):h.defaultValue!=null&&pr(r,!!h.multiple,h.defaultValue,!0);break;default:typeof d.onClick=="function"&&(r.onclick=Gl)}switch(a){case"button":case"input":case"select":case"textarea":h=!!h.autoFocus;break e;case"img":h=!0;break e;default:h=!1}}h&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return Ut(s),null;case 6:if(r&&s.stateNode!=null)og(r,s,r.memoizedProps,h);else{if(typeof h!="string"&&s.stateNode===null)throw Error(t(166));if(a=Zi(Ia.current),Zi(nr.current),tu(s)){if(h=s.stateNode,a=s.memoizedProps,h[tr]=s,(g=h.nodeValue!==a)&&(r=pn,r!==null))switch(r.tag){case 3:Kl(h.nodeValue,a,(r.mode&1)!==0);break;case 5:r.memoizedProps.suppressHydrationWarning!==!0&&Kl(h.nodeValue,a,(r.mode&1)!==0)}g&&(s.flags|=4)}else h=(a.nodeType===9?a:a.ownerDocument).createTextNode(h),h[tr]=s,s.stateNode=h}return Ut(s),null;case 13:if(Je(rt),h=s.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(tt&&mn!==null&&s.mode&1&&!(s.flags&128))um(),ro(),s.flags|=98560,g=!1;else if(g=tu(s),h!==null&&h.dehydrated!==null){if(r===null){if(!g)throw Error(t(318));if(g=s.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(t(317));g[tr]=s}else ro(),!(s.flags&128)&&(s.memoizedState=null),s.flags|=4;Ut(s),g=!1}else jn!==null&&(pd(jn),jn=null),g=!0;if(!g)return s.flags&65536?s:null}return s.flags&128?(s.lanes=a,s):(h=h!==null,h!==(r!==null&&r.memoizedState!==null)&&h&&(s.child.flags|=8192,s.mode&1&&(r===null||rt.current&1?wt===0&&(wt=3):yd())),s.updateQueue!==null&&(s.flags|=4),Ut(s),null);case 4:return ao(),rd(r,s),r===null&&ga(s.stateNode.containerInfo),Ut(s),null;case 10:return Nh(s.type._context),Ut(s),null;case 17:return en(s.type)&&Xl(),Ut(s),null;case 19:if(Je(rt),g=s.memoizedState,g===null)return Ut(s),null;if(h=(s.flags&128)!==0,w=g.rendering,w===null)if(h)ka(g,!1);else{if(wt!==0||r!==null&&r.flags&128)for(r=s.child;r!==null;){if(w=au(r),w!==null){for(s.flags|=128,ka(g,!1),h=w.updateQueue,h!==null&&(s.updateQueue=h,s.flags|=4),s.subtreeFlags=0,h=a,a=s.child;a!==null;)g=a,r=h,g.flags&=14680066,w=g.alternate,w===null?(g.childLanes=0,g.lanes=r,g.child=null,g.subtreeFlags=0,g.memoizedProps=null,g.memoizedState=null,g.updateQueue=null,g.dependencies=null,g.stateNode=null):(g.childLanes=w.childLanes,g.lanes=w.lanes,g.child=w.child,g.subtreeFlags=0,g.deletions=null,g.memoizedProps=w.memoizedProps,g.memoizedState=w.memoizedState,g.updateQueue=w.updateQueue,g.type=w.type,r=w.dependencies,g.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),a=a.sibling;return Qe(rt,rt.current&1|2),s.child}r=r.sibling}g.tail!==null&&Ge()>ho&&(s.flags|=128,h=!0,ka(g,!1),s.lanes=4194304)}else{if(!h)if(r=au(w),r!==null){if(s.flags|=128,h=!0,a=r.updateQueue,a!==null&&(s.updateQueue=a,s.flags|=4),ka(g,!0),g.tail===null&&g.tailMode==="hidden"&&!w.alternate&&!tt)return Ut(s),null}else 2*Ge()-g.renderingStartTime>ho&&a!==1073741824&&(s.flags|=128,h=!0,ka(g,!1),s.lanes=4194304);g.isBackwards?(w.sibling=s.child,s.child=w):(a=g.last,a!==null?a.sibling=w:s.child=w,g.last=w)}return g.tail!==null?(s=g.tail,g.rendering=s,g.tail=s.sibling,g.renderingStartTime=Ge(),s.sibling=null,a=rt.current,Qe(rt,h?a&1|2:a&1),s):(Ut(s),null);case 22:case 23:return gd(),h=s.memoizedState!==null,r!==null&&r.memoizedState!==null!==h&&(s.flags|=8192),h&&s.mode&1?gn&1073741824&&(Ut(s),s.subtreeFlags&6&&(s.flags|=8192)):Ut(s),null;case 24:return null;case 25:return null}throw Error(t(156,s.tag))}function iE(r,s){switch(Ah(s),s.tag){case 1:return en(s.type)&&Xl(),r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 3:return ao(),Je(Zt),Je(Mt),Fh(),r=s.flags,r&65536&&!(r&128)?(s.flags=r&-65537|128,s):null;case 5:return Vh(s),null;case 13:if(Je(rt),r=s.memoizedState,r!==null&&r.dehydrated!==null){if(s.alternate===null)throw Error(t(340));ro()}return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 19:return Je(rt),null;case 4:return ao(),null;case 10:return Nh(s.type._context),null;case 22:case 23:return gd(),null;case 24:return null;default:return null}}var gu=!1,jt=!1,sE=typeof WeakSet=="function"?WeakSet:Set,ue=null;function uo(r,s){var a=r.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(h){ot(r,s,h)}else a.current=null}function id(r,s,a){try{a()}catch(h){ot(r,s,h)}}var ag=!1;function oE(r,s){if(gh=Zr,r=Up(),lh(r)){if("selectionStart"in r)var a={start:r.selectionStart,end:r.selectionEnd};else e:{a=(a=r.ownerDocument)&&a.defaultView||window;var h=a.getSelection&&a.getSelection();if(h&&h.rangeCount!==0){a=h.anchorNode;var d=h.anchorOffset,g=h.focusNode;h=h.focusOffset;try{a.nodeType,g.nodeType}catch{a=null;break e}var w=0,A=-1,P=-1,$=0,J=0,Z=r,Y=null;t:for(;;){for(var se;Z!==a||d!==0&&Z.nodeType!==3||(A=w+d),Z!==g||h!==0&&Z.nodeType!==3||(P=w+h),Z.nodeType===3&&(w+=Z.nodeValue.length),(se=Z.firstChild)!==null;)Y=Z,Z=se;for(;;){if(Z===r)break t;if(Y===a&&++$===d&&(A=w),Y===g&&++J===h&&(P=w),(se=Z.nextSibling)!==null)break;Z=Y,Y=Z.parentNode}Z=se}a=A===-1||P===-1?null:{start:A,end:P}}else a=null}a=a||{start:0,end:0}}else a=null;for(yh={focusedElem:r,selectionRange:a},Zr=!1,ue=s;ue!==null;)if(s=ue,r=s.child,(s.subtreeFlags&1028)!==0&&r!==null)r.return=s,ue=r;else for(;ue!==null;){s=ue;try{var ce=s.alternate;if(s.flags&1024)switch(s.tag){case 0:case 11:case 15:break;case 1:if(ce!==null){var de=ce.memoizedProps,lt=ce.memoizedState,U=s.stateNode,N=U.getSnapshotBeforeUpdate(s.elementType===s.type?de:zn(s.type,de),lt);U.__reactInternalSnapshotBeforeUpdate=N}break;case 3:var z=s.stateNode.containerInfo;z.nodeType===1?z.textContent="":z.nodeType===9&&z.documentElement&&z.removeChild(z.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(te){ot(s,s.return,te)}if(r=s.sibling,r!==null){r.return=s.return,ue=r;break}ue=s.return}return ce=ag,ag=!1,ce}function Pa(r,s,a){var h=s.updateQueue;if(h=h!==null?h.lastEffect:null,h!==null){var d=h=h.next;do{if((d.tag&r)===r){var g=d.destroy;d.destroy=void 0,g!==void 0&&id(s,a,g)}d=d.next}while(d!==h)}}function yu(r,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var a=s=s.next;do{if((a.tag&r)===r){var h=a.create;a.destroy=h()}a=a.next}while(a!==s)}}function sd(r){var s=r.ref;if(s!==null){var a=r.stateNode;switch(r.tag){case 5:r=a;break;default:r=a}typeof s=="function"?s(r):s.current=r}}function lg(r){var s=r.alternate;s!==null&&(r.alternate=null,lg(s)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(s=r.stateNode,s!==null&&(delete s[tr],delete s[_a],delete s[Eh],delete s[Bw],delete s[$w])),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}function ug(r){return r.tag===5||r.tag===3||r.tag===4}function cg(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||ug(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function od(r,s,a){var h=r.tag;if(h===5||h===6)r=r.stateNode,s?a.nodeType===8?a.parentNode.insertBefore(r,s):a.insertBefore(r,s):(a.nodeType===8?(s=a.parentNode,s.insertBefore(r,a)):(s=a,s.appendChild(r)),a=a._reactRootContainer,a!=null||s.onclick!==null||(s.onclick=Gl));else if(h!==4&&(r=r.child,r!==null))for(od(r,s,a),r=r.sibling;r!==null;)od(r,s,a),r=r.sibling}function ad(r,s,a){var h=r.tag;if(h===5||h===6)r=r.stateNode,s?a.insertBefore(r,s):a.appendChild(r);else if(h!==4&&(r=r.child,r!==null))for(ad(r,s,a),r=r.sibling;r!==null;)ad(r,s,a),r=r.sibling}var bt=null,Bn=!1;function li(r,s,a){for(a=a.child;a!==null;)hg(r,s,a),a=a.sibling}function hg(r,s,a){if(cn&&typeof cn.onCommitFiberUnmount=="function")try{cn.onCommitFiberUnmount(zi,a)}catch{}switch(a.tag){case 5:jt||uo(a,s);case 6:var h=bt,d=Bn;bt=null,li(r,s,a),bt=h,Bn=d,bt!==null&&(Bn?(r=bt,a=a.stateNode,r.nodeType===8?r.parentNode.removeChild(a):r.removeChild(a)):bt.removeChild(a.stateNode));break;case 18:bt!==null&&(Bn?(r=bt,a=a.stateNode,r.nodeType===8?wh(r.parentNode,a):r.nodeType===1&&wh(r,a),Mn(r)):wh(bt,a.stateNode));break;case 4:h=bt,d=Bn,bt=a.stateNode.containerInfo,Bn=!0,li(r,s,a),bt=h,Bn=d;break;case 0:case 11:case 14:case 15:if(!jt&&(h=a.updateQueue,h!==null&&(h=h.lastEffect,h!==null))){d=h=h.next;do{var g=d,w=g.destroy;g=g.tag,w!==void 0&&(g&2||g&4)&&id(a,s,w),d=d.next}while(d!==h)}li(r,s,a);break;case 1:if(!jt&&(uo(a,s),h=a.stateNode,typeof h.componentWillUnmount=="function"))try{h.props=a.memoizedProps,h.state=a.memoizedState,h.componentWillUnmount()}catch(A){ot(a,s,A)}li(r,s,a);break;case 21:li(r,s,a);break;case 22:a.mode&1?(jt=(h=jt)||a.memoizedState!==null,li(r,s,a),jt=h):li(r,s,a);break;default:li(r,s,a)}}function dg(r){var s=r.updateQueue;if(s!==null){r.updateQueue=null;var a=r.stateNode;a===null&&(a=r.stateNode=new sE),s.forEach(function(h){var d=mE.bind(null,r,h);a.has(h)||(a.add(h),h.then(d,d))})}}function $n(r,s){var a=s.deletions;if(a!==null)for(var h=0;h<a.length;h++){var d=a[h];try{var g=r,w=s,A=w;e:for(;A!==null;){switch(A.tag){case 5:bt=A.stateNode,Bn=!1;break e;case 3:bt=A.stateNode.containerInfo,Bn=!0;break e;case 4:bt=A.stateNode.containerInfo,Bn=!0;break e}A=A.return}if(bt===null)throw Error(t(160));hg(g,w,d),bt=null,Bn=!1;var P=d.alternate;P!==null&&(P.return=null),d.return=null}catch($){ot(d,s,$)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)fg(s,r),s=s.sibling}function fg(r,s){var a=r.alternate,h=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:if($n(s,r),ir(r),h&4){try{Pa(3,r,r.return),yu(3,r)}catch(de){ot(r,r.return,de)}try{Pa(5,r,r.return)}catch(de){ot(r,r.return,de)}}break;case 1:$n(s,r),ir(r),h&512&&a!==null&&uo(a,a.return);break;case 5:if($n(s,r),ir(r),h&512&&a!==null&&uo(a,a.return),r.flags&32){var d=r.stateNode;try{Hr(d,"")}catch(de){ot(r,r.return,de)}}if(h&4&&(d=r.stateNode,d!=null)){var g=r.memoizedProps,w=a!==null?a.memoizedProps:g,A=r.type,P=r.updateQueue;if(r.updateQueue=null,P!==null)try{A==="input"&&g.type==="radio"&&g.name!=null&&jo(d,g),Qo(A,w);var $=Qo(A,g);for(w=0;w<P.length;w+=2){var J=P[w],Z=P[w+1];J==="style"?Wo(d,Z):J==="dangerouslySetInnerHTML"?qo(d,Z):J==="children"?Hr(d,Z):X(d,J,Z,$)}switch(A){case"input":zo(d,g);break;case"textarea":As(d,g);break;case"select":var Y=d._wrapperState.wasMultiple;d._wrapperState.wasMultiple=!!g.multiple;var se=g.value;se!=null?pr(d,!!g.multiple,se,!1):Y!==!!g.multiple&&(g.defaultValue!=null?pr(d,!!g.multiple,g.defaultValue,!0):pr(d,!!g.multiple,g.multiple?[]:"",!1))}d[_a]=g}catch(de){ot(r,r.return,de)}}break;case 6:if($n(s,r),ir(r),h&4){if(r.stateNode===null)throw Error(t(162));d=r.stateNode,g=r.memoizedProps;try{d.nodeValue=g}catch(de){ot(r,r.return,de)}}break;case 3:if($n(s,r),ir(r),h&4&&a!==null&&a.memoizedState.isDehydrated)try{Mn(s.containerInfo)}catch(de){ot(r,r.return,de)}break;case 4:$n(s,r),ir(r);break;case 13:$n(s,r),ir(r),d=r.child,d.flags&8192&&(g=d.memoizedState!==null,d.stateNode.isHidden=g,!g||d.alternate!==null&&d.alternate.memoizedState!==null||(cd=Ge())),h&4&&dg(r);break;case 22:if(J=a!==null&&a.memoizedState!==null,r.mode&1?(jt=($=jt)||J,$n(s,r),jt=$):$n(s,r),ir(r),h&8192){if($=r.memoizedState!==null,(r.stateNode.isHidden=$)&&!J&&r.mode&1)for(ue=r,J=r.child;J!==null;){for(Z=ue=J;ue!==null;){switch(Y=ue,se=Y.child,Y.tag){case 0:case 11:case 14:case 15:Pa(4,Y,Y.return);break;case 1:uo(Y,Y.return);var ce=Y.stateNode;if(typeof ce.componentWillUnmount=="function"){h=Y,a=Y.return;try{s=h,ce.props=s.memoizedProps,ce.state=s.memoizedState,ce.componentWillUnmount()}catch(de){ot(h,a,de)}}break;case 5:uo(Y,Y.return);break;case 22:if(Y.memoizedState!==null){gg(Z);continue}}se!==null?(se.return=Y,ue=se):gg(Z)}J=J.sibling}e:for(J=null,Z=r;;){if(Z.tag===5){if(J===null){J=Z;try{d=Z.stateNode,$?(g=d.style,typeof g.setProperty=="function"?g.setProperty("display","none","important"):g.display="none"):(A=Z.stateNode,P=Z.memoizedProps.style,w=P!=null&&P.hasOwnProperty("display")?P.display:null,A.style.display=Ho("display",w))}catch(de){ot(r,r.return,de)}}}else if(Z.tag===6){if(J===null)try{Z.stateNode.nodeValue=$?"":Z.memoizedProps}catch(de){ot(r,r.return,de)}}else if((Z.tag!==22&&Z.tag!==23||Z.memoizedState===null||Z===r)&&Z.child!==null){Z.child.return=Z,Z=Z.child;continue}if(Z===r)break e;for(;Z.sibling===null;){if(Z.return===null||Z.return===r)break e;J===Z&&(J=null),Z=Z.return}J===Z&&(J=null),Z.sibling.return=Z.return,Z=Z.sibling}}break;case 19:$n(s,r),ir(r),h&4&&dg(r);break;case 21:break;default:$n(s,r),ir(r)}}function ir(r){var s=r.flags;if(s&2){try{e:{for(var a=r.return;a!==null;){if(ug(a)){var h=a;break e}a=a.return}throw Error(t(160))}switch(h.tag){case 5:var d=h.stateNode;h.flags&32&&(Hr(d,""),h.flags&=-33);var g=cg(r);ad(r,g,d);break;case 3:case 4:var w=h.stateNode.containerInfo,A=cg(r);od(r,A,w);break;default:throw Error(t(161))}}catch(P){ot(r,r.return,P)}r.flags&=-3}s&4096&&(r.flags&=-4097)}function aE(r,s,a){ue=r,pg(r)}function pg(r,s,a){for(var h=(r.mode&1)!==0;ue!==null;){var d=ue,g=d.child;if(d.tag===22&&h){var w=d.memoizedState!==null||gu;if(!w){var A=d.alternate,P=A!==null&&A.memoizedState!==null||jt;A=gu;var $=jt;if(gu=w,(jt=P)&&!$)for(ue=d;ue!==null;)w=ue,P=w.child,w.tag===22&&w.memoizedState!==null?yg(d):P!==null?(P.return=w,ue=P):yg(d);for(;g!==null;)ue=g,pg(g),g=g.sibling;ue=d,gu=A,jt=$}mg(r)}else d.subtreeFlags&8772&&g!==null?(g.return=d,ue=g):mg(r)}}function mg(r){for(;ue!==null;){var s=ue;if(s.flags&8772){var a=s.alternate;try{if(s.flags&8772)switch(s.tag){case 0:case 11:case 15:jt||yu(5,s);break;case 1:var h=s.stateNode;if(s.flags&4&&!jt)if(a===null)h.componentDidMount();else{var d=s.elementType===s.type?a.memoizedProps:zn(s.type,a.memoizedProps);h.componentDidUpdate(d,a.memoizedState,h.__reactInternalSnapshotBeforeUpdate)}var g=s.updateQueue;g!==null&&gm(s,g,h);break;case 3:var w=s.updateQueue;if(w!==null){if(a=null,s.child!==null)switch(s.child.tag){case 5:a=s.child.stateNode;break;case 1:a=s.child.stateNode}gm(s,w,a)}break;case 5:var A=s.stateNode;if(a===null&&s.flags&4){a=A;var P=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":P.autoFocus&&a.focus();break;case"img":P.src&&(a.src=P.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var $=s.alternate;if($!==null){var J=$.memoizedState;if(J!==null){var Z=J.dehydrated;Z!==null&&Mn(Z)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}jt||s.flags&512&&sd(s)}catch(Y){ot(s,s.return,Y)}}if(s===r){ue=null;break}if(a=s.sibling,a!==null){a.return=s.return,ue=a;break}ue=s.return}}function gg(r){for(;ue!==null;){var s=ue;if(s===r){ue=null;break}var a=s.sibling;if(a!==null){a.return=s.return,ue=a;break}ue=s.return}}function yg(r){for(;ue!==null;){var s=ue;try{switch(s.tag){case 0:case 11:case 15:var a=s.return;try{yu(4,s)}catch(P){ot(s,a,P)}break;case 1:var h=s.stateNode;if(typeof h.componentDidMount=="function"){var d=s.return;try{h.componentDidMount()}catch(P){ot(s,d,P)}}var g=s.return;try{sd(s)}catch(P){ot(s,g,P)}break;case 5:var w=s.return;try{sd(s)}catch(P){ot(s,w,P)}}}catch(P){ot(s,s.return,P)}if(s===r){ue=null;break}var A=s.sibling;if(A!==null){A.return=s.return,ue=A;break}ue=s.return}}var lE=Math.ceil,_u=ne.ReactCurrentDispatcher,ld=ne.ReactCurrentOwner,Cn=ne.ReactCurrentBatchConfig,Fe=0,Rt=null,ht=null,Dt=0,gn=0,co=ri(0),wt=0,xa=null,ts=0,vu=0,ud=0,Na=null,nn=null,cd=0,ho=1/0,Pr=null,wu=!1,hd=null,ui=null,Eu=!1,ci=null,Tu=0,ba=0,dd=null,Iu=-1,Su=0;function Qt(){return Fe&6?Ge():Iu!==-1?Iu:Iu=Ge()}function hi(r){return r.mode&1?Fe&2&&Dt!==0?Dt&-Dt:Hw.transition!==null?(Su===0&&(Su=$i()),Su):(r=De,r!==0||(r=window.event,r=r===void 0?16:oa(r.type)),r):1}function qn(r,s,a,h){if(50<ba)throw ba=0,dd=null,Error(t(185));Qr(r,a,h),(!(Fe&2)||r!==Rt)&&(r===Rt&&(!(Fe&2)&&(vu|=a),wt===4&&di(r,Dt)),rn(r,h),a===1&&Fe===0&&!(s.mode&1)&&(ho=Ge()+500,Jl&&si()))}function rn(r,s){var a=r.callbackNode;yr(r,s);var h=Bi(r,r===Rt?Dt:0);if(h===0)a!==null&&ta(a),r.callbackNode=null,r.callbackPriority=0;else if(s=h&-h,r.callbackPriority!==s){if(a!=null&&ta(a),s===1)r.tag===0?qw(vg.bind(null,r)):im(vg.bind(null,r)),jw(function(){!(Fe&6)&&si()}),a=null;else{switch(Yr(h)){case 1:a=ji;break;case 4:a=Wr;break;case 16:a=wn;break;case 536870912:a=Sl;break;default:a=wn}a=Cg(a,_g.bind(null,r))}r.callbackPriority=s,r.callbackNode=a}}function _g(r,s){if(Iu=-1,Su=0,Fe&6)throw Error(t(327));var a=r.callbackNode;if(fo()&&r.callbackNode!==a)return null;var h=Bi(r,r===Rt?Dt:0);if(h===0)return null;if(h&30||h&r.expiredLanes||s)s=Au(r,h);else{s=h;var d=Fe;Fe|=2;var g=Eg();(Rt!==r||Dt!==s)&&(Pr=null,ho=Ge()+500,rs(r,s));do try{hE();break}catch(A){wg(r,A)}while(!0);xh(),_u.current=g,Fe=d,ht!==null?s=0:(Rt=null,Dt=0,s=wt)}if(s!==0){if(s===2&&(d=hn(r),d!==0&&(h=d,s=fd(r,d))),s===1)throw a=xa,rs(r,0),di(r,h),rn(r,Ge()),a;if(s===6)di(r,h);else{if(d=r.current.alternate,!(h&30)&&!uE(d)&&(s=Au(r,h),s===2&&(g=hn(r),g!==0&&(h=g,s=fd(r,g))),s===1))throw a=xa,rs(r,0),di(r,h),rn(r,Ge()),a;switch(r.finishedWork=d,r.finishedLanes=h,s){case 0:case 1:throw Error(t(345));case 2:is(r,nn,Pr);break;case 3:if(di(r,h),(h&130023424)===h&&(s=cd+500-Ge(),10<s)){if(Bi(r,0)!==0)break;if(d=r.suspendedLanes,(d&h)!==h){Qt(),r.pingedLanes|=r.suspendedLanes&d;break}r.timeoutHandle=vh(is.bind(null,r,nn,Pr),s);break}is(r,nn,Pr);break;case 4:if(di(r,h),(h&4194240)===h)break;for(s=r.eventTimes,d=-1;0<h;){var w=31-Wt(h);g=1<<w,w=s[w],w>d&&(d=w),h&=~g}if(h=d,h=Ge()-h,h=(120>h?120:480>h?480:1080>h?1080:1920>h?1920:3e3>h?3e3:4320>h?4320:1960*lE(h/1960))-h,10<h){r.timeoutHandle=vh(is.bind(null,r,nn,Pr),h);break}is(r,nn,Pr);break;case 5:is(r,nn,Pr);break;default:throw Error(t(329))}}}return rn(r,Ge()),r.callbackNode===a?_g.bind(null,r):null}function fd(r,s){var a=Na;return r.current.memoizedState.isDehydrated&&(rs(r,s).flags|=256),r=Au(r,s),r!==2&&(s=nn,nn=a,s!==null&&pd(s)),r}function pd(r){nn===null?nn=r:nn.push.apply(nn,r)}function uE(r){for(var s=r;;){if(s.flags&16384){var a=s.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var h=0;h<a.length;h++){var d=a[h],g=d.getSnapshot;d=d.value;try{if(!Un(g(),d))return!1}catch{return!1}}}if(a=s.child,s.subtreeFlags&16384&&a!==null)a.return=s,s=a;else{if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function di(r,s){for(s&=~ud,s&=~vu,r.suspendedLanes|=s,r.pingedLanes&=~s,r=r.expirationTimes;0<s;){var a=31-Wt(s),h=1<<a;r[a]=-1,s&=~h}}function vg(r){if(Fe&6)throw Error(t(327));fo();var s=Bi(r,0);if(!(s&1))return rn(r,Ge()),null;var a=Au(r,s);if(r.tag!==0&&a===2){var h=hn(r);h!==0&&(s=h,a=fd(r,h))}if(a===1)throw a=xa,rs(r,0),di(r,s),rn(r,Ge()),a;if(a===6)throw Error(t(345));return r.finishedWork=r.current.alternate,r.finishedLanes=s,is(r,nn,Pr),rn(r,Ge()),null}function md(r,s){var a=Fe;Fe|=1;try{return r(s)}finally{Fe=a,Fe===0&&(ho=Ge()+500,Jl&&si())}}function ns(r){ci!==null&&ci.tag===0&&!(Fe&6)&&fo();var s=Fe;Fe|=1;var a=Cn.transition,h=De;try{if(Cn.transition=null,De=1,r)return r()}finally{De=h,Cn.transition=a,Fe=s,!(Fe&6)&&si()}}function gd(){gn=co.current,Je(co)}function rs(r,s){r.finishedWork=null,r.finishedLanes=0;var a=r.timeoutHandle;if(a!==-1&&(r.timeoutHandle=-1,Uw(a)),ht!==null)for(a=ht.return;a!==null;){var h=a;switch(Ah(h),h.tag){case 1:h=h.type.childContextTypes,h!=null&&Xl();break;case 3:ao(),Je(Zt),Je(Mt),Fh();break;case 5:Vh(h);break;case 4:ao();break;case 13:Je(rt);break;case 19:Je(rt);break;case 10:Nh(h.type._context);break;case 22:case 23:gd()}a=a.return}if(Rt=r,ht=r=fi(r.current,null),Dt=gn=s,wt=0,xa=null,ud=vu=ts=0,nn=Na=null,Ji!==null){for(s=0;s<Ji.length;s++)if(a=Ji[s],h=a.interleaved,h!==null){a.interleaved=null;var d=h.next,g=a.pending;if(g!==null){var w=g.next;g.next=d,h.next=w}a.pending=h}Ji=null}return r}function wg(r,s){do{var a=ht;try{if(xh(),lu.current=du,uu){for(var h=it.memoizedState;h!==null;){var d=h.queue;d!==null&&(d.pending=null),h=h.next}uu=!1}if(es=0,At=vt=it=null,Sa=!1,Aa=0,ld.current=null,a===null||a.return===null){wt=1,xa=s,ht=null;break}e:{var g=r,w=a.return,A=a,P=s;if(s=Dt,A.flags|=32768,P!==null&&typeof P=="object"&&typeof P.then=="function"){var $=P,J=A,Z=J.tag;if(!(J.mode&1)&&(Z===0||Z===11||Z===15)){var Y=J.alternate;Y?(J.updateQueue=Y.updateQueue,J.memoizedState=Y.memoizedState,J.lanes=Y.lanes):(J.updateQueue=null,J.memoizedState=null)}var se=Hm(w);if(se!==null){se.flags&=-257,Wm(se,w,A,g,s),se.mode&1&&qm(g,$,s),s=se,P=$;var ce=s.updateQueue;if(ce===null){var de=new Set;de.add(P),s.updateQueue=de}else ce.add(P);break e}else{if(!(s&1)){qm(g,$,s),yd();break e}P=Error(t(426))}}else if(tt&&A.mode&1){var lt=Hm(w);if(lt!==null){!(lt.flags&65536)&&(lt.flags|=256),Wm(lt,w,A,g,s),kh(lo(P,A));break e}}g=P=lo(P,A),wt!==4&&(wt=2),Na===null?Na=[g]:Na.push(g),g=w;do{switch(g.tag){case 3:g.flags|=65536,s&=-s,g.lanes|=s;var U=Bm(g,P,s);mm(g,U);break e;case 1:A=P;var N=g.type,z=g.stateNode;if(!(g.flags&128)&&(typeof N.getDerivedStateFromError=="function"||z!==null&&typeof z.componentDidCatch=="function"&&(ui===null||!ui.has(z)))){g.flags|=65536,s&=-s,g.lanes|=s;var te=$m(g,A,s);mm(g,te);break e}}g=g.return}while(g!==null)}Ig(a)}catch(pe){s=pe,ht===a&&a!==null&&(ht=a=a.return);continue}break}while(!0)}function Eg(){var r=_u.current;return _u.current=du,r===null?du:r}function yd(){(wt===0||wt===3||wt===2)&&(wt=4),Rt===null||!(ts&268435455)&&!(vu&268435455)||di(Rt,Dt)}function Au(r,s){var a=Fe;Fe|=2;var h=Eg();(Rt!==r||Dt!==s)&&(Pr=null,rs(r,s));do try{cE();break}catch(d){wg(r,d)}while(!0);if(xh(),Fe=a,_u.current=h,ht!==null)throw Error(t(261));return Rt=null,Dt=0,wt}function cE(){for(;ht!==null;)Tg(ht)}function hE(){for(;ht!==null&&!Tl();)Tg(ht)}function Tg(r){var s=Rg(r.alternate,r,gn);r.memoizedProps=r.pendingProps,s===null?Ig(r):ht=s,ld.current=null}function Ig(r){var s=r;do{var a=s.alternate;if(r=s.return,s.flags&32768){if(a=iE(a,s),a!==null){a.flags&=32767,ht=a;return}if(r!==null)r.flags|=32768,r.subtreeFlags=0,r.deletions=null;else{wt=6,ht=null;return}}else if(a=rE(a,s,gn),a!==null){ht=a;return}if(s=s.sibling,s!==null){ht=s;return}ht=s=r}while(s!==null);wt===0&&(wt=5)}function is(r,s,a){var h=De,d=Cn.transition;try{Cn.transition=null,De=1,dE(r,s,a,h)}finally{Cn.transition=d,De=h}return null}function dE(r,s,a,h){do fo();while(ci!==null);if(Fe&6)throw Error(t(327));a=r.finishedWork;var d=r.finishedLanes;if(a===null)return null;if(r.finishedWork=null,r.finishedLanes=0,a===r.current)throw Error(t(177));r.callbackNode=null,r.callbackPriority=0;var g=a.lanes|a.childLanes;if(We(r,g),r===Rt&&(ht=Rt=null,Dt=0),!(a.subtreeFlags&2064)&&!(a.flags&2064)||Eu||(Eu=!0,Cg(wn,function(){return fo(),null})),g=(a.flags&15990)!==0,a.subtreeFlags&15990||g){g=Cn.transition,Cn.transition=null;var w=De;De=1;var A=Fe;Fe|=4,ld.current=null,oE(r,a),fg(a,r),bw(yh),Zr=!!gh,yh=gh=null,r.current=a,aE(a),eh(),Fe=A,De=w,Cn.transition=g}else r.current=a;if(Eu&&(Eu=!1,ci=r,Tu=d),g=r.pendingLanes,g===0&&(ui=null),Al(a.stateNode),rn(r,Ge()),s!==null)for(h=r.onRecoverableError,a=0;a<s.length;a++)d=s[a],h(d.value,{componentStack:d.stack,digest:d.digest});if(wu)throw wu=!1,r=hd,hd=null,r;return Tu&1&&r.tag!==0&&fo(),g=r.pendingLanes,g&1?r===dd?ba++:(ba=0,dd=r):ba=0,si(),null}function fo(){if(ci!==null){var r=Yr(Tu),s=Cn.transition,a=De;try{if(Cn.transition=null,De=16>r?16:r,ci===null)var h=!1;else{if(r=ci,ci=null,Tu=0,Fe&6)throw Error(t(331));var d=Fe;for(Fe|=4,ue=r.current;ue!==null;){var g=ue,w=g.child;if(ue.flags&16){var A=g.deletions;if(A!==null){for(var P=0;P<A.length;P++){var $=A[P];for(ue=$;ue!==null;){var J=ue;switch(J.tag){case 0:case 11:case 15:Pa(8,J,g)}var Z=J.child;if(Z!==null)Z.return=J,ue=Z;else for(;ue!==null;){J=ue;var Y=J.sibling,se=J.return;if(lg(J),J===$){ue=null;break}if(Y!==null){Y.return=se,ue=Y;break}ue=se}}}var ce=g.alternate;if(ce!==null){var de=ce.child;if(de!==null){ce.child=null;do{var lt=de.sibling;de.sibling=null,de=lt}while(de!==null)}}ue=g}}if(g.subtreeFlags&2064&&w!==null)w.return=g,ue=w;else e:for(;ue!==null;){if(g=ue,g.flags&2048)switch(g.tag){case 0:case 11:case 15:Pa(9,g,g.return)}var U=g.sibling;if(U!==null){U.return=g.return,ue=U;break e}ue=g.return}}var N=r.current;for(ue=N;ue!==null;){w=ue;var z=w.child;if(w.subtreeFlags&2064&&z!==null)z.return=w,ue=z;else e:for(w=N;ue!==null;){if(A=ue,A.flags&2048)try{switch(A.tag){case 0:case 11:case 15:yu(9,A)}}catch(pe){ot(A,A.return,pe)}if(A===w){ue=null;break e}var te=A.sibling;if(te!==null){te.return=A.return,ue=te;break e}ue=A.return}}if(Fe=d,si(),cn&&typeof cn.onPostCommitFiberRoot=="function")try{cn.onPostCommitFiberRoot(zi,r)}catch{}h=!0}return h}finally{De=a,Cn.transition=s}}return!1}function Sg(r,s,a){s=lo(a,s),s=Bm(r,s,1),r=ai(r,s,1),s=Qt(),r!==null&&(Qr(r,1,s),rn(r,s))}function ot(r,s,a){if(r.tag===3)Sg(r,r,a);else for(;s!==null;){if(s.tag===3){Sg(s,r,a);break}else if(s.tag===1){var h=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(ui===null||!ui.has(h))){r=lo(a,r),r=$m(s,r,1),s=ai(s,r,1),r=Qt(),s!==null&&(Qr(s,1,r),rn(s,r));break}}s=s.return}}function fE(r,s,a){var h=r.pingCache;h!==null&&h.delete(s),s=Qt(),r.pingedLanes|=r.suspendedLanes&a,Rt===r&&(Dt&a)===a&&(wt===4||wt===3&&(Dt&130023424)===Dt&&500>Ge()-cd?rs(r,0):ud|=a),rn(r,s)}function Ag(r,s){s===0&&(r.mode&1?(s=Ls,Ls<<=1,!(Ls&130023424)&&(Ls=4194304)):s=1);var a=Qt();r=Rr(r,s),r!==null&&(Qr(r,s,a),rn(r,a))}function pE(r){var s=r.memoizedState,a=0;s!==null&&(a=s.retryLane),Ag(r,a)}function mE(r,s){var a=0;switch(r.tag){case 13:var h=r.stateNode,d=r.memoizedState;d!==null&&(a=d.retryLane);break;case 19:h=r.stateNode;break;default:throw Error(t(314))}h!==null&&h.delete(s),Ag(r,a)}var Rg;Rg=function(r,s,a){if(r!==null)if(r.memoizedProps!==s.pendingProps||Zt.current)tn=!0;else{if(!(r.lanes&a)&&!(s.flags&128))return tn=!1,nE(r,s,a);tn=!!(r.flags&131072)}else tn=!1,tt&&s.flags&1048576&&sm(s,eu,s.index);switch(s.lanes=0,s.tag){case 2:var h=s.type;mu(r,s),r=s.pendingProps;var d=eo(s,Mt.current);oo(s,a),d=zh(null,s,h,r,d,a);var g=Bh();return s.flags|=1,typeof d=="object"&&d!==null&&typeof d.render=="function"&&d.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,en(h)?(g=!0,Yl(s)):g=!1,s.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,Oh(s),d.updater=fu,s.stateNode=d,d._reactInternals=s,Gh(s,h,r,a),s=Jh(null,s,h,!0,g,a)):(s.tag=0,tt&&g&&Sh(s),Gt(null,s,d,a),s=s.child),s;case 16:h=s.elementType;e:{switch(mu(r,s),r=s.pendingProps,d=h._init,h=d(h._payload),s.type=h,d=s.tag=yE(h),r=zn(h,r),d){case 0:s=Yh(null,s,h,r,a);break e;case 1:s=Jm(null,s,h,r,a);break e;case 11:s=Km(null,s,h,r,a);break e;case 14:s=Gm(null,s,h,zn(h.type,r),a);break e}throw Error(t(306,h,""))}return s;case 0:return h=s.type,d=s.pendingProps,d=s.elementType===h?d:zn(h,d),Yh(r,s,h,d,a);case 1:return h=s.type,d=s.pendingProps,d=s.elementType===h?d:zn(h,d),Jm(r,s,h,d,a);case 3:e:{if(Zm(s),r===null)throw Error(t(387));h=s.pendingProps,g=s.memoizedState,d=g.element,pm(r,s),ou(s,h,null,a);var w=s.memoizedState;if(h=w.element,g.isDehydrated)if(g={element:h,isDehydrated:!1,cache:w.cache,pendingSuspenseBoundaries:w.pendingSuspenseBoundaries,transitions:w.transitions},s.updateQueue.baseState=g,s.memoizedState=g,s.flags&256){d=lo(Error(t(423)),s),s=eg(r,s,h,a,d);break e}else if(h!==d){d=lo(Error(t(424)),s),s=eg(r,s,h,a,d);break e}else for(mn=ni(s.stateNode.containerInfo.firstChild),pn=s,tt=!0,jn=null,a=dm(s,null,h,a),s.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(ro(),h===d){s=kr(r,s,a);break e}Gt(r,s,h,a)}s=s.child}return s;case 5:return ym(s),r===null&&Ch(s),h=s.type,d=s.pendingProps,g=r!==null?r.memoizedProps:null,w=d.children,_h(h,d)?w=null:g!==null&&_h(h,g)&&(s.flags|=32),Ym(r,s),Gt(r,s,w,a),s.child;case 6:return r===null&&Ch(s),null;case 13:return tg(r,s,a);case 4:return Lh(s,s.stateNode.containerInfo),h=s.pendingProps,r===null?s.child=io(s,null,h,a):Gt(r,s,h,a),s.child;case 11:return h=s.type,d=s.pendingProps,d=s.elementType===h?d:zn(h,d),Km(r,s,h,d,a);case 7:return Gt(r,s,s.pendingProps,a),s.child;case 8:return Gt(r,s,s.pendingProps.children,a),s.child;case 12:return Gt(r,s,s.pendingProps.children,a),s.child;case 10:e:{if(h=s.type._context,d=s.pendingProps,g=s.memoizedProps,w=d.value,Qe(ru,h._currentValue),h._currentValue=w,g!==null)if(Un(g.value,w)){if(g.children===d.children&&!Zt.current){s=kr(r,s,a);break e}}else for(g=s.child,g!==null&&(g.return=s);g!==null;){var A=g.dependencies;if(A!==null){w=g.child;for(var P=A.firstContext;P!==null;){if(P.context===h){if(g.tag===1){P=Cr(-1,a&-a),P.tag=2;var $=g.updateQueue;if($!==null){$=$.shared;var J=$.pending;J===null?P.next=P:(P.next=J.next,J.next=P),$.pending=P}}g.lanes|=a,P=g.alternate,P!==null&&(P.lanes|=a),bh(g.return,a,s),A.lanes|=a;break}P=P.next}}else if(g.tag===10)w=g.type===s.type?null:g.child;else if(g.tag===18){if(w=g.return,w===null)throw Error(t(341));w.lanes|=a,A=w.alternate,A!==null&&(A.lanes|=a),bh(w,a,s),w=g.sibling}else w=g.child;if(w!==null)w.return=g;else for(w=g;w!==null;){if(w===s){w=null;break}if(g=w.sibling,g!==null){g.return=w.return,w=g;break}w=w.return}g=w}Gt(r,s,d.children,a),s=s.child}return s;case 9:return d=s.type,h=s.pendingProps.children,oo(s,a),d=An(d),h=h(d),s.flags|=1,Gt(r,s,h,a),s.child;case 14:return h=s.type,d=zn(h,s.pendingProps),d=zn(h.type,d),Gm(r,s,h,d,a);case 15:return Qm(r,s,s.type,s.pendingProps,a);case 17:return h=s.type,d=s.pendingProps,d=s.elementType===h?d:zn(h,d),mu(r,s),s.tag=1,en(h)?(r=!0,Yl(s)):r=!1,oo(s,a),jm(s,h,d),Gh(s,h,d,a),Jh(null,s,h,!0,r,a);case 19:return rg(r,s,a);case 22:return Xm(r,s,a)}throw Error(t(156,s.tag))};function Cg(r,s){return Ds(r,s)}function gE(r,s,a,h){this.tag=r,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function kn(r,s,a,h){return new gE(r,s,a,h)}function _d(r){return r=r.prototype,!(!r||!r.isReactComponent)}function yE(r){if(typeof r=="function")return _d(r)?1:0;if(r!=null){if(r=r.$$typeof,r===O)return 11;if(r===pt)return 14}return 2}function fi(r,s){var a=r.alternate;return a===null?(a=kn(r.tag,s,r.key,r.mode),a.elementType=r.elementType,a.type=r.type,a.stateNode=r.stateNode,a.alternate=r,r.alternate=a):(a.pendingProps=s,a.type=r.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=r.flags&14680064,a.childLanes=r.childLanes,a.lanes=r.lanes,a.child=r.child,a.memoizedProps=r.memoizedProps,a.memoizedState=r.memoizedState,a.updateQueue=r.updateQueue,s=r.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},a.sibling=r.sibling,a.index=r.index,a.ref=r.ref,a}function Ru(r,s,a,h,d,g){var w=2;if(h=r,typeof r=="function")_d(r)&&(w=1);else if(typeof r=="string")w=5;else e:switch(r){case k:return ss(a.children,d,g,s);case I:w=8,d|=8;break;case R:return r=kn(12,a,s,d|2),r.elementType=R,r.lanes=g,r;case C:return r=kn(13,a,s,d),r.elementType=C,r.lanes=g,r;case nt:return r=kn(19,a,s,d),r.elementType=nt,r.lanes=g,r;case je:return Cu(a,d,g,s);default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case x:w=10;break e;case b:w=9;break e;case O:w=11;break e;case pt:w=14;break e;case mt:w=16,h=null;break e}throw Error(t(130,r==null?r:typeof r,""))}return s=kn(w,a,s,d),s.elementType=r,s.type=h,s.lanes=g,s}function ss(r,s,a,h){return r=kn(7,r,h,s),r.lanes=a,r}function Cu(r,s,a,h){return r=kn(22,r,h,s),r.elementType=je,r.lanes=a,r.stateNode={isHidden:!1},r}function vd(r,s,a){return r=kn(6,r,null,s),r.lanes=a,r}function wd(r,s,a){return s=kn(4,r.children!==null?r.children:[],r.key,s),s.lanes=a,s.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},s}function _E(r,s,a,h,d){this.tag=s,this.containerInfo=r,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Gr(0),this.expirationTimes=Gr(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Gr(0),this.identifierPrefix=h,this.onRecoverableError=d,this.mutableSourceEagerHydrationData=null}function Ed(r,s,a,h,d,g,w,A,P){return r=new _E(r,s,a,A,P),s===1?(s=1,g===!0&&(s|=8)):s=0,g=kn(3,null,null,s),r.current=g,g.stateNode=r,g.memoizedState={element:h,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},Oh(g),r}function vE(r,s,a){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:fe,key:h==null?null:""+h,children:r,containerInfo:s,implementation:a}}function kg(r){if(!r)return ii;r=r._reactInternals;e:{if(bn(r)!==r||r.tag!==1)throw Error(t(170));var s=r;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(en(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(t(171))}if(r.tag===1){var a=r.type;if(en(a))return nm(r,a,s)}return s}function Pg(r,s,a,h,d,g,w,A,P){return r=Ed(a,h,!0,r,d,g,w,A,P),r.context=kg(null),a=r.current,h=Qt(),d=hi(a),g=Cr(h,d),g.callback=s??null,ai(a,g,d),r.current.lanes=d,Qr(r,d,h),rn(r,h),r}function ku(r,s,a,h){var d=s.current,g=Qt(),w=hi(d);return a=kg(a),s.context===null?s.context=a:s.pendingContext=a,s=Cr(g,w),s.payload={element:r},h=h===void 0?null:h,h!==null&&(s.callback=h),r=ai(d,s,w),r!==null&&(qn(r,d,w,g),su(r,d,w)),w}function Pu(r){if(r=r.current,!r.child)return null;switch(r.child.tag){case 5:return r.child.stateNode;default:return r.child.stateNode}}function xg(r,s){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var a=r.retryLane;r.retryLane=a!==0&&a<s?a:s}}function Td(r,s){xg(r,s),(r=r.alternate)&&xg(r,s)}function wE(){return null}var Ng=typeof reportError=="function"?reportError:function(r){console.error(r)};function Id(r){this._internalRoot=r}xu.prototype.render=Id.prototype.render=function(r){var s=this._internalRoot;if(s===null)throw Error(t(409));ku(r,s,null,null)},xu.prototype.unmount=Id.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var s=r.containerInfo;ns(function(){ku(null,r,null,null)}),s[Tr]=null}};function xu(r){this._internalRoot=r}xu.prototype.unstable_scheduleHydration=function(r){if(r){var s=xl();r={blockedOn:null,target:r,priority:s};for(var a=0;a<Yn.length&&s!==0&&s<Yn[a].priority;a++);Yn.splice(a,0,r),a===0&&Dl(r)}};function Sd(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function Nu(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11&&(r.nodeType!==8||r.nodeValue!==" react-mount-point-unstable "))}function bg(){}function EE(r,s,a,h,d){if(d){if(typeof h=="function"){var g=h;h=function(){var $=Pu(w);g.call($)}}var w=Pg(s,h,r,0,null,!1,!1,"",bg);return r._reactRootContainer=w,r[Tr]=w.current,ga(r.nodeType===8?r.parentNode:r),ns(),w}for(;d=r.lastChild;)r.removeChild(d);if(typeof h=="function"){var A=h;h=function(){var $=Pu(P);A.call($)}}var P=Ed(r,0,!1,null,null,!1,!1,"",bg);return r._reactRootContainer=P,r[Tr]=P.current,ga(r.nodeType===8?r.parentNode:r),ns(function(){ku(s,P,a,h)}),P}function bu(r,s,a,h,d){var g=a._reactRootContainer;if(g){var w=g;if(typeof d=="function"){var A=d;d=function(){var P=Pu(w);A.call(P)}}ku(s,w,r,d)}else w=EE(a,s,r,d,h);return Pu(w)}kl=function(r){switch(r.tag){case 3:var s=r.stateNode;if(s.current.memoizedState.isDehydrated){var a=Kr(s.pendingLanes);a!==0&&(Xr(s,a|1),rn(s,Ge()),!(Fe&6)&&(ho=Ge()+500,si()))}break;case 13:ns(function(){var h=Rr(r,1);if(h!==null){var d=Qt();qn(h,r,1,d)}}),Td(r,1)}},Vs=function(r){if(r.tag===13){var s=Rr(r,134217728);if(s!==null){var a=Qt();qn(s,r,134217728,a)}Td(r,134217728)}},Pl=function(r){if(r.tag===13){var s=hi(r),a=Rr(r,s);if(a!==null){var h=Qt();qn(a,r,s,h)}Td(r,s)}},xl=function(){return De},Nl=function(r,s){var a=De;try{return De=r,s()}finally{De=a}},Cs=function(r,s,a){switch(s){case"input":if(zo(r,a),s=a.name,a.type==="radio"&&s!=null){for(a=r;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<a.length;s++){var h=a[s];if(h!==r&&h.form===r.form){var d=Ql(h);if(!d)throw Error(t(90));Es(h),zo(h,d)}}}break;case"textarea":As(r,a);break;case"select":s=a.value,s!=null&&pr(r,!!a.multiple,s,!1)}},Vi=md,Yo=ns;var TE={usingClientEntryPoint:!1,Events:[va,Js,Ql,Qn,Xo,md]},Da={findFiberByHostInstance:Gi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},IE={bundleType:Da.bundleType,version:Da.version,rendererPackageName:Da.rendererPackageName,rendererConfig:Da.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ne.ReactCurrentDispatcher,findHostInstanceByFiber:function(r){return r=ea(r),r===null?null:r.stateNode},findFiberByHostInstance:Da.findFiberByHostInstance||wE,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Du=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Du.isDisabled&&Du.supportsFiber)try{zi=Du.inject(IE),cn=Du}catch{}}return sn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=TE,sn.createPortal=function(r,s){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Sd(s))throw Error(t(200));return vE(r,s,null,a)},sn.createRoot=function(r,s){if(!Sd(r))throw Error(t(299));var a=!1,h="",d=Ng;return s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(h=s.identifierPrefix),s.onRecoverableError!==void 0&&(d=s.onRecoverableError)),s=Ed(r,1,!1,null,null,a,!1,h,d),r[Tr]=s.current,ga(r.nodeType===8?r.parentNode:r),new Id(s)},sn.findDOMNode=function(r){if(r==null)return null;if(r.nodeType===1)return r;var s=r._reactInternals;if(s===void 0)throw typeof r.render=="function"?Error(t(188)):(r=Object.keys(r).join(","),Error(t(268,r)));return r=ea(s),r=r===null?null:r.stateNode,r},sn.flushSync=function(r){return ns(r)},sn.hydrate=function(r,s,a){if(!Nu(s))throw Error(t(200));return bu(null,r,s,!0,a)},sn.hydrateRoot=function(r,s,a){if(!Sd(r))throw Error(t(405));var h=a!=null&&a.hydratedSources||null,d=!1,g="",w=Ng;if(a!=null&&(a.unstable_strictMode===!0&&(d=!0),a.identifierPrefix!==void 0&&(g=a.identifierPrefix),a.onRecoverableError!==void 0&&(w=a.onRecoverableError)),s=Pg(s,null,r,1,a??null,d,!1,g,w),r[Tr]=s.current,ga(r),h)for(r=0;r<h.length;r++)a=h[r],d=a._getVersion,d=d(a._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[a,d]:s.mutableSourceEagerHydrationData.push(a,d);return new xu(s)},sn.render=function(r,s,a){if(!Nu(s))throw Error(t(200));return bu(null,r,s,!1,a)},sn.unmountComponentAtNode=function(r){if(!Nu(r))throw Error(t(40));return r._reactRootContainer?(ns(function(){bu(null,null,r,!1,function(){r._reactRootContainer=null,r[Tr]=null})}),!0):!1},sn.unstable_batchedUpdates=md,sn.unstable_renderSubtreeIntoContainer=function(r,s,a,h){if(!Nu(a))throw Error(t(200));if(r==null||r._reactInternals===void 0)throw Error(t(38));return bu(r,s,a,!1,h)},sn.version="18.3.1-next-f1338f8080-20240426",sn}var jg;function NE(){if(jg)return Cd.exports;jg=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Cd.exports=xE(),Cd.exports}var zg;function bE(){if(zg)return Ou;zg=1;var n=NE();return Ou.createRoot=n.createRoot,Ou.hydrateRoot=n.hydrateRoot,Ou}var DE=bE();const OE=E_(DE);function T_(n){var e,t,i="";if(typeof n=="string"||typeof n=="number")i+=n;else if(typeof n=="object")if(Array.isArray(n)){var o=n.length;for(e=0;e<o;e++)n[e]&&(t=T_(n[e]))&&(i&&(i+=" "),i+=t)}else for(t in n)n[t]&&(i&&(i+=" "),i+=t);return i}function cs(){for(var n,e,t=0,i="",o=arguments.length;t<o;t++)(n=arguments[t])&&(e=T_(n))&&(i&&(i+=" "),i+=e);return i}function LE(n){if(typeof document>"u")return;let e=document.head||document.getElementsByTagName("head")[0],t=document.createElement("style");t.type="text/css",e.firstChild?e.insertBefore(t,e.firstChild):e.appendChild(t),t.styleSheet?t.styleSheet.cssText=n:t.appendChild(document.createTextNode(n))}LE(`:root{--toastify-color-light: #fff;--toastify-color-dark: #121212;--toastify-color-info: #3498db;--toastify-color-success: #07bc0c;--toastify-color-warning: #f1c40f;--toastify-color-error: hsl(6, 78%, 57%);--toastify-color-transparent: rgba(255, 255, 255, .7);--toastify-icon-color-info: var(--toastify-color-info);--toastify-icon-color-success: var(--toastify-color-success);--toastify-icon-color-warning: var(--toastify-color-warning);--toastify-icon-color-error: var(--toastify-color-error);--toastify-container-width: fit-content;--toastify-toast-width: 320px;--toastify-toast-offset: 16px;--toastify-toast-top: max(var(--toastify-toast-offset), env(safe-area-inset-top));--toastify-toast-right: max(var(--toastify-toast-offset), env(safe-area-inset-right));--toastify-toast-left: max(var(--toastify-toast-offset), env(safe-area-inset-left));--toastify-toast-bottom: max(var(--toastify-toast-offset), env(safe-area-inset-bottom));--toastify-toast-background: #fff;--toastify-toast-padding: 14px;--toastify-toast-min-height: 64px;--toastify-toast-max-height: 800px;--toastify-toast-bd-radius: 6px;--toastify-toast-shadow: 0px 4px 12px rgba(0, 0, 0, .1);--toastify-font-family: sans-serif;--toastify-z-index: 9999;--toastify-text-color-light: #757575;--toastify-text-color-dark: #fff;--toastify-text-color-info: #fff;--toastify-text-color-success: #fff;--toastify-text-color-warning: #fff;--toastify-text-color-error: #fff;--toastify-spinner-color: #616161;--toastify-spinner-color-empty-area: #e0e0e0;--toastify-color-progress-light: linear-gradient(to right, #4cd964, #5ac8fa, #007aff, #34aadc, #5856d6, #ff2d55);--toastify-color-progress-dark: #bb86fc;--toastify-color-progress-info: var(--toastify-color-info);--toastify-color-progress-success: var(--toastify-color-success);--toastify-color-progress-warning: var(--toastify-color-warning);--toastify-color-progress-error: var(--toastify-color-error);--toastify-color-progress-bgo: .2}.Toastify__toast-container{z-index:var(--toastify-z-index);-webkit-transform:translate3d(0,0,var(--toastify-z-index));position:fixed;width:var(--toastify-container-width);box-sizing:border-box;color:#fff;display:flex;flex-direction:column}.Toastify__toast-container--top-left{top:var(--toastify-toast-top);left:var(--toastify-toast-left)}.Toastify__toast-container--top-center{top:var(--toastify-toast-top);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--top-right{top:var(--toastify-toast-top);right:var(--toastify-toast-right);align-items:end}.Toastify__toast-container--bottom-left{bottom:var(--toastify-toast-bottom);left:var(--toastify-toast-left)}.Toastify__toast-container--bottom-center{bottom:var(--toastify-toast-bottom);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--bottom-right{bottom:var(--toastify-toast-bottom);right:var(--toastify-toast-right);align-items:end}@media only screen and (max-width: 480px){.Toastify__toast-container{width:100vw;left:env(safe-area-inset-left);margin:0}.Toastify__toast-container--top-left,.Toastify__toast-container--top-center,.Toastify__toast-container--top-right{top:env(safe-area-inset-top);transform:translate(0)}.Toastify__toast-container--bottom-left,.Toastify__toast-container--bottom-center,.Toastify__toast-container--bottom-right{bottom:env(safe-area-inset-bottom);transform:translate(0)}.Toastify__toast-container--rtl{right:env(safe-area-inset-right);left:initial}.Toastify__toast{--toastify-toast-width: 100%;margin-bottom:0;border-radius:0}}.Toastify__toast{--y: 0;position:relative;touch-action:none;width:var(--toastify-toast-width);min-height:var(--toastify-toast-min-height);box-sizing:border-box;margin-bottom:1rem;padding:var(--toastify-toast-padding);border-radius:var(--toastify-toast-bd-radius);box-shadow:var(--toastify-toast-shadow);max-height:var(--toastify-toast-max-height);font-family:var(--toastify-font-family);z-index:0;display:flex;flex:1 auto;align-items:center;word-break:break-word}.Toastify__toast-container[data-stacked=true]{width:var(--toastify-toast-width)}.Toastify__toast--stacked{position:absolute;width:100%;transform:translate3d(0,var(--y),0) scale(var(--s));transition:transform .3s}.Toastify__toast--stacked[data-collapsed] .Toastify__toast-body,.Toastify__toast--stacked[data-collapsed] .Toastify__close-button{transition:opacity .1s}.Toastify__toast--stacked[data-collapsed=false]{overflow:visible}.Toastify__toast--stacked[data-collapsed=true]:not(:last-child)>*{opacity:0}.Toastify__toast--stacked:after{content:"";position:absolute;left:0;right:0;height:calc(var(--g) * 1px);bottom:100%}.Toastify__toast--stacked[data-pos=top]{top:0}.Toastify__toast--stacked[data-pos=bot]{bottom:0}.Toastify__toast--stacked[data-pos=bot].Toastify__toast--stacked:before{transform-origin:top}.Toastify__toast--stacked[data-pos=top].Toastify__toast--stacked:before{transform-origin:bottom}.Toastify__toast--stacked:before{content:"";position:absolute;left:0;right:0;bottom:0;height:100%;transform:scaleY(3);z-index:-1}.Toastify__toast--rtl{direction:rtl}.Toastify__toast--close-on-click{cursor:pointer}.Toastify__toast-icon{margin-inline-end:10px;width:22px;flex-shrink:0;display:flex}.Toastify--animate{animation-fill-mode:both;animation-duration:.5s}.Toastify--animate-icon{animation-fill-mode:both;animation-duration:.3s}.Toastify__toast-theme--dark{background:var(--toastify-color-dark);color:var(--toastify-text-color-dark)}.Toastify__toast-theme--light,.Toastify__toast-theme--colored.Toastify__toast--default{background:var(--toastify-color-light);color:var(--toastify-text-color-light)}.Toastify__toast-theme--colored.Toastify__toast--info{color:var(--toastify-text-color-info);background:var(--toastify-color-info)}.Toastify__toast-theme--colored.Toastify__toast--success{color:var(--toastify-text-color-success);background:var(--toastify-color-success)}.Toastify__toast-theme--colored.Toastify__toast--warning{color:var(--toastify-text-color-warning);background:var(--toastify-color-warning)}.Toastify__toast-theme--colored.Toastify__toast--error{color:var(--toastify-text-color-error);background:var(--toastify-color-error)}.Toastify__progress-bar-theme--light{background:var(--toastify-color-progress-light)}.Toastify__progress-bar-theme--dark{background:var(--toastify-color-progress-dark)}.Toastify__progress-bar--info{background:var(--toastify-color-progress-info)}.Toastify__progress-bar--success{background:var(--toastify-color-progress-success)}.Toastify__progress-bar--warning{background:var(--toastify-color-progress-warning)}.Toastify__progress-bar--error{background:var(--toastify-color-progress-error)}.Toastify__progress-bar-theme--colored.Toastify__progress-bar--info,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--success,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--warning,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--error{background:var(--toastify-color-transparent)}.Toastify__close-button{color:#fff;position:absolute;top:6px;right:6px;background:transparent;outline:none;border:none;padding:0;cursor:pointer;opacity:.7;transition:.3s ease;z-index:1}.Toastify__toast--rtl .Toastify__close-button{left:6px;right:unset}.Toastify__close-button--light{color:#000;opacity:.3}.Toastify__close-button>svg{fill:currentColor;height:16px;width:14px}.Toastify__close-button:hover,.Toastify__close-button:focus{opacity:1}@keyframes Toastify__trackProgress{0%{transform:scaleX(1)}to{transform:scaleX(0)}}.Toastify__progress-bar{position:absolute;bottom:0;left:0;width:100%;height:100%;z-index:1;opacity:.7;transform-origin:left}.Toastify__progress-bar--animated{animation:Toastify__trackProgress linear 1 forwards}.Toastify__progress-bar--controlled{transition:transform .2s}.Toastify__progress-bar--rtl{right:0;left:initial;transform-origin:right;border-bottom-left-radius:initial}.Toastify__progress-bar--wrp{position:absolute;overflow:hidden;bottom:0;left:0;width:100%;height:5px;border-bottom-left-radius:var(--toastify-toast-bd-radius);border-bottom-right-radius:var(--toastify-toast-bd-radius)}.Toastify__progress-bar--wrp[data-hidden=true]{opacity:0}.Toastify__progress-bar--bg{opacity:var(--toastify-color-progress-bgo);width:100%;height:100%}.Toastify__spinner{width:20px;height:20px;box-sizing:border-box;border:2px solid;border-radius:100%;border-color:var(--toastify-spinner-color-empty-area);border-right-color:var(--toastify-spinner-color);animation:Toastify__spin .65s linear infinite}@keyframes Toastify__bounceInRight{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(3000px,0,0)}60%{opacity:1;transform:translate3d(-25px,0,0)}75%{transform:translate3d(10px,0,0)}90%{transform:translate3d(-5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutRight{20%{opacity:1;transform:translate3d(-20px,var(--y),0)}to{opacity:0;transform:translate3d(2000px,var(--y),0)}}@keyframes Toastify__bounceInLeft{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(-3000px,0,0)}60%{opacity:1;transform:translate3d(25px,0,0)}75%{transform:translate3d(-10px,0,0)}90%{transform:translate3d(5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutLeft{20%{opacity:1;transform:translate3d(20px,var(--y),0)}to{opacity:0;transform:translate3d(-2000px,var(--y),0)}}@keyframes Toastify__bounceInUp{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,3000px,0)}60%{opacity:1;transform:translate3d(0,-20px,0)}75%{transform:translate3d(0,10px,0)}90%{transform:translate3d(0,-5px,0)}to{transform:translateZ(0)}}@keyframes Toastify__bounceOutUp{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,-2000px,0)}}@keyframes Toastify__bounceInDown{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,-3000px,0)}60%{opacity:1;transform:translate3d(0,25px,0)}75%{transform:translate3d(0,-10px,0)}90%{transform:translate3d(0,5px,0)}to{transform:none}}@keyframes Toastify__bounceOutDown{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,2000px,0)}}.Toastify__bounce-enter--top-left,.Toastify__bounce-enter--bottom-left{animation-name:Toastify__bounceInLeft}.Toastify__bounce-enter--top-right,.Toastify__bounce-enter--bottom-right{animation-name:Toastify__bounceInRight}.Toastify__bounce-enter--top-center{animation-name:Toastify__bounceInDown}.Toastify__bounce-enter--bottom-center{animation-name:Toastify__bounceInUp}.Toastify__bounce-exit--top-left,.Toastify__bounce-exit--bottom-left{animation-name:Toastify__bounceOutLeft}.Toastify__bounce-exit--top-right,.Toastify__bounce-exit--bottom-right{animation-name:Toastify__bounceOutRight}.Toastify__bounce-exit--top-center{animation-name:Toastify__bounceOutUp}.Toastify__bounce-exit--bottom-center{animation-name:Toastify__bounceOutDown}@keyframes Toastify__zoomIn{0%{opacity:0;transform:scale3d(.3,.3,.3)}50%{opacity:1}}@keyframes Toastify__zoomOut{0%{opacity:1}50%{opacity:0;transform:translate3d(0,var(--y),0) scale3d(.3,.3,.3)}to{opacity:0}}.Toastify__zoom-enter{animation-name:Toastify__zoomIn}.Toastify__zoom-exit{animation-name:Toastify__zoomOut}@keyframes Toastify__flipIn{0%{transform:perspective(400px) rotateX(90deg);animation-timing-function:ease-in;opacity:0}40%{transform:perspective(400px) rotateX(-20deg);animation-timing-function:ease-in}60%{transform:perspective(400px) rotateX(10deg);opacity:1}80%{transform:perspective(400px) rotateX(-5deg)}to{transform:perspective(400px)}}@keyframes Toastify__flipOut{0%{transform:translate3d(0,var(--y),0) perspective(400px)}30%{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(-20deg);opacity:1}to{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(90deg);opacity:0}}.Toastify__flip-enter{animation-name:Toastify__flipIn}.Toastify__flip-exit{animation-name:Toastify__flipOut}@keyframes Toastify__slideInRight{0%{transform:translate3d(110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInLeft{0%{transform:translate3d(-110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInUp{0%{transform:translate3d(0,110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInDown{0%{transform:translate3d(0,-110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideOutRight{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(110%,var(--y),0)}}@keyframes Toastify__slideOutLeft{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(-110%,var(--y),0)}}@keyframes Toastify__slideOutDown{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,500px,0)}}@keyframes Toastify__slideOutUp{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,-500px,0)}}.Toastify__slide-enter--top-left,.Toastify__slide-enter--bottom-left{animation-name:Toastify__slideInLeft}.Toastify__slide-enter--top-right,.Toastify__slide-enter--bottom-right{animation-name:Toastify__slideInRight}.Toastify__slide-enter--top-center{animation-name:Toastify__slideInDown}.Toastify__slide-enter--bottom-center{animation-name:Toastify__slideInUp}.Toastify__slide-exit--top-left,.Toastify__slide-exit--bottom-left{animation-name:Toastify__slideOutLeft;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-right,.Toastify__slide-exit--bottom-right{animation-name:Toastify__slideOutRight;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-center{animation-name:Toastify__slideOutUp;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--bottom-center{animation-name:Toastify__slideOutDown;animation-timing-function:ease-in;animation-duration:.3s}@keyframes Toastify__spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}
`);var nl=n=>typeof n=="number"&&!isNaN(n),ps=n=>typeof n=="string",Mr=n=>typeof n=="function",VE=n=>ps(n)||nl(n),Wd=n=>ps(n)||Mr(n)?n:null,ME=(n,e)=>n===!1||nl(n)&&n>0?n:e,Kd=n=>he.isValidElement(n)||ps(n)||Mr(n)||nl(n);function FE(n,e,t=300){let{scrollHeight:i,style:o}=n;requestAnimationFrame(()=>{o.minHeight="initial",o.height=i+"px",o.transition=`all ${t}ms`,requestAnimationFrame(()=>{o.height="0",o.padding="0",o.margin="0",setTimeout(e,t)})})}function UE({enter:n,exit:e,appendPosition:t=!1,collapse:i=!0,collapseDuration:o=300}){return function({children:l,position:c,preventExitTransition:f,done:m,nodeRef:y,isIn:v,playToast:E}){let S=t?`${n}--${c}`:n,M=t?`${e}--${c}`:e,j=he.useRef(0);return he.useLayoutEffect(()=>{let B=y.current,D=S.split(" "),ee=W=>{W.target===y.current&&(E(),B.removeEventListener("animationend",ee),B.removeEventListener("animationcancel",ee),j.current===0&&W.type!=="animationcancel"&&B.classList.remove(...D))};B.classList.add(...D),B.addEventListener("animationend",ee),B.addEventListener("animationcancel",ee)},[]),he.useEffect(()=>{let B=y.current,D=()=>{B.removeEventListener("animationend",D),i?FE(B,m,o):m()};v||(f?D():(j.current=1,B.className+=` ${M}`,B.addEventListener("animationend",D)))},[v]),Ue.createElement(Ue.Fragment,null,l)}}function Bg(n,e){return{content:I_(n.content,n.props),containerId:n.props.containerId,id:n.props.toastId,theme:n.props.theme,type:n.props.type,data:n.props.data||{},isLoading:n.props.isLoading,icon:n.props.icon,reason:n.removalReason,status:e}}function I_(n,e,t=!1){return he.isValidElement(n)&&!ps(n.type)?he.cloneElement(n,{closeToast:e.closeToast,toastProps:e,data:e.data,isPaused:t}):Mr(n)?n({closeToast:e.closeToast,toastProps:e,data:e.data,isPaused:t}):n}function jE({closeToast:n,theme:e,ariaLabel:t="close"}){return Ue.createElement("button",{className:`Toastify__close-button Toastify__close-button--${e}`,type:"button",onClick:i=>{i.stopPropagation(),n(!0)},"aria-label":t},Ue.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},Ue.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}function zE({delay:n,isRunning:e,closeToast:t,type:i="default",hide:o,className:l,controlledProgress:c,progress:f,rtl:m,isIn:y,theme:v}){let E=o||c&&f===0,S={animationDuration:`${n}ms`,animationPlayState:e?"running":"paused"};c&&(S.transform=`scaleX(${f})`);let M=cs("Toastify__progress-bar",c?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated",`Toastify__progress-bar-theme--${v}`,`Toastify__progress-bar--${i}`,{"Toastify__progress-bar--rtl":m}),j=Mr(l)?l({rtl:m,type:i,defaultClassName:M}):cs(M,l),B={[c&&f>=1?"onTransitionEnd":"onAnimationEnd"]:c&&f<1?null:()=>{y&&t()}};return Ue.createElement("div",{className:"Toastify__progress-bar--wrp","data-hidden":E},Ue.createElement("div",{className:`Toastify__progress-bar--bg Toastify__progress-bar-theme--${v} Toastify__progress-bar--${i}`}),Ue.createElement("div",{role:"progressbar","aria-hidden":E?"true":"false","aria-label":"notification timer",className:j,style:S,...B}))}var BE=1,S_=()=>`${BE++}`;function $E(n,e,t){let i=1,o=0,l=[],c=[],f=e,m=new Map,y=new Set,v=W=>(y.add(W),()=>y.delete(W)),E=()=>{c=Array.from(m.values()),y.forEach(W=>W())},S=({containerId:W,toastId:X,updateId:ne})=>{let me=W?W!==n:n!==1,fe=m.has(X)&&ne==null;return me||fe},M=(W,X)=>{m.forEach(ne=>{var me;(X==null||X===ne.props.toastId)&&((me=ne.toggle)==null||me.call(ne,W))})},j=W=>{var X,ne;(ne=(X=W.props)==null?void 0:X.onClose)==null||ne.call(X,W.removalReason),W.isActive=!1},B=W=>{if(W==null)m.forEach(j);else{let X=m.get(W);X&&j(X)}E()},D=()=>{o-=l.length,l=[]},ee=W=>{var X,ne;let{toastId:me,updateId:fe}=W.props,k=fe==null;W.staleId&&m.delete(W.staleId),W.isActive=!0,m.set(me,W),E(),t(Bg(W,k?"added":"updated")),k&&((ne=(X=W.props).onOpen)==null||ne.call(X))};return{id:n,props:f,observe:v,toggle:M,removeToast:B,toasts:m,clearQueue:D,buildToast:(W,X)=>{if(S(X))return;let{toastId:ne,updateId:me,data:fe,staleId:k,delay:I}=X,R=me==null;R&&o++;let x={...f,style:f.toastStyle,key:i++,...Object.fromEntries(Object.entries(X).filter(([O,C])=>C!=null)),toastId:ne,updateId:me,data:fe,isIn:!1,className:Wd(X.className||f.toastClassName),progressClassName:Wd(X.progressClassName||f.progressClassName),autoClose:X.isLoading?!1:ME(X.autoClose,f.autoClose),closeToast(O){m.get(ne).removalReason=O,B(ne)},deleteToast(){let O=m.get(ne);if(O!=null){if(t(Bg(O,"removed")),m.delete(ne),o--,o<0&&(o=0),l.length>0){ee(l.shift());return}E()}}};x.closeButton=f.closeButton,X.closeButton===!1||Kd(X.closeButton)?x.closeButton=X.closeButton:X.closeButton===!0&&(x.closeButton=Kd(f.closeButton)?f.closeButton:!0);let b={content:W,props:x,staleId:k};f.limit&&f.limit>0&&o>f.limit&&R?l.push(b):nl(I)?setTimeout(()=>{ee(b)},I):ee(b)},setProps(W){f=W},setToggle:(W,X)=>{let ne=m.get(W);ne&&(ne.toggle=X)},isToastActive:W=>{var X;return(X=m.get(W))==null?void 0:X.isActive},getSnapshot:()=>c}}var Xt=new Map,Ha=[],Gd=new Set,qE=n=>Gd.forEach(e=>e(n)),A_=()=>Xt.size>0;function HE(){Ha.forEach(n=>C_(n.content,n.options)),Ha=[]}var WE=(n,{containerId:e})=>{var t;return(t=Xt.get(e||1))==null?void 0:t.toasts.get(n)};function R_(n,e){var t;if(e)return!!((t=Xt.get(e))!=null&&t.isToastActive(n));let i=!1;return Xt.forEach(o=>{o.isToastActive(n)&&(i=!0)}),i}function KE(n){if(!A_()){Ha=Ha.filter(e=>n!=null&&e.options.toastId!==n);return}if(n==null||VE(n))Xt.forEach(e=>{e.removeToast(n)});else if(n&&("containerId"in n||"id"in n)){let e=Xt.get(n.containerId);e?e.removeToast(n.id):Xt.forEach(t=>{t.removeToast(n.id)})}}var GE=(n={})=>{Xt.forEach(e=>{e.props.limit&&(!n.containerId||e.id===n.containerId)&&e.clearQueue()})};function C_(n,e){Kd(n)&&(A_()||Ha.push({content:n,options:e}),Xt.forEach(t=>{t.buildToast(n,e)}))}function QE(n){var e;(e=Xt.get(n.containerId||1))==null||e.setToggle(n.id,n.fn)}function k_(n,e){Xt.forEach(t=>{(e==null||!(e!=null&&e.containerId)||(e==null?void 0:e.containerId)===t.id)&&t.toggle(n,e==null?void 0:e.id)})}function XE(n){let e=n.containerId||1;return{subscribe(t){let i=$E(e,n,qE);Xt.set(e,i);let o=i.observe(t);return HE(),()=>{o(),Xt.delete(e)}},setProps(t){var i;(i=Xt.get(e))==null||i.setProps(t)},getSnapshot(){var t;return(t=Xt.get(e))==null?void 0:t.getSnapshot()}}}function YE(n){return Gd.add(n),()=>{Gd.delete(n)}}function JE(n){return n&&(ps(n.toastId)||nl(n.toastId))?n.toastId:S_()}function rl(n,e){return C_(n,e),e.toastId}function Tc(n,e){return{...e,type:e&&e.type||n,toastId:JE(e)}}function Ic(n){return(e,t)=>rl(e,Tc(n,t))}function Re(n,e){return rl(n,Tc("default",e))}Re.loading=(n,e)=>rl(n,Tc("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...e}));function ZE(n,{pending:e,error:t,success:i},o){let l;e&&(l=ps(e)?Re.loading(e,o):Re.loading(e.render,{...o,...e}));let c={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},f=(y,v,E)=>{if(v==null){Re.dismiss(l);return}let S={type:y,...c,...o,data:E},M=ps(v)?{render:v}:v;return l?Re.update(l,{...S,...M}):Re(M.render,{...S,...M}),E},m=Mr(n)?n():n;return m.then(y=>f("success",i,y)).catch(y=>f("error",t,y)),m}Re.promise=ZE;Re.success=Ic("success");Re.info=Ic("info");Re.error=Ic("error");Re.warning=Ic("warning");Re.warn=Re.warning;Re.dark=(n,e)=>rl(n,Tc("default",{theme:"dark",...e}));function eT(n){KE(n)}Re.dismiss=eT;Re.clearWaitingQueue=GE;Re.isActive=R_;Re.update=(n,e={})=>{let t=WE(n,e);if(t){let{props:i,content:o}=t,l={delay:100,...i,...e,toastId:e.toastId||n,updateId:S_()};l.toastId!==n&&(l.staleId=n);let c=l.render||o;delete l.render,rl(c,l)}};Re.done=n=>{Re.update(n,{progress:1})};Re.onChange=YE;Re.play=n=>k_(!0,n);Re.pause=n=>k_(!1,n);function tT(n){var e;let{subscribe:t,getSnapshot:i,setProps:o}=he.useRef(XE(n)).current;o(n);let l=(e=he.useSyncExternalStore(t,i,i))==null?void 0:e.slice();function c(f){if(!l)return[];let m=new Map;return n.newestOnTop&&l.reverse(),l.forEach(y=>{let{position:v}=y.props;m.has(v)||m.set(v,[]),m.get(v).push(y)}),Array.from(m,y=>f(y[0],y[1]))}return{getToastToRender:c,isToastActive:R_,count:l==null?void 0:l.length}}function nT(n){let[e,t]=he.useState(!1),[i,o]=he.useState(!1),l=he.useRef(null),c=he.useRef({start:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,didMove:!1}).current,{autoClose:f,pauseOnHover:m,closeToast:y,onClick:v,closeOnClick:E}=n;QE({id:n.toastId,containerId:n.containerId,fn:t}),he.useEffect(()=>{if(n.pauseOnFocusLoss)return S(),()=>{M()}},[n.pauseOnFocusLoss]);function S(){document.hasFocus()||ee(),window.addEventListener("focus",D),window.addEventListener("blur",ee)}function M(){window.removeEventListener("focus",D),window.removeEventListener("blur",ee)}function j(k){if(n.draggable===!0||n.draggable===k.pointerType){W();let I=l.current;c.canCloseOnClick=!0,c.canDrag=!0,I.style.transition="none",n.draggableDirection==="x"?(c.start=k.clientX,c.removalDistance=I.offsetWidth*(n.draggablePercent/100)):(c.start=k.clientY,c.removalDistance=I.offsetHeight*(n.draggablePercent===80?n.draggablePercent*1.5:n.draggablePercent)/100)}}function B(k){let{top:I,bottom:R,left:x,right:b}=l.current.getBoundingClientRect();k.nativeEvent.type!=="touchend"&&n.pauseOnHover&&k.clientX>=x&&k.clientX<=b&&k.clientY>=I&&k.clientY<=R?ee():D()}function D(){t(!0)}function ee(){t(!1)}function W(){c.didMove=!1,document.addEventListener("pointermove",ne),document.addEventListener("pointerup",me)}function X(){document.removeEventListener("pointermove",ne),document.removeEventListener("pointerup",me)}function ne(k){let I=l.current;if(c.canDrag&&I){c.didMove=!0,e&&ee(),n.draggableDirection==="x"?c.delta=k.clientX-c.start:c.delta=k.clientY-c.start,c.start!==k.clientX&&(c.canCloseOnClick=!1);let R=n.draggableDirection==="x"?`${c.delta}px, var(--y)`:`0, calc(${c.delta}px + var(--y))`;I.style.transform=`translate3d(${R},0)`,I.style.opacity=`${1-Math.abs(c.delta/c.removalDistance)}`}}function me(){X();let k=l.current;if(c.canDrag&&c.didMove&&k){if(c.canDrag=!1,Math.abs(c.delta)>c.removalDistance){o(!0),n.closeToast(!0),n.collapseAll();return}k.style.transition="transform 0.2s, opacity 0.2s",k.style.removeProperty("transform"),k.style.removeProperty("opacity")}}let fe={onPointerDown:j,onPointerUp:B};return f&&m&&(fe.onMouseEnter=ee,n.stacked||(fe.onMouseLeave=D)),E&&(fe.onClick=k=>{v&&v(k),c.canCloseOnClick&&y(!0)}),{playToast:D,pauseToast:ee,isRunning:e,preventExitTransition:i,toastRef:l,eventHandlers:fe}}var rT=typeof window<"u"?he.useLayoutEffect:he.useEffect,Sc=({theme:n,type:e,isLoading:t,...i})=>Ue.createElement("svg",{viewBox:"0 0 24 24",width:"100%",height:"100%",fill:n==="colored"?"currentColor":`var(--toastify-icon-color-${e})`,...i});function iT(n){return Ue.createElement(Sc,{...n},Ue.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))}function sT(n){return Ue.createElement(Sc,{...n},Ue.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))}function oT(n){return Ue.createElement(Sc,{...n},Ue.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))}function aT(n){return Ue.createElement(Sc,{...n},Ue.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))}function lT(){return Ue.createElement("div",{className:"Toastify__spinner"})}var Qd={info:sT,warning:iT,success:oT,error:aT,spinner:lT},uT=n=>n in Qd;function cT({theme:n,type:e,isLoading:t,icon:i}){let o=null,l={theme:n,type:e};return i===!1||(Mr(i)?o=i({...l,isLoading:t}):he.isValidElement(i)?o=he.cloneElement(i,l):t?o=Qd.spinner():uT(e)&&(o=Qd[e](l))),o}var hT=n=>{let{isRunning:e,preventExitTransition:t,toastRef:i,eventHandlers:o,playToast:l}=nT(n),{closeButton:c,children:f,autoClose:m,onClick:y,type:v,hideProgressBar:E,closeToast:S,transition:M,position:j,className:B,style:D,progressClassName:ee,updateId:W,role:X,progress:ne,rtl:me,toastId:fe,deleteToast:k,isIn:I,isLoading:R,closeOnClick:x,theme:b,ariaLabel:O}=n,C=cs("Toastify__toast",`Toastify__toast-theme--${b}`,`Toastify__toast--${v}`,{"Toastify__toast--rtl":me},{"Toastify__toast--close-on-click":x}),nt=Mr(B)?B({rtl:me,position:j,type:v,defaultClassName:C}):cs(C,B),pt=cT(n),mt=!!ne||!m,je={closeToast:S,type:v,theme:b},re=null;return c===!1||(Mr(c)?re=c(je):he.isValidElement(c)?re=he.cloneElement(c,je):re=jE(je)),Ue.createElement(M,{isIn:I,done:k,position:j,preventExitTransition:t,nodeRef:i,playToast:l},Ue.createElement("div",{id:fe,tabIndex:0,onClick:y,"data-in":I,className:nt,...o,style:D,ref:i,...I&&{role:X,"aria-label":O}},pt!=null&&Ue.createElement("div",{className:cs("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!R})},pt),I_(f,n,!e),re,!n.customProgressBar&&Ue.createElement(zE,{...W&&!mt?{key:`p-${W}`}:{},rtl:me,theme:b,delay:m,isRunning:e,isIn:I,closeToast:S,hide:E,type:v,className:ee,controlledProgress:mt,progress:ne||0})))},dT=(n,e=!1)=>({enter:`Toastify--animate Toastify__${n}-enter`,exit:`Toastify--animate Toastify__${n}-exit`,appendPosition:e}),fT=UE(dT("bounce",!0)),pT={position:"top-right",transition:fT,autoClose:5e3,closeButton:!0,pauseOnHover:!0,pauseOnFocusLoss:!0,draggable:"touch",draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light","aria-label":"Notifications Alt+T",hotKeys:n=>n.altKey&&n.code==="KeyT"};function mT(n){let e={...pT,...n},t=n.stacked,[i,o]=he.useState(!0),l=he.useRef(null),{getToastToRender:c,isToastActive:f,count:m}=tT(e),{className:y,style:v,rtl:E,containerId:S,hotKeys:M}=e;function j(D){let ee=cs("Toastify__toast-container",`Toastify__toast-container--${D}`,{"Toastify__toast-container--rtl":E});return Mr(y)?y({position:D,rtl:E,defaultClassName:ee}):cs(ee,Wd(y))}function B(){t&&(o(!0),Re.play())}return rT(()=>{var D;if(t){let ee=l.current.querySelectorAll('[data-in="true"]'),W=12,X=(D=e.position)==null?void 0:D.includes("top"),ne=0,me=0;Array.from(ee).reverse().forEach((fe,k)=>{let I=fe;I.classList.add("Toastify__toast--stacked"),k>0&&(I.dataset.collapsed=`${i}`),I.dataset.pos||(I.dataset.pos=X?"top":"bot");let R=ne*(i?.2:1)+(i?0:W*k);I.style.setProperty("--y",`${X?R:R*-1}px`),I.style.setProperty("--g",`${W}`),I.style.setProperty("--s",`${1-(i?me:0)}`),ne+=I.offsetHeight,me+=.025})}},[i,m,t]),he.useEffect(()=>{function D(ee){var W;let X=l.current;M(ee)&&((W=X.querySelector('[tabIndex="0"]'))==null||W.focus(),o(!1),Re.pause()),ee.key==="Escape"&&(document.activeElement===X||X!=null&&X.contains(document.activeElement))&&(o(!0),Re.play())}return document.addEventListener("keydown",D),()=>{document.removeEventListener("keydown",D)}},[M]),Ue.createElement("section",{ref:l,className:"Toastify",id:S,onMouseEnter:()=>{t&&(o(!1),Re.pause())},onMouseLeave:B,"aria-live":"polite","aria-atomic":"false","aria-relevant":"additions text","aria-label":e["aria-label"]},c((D,ee)=>{let W=ee.length?{...v}:{...v,pointerEvents:"none"};return Ue.createElement("div",{tabIndex:-1,className:j(D),"data-stacked":t,style:W,key:`c-${D}`},ee.map(({content:X,props:ne})=>Ue.createElement(hT,{...ne,stacked:t,collapseAll:B,isIn:f(ne.toastId,ne.containerId),key:`t-${ne.key}`},X)))}))}var $g={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P_=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let o=n.charCodeAt(i);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(o=65536+((o&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},gT=function(n){const e=[];let t=0,i=0;for(;t<n.length;){const o=n[t++];if(o<128)e[i++]=String.fromCharCode(o);else if(o>191&&o<224){const l=n[t++];e[i++]=String.fromCharCode((o&31)<<6|l&63)}else if(o>239&&o<365){const l=n[t++],c=n[t++],f=n[t++],m=((o&7)<<18|(l&63)<<12|(c&63)<<6|f&63)-65536;e[i++]=String.fromCharCode(55296+(m>>10)),e[i++]=String.fromCharCode(56320+(m&1023))}else{const l=n[t++],c=n[t++];e[i++]=String.fromCharCode((o&15)<<12|(l&63)<<6|c&63)}}return e.join("")},x_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let o=0;o<n.length;o+=3){const l=n[o],c=o+1<n.length,f=c?n[o+1]:0,m=o+2<n.length,y=m?n[o+2]:0,v=l>>2,E=(l&3)<<4|f>>4;let S=(f&15)<<2|y>>6,M=y&63;m||(M=64,c||(S=64)),i.push(t[v],t[E],t[S],t[M])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(P_(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):gT(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let o=0;o<n.length;){const l=t[n.charAt(o++)],f=o<n.length?t[n.charAt(o)]:0;++o;const y=o<n.length?t[n.charAt(o)]:64;++o;const E=o<n.length?t[n.charAt(o)]:64;if(++o,l==null||f==null||y==null||E==null)throw new yT;const S=l<<2|f>>4;if(i.push(S),y!==64){const M=f<<4&240|y>>2;if(i.push(M),E!==64){const j=y<<6&192|E;i.push(j)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class yT extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const _T=function(n){const e=P_(n);return x_.encodeByteArray(e,!0)},ec=function(n){return _T(n).replace(/\./g,"")},N_=function(n){try{return x_.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vT(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wT=()=>vT().__FIREBASE_DEFAULTS__,ET=()=>{if(typeof process>"u"||typeof $g>"u")return;const n=$g.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},TT=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&N_(n[1]);return e&&JSON.parse(e)},Ac=()=>{try{return wT()||ET()||TT()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},b_=n=>{var e,t;return(t=(e=Ac())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},IT=n=>{const e=b_(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},D_=()=>{var n;return(n=Ac())===null||n===void 0?void 0:n.config},O_=n=>{var e;return(e=Ac())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ST{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AT(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",o=n.iat||0,l=n.sub||n.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:o,exp:o+3600,auth_time:o,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}}},n);return[ec(JSON.stringify(t)),ec(JSON.stringify(c)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ht(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function RT(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ht())}function CT(){var n;const e=(n=Ac())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function kT(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function PT(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function xT(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function NT(){const n=Ht();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function bT(){return!CT()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function DT(){try{return typeof indexedDB=="object"}catch{return!1}}function OT(){return new Promise((n,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(i);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var l;e(((l=o.error)===null||l===void 0?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LT="FirebaseError";class Br extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=LT,Object.setPrototypeOf(this,Br.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,il.prototype.create)}}class il{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},o=`${this.service}/${e}`,l=this.errors[e],c=l?VT(l,i):"Error",f=`${this.serviceName}: ${c} (${o}).`;return new Br(o,f,i)}}function VT(n,e){return n.replace(MT,(t,i)=>{const o=e[i];return o!=null?String(o):`<${i}?>`})}const MT=/\{\$([^}]+)}/g;function FT(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function tc(n,e){if(n===e)return!0;const t=Object.keys(n),i=Object.keys(e);for(const o of t){if(!i.includes(o))return!1;const l=n[o],c=e[o];if(qg(l)&&qg(c)){if(!tc(l,c))return!1}else if(l!==c)return!1}for(const o of i)if(!t.includes(o))return!1;return!0}function qg(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sl(n){const e=[];for(const[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function UT(n,e){const t=new jT(n,e);return t.subscribe.bind(t)}class jT{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let o;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");zT(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:i},o.next===void 0&&(o.next=xd),o.error===void 0&&(o.error=xd),o.complete===void 0&&(o.complete=xd);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function zT(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function xd(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pt(n){return n&&n._delegate?n._delegate:n}class ms{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const os="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BT{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new ST;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&i.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(l){if(o)return null;throw l}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(qT(e))try{this.getOrInitializeService({instanceIdentifier:os})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:o});i.resolve(l)}catch{}}}}clearInstance(e=os){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=os){return this.instances.has(e)}getOptions(e=os){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[l,c]of this.instancesDeferred.entries()){const f=this.normalizeInstanceIdentifier(l);i===f&&c.resolve(o)}return o}onInit(e,t){var i;const o=this.normalizeInstanceIdentifier(t),l=(i=this.onInitCallbacks.get(o))!==null&&i!==void 0?i:new Set;l.add(e),this.onInitCallbacks.set(o,l);const c=this.instances.get(o);return c&&e(c,o),()=>{l.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const o of i)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:$T(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=os){return this.component?this.component.multipleInstances?e:os:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function $T(n){return n===os?void 0:n}function qT(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HT{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new BT(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ne;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Ne||(Ne={}));const WT={debug:Ne.DEBUG,verbose:Ne.VERBOSE,info:Ne.INFO,warn:Ne.WARN,error:Ne.ERROR,silent:Ne.SILENT},KT=Ne.INFO,GT={[Ne.DEBUG]:"log",[Ne.VERBOSE]:"log",[Ne.INFO]:"info",[Ne.WARN]:"warn",[Ne.ERROR]:"error"},QT=(n,e,...t)=>{if(e<n.logLevel)return;const i=new Date().toISOString(),o=GT[e];if(o)console[o](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Pf{constructor(e){this.name=e,this._logLevel=KT,this._logHandler=QT,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ne))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?WT[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ne.DEBUG,...e),this._logHandler(this,Ne.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ne.VERBOSE,...e),this._logHandler(this,Ne.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ne.INFO,...e),this._logHandler(this,Ne.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ne.WARN,...e),this._logHandler(this,Ne.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ne.ERROR,...e),this._logHandler(this,Ne.ERROR,...e)}}const XT=(n,e)=>e.some(t=>n instanceof t);let Hg,Wg;function YT(){return Hg||(Hg=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function JT(){return Wg||(Wg=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const L_=new WeakMap,Xd=new WeakMap,V_=new WeakMap,Nd=new WeakMap,xf=new WeakMap;function ZT(n){const e=new Promise((t,i)=>{const o=()=>{n.removeEventListener("success",l),n.removeEventListener("error",c)},l=()=>{t(wi(n.result)),o()},c=()=>{i(n.error),o()};n.addEventListener("success",l),n.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&L_.set(t,n)}).catch(()=>{}),xf.set(e,n),e}function e1(n){if(Xd.has(n))return;const e=new Promise((t,i)=>{const o=()=>{n.removeEventListener("complete",l),n.removeEventListener("error",c),n.removeEventListener("abort",c)},l=()=>{t(),o()},c=()=>{i(n.error||new DOMException("AbortError","AbortError")),o()};n.addEventListener("complete",l),n.addEventListener("error",c),n.addEventListener("abort",c)});Xd.set(n,e)}let Yd={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Xd.get(n);if(e==="objectStoreNames")return n.objectStoreNames||V_.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return wi(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function t1(n){Yd=n(Yd)}function n1(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=n.call(bd(this),e,...t);return V_.set(i,e.sort?e.sort():[e]),wi(i)}:JT().includes(n)?function(...e){return n.apply(bd(this),e),wi(L_.get(this))}:function(...e){return wi(n.apply(bd(this),e))}}function r1(n){return typeof n=="function"?n1(n):(n instanceof IDBTransaction&&e1(n),XT(n,YT())?new Proxy(n,Yd):n)}function wi(n){if(n instanceof IDBRequest)return ZT(n);if(Nd.has(n))return Nd.get(n);const e=r1(n);return e!==n&&(Nd.set(n,e),xf.set(e,n)),e}const bd=n=>xf.get(n);function i1(n,e,{blocked:t,upgrade:i,blocking:o,terminated:l}={}){const c=indexedDB.open(n,e),f=wi(c);return i&&c.addEventListener("upgradeneeded",m=>{i(wi(c.result),m.oldVersion,m.newVersion,wi(c.transaction),m)}),t&&c.addEventListener("blocked",m=>t(m.oldVersion,m.newVersion,m)),f.then(m=>{l&&m.addEventListener("close",()=>l()),o&&m.addEventListener("versionchange",y=>o(y.oldVersion,y.newVersion,y))}).catch(()=>{}),f}const s1=["get","getKey","getAll","getAllKeys","count"],o1=["put","add","delete","clear"],Dd=new Map;function Kg(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Dd.get(e))return Dd.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,o=o1.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(o||s1.includes(t)))return;const l=async function(c,...f){const m=this.transaction(c,o?"readwrite":"readonly");let y=m.store;return i&&(y=y.index(f.shift())),(await Promise.all([y[t](...f),o&&m.done]))[0]};return Dd.set(e,l),l}t1(n=>({...n,get:(e,t,i)=>Kg(e,t)||n.get(e,t,i),has:(e,t)=>!!Kg(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a1{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(l1(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function l1(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Jd="@firebase/app",Gg="0.10.17";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fr=new Pf("@firebase/app"),u1="@firebase/app-compat",c1="@firebase/analytics-compat",h1="@firebase/analytics",d1="@firebase/app-check-compat",f1="@firebase/app-check",p1="@firebase/auth",m1="@firebase/auth-compat",g1="@firebase/database",y1="@firebase/data-connect",_1="@firebase/database-compat",v1="@firebase/functions",w1="@firebase/functions-compat",E1="@firebase/installations",T1="@firebase/installations-compat",I1="@firebase/messaging",S1="@firebase/messaging-compat",A1="@firebase/performance",R1="@firebase/performance-compat",C1="@firebase/remote-config",k1="@firebase/remote-config-compat",P1="@firebase/storage",x1="@firebase/storage-compat",N1="@firebase/firestore",b1="@firebase/vertexai",D1="@firebase/firestore-compat",O1="firebase",L1="11.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zd="[DEFAULT]",V1={[Jd]:"fire-core",[u1]:"fire-core-compat",[h1]:"fire-analytics",[c1]:"fire-analytics-compat",[f1]:"fire-app-check",[d1]:"fire-app-check-compat",[p1]:"fire-auth",[m1]:"fire-auth-compat",[g1]:"fire-rtdb",[y1]:"fire-data-connect",[_1]:"fire-rtdb-compat",[v1]:"fire-fn",[w1]:"fire-fn-compat",[E1]:"fire-iid",[T1]:"fire-iid-compat",[I1]:"fire-fcm",[S1]:"fire-fcm-compat",[A1]:"fire-perf",[R1]:"fire-perf-compat",[C1]:"fire-rc",[k1]:"fire-rc-compat",[P1]:"fire-gcs",[x1]:"fire-gcs-compat",[N1]:"fire-fst",[D1]:"fire-fst-compat",[b1]:"fire-vertex","fire-js":"fire-js",[O1]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nc=new Map,M1=new Map,ef=new Map;function Qg(n,e){try{n.container.addComponent(e)}catch(t){Fr.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function To(n){const e=n.name;if(ef.has(e))return Fr.debug(`There were multiple attempts to register component ${e}.`),!1;ef.set(e,n);for(const t of nc.values())Qg(t,n);for(const t of M1.values())Qg(t,n);return!0}function Nf(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Nr(n){return n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F1={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ei=new il("app","Firebase",F1);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U1{constructor(e,t,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new ms("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ei.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const No=L1;function M_(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const i=Object.assign({name:Zd,automaticDataCollectionEnabled:!1},e),o=i.name;if(typeof o!="string"||!o)throw Ei.create("bad-app-name",{appName:String(o)});if(t||(t=D_()),!t)throw Ei.create("no-options");const l=nc.get(o);if(l){if(tc(t,l.options)&&tc(i,l.config))return l;throw Ei.create("duplicate-app",{appName:o})}const c=new HT(o);for(const m of ef.values())c.addComponent(m);const f=new U1(t,i,c);return nc.set(o,f),f}function F_(n=Zd){const e=nc.get(n);if(!e&&n===Zd&&D_())return M_();if(!e)throw Ei.create("no-app",{appName:n});return e}function Ti(n,e,t){var i;let o=(i=V1[n])!==null&&i!==void 0?i:n;t&&(o+=`-${t}`);const l=o.match(/\s|\//),c=e.match(/\s|\//);if(l||c){const f=[`Unable to register library "${o}" with version "${e}":`];l&&f.push(`library name "${o}" contains illegal characters (whitespace or "/")`),l&&c&&f.push("and"),c&&f.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Fr.warn(f.join(" "));return}To(new ms(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j1="firebase-heartbeat-database",z1=1,Wa="firebase-heartbeat-store";let Od=null;function U_(){return Od||(Od=i1(j1,z1,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Wa)}catch(t){console.warn(t)}}}}).catch(n=>{throw Ei.create("idb-open",{originalErrorMessage:n.message})})),Od}async function B1(n){try{const t=(await U_()).transaction(Wa),i=await t.objectStore(Wa).get(j_(n));return await t.done,i}catch(e){if(e instanceof Br)Fr.warn(e.message);else{const t=Ei.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Fr.warn(t.message)}}}async function Xg(n,e){try{const i=(await U_()).transaction(Wa,"readwrite");await i.objectStore(Wa).put(e,j_(n)),await i.done}catch(t){if(t instanceof Br)Fr.warn(t.message);else{const i=Ei.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Fr.warn(i.message)}}}function j_(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $1=1024,q1=30*24*60*60*1e3;class H1{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new K1(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=Yg();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(c=>c.date===l)?void 0:(this._heartbeatsCache.heartbeats.push({date:l,agent:o}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(c=>{const f=new Date(c.date).valueOf();return Date.now()-f<=q1}),this._storage.overwrite(this._heartbeatsCache))}catch(i){Fr.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Yg(),{heartbeatsToSend:i,unsentEntries:o}=W1(this._heartbeatsCache.heartbeats),l=ec(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return Fr.warn(t),""}}}function Yg(){return new Date().toISOString().substring(0,10)}function W1(n,e=$1){const t=[];let i=n.slice();for(const o of n){const l=t.find(c=>c.agent===o.agent);if(l){if(l.dates.push(o.date),Jg(t)>e){l.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),Jg(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class K1{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return DT()?OT().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await B1(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return Xg(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return Xg(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function Jg(n){return ec(JSON.stringify({version:2,heartbeats:n})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G1(n){To(new ms("platform-logger",e=>new a1(e),"PRIVATE")),To(new ms("heartbeat",e=>new H1(e),"PRIVATE")),Ti(Jd,Gg,n),Ti(Jd,Gg,"esm2017"),Ti("fire-js","")}G1("");function bf(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(t[i[o]]=n[i[o]]);return t}function z_(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Q1=z_,B_=new il("auth","Firebase",z_());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rc=new Pf("@firebase/auth");function X1(n,...e){rc.logLevel<=Ne.WARN&&rc.warn(`Auth (${No}): ${n}`,...e)}function zu(n,...e){rc.logLevel<=Ne.ERROR&&rc.error(`Auth (${No}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cr(n,...e){throw Of(n,...e)}function Hn(n,...e){return Of(n,...e)}function Df(n,e,t){const i=Object.assign(Object.assign({},Q1()),{[e]:t});return new il("auth","Firebase",i).create(e,{appName:n.name})}function hs(n){return Df(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Y1(n,e,t){const i=t;if(!(e instanceof i))throw i.name!==e.constructor.name&&cr(n,"argument-error"),Df(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Of(n,...e){if(typeof n!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return B_.create(n,...e)}function Ie(n,e,...t){if(!n)throw Of(e,...t)}function br(n){const e="INTERNAL ASSERTION FAILED: "+n;throw zu(e),new Error(e)}function Ur(n,e){n||br(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tf(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function J1(){return Zg()==="http:"||Zg()==="https:"}function Zg(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z1(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(J1()||PT()||"connection"in navigator)?navigator.onLine:!0}function eI(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ol{constructor(e,t){this.shortDelay=e,this.longDelay=t,Ur(t>e,"Short delay should be less than long delay!"),this.isMobile=RT()||xT()}get(){return Z1()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lf(n,e){Ur(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $_{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;br("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;br("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;br("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tI={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nI=new ol(3e4,6e4);function Vf(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function bo(n,e,t,i,o={}){return q_(n,o,async()=>{let l={},c={};i&&(e==="GET"?c=i:l={body:JSON.stringify(i)});const f=sl(Object.assign({key:n.config.apiKey},c)).slice(1),m=await n._getAdditionalHeaders();m["Content-Type"]="application/json",n.languageCode&&(m["X-Firebase-Locale"]=n.languageCode);const y=Object.assign({method:e,headers:m},l);return kT()||(y.referrerPolicy="no-referrer"),$_.fetch()(H_(n,n.config.apiHost,t,f),y)})}async function q_(n,e,t){n._canInitEmulator=!1;const i=Object.assign(Object.assign({},tI),e);try{const o=new iI(n),l=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const c=await l.json();if("needConfirmation"in c)throw Lu(n,"account-exists-with-different-credential",c);if(l.ok&&!("errorMessage"in c))return c;{const f=l.ok?c.errorMessage:c.error.message,[m,y]=f.split(" : ");if(m==="FEDERATED_USER_ID_ALREADY_LINKED")throw Lu(n,"credential-already-in-use",c);if(m==="EMAIL_EXISTS")throw Lu(n,"email-already-in-use",c);if(m==="USER_DISABLED")throw Lu(n,"user-disabled",c);const v=i[m]||m.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw Df(n,v,y);cr(n,v)}}catch(o){if(o instanceof Br)throw o;cr(n,"network-request-failed",{message:String(o)})}}async function rI(n,e,t,i,o={}){const l=await bo(n,e,t,i,o);return"mfaPendingCredential"in l&&cr(n,"multi-factor-auth-required",{_serverResponse:l}),l}function H_(n,e,t,i){const o=`${e}${t}?${i}`;return n.config.emulator?Lf(n.config,o):`${n.config.apiScheme}://${o}`}class iI{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(Hn(this.auth,"network-request-failed")),nI.get())})}}function Lu(n,e,t){const i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const o=Hn(n,e,i);return o.customData._tokenResponse=t,o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sI(n,e){return bo(n,"POST","/v1/accounts:delete",e)}async function W_(n,e){return bo(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ja(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function oI(n,e=!1){const t=Pt(n),i=await t.getIdToken(e),o=Mf(i);Ie(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const l=typeof o.firebase=="object"?o.firebase:void 0,c=l==null?void 0:l.sign_in_provider;return{claims:o,token:i,authTime:ja(Ld(o.auth_time)),issuedAtTime:ja(Ld(o.iat)),expirationTime:ja(Ld(o.exp)),signInProvider:c||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function Ld(n){return Number(n)*1e3}function Mf(n){const[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return zu("JWT malformed, contained fewer than 3 sections"),null;try{const o=N_(t);return o?JSON.parse(o):(zu("Failed to decode base64 JWT payload"),null)}catch(o){return zu("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function ey(n){const e=Mf(n);return Ie(e,"internal-error"),Ie(typeof e.exp<"u","internal-error"),Ie(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ka(n,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof Br&&aI(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function aI({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lI{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const o=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nf{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=ja(this.lastLoginAt),this.creationTime=ja(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ic(n){var e;const t=n.auth,i=await n.getIdToken(),o=await Ka(n,W_(t,{idToken:i}));Ie(o==null?void 0:o.users.length,t,"internal-error");const l=o.users[0];n._notifyReloadListener(l);const c=!((e=l.providerUserInfo)===null||e===void 0)&&e.length?K_(l.providerUserInfo):[],f=cI(n.providerData,c),m=n.isAnonymous,y=!(n.email&&l.passwordHash)&&!(f!=null&&f.length),v=m?y:!1,E={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:f,metadata:new nf(l.createdAt,l.lastLoginAt),isAnonymous:v};Object.assign(n,E)}async function uI(n){const e=Pt(n);await ic(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function cI(n,e){return[...n.filter(i=>!e.some(o=>o.providerId===i.providerId)),...e]}function K_(n){return n.map(e=>{var{providerId:t}=e,i=bf(e,["providerId"]);return{providerId:t,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hI(n,e){const t=await q_(n,{},async()=>{const i=sl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:l}=n.config,c=H_(n,o,"/v1/token",`key=${l}`),f=await n._getAdditionalHeaders();return f["Content-Type"]="application/x-www-form-urlencoded",$_.fetch()(c,{method:"POST",headers:f,body:i})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function dI(n,e){return bo(n,"POST","/v2/accounts:revokeToken",Vf(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _o{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ie(e.idToken,"internal-error"),Ie(typeof e.idToken<"u","internal-error"),Ie(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):ey(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ie(e.length!==0,"internal-error");const t=ey(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ie(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:o,expiresIn:l}=await hI(e,t);this.updateTokensAndExpiration(i,o,Number(l))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:o,expirationTime:l}=t,c=new _o;return i&&(Ie(typeof i=="string","internal-error",{appName:e}),c.refreshToken=i),o&&(Ie(typeof o=="string","internal-error",{appName:e}),c.accessToken=o),l&&(Ie(typeof l=="number","internal-error",{appName:e}),c.expirationTime=l),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new _o,this.toJSON())}_performRefresh(){return br("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mi(n,e){Ie(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Dr{constructor(e){var{uid:t,auth:i,stsTokenManager:o}=e,l=bf(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new lI(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=i,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new nf(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const t=await Ka(this,this.stsTokenManager.getToken(this.auth,e));return Ie(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return oI(this,e)}reload(){return uI(this)}_assign(e){this!==e&&(Ie(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Dr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Ie(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await ic(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Nr(this.auth.app))return Promise.reject(hs(this.auth));const e=await this.getIdToken();return await Ka(this,sI(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var i,o,l,c,f,m,y,v;const E=(i=t.displayName)!==null&&i!==void 0?i:void 0,S=(o=t.email)!==null&&o!==void 0?o:void 0,M=(l=t.phoneNumber)!==null&&l!==void 0?l:void 0,j=(c=t.photoURL)!==null&&c!==void 0?c:void 0,B=(f=t.tenantId)!==null&&f!==void 0?f:void 0,D=(m=t._redirectEventId)!==null&&m!==void 0?m:void 0,ee=(y=t.createdAt)!==null&&y!==void 0?y:void 0,W=(v=t.lastLoginAt)!==null&&v!==void 0?v:void 0,{uid:X,emailVerified:ne,isAnonymous:me,providerData:fe,stsTokenManager:k}=t;Ie(X&&k,e,"internal-error");const I=_o.fromJSON(this.name,k);Ie(typeof X=="string",e,"internal-error"),mi(E,e.name),mi(S,e.name),Ie(typeof ne=="boolean",e,"internal-error"),Ie(typeof me=="boolean",e,"internal-error"),mi(M,e.name),mi(j,e.name),mi(B,e.name),mi(D,e.name),mi(ee,e.name),mi(W,e.name);const R=new Dr({uid:X,auth:e,email:S,emailVerified:ne,displayName:E,isAnonymous:me,photoURL:j,phoneNumber:M,tenantId:B,stsTokenManager:I,createdAt:ee,lastLoginAt:W});return fe&&Array.isArray(fe)&&(R.providerData=fe.map(x=>Object.assign({},x))),D&&(R._redirectEventId=D),R}static async _fromIdTokenResponse(e,t,i=!1){const o=new _o;o.updateFromServerResponse(t);const l=new Dr({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:i});return await ic(l),l}static async _fromGetAccountInfoResponse(e,t,i){const o=t.users[0];Ie(o.localId!==void 0,"internal-error");const l=o.providerUserInfo!==void 0?K_(o.providerUserInfo):[],c=!(o.email&&o.passwordHash)&&!(l!=null&&l.length),f=new _o;f.updateFromIdToken(i);const m=new Dr({uid:o.localId,auth:e,stsTokenManager:f,isAnonymous:c}),y={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:l,metadata:new nf(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(l!=null&&l.length)};return Object.assign(m,y),m}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ty=new Map;function Or(n){Ur(n instanceof Function,"Expected a class definition");let e=ty.get(n);return e?(Ur(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,ty.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G_{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}G_.type="NONE";const ny=G_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bu(n,e,t){return`firebase:${n}:${e}:${t}`}class vo{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:o,name:l}=this.auth;this.fullUserKey=Bu(this.userKey,o.apiKey,l),this.fullPersistenceKey=Bu("persistence",o.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Dr._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new vo(Or(ny),e,i);const o=(await Promise.all(t.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let l=o[0]||Or(ny);const c=Bu(i,e.config.apiKey,e.name);let f=null;for(const y of t)try{const v=await y._get(c);if(v){const E=Dr._fromJSON(e,v);y!==l&&(f=E),l=y;break}}catch{}const m=o.filter(y=>y._shouldAllowMigration);return!l._shouldAllowMigration||!m.length?new vo(l,e,i):(l=m[0],f&&await l._set(c,f.toJSON()),await Promise.all(t.map(async y=>{if(y!==l)try{await y._remove(c)}catch{}})),new vo(l,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ry(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(J_(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Q_(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(ev(e))return"Blackberry";if(tv(e))return"Webos";if(X_(e))return"Safari";if((e.includes("chrome/")||Y_(e))&&!e.includes("edge/"))return"Chrome";if(Z_(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function Q_(n=Ht()){return/firefox\//i.test(n)}function X_(n=Ht()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Y_(n=Ht()){return/crios\//i.test(n)}function J_(n=Ht()){return/iemobile/i.test(n)}function Z_(n=Ht()){return/android/i.test(n)}function ev(n=Ht()){return/blackberry/i.test(n)}function tv(n=Ht()){return/webos/i.test(n)}function Ff(n=Ht()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function fI(n=Ht()){var e;return Ff(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function pI(){return NT()&&document.documentMode===10}function nv(n=Ht()){return Ff(n)||Z_(n)||tv(n)||ev(n)||/windows phone/i.test(n)||J_(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rv(n,e=[]){let t;switch(n){case"Browser":t=ry(Ht());break;case"Worker":t=`${ry(Ht())}-${n}`;break;default:t=n}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${No}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mI{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=l=>new Promise((c,f)=>{try{const m=e(l);c(m)}catch(m){f(m)}});i.onAbort=t,this.queue.push(i);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gI(n,e={}){return bo(n,"GET","/v2/passwordPolicy",Vf(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yI=6;class _I{constructor(e){var t,i,o,l;const c=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=c.minPasswordLength)!==null&&t!==void 0?t:yI,c.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=c.maxPasswordLength),c.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=c.containsLowercaseCharacter),c.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=c.containsUppercaseCharacter),c.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=c.containsNumericCharacter),c.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=c.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(o=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&o!==void 0?o:"",this.forceUpgradeOnSignin=(l=e.forceUpgradeOnSignin)!==null&&l!==void 0?l:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,i,o,l,c,f;const m={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,m),this.validatePasswordCharacterOptions(e,m),m.isValid&&(m.isValid=(t=m.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),m.isValid&&(m.isValid=(i=m.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),m.isValid&&(m.isValid=(o=m.containsLowercaseLetter)!==null&&o!==void 0?o:!0),m.isValid&&(m.isValid=(l=m.containsUppercaseLetter)!==null&&l!==void 0?l:!0),m.isValid&&(m.isValid=(c=m.containsNumericCharacter)!==null&&c!==void 0?c:!0),m.isValid&&(m.isValid=(f=m.containsNonAlphanumericCharacter)!==null&&f!==void 0?f:!0),m}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let o=0;o<e.length;o++)i=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,o,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vI{constructor(e,t,i,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new iy(this),this.idTokenSubscription=new iy(this),this.beforeStateQueue=new mI(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=B_,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Or(t)),this._initializationPromise=this.queue(async()=>{var i,o;if(!this._deleted&&(this.persistenceManager=await vo.create(this,e),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await W_(this,{idToken:e}),i=await Dr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Nr(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(f=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(f,f))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let o=i,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,f=o==null?void 0:o._redirectEventId,m=await this.tryRedirectSignIn(e);(!c||c===f)&&(m!=null&&m.user)&&(o=m.user,l=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(o)}catch(c){o=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return Ie(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await ic(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=eI()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Nr(this.app))return Promise.reject(hs(this));const t=e?Pt(e):null;return t&&Ie(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ie(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Nr(this.app)?Promise.reject(hs(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Nr(this.app)?Promise.reject(hs(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Or(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await gI(this),t=new _I(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new il("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await dI(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Or(e)||this._popupRedirectResolver;Ie(t,this,"argument-error"),this.redirectPersistenceManager=await vo.create(this,[Or(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,i;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,o){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let c=!1;const f=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ie(f,this,"internal-error"),f.then(()=>{c||l(this.currentUser)}),typeof t=="function"){const m=e.addObserver(t,i,o);return()=>{c=!0,m()}}else{const m=e.addObserver(t);return()=>{c=!0,m()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ie(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=rv(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(t["X-Firebase-Client"]=i);const o=await this._getAppCheckToken();return o&&(t["X-Firebase-AppCheck"]=o),t}async _getAppCheckToken(){var e;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&X1(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function Rc(n){return Pt(n)}class iy{constructor(e){this.auth=e,this.observer=null,this.addObserver=UT(t=>this.observer=t)}get next(){return Ie(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Uf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function wI(n){Uf=n}function EI(n){return Uf.loadJS(n)}function TI(){return Uf.gapiScript}function II(n){return`__${n}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SI(n,e){const t=Nf(n,"auth");if(t.isInitialized()){const o=t.getImmediate(),l=t.getOptions();if(tc(l,e??{}))return o;cr(o,"already-initialized")}return t.initialize({options:e})}function AI(n,e){const t=(e==null?void 0:e.persistence)||[],i=(Array.isArray(t)?t:[t]).map(Or);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function RI(n,e,t){const i=Rc(n);Ie(i._canInitEmulator,i,"emulator-config-failed"),Ie(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const o=!1,l=iv(e),{host:c,port:f}=CI(e),m=f===null?"":`:${f}`;i.config.emulator={url:`${l}//${c}${m}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:c,port:f,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:o})}),kI()}function iv(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function CI(n){const e=iv(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(i);if(o){const l=o[1];return{host:l,port:sy(i.substr(l.length+1))}}else{const[l,c]=i.split(":");return{host:l,port:sy(c)}}}function sy(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function kI(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sv{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return br("not implemented")}_getIdTokenResponse(e){return br("not implemented")}_linkToIdToken(e,t){return br("not implemented")}_getReauthenticationResolver(e){return br("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wo(n,e){return rI(n,"POST","/v1/accounts:signInWithIdp",Vf(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PI="http://localhost";class gs extends sv{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new gs(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):cr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:o}=t,l=bf(t,["providerId","signInMethod"]);if(!i||!o)return null;const c=new gs(i,o);return c.idToken=l.idToken||void 0,c.accessToken=l.accessToken||void 0,c.secret=l.secret,c.nonce=l.nonce,c.pendingToken=l.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return wo(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,wo(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,wo(e,t)}buildRequest(){const e={requestUri:PI,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=sl(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jf{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class al extends jf{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gi extends al{constructor(){super("facebook.com")}static credential(e){return gs._fromParams({providerId:gi.PROVIDER_ID,signInMethod:gi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return gi.credentialFromTaggedObject(e)}static credentialFromError(e){return gi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return gi.credential(e.oauthAccessToken)}catch{return null}}}gi.FACEBOOK_SIGN_IN_METHOD="facebook.com";gi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xr extends al{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return gs._fromParams({providerId:xr.PROVIDER_ID,signInMethod:xr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return xr.credentialFromTaggedObject(e)}static credentialFromError(e){return xr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return xr.credential(t,i)}catch{return null}}}xr.GOOGLE_SIGN_IN_METHOD="google.com";xr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yi extends al{constructor(){super("github.com")}static credential(e){return gs._fromParams({providerId:yi.PROVIDER_ID,signInMethod:yi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return yi.credentialFromTaggedObject(e)}static credentialFromError(e){return yi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return yi.credential(e.oauthAccessToken)}catch{return null}}}yi.GITHUB_SIGN_IN_METHOD="github.com";yi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _i extends al{constructor(){super("twitter.com")}static credential(e,t){return gs._fromParams({providerId:_i.PROVIDER_ID,signInMethod:_i.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return _i.credentialFromTaggedObject(e)}static credentialFromError(e){return _i.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return _i.credential(t,i)}catch{return null}}}_i.TWITTER_SIGN_IN_METHOD="twitter.com";_i.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Io{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,o=!1){const l=await Dr._fromIdTokenResponse(e,i,o),c=oy(i);return new Io({user:l,providerId:c,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const o=oy(i);return new Io({user:e,providerId:o,_tokenResponse:i,operationType:t})}}function oy(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sc extends Br{constructor(e,t,i,o){var l;super(t.code,t.message),this.operationType=i,this.user=o,Object.setPrototypeOf(this,sc.prototype),this.customData={appName:e.name,tenantId:(l=e.tenantId)!==null&&l!==void 0?l:void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,o){return new sc(e,t,i,o)}}function ov(n,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?sc._fromErrorAndOperation(n,l,e,i):l})}async function xI(n,e,t=!1){const i=await Ka(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Io._forOperation(n,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NI(n,e,t=!1){const{auth:i}=n;if(Nr(i.app))return Promise.reject(hs(i));const o="reauthenticate";try{const l=await Ka(n,ov(i,o,e,n),t);Ie(l.idToken,i,"internal-error");const c=Mf(l.idToken);Ie(c,i,"internal-error");const{sub:f}=c;return Ie(n.uid===f,i,"user-mismatch"),Io._forOperation(n,o,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&cr(i,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bI(n,e,t=!1){if(Nr(n.app))return Promise.reject(hs(n));const i="signIn",o=await ov(n,i,e),l=await Io._fromIdTokenResponse(n,i,o);return t||await n._updateCurrentUser(l.user),l}function DI(n,e,t,i){return Pt(n).onIdTokenChanged(e,t,i)}function OI(n,e,t){return Pt(n).beforeAuthStateChanged(e,t)}function LI(n,e,t,i){return Pt(n).onAuthStateChanged(e,t,i)}function VI(n){return Pt(n).signOut()}const oc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class av{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(oc,"1"),this.storage.removeItem(oc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MI=1e3,FI=10;class lv extends av{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=nv(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),o=this.localCache[t];i!==o&&e(t,o,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,f,m)=>{this.notifyListeners(c,m)});return}const i=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const c=this.storage.getItem(i);!t&&this.localCache[i]===c||this.notifyListeners(i,c)},l=this.storage.getItem(i);pI()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,FI):o()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},MI)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}lv.type="LOCAL";const UI=lv;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uv extends av{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}uv.type="SESSION";const cv=uv;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jI(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cc{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const i=new Cc(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:o,data:l}=t.data,c=this.handlersMap[o];if(!(c!=null&&c.size))return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:o});const f=Array.from(c).map(async y=>y(t.origin,l)),m=await jI(f);t.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:m})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Cc.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zf(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zI{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let l,c;return new Promise((f,m)=>{const y=zf("",20);o.port1.start();const v=setTimeout(()=>{m(new Error("unsupported_event"))},i);c={messageChannel:o,onMessage(E){const S=E;if(S.data.eventId===y)switch(S.data.status){case"ack":clearTimeout(v),l=setTimeout(()=>{m(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),f(S.data.response);break;default:clearTimeout(v),clearTimeout(l),m(new Error("invalid_response"));break}}},this.handlers.add(c),o.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:y,data:t},[o.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function or(){return window}function BI(n){or().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hv(){return typeof or().WorkerGlobalScope<"u"&&typeof or().importScripts=="function"}async function $I(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function qI(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function HI(){return hv()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dv="firebaseLocalStorageDb",WI=1,ac="firebaseLocalStorage",fv="fbase_key";class ll{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function kc(n,e){return n.transaction([ac],e?"readwrite":"readonly").objectStore(ac)}function KI(){const n=indexedDB.deleteDatabase(dv);return new ll(n).toPromise()}function rf(){const n=indexedDB.open(dv,WI);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(ac,{keyPath:fv})}catch(o){t(o)}}),n.addEventListener("success",async()=>{const i=n.result;i.objectStoreNames.contains(ac)?e(i):(i.close(),await KI(),e(await rf()))})})}async function ay(n,e,t){const i=kc(n,!0).put({[fv]:e,value:t});return new ll(i).toPromise()}async function GI(n,e){const t=kc(n,!1).get(e),i=await new ll(t).toPromise();return i===void 0?null:i.value}function ly(n,e){const t=kc(n,!0).delete(e);return new ll(t).toPromise()}const QI=800,XI=3;class pv{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await rf(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>XI)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return hv()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Cc._getInstance(HI()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await $I(),!this.activeServiceWorker)return;this.sender=new zI(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((t=i[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||qI()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await rf();return await ay(e,oc,"1"),await ly(e,oc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>ay(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>GI(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>ly(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const l=kc(o,!1).getAll();return new ll(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:o,value:l}of e)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(l)&&(this.notifyListeners(o,l),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),QI)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}pv.type="LOCAL";const YI=pv;new ol(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mv(n,e){return e?Or(e):(Ie(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bf extends sv{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return wo(e,this._buildIdpRequest())}_linkToIdToken(e,t){return wo(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return wo(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function JI(n){return bI(n.auth,new Bf(n),n.bypassAuthState)}function ZI(n){const{auth:e,user:t}=n;return Ie(t,e,"internal-error"),NI(t,new Bf(n),n.bypassAuthState)}async function eS(n){const{auth:e,user:t}=n;return Ie(t,e,"internal-error"),xI(t,new Bf(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gv{constructor(e,t,i,o,l=!1){this.auth=e,this.resolver=i,this.user=o,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:o,tenantId:l,error:c,type:f}=e;if(c){this.reject(c);return}const m={auth:this.auth,requestUri:t,sessionId:i,tenantId:l||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(f)(m))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return JI;case"linkViaPopup":case"linkViaRedirect":return eS;case"reauthViaPopup":case"reauthViaRedirect":return ZI;default:cr(this.auth,"internal-error")}}resolve(e){Ur(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ur(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tS=new ol(2e3,1e4);async function nS(n,e,t){if(Nr(n.app))return Promise.reject(Hn(n,"operation-not-supported-in-this-environment"));const i=Rc(n);Y1(n,e,jf);const o=mv(i,t);return new as(i,"signInViaPopup",e,o).executeNotNull()}class as extends gv{constructor(e,t,i,o,l){super(e,t,o,l),this.provider=i,this.authWindow=null,this.pollId=null,as.currentPopupAction&&as.currentPopupAction.cancel(),as.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ie(e,this.auth,"internal-error"),e}async onExecution(){Ur(this.filter.length===1,"Popup operations only handle one event");const e=zf();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Hn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Hn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,as.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,i;if(!((i=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Hn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,tS.get())};e()}}as.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rS="pendingRedirect",$u=new Map;class iS extends gv{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=$u.get(this.auth._key());if(!e){try{const i=await sS(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}$u.set(this.auth._key(),e)}return this.bypassAuthState||$u.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function sS(n,e){const t=lS(e),i=aS(n);if(!await i._isAvailable())return!1;const o=await i._get(t)==="true";return await i._remove(t),o}function oS(n,e){$u.set(n._key(),e)}function aS(n){return Or(n._redirectPersistence)}function lS(n){return Bu(rS,n.config.apiKey,n.name)}async function uS(n,e,t=!1){if(Nr(n.app))return Promise.reject(hs(n));const i=Rc(n),o=mv(i,e),c=await new iS(i,o,t).execute();return c&&!t&&(delete c.user._redirectEventId,await i._persistUserIfCurrent(c.user),await i._setRedirectUser(null,e)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cS=10*60*1e3;class hS{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!dS(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!yv(e)){const o=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";t.onError(Hn(this.auth,o))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=cS&&this.cachedEventUids.clear(),this.cachedEventUids.has(uy(e))}saveEventToCache(e){this.cachedEventUids.add(uy(e)),this.lastProcessedEventTime=Date.now()}}function uy(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function yv({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function dS(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return yv(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fS(n,e={}){return bo(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pS=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,mS=/^https?/;async function gS(n){if(n.config.emulator)return;const{authorizedDomains:e}=await fS(n);for(const t of e)try{if(yS(t))return}catch{}cr(n,"unauthorized-domain")}function yS(n){const e=tf(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){const c=new URL(n);return c.hostname===""&&i===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===i}if(!mS.test(t))return!1;if(pS.test(n))return i===n;const o=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _S=new ol(3e4,6e4);function cy(){const n=or().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function vS(n){return new Promise((e,t)=>{var i,o,l;function c(){cy(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{cy(),t(Hn(n,"network-request-failed"))},timeout:_S.get()})}if(!((o=(i=or().gapi)===null||i===void 0?void 0:i.iframes)===null||o===void 0)&&o.Iframe)e(gapi.iframes.getContext());else if(!((l=or().gapi)===null||l===void 0)&&l.load)c();else{const f=II("iframefcb");return or()[f]=()=>{gapi.load?c():t(Hn(n,"network-request-failed"))},EI(`${TI()}?onload=${f}`).catch(m=>t(m))}}).catch(e=>{throw qu=null,e})}let qu=null;function wS(n){return qu=qu||vS(n),qu}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ES=new ol(5e3,15e3),TS="__/auth/iframe",IS="emulator/auth/iframe",SS={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},AS=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function RS(n){const e=n.config;Ie(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Lf(e,IS):`https://${n.config.authDomain}/${TS}`,i={apiKey:e.apiKey,appName:n.name,v:No},o=AS.get(n.config.apiHost);o&&(i.eid=o);const l=n._getFrameworks();return l.length&&(i.fw=l.join(",")),`${t}?${sl(i).slice(1)}`}async function CS(n){const e=await wS(n),t=or().gapi;return Ie(t,n,"internal-error"),e.open({where:document.body,url:RS(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:SS,dontclear:!0},i=>new Promise(async(o,l)=>{await i.restyle({setHideOnLeave:!1});const c=Hn(n,"network-request-failed"),f=or().setTimeout(()=>{l(c)},ES.get());function m(){or().clearTimeout(f),o(i)}i.ping(m).then(m,()=>{l(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kS={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},PS=500,xS=600,NS="_blank",bS="http://localhost";class hy{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function DS(n,e,t,i=PS,o=xS){const l=Math.max((window.screen.availHeight-o)/2,0).toString(),c=Math.max((window.screen.availWidth-i)/2,0).toString();let f="";const m=Object.assign(Object.assign({},kS),{width:i.toString(),height:o.toString(),top:l,left:c}),y=Ht().toLowerCase();t&&(f=Y_(y)?NS:t),Q_(y)&&(e=e||bS,m.scrollbars="yes");const v=Object.entries(m).reduce((S,[M,j])=>`${S}${M}=${j},`,"");if(fI(y)&&f!=="_self")return OS(e||"",f),new hy(null);const E=window.open(e||"",f,v);Ie(E,n,"popup-blocked");try{E.focus()}catch{}return new hy(E)}function OS(n,e){const t=document.createElement("a");t.href=n,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LS="__/auth/handler",VS="emulator/auth/handler",MS=encodeURIComponent("fac");async function dy(n,e,t,i,o,l){Ie(n.config.authDomain,n,"auth-domain-config-required"),Ie(n.config.apiKey,n,"invalid-api-key");const c={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:No,eventId:o};if(e instanceof jf){e.setDefaultLanguage(n.languageCode),c.providerId=e.providerId||"",FT(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[v,E]of Object.entries({}))c[v]=E}if(e instanceof al){const v=e.getScopes().filter(E=>E!=="");v.length>0&&(c.scopes=v.join(","))}n.tenantId&&(c.tid=n.tenantId);const f=c;for(const v of Object.keys(f))f[v]===void 0&&delete f[v];const m=await n._getAppCheckToken(),y=m?`#${MS}=${encodeURIComponent(m)}`:"";return`${FS(n)}?${sl(f).slice(1)}${y}`}function FS({config:n}){return n.emulator?Lf(n,VS):`https://${n.authDomain}/${LS}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vd="webStorageSupport";class US{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=cv,this._completeRedirectFn=uS,this._overrideRedirectResult=oS}async _openPopup(e,t,i,o){var l;Ur((l=this.eventManagers[e._key()])===null||l===void 0?void 0:l.manager,"_initialize() not called before _openPopup()");const c=await dy(e,t,i,tf(),o);return DS(e,c,zf())}async _openRedirect(e,t,i,o){await this._originValidation(e);const l=await dy(e,t,i,tf(),o);return BI(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:l}=this.eventManagers[t];return o?Promise.resolve(o):(Ur(l,"If manager is not set, promise should be"),l)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await CS(e),i=new hS(e);return t.register("authEvent",o=>(Ie(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:i.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Vd,{type:Vd},o=>{var l;const c=(l=o==null?void 0:o[0])===null||l===void 0?void 0:l[Vd];c!==void 0&&t(!!c),cr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=gS(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return nv()||X_()||Ff()}}const jS=US;var fy="@firebase/auth",py="1.8.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zS{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ie(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BS(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function $S(n){To(new ms("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:c,authDomain:f}=i.options;Ie(c&&!c.includes(":"),"invalid-api-key",{appName:i.name});const m={apiKey:c,authDomain:f,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:rv(n)},y=new vI(i,o,l,m);return AI(y,t),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),To(new ms("auth-internal",e=>{const t=Rc(e.getProvider("auth").getImmediate());return(i=>new zS(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ti(fy,py,BS(n)),Ti(fy,py,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qS=5*60,HS=O_("authIdTokenMaxAge")||qS;let my=null;const WS=n=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>HS)return;const o=t==null?void 0:t.token;my!==o&&(my=o,await fetch(n,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function KS(n=F_()){const e=Nf(n,"auth");if(e.isInitialized())return e.getImmediate();const t=SI(n,{popupRedirectResolver:jS,persistence:[YI,UI,cv]}),i=O_("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(i,location.origin);if(location.origin===l.origin){const c=WS(l.toString());OI(t,c,()=>c(t.currentUser)),DI(t,f=>c(f))}}const o=b_("auth");return o&&RI(t,`http://${o}`),t}function GS(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}wI({loadJS(n){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=o=>{const l=Hn("internal-error");l.customData=o,t(l)},i.type="text/javascript",i.charset="UTF-8",GS().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});$S("Browser");var QS="firebase",XS="11.1.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ti(QS,XS,"app");const YS={apiKey:"AIzaSyAjfZnO1H_9Bz7bBbvE0KmSWOegJ3M44Fc",authDomain:"watchlist-duo.firebaseapp.com",projectId:"watchlist-duo",storageBucket:"watchlist-duo.appspot.com",messagingSenderId:"219023485324",appId:"1:219023485324:web:30dbfff2ade1cfbc9d0ea9"},JS=M_(YS),$f=KS(JS),ZS=new xr,eA=()=>{const[n,e]=he.useState(null),t=async()=>{try{const i=await nS($f,ZS);console.log("Logged in as:",i.user.displayName),e(null)}catch(i){i instanceof Error?e(i.message):e("An unexpected error occurred. Please try again.")}};return L.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gray-100",children:[L.jsx("h1",{className:"text-3xl font-bold mb-6 text-gray-800",children:"Login"}),L.jsx("button",{onClick:t,className:"px-6 py-3 bg-blue-600 text-white rounded-lg shadow-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:ring-offset-2 transition duration-200",children:"Login with Google"}),n&&L.jsx("p",{className:"text-red-600 mt-4",children:n})]})};var _v={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},gy=Ue.createContext&&Ue.createContext(_v),tA=["attr","size","title"];function nA(n,e){if(n==null)return{};var t=rA(n,e),i,o;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(n);for(o=0;o<l.length;o++)i=l[o],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(n,i)&&(t[i]=n[i])}return t}function rA(n,e){if(n==null)return{};var t={};for(var i in n)if(Object.prototype.hasOwnProperty.call(n,i)){if(e.indexOf(i)>=0)continue;t[i]=n[i]}return t}function lc(){return lc=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},lc.apply(this,arguments)}function yy(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable})),t.push.apply(t,i)}return t}function uc(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?yy(Object(t),!0).forEach(function(i){iA(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):yy(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function iA(n,e,t){return e=sA(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function sA(n){var e=oA(n,"string");return typeof e=="symbol"?e:e+""}function oA(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function vv(n){return n&&n.map((e,t)=>Ue.createElement(e.tag,uc({key:t},e.attr),vv(e.child)))}function qf(n){return e=>Ue.createElement(aA,lc({attr:uc({},n.attr)},e),vv(n.child))}function aA(n){var e=t=>{var{attr:i,size:o,title:l}=n,c=nA(n,tA),f=o||t.size||"1em",m;return t.className&&(m=t.className),n.className&&(m=(m?m+" ":"")+n.className),Ue.createElement("svg",lc({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,i,c,{className:m,style:uc(uc({color:n.color||t.color},t.style),n.style),height:f,width:f,xmlns:"http://www.w3.org/2000/svg"}),l&&Ue.createElement("title",null,l),n.children)};return gy!==void 0?Ue.createElement(gy.Consumer,null,t=>e(t)):e(_v)}function lA(n){return qf({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M16 132h416c8.837 0 16-7.163 16-16V76c0-8.837-7.163-16-16-16H16C7.163 60 0 67.163 0 76v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16z"},child:[]}]})(n)}function uA(n){return qf({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M488 64h-8v20c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12V64H96v20c0 6.6-5.4 12-12 12H44c-6.6 0-12-5.4-12-12V64h-8C10.7 64 0 74.7 0 88v336c0 13.3 10.7 24 24 24h8v-20c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v20h320v-20c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v20h8c13.3 0 24-10.7 24-24V88c0-13.3-10.7-24-24-24zM96 372c0 6.6-5.4 12-12 12H44c-6.6 0-12-5.4-12-12v-40c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40zm0-96c0 6.6-5.4 12-12 12H44c-6.6 0-12-5.4-12-12v-40c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40zm0-96c0 6.6-5.4 12-12 12H44c-6.6 0-12-5.4-12-12v-40c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40zm272 208c0 6.6-5.4 12-12 12H156c-6.6 0-12-5.4-12-12v-96c0-6.6 5.4-12 12-12h200c6.6 0 12 5.4 12 12v96zm0-168c0 6.6-5.4 12-12 12H156c-6.6 0-12-5.4-12-12v-96c0-6.6 5.4-12 12-12h200c6.6 0 12 5.4 12 12v96zm112 152c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40zm0-96c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40zm0-96c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40z"},child:[]}]})(n)}function cA(n){return qf({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M592 0H48A48 48 0 0 0 0 48v320a48 48 0 0 0 48 48h240v32H112a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16H352v-32h240a48 48 0 0 0 48-48V48a48 48 0 0 0-48-48zm-16 352H64V64h512z"},child:[]}]})(n)}const hA="https://image.tmdb.org/t/p/w200",Lr=({media:n,type:e,actionLabel:t="Add to List",actionBtnColor:i="bg-green-600",actionBtnHoverColor:o="hover:bg-green-700",onActionClick:l})=>{var c,f;return console.log(n),L.jsxs("div",{className:"relative border rounded-lg shadow-md overflow-hidden mb-6 p-4",children:[L.jsxs("div",{className:"flex",children:[L.jsx("img",{src:n.poster_path?`${hA}${n.poster_path}`:"https://via.placeholder.com/200x300?text=No+Image",alt:e==="movie"?n.title:n.name,className:"w-32 h-48 object-cover border rounded-md flex-shrink-0 mr-4"}),L.jsxs("div",{className:"flex flex-col flex-1",children:[L.jsx("h3",{className:"text-lg font-bold",children:e==="movie"?n.title:n.name}),L.jsx("p",{className:"text-gray-600 font-semibold",children:((c=e==="movie"?n.release_date:n.first_air_date)==null?void 0:c.slice(0,4))||"Unknown"}),L.jsxs("p",{children:[L.jsx("span",{className:"text-yellow-500",children:""})," ",L.jsx("span",{className:"text-sm",children:(f=n.vote_average)==null?void 0:f.toFixed(1)})]})]})]}),L.jsxs("span",{className:`absolute bottom-16 right-4 flex gap-1 min-w-20 text-xs font-medium px-2 py-1 items-center justify-center rounded-full ${e==="movie"?"bg-red-400":"bg-blue-400"}`,children:[e==="movie"&&L.jsxs(L.Fragment,{children:[L.jsx(uA,{size:16}),"Movie"]}),e==="tv"&&L.jsxs(L.Fragment,{children:[L.jsx(cA,{size:16}),"TV"]})]}),(!n.owner||n.owner=="self")&&L.jsx("button",{onClick:l,className:`w-full mt-4 px-4 py-2 ${i} text-white rounded-lg ${o} focus:outline-none`,children:t})]})};var _y=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ds,wv;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(k,I){function R(){}R.prototype=I.prototype,k.D=I.prototype,k.prototype=new R,k.prototype.constructor=k,k.C=function(x,b,O){for(var C=Array(arguments.length-2),nt=2;nt<arguments.length;nt++)C[nt-2]=arguments[nt];return I.prototype[b].apply(x,C)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,t),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(k,I,R){R||(R=0);var x=Array(16);if(typeof I=="string")for(var b=0;16>b;++b)x[b]=I.charCodeAt(R++)|I.charCodeAt(R++)<<8|I.charCodeAt(R++)<<16|I.charCodeAt(R++)<<24;else for(b=0;16>b;++b)x[b]=I[R++]|I[R++]<<8|I[R++]<<16|I[R++]<<24;I=k.g[0],R=k.g[1],b=k.g[2];var O=k.g[3],C=I+(O^R&(b^O))+x[0]+3614090360&4294967295;I=R+(C<<7&4294967295|C>>>25),C=O+(b^I&(R^b))+x[1]+3905402710&4294967295,O=I+(C<<12&4294967295|C>>>20),C=b+(R^O&(I^R))+x[2]+606105819&4294967295,b=O+(C<<17&4294967295|C>>>15),C=R+(I^b&(O^I))+x[3]+3250441966&4294967295,R=b+(C<<22&4294967295|C>>>10),C=I+(O^R&(b^O))+x[4]+4118548399&4294967295,I=R+(C<<7&4294967295|C>>>25),C=O+(b^I&(R^b))+x[5]+1200080426&4294967295,O=I+(C<<12&4294967295|C>>>20),C=b+(R^O&(I^R))+x[6]+2821735955&4294967295,b=O+(C<<17&4294967295|C>>>15),C=R+(I^b&(O^I))+x[7]+4249261313&4294967295,R=b+(C<<22&4294967295|C>>>10),C=I+(O^R&(b^O))+x[8]+1770035416&4294967295,I=R+(C<<7&4294967295|C>>>25),C=O+(b^I&(R^b))+x[9]+2336552879&4294967295,O=I+(C<<12&4294967295|C>>>20),C=b+(R^O&(I^R))+x[10]+4294925233&4294967295,b=O+(C<<17&4294967295|C>>>15),C=R+(I^b&(O^I))+x[11]+2304563134&4294967295,R=b+(C<<22&4294967295|C>>>10),C=I+(O^R&(b^O))+x[12]+1804603682&4294967295,I=R+(C<<7&4294967295|C>>>25),C=O+(b^I&(R^b))+x[13]+4254626195&4294967295,O=I+(C<<12&4294967295|C>>>20),C=b+(R^O&(I^R))+x[14]+2792965006&4294967295,b=O+(C<<17&4294967295|C>>>15),C=R+(I^b&(O^I))+x[15]+1236535329&4294967295,R=b+(C<<22&4294967295|C>>>10),C=I+(b^O&(R^b))+x[1]+4129170786&4294967295,I=R+(C<<5&4294967295|C>>>27),C=O+(R^b&(I^R))+x[6]+3225465664&4294967295,O=I+(C<<9&4294967295|C>>>23),C=b+(I^R&(O^I))+x[11]+643717713&4294967295,b=O+(C<<14&4294967295|C>>>18),C=R+(O^I&(b^O))+x[0]+3921069994&4294967295,R=b+(C<<20&4294967295|C>>>12),C=I+(b^O&(R^b))+x[5]+3593408605&4294967295,I=R+(C<<5&4294967295|C>>>27),C=O+(R^b&(I^R))+x[10]+38016083&4294967295,O=I+(C<<9&4294967295|C>>>23),C=b+(I^R&(O^I))+x[15]+3634488961&4294967295,b=O+(C<<14&4294967295|C>>>18),C=R+(O^I&(b^O))+x[4]+3889429448&4294967295,R=b+(C<<20&4294967295|C>>>12),C=I+(b^O&(R^b))+x[9]+568446438&4294967295,I=R+(C<<5&4294967295|C>>>27),C=O+(R^b&(I^R))+x[14]+3275163606&4294967295,O=I+(C<<9&4294967295|C>>>23),C=b+(I^R&(O^I))+x[3]+4107603335&4294967295,b=O+(C<<14&4294967295|C>>>18),C=R+(O^I&(b^O))+x[8]+1163531501&4294967295,R=b+(C<<20&4294967295|C>>>12),C=I+(b^O&(R^b))+x[13]+2850285829&4294967295,I=R+(C<<5&4294967295|C>>>27),C=O+(R^b&(I^R))+x[2]+4243563512&4294967295,O=I+(C<<9&4294967295|C>>>23),C=b+(I^R&(O^I))+x[7]+1735328473&4294967295,b=O+(C<<14&4294967295|C>>>18),C=R+(O^I&(b^O))+x[12]+2368359562&4294967295,R=b+(C<<20&4294967295|C>>>12),C=I+(R^b^O)+x[5]+4294588738&4294967295,I=R+(C<<4&4294967295|C>>>28),C=O+(I^R^b)+x[8]+2272392833&4294967295,O=I+(C<<11&4294967295|C>>>21),C=b+(O^I^R)+x[11]+1839030562&4294967295,b=O+(C<<16&4294967295|C>>>16),C=R+(b^O^I)+x[14]+4259657740&4294967295,R=b+(C<<23&4294967295|C>>>9),C=I+(R^b^O)+x[1]+2763975236&4294967295,I=R+(C<<4&4294967295|C>>>28),C=O+(I^R^b)+x[4]+1272893353&4294967295,O=I+(C<<11&4294967295|C>>>21),C=b+(O^I^R)+x[7]+4139469664&4294967295,b=O+(C<<16&4294967295|C>>>16),C=R+(b^O^I)+x[10]+3200236656&4294967295,R=b+(C<<23&4294967295|C>>>9),C=I+(R^b^O)+x[13]+681279174&4294967295,I=R+(C<<4&4294967295|C>>>28),C=O+(I^R^b)+x[0]+3936430074&4294967295,O=I+(C<<11&4294967295|C>>>21),C=b+(O^I^R)+x[3]+3572445317&4294967295,b=O+(C<<16&4294967295|C>>>16),C=R+(b^O^I)+x[6]+76029189&4294967295,R=b+(C<<23&4294967295|C>>>9),C=I+(R^b^O)+x[9]+3654602809&4294967295,I=R+(C<<4&4294967295|C>>>28),C=O+(I^R^b)+x[12]+3873151461&4294967295,O=I+(C<<11&4294967295|C>>>21),C=b+(O^I^R)+x[15]+530742520&4294967295,b=O+(C<<16&4294967295|C>>>16),C=R+(b^O^I)+x[2]+3299628645&4294967295,R=b+(C<<23&4294967295|C>>>9),C=I+(b^(R|~O))+x[0]+4096336452&4294967295,I=R+(C<<6&4294967295|C>>>26),C=O+(R^(I|~b))+x[7]+1126891415&4294967295,O=I+(C<<10&4294967295|C>>>22),C=b+(I^(O|~R))+x[14]+2878612391&4294967295,b=O+(C<<15&4294967295|C>>>17),C=R+(O^(b|~I))+x[5]+4237533241&4294967295,R=b+(C<<21&4294967295|C>>>11),C=I+(b^(R|~O))+x[12]+1700485571&4294967295,I=R+(C<<6&4294967295|C>>>26),C=O+(R^(I|~b))+x[3]+2399980690&4294967295,O=I+(C<<10&4294967295|C>>>22),C=b+(I^(O|~R))+x[10]+4293915773&4294967295,b=O+(C<<15&4294967295|C>>>17),C=R+(O^(b|~I))+x[1]+2240044497&4294967295,R=b+(C<<21&4294967295|C>>>11),C=I+(b^(R|~O))+x[8]+1873313359&4294967295,I=R+(C<<6&4294967295|C>>>26),C=O+(R^(I|~b))+x[15]+4264355552&4294967295,O=I+(C<<10&4294967295|C>>>22),C=b+(I^(O|~R))+x[6]+2734768916&4294967295,b=O+(C<<15&4294967295|C>>>17),C=R+(O^(b|~I))+x[13]+1309151649&4294967295,R=b+(C<<21&4294967295|C>>>11),C=I+(b^(R|~O))+x[4]+4149444226&4294967295,I=R+(C<<6&4294967295|C>>>26),C=O+(R^(I|~b))+x[11]+3174756917&4294967295,O=I+(C<<10&4294967295|C>>>22),C=b+(I^(O|~R))+x[2]+718787259&4294967295,b=O+(C<<15&4294967295|C>>>17),C=R+(O^(b|~I))+x[9]+3951481745&4294967295,k.g[0]=k.g[0]+I&4294967295,k.g[1]=k.g[1]+(b+(C<<21&4294967295|C>>>11))&4294967295,k.g[2]=k.g[2]+b&4294967295,k.g[3]=k.g[3]+O&4294967295}i.prototype.u=function(k,I){I===void 0&&(I=k.length);for(var R=I-this.blockSize,x=this.B,b=this.h,O=0;O<I;){if(b==0)for(;O<=R;)o(this,k,O),O+=this.blockSize;if(typeof k=="string"){for(;O<I;)if(x[b++]=k.charCodeAt(O++),b==this.blockSize){o(this,x),b=0;break}}else for(;O<I;)if(x[b++]=k[O++],b==this.blockSize){o(this,x),b=0;break}}this.h=b,this.o+=I},i.prototype.v=function(){var k=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);k[0]=128;for(var I=1;I<k.length-8;++I)k[I]=0;var R=8*this.o;for(I=k.length-8;I<k.length;++I)k[I]=R&255,R/=256;for(this.u(k),k=Array(16),I=R=0;4>I;++I)for(var x=0;32>x;x+=8)k[R++]=this.g[I]>>>x&255;return k};function l(k,I){var R=f;return Object.prototype.hasOwnProperty.call(R,k)?R[k]:R[k]=I(k)}function c(k,I){this.h=I;for(var R=[],x=!0,b=k.length-1;0<=b;b--){var O=k[b]|0;x&&O==I||(R[b]=O,x=!1)}this.g=R}var f={};function m(k){return-128<=k&&128>k?l(k,function(I){return new c([I|0],0>I?-1:0)}):new c([k|0],0>k?-1:0)}function y(k){if(isNaN(k)||!isFinite(k))return E;if(0>k)return D(y(-k));for(var I=[],R=1,x=0;k>=R;x++)I[x]=k/R|0,R*=4294967296;return new c(I,0)}function v(k,I){if(k.length==0)throw Error("number format error: empty string");if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(k.charAt(0)=="-")return D(v(k.substring(1),I));if(0<=k.indexOf("-"))throw Error('number format error: interior "-" character');for(var R=y(Math.pow(I,8)),x=E,b=0;b<k.length;b+=8){var O=Math.min(8,k.length-b),C=parseInt(k.substring(b,b+O),I);8>O?(O=y(Math.pow(I,O)),x=x.j(O).add(y(C))):(x=x.j(R),x=x.add(y(C)))}return x}var E=m(0),S=m(1),M=m(16777216);n=c.prototype,n.m=function(){if(B(this))return-D(this).m();for(var k=0,I=1,R=0;R<this.g.length;R++){var x=this.i(R);k+=(0<=x?x:4294967296+x)*I,I*=4294967296}return k},n.toString=function(k){if(k=k||10,2>k||36<k)throw Error("radix out of range: "+k);if(j(this))return"0";if(B(this))return"-"+D(this).toString(k);for(var I=y(Math.pow(k,6)),R=this,x="";;){var b=ne(R,I).g;R=ee(R,b.j(I));var O=((0<R.g.length?R.g[0]:R.h)>>>0).toString(k);if(R=b,j(R))return O+x;for(;6>O.length;)O="0"+O;x=O+x}},n.i=function(k){return 0>k?0:k<this.g.length?this.g[k]:this.h};function j(k){if(k.h!=0)return!1;for(var I=0;I<k.g.length;I++)if(k.g[I]!=0)return!1;return!0}function B(k){return k.h==-1}n.l=function(k){return k=ee(this,k),B(k)?-1:j(k)?0:1};function D(k){for(var I=k.g.length,R=[],x=0;x<I;x++)R[x]=~k.g[x];return new c(R,~k.h).add(S)}n.abs=function(){return B(this)?D(this):this},n.add=function(k){for(var I=Math.max(this.g.length,k.g.length),R=[],x=0,b=0;b<=I;b++){var O=x+(this.i(b)&65535)+(k.i(b)&65535),C=(O>>>16)+(this.i(b)>>>16)+(k.i(b)>>>16);x=C>>>16,O&=65535,C&=65535,R[b]=C<<16|O}return new c(R,R[R.length-1]&-2147483648?-1:0)};function ee(k,I){return k.add(D(I))}n.j=function(k){if(j(this)||j(k))return E;if(B(this))return B(k)?D(this).j(D(k)):D(D(this).j(k));if(B(k))return D(this.j(D(k)));if(0>this.l(M)&&0>k.l(M))return y(this.m()*k.m());for(var I=this.g.length+k.g.length,R=[],x=0;x<2*I;x++)R[x]=0;for(x=0;x<this.g.length;x++)for(var b=0;b<k.g.length;b++){var O=this.i(x)>>>16,C=this.i(x)&65535,nt=k.i(b)>>>16,pt=k.i(b)&65535;R[2*x+2*b]+=C*pt,W(R,2*x+2*b),R[2*x+2*b+1]+=O*pt,W(R,2*x+2*b+1),R[2*x+2*b+1]+=C*nt,W(R,2*x+2*b+1),R[2*x+2*b+2]+=O*nt,W(R,2*x+2*b+2)}for(x=0;x<I;x++)R[x]=R[2*x+1]<<16|R[2*x];for(x=I;x<2*I;x++)R[x]=0;return new c(R,0)};function W(k,I){for(;(k[I]&65535)!=k[I];)k[I+1]+=k[I]>>>16,k[I]&=65535,I++}function X(k,I){this.g=k,this.h=I}function ne(k,I){if(j(I))throw Error("division by zero");if(j(k))return new X(E,E);if(B(k))return I=ne(D(k),I),new X(D(I.g),D(I.h));if(B(I))return I=ne(k,D(I)),new X(D(I.g),I.h);if(30<k.g.length){if(B(k)||B(I))throw Error("slowDivide_ only works with positive integers.");for(var R=S,x=I;0>=x.l(k);)R=me(R),x=me(x);var b=fe(R,1),O=fe(x,1);for(x=fe(x,2),R=fe(R,2);!j(x);){var C=O.add(x);0>=C.l(k)&&(b=b.add(R),O=C),x=fe(x,1),R=fe(R,1)}return I=ee(k,b.j(I)),new X(b,I)}for(b=E;0<=k.l(I);){for(R=Math.max(1,Math.floor(k.m()/I.m())),x=Math.ceil(Math.log(R)/Math.LN2),x=48>=x?1:Math.pow(2,x-48),O=y(R),C=O.j(I);B(C)||0<C.l(k);)R-=x,O=y(R),C=O.j(I);j(O)&&(O=S),b=b.add(O),k=ee(k,C)}return new X(b,k)}n.A=function(k){return ne(this,k).h},n.and=function(k){for(var I=Math.max(this.g.length,k.g.length),R=[],x=0;x<I;x++)R[x]=this.i(x)&k.i(x);return new c(R,this.h&k.h)},n.or=function(k){for(var I=Math.max(this.g.length,k.g.length),R=[],x=0;x<I;x++)R[x]=this.i(x)|k.i(x);return new c(R,this.h|k.h)},n.xor=function(k){for(var I=Math.max(this.g.length,k.g.length),R=[],x=0;x<I;x++)R[x]=this.i(x)^k.i(x);return new c(R,this.h^k.h)};function me(k){for(var I=k.g.length+1,R=[],x=0;x<I;x++)R[x]=k.i(x)<<1|k.i(x-1)>>>31;return new c(R,k.h)}function fe(k,I){var R=I>>5;I%=32;for(var x=k.g.length-R,b=[],O=0;O<x;O++)b[O]=0<I?k.i(O+R)>>>I|k.i(O+R+1)<<32-I:k.i(O+R);return new c(b,k.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,wv=i,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.A,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=y,c.fromString=v,ds=c}).apply(typeof _y<"u"?_y:typeof self<"u"?self:typeof window<"u"?window:{});var Vu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ev,Va,Tv,Hu,sf,Iv,Sv,Av;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,p,_){return u==Array.prototype||u==Object.prototype||(u[p]=_.value),u};function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Vu=="object"&&Vu];for(var p=0;p<u.length;++p){var _=u[p];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var i=t(this);function o(u,p){if(p)e:{var _=i;u=u.split(".");for(var T=0;T<u.length-1;T++){var F=u[T];if(!(F in _))break e;_=_[F]}u=u[u.length-1],T=_[u],p=p(T),p!=T&&p!=null&&e(_,u,{configurable:!0,writable:!0,value:p})}}function l(u,p){u instanceof String&&(u+="");var _=0,T=!1,F={next:function(){if(!T&&_<u.length){var q=_++;return{value:p(q,u[q]),done:!1}}return T=!0,{done:!0,value:void 0}}};return F[Symbol.iterator]=function(){return F},F}o("Array.prototype.values",function(u){return u||function(){return l(this,function(p,_){return _})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},f=this||self;function m(u){var p=typeof u;return p=p!="object"?p:u?Array.isArray(u)?"array":p:"null",p=="array"||p=="object"&&typeof u.length=="number"}function y(u){var p=typeof u;return p=="object"&&u!=null||p=="function"}function v(u,p,_){return u.call.apply(u.bind,arguments)}function E(u,p,_){if(!u)throw Error();if(2<arguments.length){var T=Array.prototype.slice.call(arguments,2);return function(){var F=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(F,T),u.apply(p,F)}}return function(){return u.apply(p,arguments)}}function S(u,p,_){return S=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?v:E,S.apply(null,arguments)}function M(u,p){var _=Array.prototype.slice.call(arguments,1);return function(){var T=_.slice();return T.push.apply(T,arguments),u.apply(this,T)}}function j(u,p){function _(){}_.prototype=p.prototype,u.aa=p.prototype,u.prototype=new _,u.prototype.constructor=u,u.Qb=function(T,F,q){for(var ie=Array(arguments.length-2),He=2;He<arguments.length;He++)ie[He-2]=arguments[He];return p.prototype[F].apply(T,ie)}}function B(u){const p=u.length;if(0<p){const _=Array(p);for(let T=0;T<p;T++)_[T]=u[T];return _}return[]}function D(u,p){for(let _=1;_<arguments.length;_++){const T=arguments[_];if(m(T)){const F=u.length||0,q=T.length||0;u.length=F+q;for(let ie=0;ie<q;ie++)u[F+ie]=T[ie]}else u.push(T)}}class ee{constructor(p,_){this.i=p,this.j=_,this.h=0,this.g=null}get(){let p;return 0<this.h?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function W(u){return/^[\s\xa0]*$/.test(u)}function X(){var u=f.navigator;return u&&(u=u.userAgent)?u:""}function ne(u){return ne[" "](u),u}ne[" "]=function(){};var me=X().indexOf("Gecko")!=-1&&!(X().toLowerCase().indexOf("webkit")!=-1&&X().indexOf("Edge")==-1)&&!(X().indexOf("Trident")!=-1||X().indexOf("MSIE")!=-1)&&X().indexOf("Edge")==-1;function fe(u,p,_){for(const T in u)p.call(_,u[T],T,u)}function k(u,p){for(const _ in u)p.call(void 0,u[_],_,u)}function I(u){const p={};for(const _ in u)p[_]=u[_];return p}const R="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function x(u,p){let _,T;for(let F=1;F<arguments.length;F++){T=arguments[F];for(_ in T)u[_]=T[_];for(let q=0;q<R.length;q++)_=R[q],Object.prototype.hasOwnProperty.call(T,_)&&(u[_]=T[_])}}function b(u){var p=1;u=u.split(":");const _=[];for(;0<p&&u.length;)_.push(u.shift()),p--;return u.length&&_.push(u.join(":")),_}function O(u){f.setTimeout(()=>{throw u},0)}function C(){var u=_e;let p=null;return u.g&&(p=u.g,u.g=u.g.next,u.g||(u.h=null),p.next=null),p}class nt{constructor(){this.h=this.g=null}add(p,_){const T=pt.get();T.set(p,_),this.h?this.h.next=T:this.g=T,this.h=T}}var pt=new ee(()=>new mt,u=>u.reset());class mt{constructor(){this.next=this.g=this.h=null}set(p,_){this.h=p,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let je,re=!1,_e=new nt,oe=()=>{const u=f.Promise.resolve(void 0);je=()=>{u.then(V)}};var V=()=>{for(var u;u=C();){try{u.h.call(u.g)}catch(_){O(_)}var p=pt;p.j(u),100>p.h&&(p.h++,u.next=p.g,p.g=u)}re=!1};function Q(){this.s=this.s,this.C=this.C}Q.prototype.s=!1,Q.prototype.ma=function(){this.s||(this.s=!0,this.N())},Q.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ge(u,p){this.type=u,this.g=this.target=p,this.defaultPrevented=!1}ge.prototype.h=function(){this.defaultPrevented=!0};var ke=function(){if(!f.addEventListener||!Object.defineProperty)return!1;var u=!1,p=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const _=()=>{};f.addEventListener("test",_,p),f.removeEventListener("test",_,p)}catch{}return u}();function Pe(u,p){if(ge.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var _=this.type=u.type,T=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=p,p=u.relatedTarget){if(me){e:{try{ne(p.nodeName);var F=!0;break e}catch{}F=!1}F||(p=null)}}else _=="mouseover"?p=u.fromElement:_=="mouseout"&&(p=u.toElement);this.relatedTarget=p,T?(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:Le[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&Pe.aa.h.call(this)}}j(Pe,ge);var Le={2:"touch",3:"pen",4:"mouse"};Pe.prototype.h=function(){Pe.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Be="closure_listenable_"+(1e6*Math.random()|0),$e=0;function Ke(u,p,_,T,F){this.listener=u,this.proxy=null,this.src=p,this.type=_,this.capture=!!T,this.ha=F,this.key=++$e,this.da=this.fa=!1}function It(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function dr(u){this.src=u,this.g={},this.h=0}dr.prototype.add=function(u,p,_,T,F){var q=u.toString();u=this.g[q],u||(u=this.g[q]=[],this.h++);var ie=qr(u,p,T,F);return-1<ie?(p=u[ie],_||(p.fa=!1)):(p=new Ke(p,this.src,q,!!T,F),p.fa=_,u.push(p)),p};function Es(u,p){var _=p.type;if(_ in u.g){var T=u.g[_],F=Array.prototype.indexOf.call(T,p,void 0),q;(q=0<=F)&&Array.prototype.splice.call(T,F,1),q&&(It(p),u.g[_].length==0&&(delete u.g[_],u.h--))}}function qr(u,p,_,T){for(var F=0;F<u.length;++F){var q=u[F];if(!q.da&&q.listener==p&&q.capture==!!_&&q.ha==T)return F}return-1}var bi="closure_lm_"+(1e6*Math.random()|0),Ts={};function jo(u,p,_,T,F){if(Array.isArray(p)){for(var q=0;q<p.length;q++)jo(u,p[q],_,T,F);return null}return _=$o(_),u&&u[Be]?u.K(p,_,y(T)?!!T.capture:!!T,F):zo(u,p,_,!1,T,F)}function zo(u,p,_,T,F,q){if(!p)throw Error("Invalid event type");var ie=y(F)?!!F.capture:!!F,He=Ss(u);if(He||(u[bi]=He=new dr(u)),_=He.add(p,_,T,ie,q),_.proxy)return _;if(T=vl(),_.proxy=T,T.src=u,T.listener=_,u.addEventListener)ke||(F=ie),F===void 0&&(F=!1),u.addEventListener(p.toString(),T,F);else if(u.attachEvent)u.attachEvent(pr(p.toString()),T);else if(u.addListener&&u.removeListener)u.addListener(T);else throw Error("addEventListener and attachEvent are unavailable.");return _}function vl(){function u(_){return p.call(u.src,u.listener,_)}const p=Bo;return u}function Is(u,p,_,T,F){if(Array.isArray(p))for(var q=0;q<p.length;q++)Is(u,p[q],_,T,F);else T=y(T)?!!T.capture:!!T,_=$o(_),u&&u[Be]?(u=u.i,p=String(p).toString(),p in u.g&&(q=u.g[p],_=qr(q,_,T,F),-1<_&&(It(q[_]),Array.prototype.splice.call(q,_,1),q.length==0&&(delete u.g[p],u.h--)))):u&&(u=Ss(u))&&(p=u.g[p.toString()],u=-1,p&&(u=qr(p,_,T,F)),(_=-1<u?p[u]:null)&&fr(_))}function fr(u){if(typeof u!="number"&&u&&!u.da){var p=u.src;if(p&&p[Be])Es(p.i,u);else{var _=u.type,T=u.proxy;p.removeEventListener?p.removeEventListener(_,T,u.capture):p.detachEvent?p.detachEvent(pr(_),T):p.addListener&&p.removeListener&&p.removeListener(T),(_=Ss(p))?(Es(_,u),_.h==0&&(_.src=null,p[bi]=null)):It(u)}}}function pr(u){return u in Ts?Ts[u]:Ts[u]="on"+u}function Bo(u,p){if(u.da)u=!0;else{p=new Pe(p,this);var _=u.listener,T=u.ha||u.src;u.fa&&fr(u),u=_.call(T,p)}return u}function Ss(u){return u=u[bi],u instanceof dr?u:null}var As="__closure_events_fn_"+(1e9*Math.random()>>>0);function $o(u){return typeof u=="function"?u:(u[As]||(u[As]=function(p){return u.handleEvent(p)}),u[As])}function gt(){Q.call(this),this.i=new dr(this),this.M=this,this.F=null}j(gt,Q),gt.prototype[Be]=!0,gt.prototype.removeEventListener=function(u,p,_,T){Is(this,u,p,_,T)};function yt(u,p){var _,T=u.F;if(T)for(_=[];T;T=T.F)_.push(T);if(u=u.M,T=p.type||p,typeof p=="string")p=new ge(p,u);else if(p instanceof ge)p.target=p.target||u;else{var F=p;p=new ge(T,u),x(p,F)}if(F=!0,_)for(var q=_.length-1;0<=q;q--){var ie=p.g=_[q];F=mr(ie,T,!0,p)&&F}if(ie=p.g=u,F=mr(ie,T,!0,p)&&F,F=mr(ie,T,!1,p)&&F,_)for(q=0;q<_.length;q++)ie=p.g=_[q],F=mr(ie,T,!1,p)&&F}gt.prototype.N=function(){if(gt.aa.N.call(this),this.i){var u=this.i,p;for(p in u.g){for(var _=u.g[p],T=0;T<_.length;T++)It(_[T]);delete u.g[p],u.h--}}this.F=null},gt.prototype.K=function(u,p,_,T){return this.i.add(String(u),p,!1,_,T)},gt.prototype.L=function(u,p,_,T){return this.i.add(String(u),p,!0,_,T)};function mr(u,p,_,T){if(p=u.i.g[String(p)],!p)return!0;p=p.concat();for(var F=!0,q=0;q<p.length;++q){var ie=p[q];if(ie&&!ie.da&&ie.capture==_){var He=ie.listener,_t=ie.ha||ie.src;ie.fa&&Es(u.i,ie),F=He.call(_t,T)!==!1&&F}}return F&&!T.defaultPrevented}function qo(u,p,_){if(typeof u=="function")_&&(u=S(u,_));else if(u&&typeof u.handleEvent=="function")u=S(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(p)?-1:f.setTimeout(u,p||0)}function Hr(u){u.g=qo(()=>{u.g=null,u.i&&(u.i=!1,Hr(u))},u.l);const p=u.h;u.h=null,u.m.apply(null,p)}class Di extends Q{constructor(p,_){super(),this.m=p,this.l=_,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:Hr(this)}N(){super.N(),this.g&&(f.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Oi(u){Q.call(this),this.h=u,this.g={}}j(Oi,Q);var Ho=[];function Wo(u){fe(u.g,function(p,_){this.g.hasOwnProperty(_)&&fr(p)},u),u.g={}}Oi.prototype.N=function(){Oi.aa.N.call(this),Wo(this)},Oi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ko=f.JSON.stringify,Go=f.JSON.parse,Qo=class{stringify(u){return f.JSON.stringify(u,void 0)}parse(u){return f.JSON.parse(u,void 0)}};function Li(){}Li.prototype.h=null;function Rs(u){return u.h||(u.h=u.i())}function Cs(){}var vn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Gn(){ge.call(this,"d")}j(Gn,ge);function ks(){ge.call(this,"c")}j(ks,ge);var Qn={},Xo=null;function Vi(){return Xo=Xo||new gt}Qn.La="serverreachability";function Yo(u){ge.call(this,Qn.La,u)}j(Yo,ge);function gr(u){const p=Vi();yt(p,new Yo(p))}Qn.STAT_EVENT="statevent";function Jo(u,p){ge.call(this,Qn.STAT_EVENT,u),this.stat=p}j(Jo,ge);function at(u){const p=Vi();yt(p,new Jo(p,u))}Qn.Ma="timingevent";function Ps(u,p){ge.call(this,Qn.Ma,u),this.size=p}j(Ps,ge);function xn(u,p){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return f.setTimeout(function(){u()},p)}function Mi(){this.g=!0}Mi.prototype.xa=function(){this.g=!1};function Fi(u,p,_,T,F,q){u.info(function(){if(u.g)if(q)for(var ie="",He=q.split("&"),_t=0;_t<He.length;_t++){var Ve=He[_t].split("=");if(1<Ve.length){var St=Ve[0];Ve=Ve[1];var ct=St.split("_");ie=2<=ct.length&&ct[1]=="type"?ie+(St+"="+Ve+"&"):ie+(St+"=redacted&")}}else ie=null;else ie=q;return"XMLHTTP REQ ("+T+") [attempt "+F+"]: "+p+`
`+_+`
`+ie})}function xs(u,p,_,T,F,q,ie){u.info(function(){return"XMLHTTP RESP ("+T+") [ attempt "+F+"]: "+p+`
`+_+`
`+q+" "+ie})}function Nn(u,p,_,T){u.info(function(){return"XMLHTTP TEXT ("+p+"): "+Zc(u,_)+(T?" "+T:"")})}function Zo(u,p){u.info(function(){return"TIMEOUT: "+p})}Mi.prototype.info=function(){};function Zc(u,p){if(!u.g)return p;if(!p)return null;try{var _=JSON.parse(p);if(_){for(u=0;u<_.length;u++)if(Array.isArray(_[u])){var T=_[u];if(!(2>T.length)){var F=T[1];if(Array.isArray(F)&&!(1>F.length)){var q=F[0];if(q!="noop"&&q!="stop"&&q!="close")for(var ie=1;ie<F.length;ie++)F[ie]=""}}}}return Ko(_)}catch{return p}}var Ns={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},wl={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},bn;function Ui(){}j(Ui,Li),Ui.prototype.g=function(){return new XMLHttpRequest},Ui.prototype.i=function(){return{}},bn=new Ui;function Dn(u,p,_,T){this.j=u,this.i=p,this.l=_,this.R=T||1,this.U=new Oi(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new El}function El(){this.i=null,this.g="",this.h=!1}var ea={},bs={};function Ds(u,p,_){u.L=1,u.v=Xr(hn(p)),u.m=_,u.P=!0,ta(u,null)}function ta(u,p){u.F=Date.now(),Ge(u),u.A=hn(u.v);var _=u.A,T=u.R;Array.isArray(T)||(T=[String(T)]),Jr(_.i,"t",T),u.C=0,_=u.j.J,u.h=new El,u.g=Ul(u.j,_?p:null,!u.m),0<u.O&&(u.M=new Di(S(u.Y,u,u.g),u.O)),p=u.U,_=u.g,T=u.ca;var F="readystatechange";Array.isArray(F)||(F&&(Ho[0]=F.toString()),F=Ho);for(var q=0;q<F.length;q++){var ie=jo(_,F[q],T||p.handleEvent,!1,p.h||p);if(!ie)break;p.g[ie.key]=ie}p=u.H?I(u.H):{},u.m?(u.u||(u.u="POST"),p["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,p)):(u.u="GET",u.g.ea(u.A,u.u,null,p)),gr(),Fi(u.i,u.u,u.A,u.l,u.R,u.m)}Dn.prototype.ca=function(u){u=u.target;const p=this.M;p&&Jt(u)==3?p.j():this.Y(u)},Dn.prototype.Y=function(u){try{if(u==this.g)e:{const ct=Jt(this.g);var p=this.g.Ba();const Tn=this.g.Z();if(!(3>ct)&&(ct!=3||this.g&&(this.h.h||this.g.oa()||aa(this.g)))){this.J||ct!=4||p==7||(p==8||0>=Tn?gr(3):gr(2)),ji(this);var _=this.g.Z();this.X=_;t:if(Tl(this)){var T=aa(this.g);u="";var F=T.length,q=Jt(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){wn(this),Wr(this);var ie="";break t}this.h.i=new f.TextDecoder}for(p=0;p<F;p++)this.h.h=!0,u+=this.h.i.decode(T[p],{stream:!(q&&p==F-1)});T.length=0,this.h.g+=u,this.C=0,ie=this.h.g}else ie=this.g.oa();if(this.o=_==200,xs(this.i,this.u,this.A,this.l,this.R,ct,_),this.o){if(this.T&&!this.K){t:{if(this.g){var He,_t=this.g;if((He=_t.g?_t.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!W(He)){var Ve=He;break t}}Ve=null}if(_=Ve)Nn(this.i,this.l,_,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,na(this,_);else{this.o=!1,this.s=3,at(12),wn(this),Wr(this);break e}}if(this.P){_=!0;let fn;for(;!this.J&&this.C<ie.length;)if(fn=eh(this,ie),fn==bs){ct==4&&(this.s=4,at(14),_=!1),Nn(this.i,this.l,null,"[Incomplete Response]");break}else if(fn==ea){this.s=4,at(15),Nn(this.i,this.l,ie,"[Invalid Chunk]"),_=!1;break}else Nn(this.i,this.l,fn,null),na(this,fn);if(Tl(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ct!=4||ie.length!=0||this.h.h||(this.s=1,at(16),_=!1),this.o=this.o&&_,!_)Nn(this.i,this.l,ie,"[Invalid Chunked Response]"),wn(this),Wr(this);else if(0<ie.length&&!this.W){this.W=!0;var St=this.j;St.g==this&&St.ba&&!St.M&&(St.j.info("Great, no buffering proxy detected. Bytes received: "+ie.length),ua(St),St.M=!0,at(11))}}else Nn(this.i,this.l,ie,null),na(this,ie);ct==4&&wn(this),this.o&&!this.J&&(ct==4?qs(this.j,this):(this.o=!1,Ge(this)))}else Us(this.g),_==400&&0<ie.indexOf("Unknown SID")?(this.s=3,at(12)):(this.s=0,at(13)),wn(this),Wr(this)}}}catch{}finally{}};function Tl(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function eh(u,p){var _=u.C,T=p.indexOf(`
`,_);return T==-1?bs:(_=Number(p.substring(_,T)),isNaN(_)?ea:(T+=1,T+_>p.length?bs:(p=p.slice(T,T+_),u.C=T+_,p)))}Dn.prototype.cancel=function(){this.J=!0,wn(this)};function Ge(u){u.S=Date.now()+u.I,Il(u,u.I)}function Il(u,p){if(u.B!=null)throw Error("WatchDog timer not null");u.B=xn(S(u.ba,u),p)}function ji(u){u.B&&(f.clearTimeout(u.B),u.B=null)}Dn.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(Zo(this.i,this.A),this.L!=2&&(gr(),at(17)),wn(this),this.s=2,Wr(this)):Il(this,this.S-u)};function Wr(u){u.j.G==0||u.J||qs(u.j,u)}function wn(u){ji(u);var p=u.M;p&&typeof p.ma=="function"&&p.ma(),u.M=null,Wo(u.U),u.g&&(p=u.g,u.g=null,p.abort(),p.ma())}function na(u,p){try{var _=u.j;if(_.G!=0&&(_.g==u||Wt(_.h,u))){if(!u.K&&Wt(_.h,u)&&_.G==3){try{var T=_.Da.g.parse(p)}catch{T=null}if(Array.isArray(T)&&T.length==3){var F=T;if(F[0]==0){e:if(!_.u){if(_.g)if(_.g.F+3e3<u.F)$s(_),Fn(_);else break e;Bs(_),at(18)}}else _.za=F[1],0<_.za-_.T&&37500>F[2]&&_.F&&_.v==0&&!_.C&&(_.C=xn(S(_.Za,_),6e3));if(1>=Al(_.h)&&_.ca){try{_.ca()}catch{}_.ca=void 0}}else Er(_,11)}else if((u.K||_.g==u)&&$s(_),!W(p))for(F=_.Da.g.parse(p),p=0;p<F.length;p++){let Ve=F[p];if(_.T=Ve[0],Ve=Ve[1],_.G==2)if(Ve[0]=="c"){_.K=Ve[1],_.ia=Ve[2];const St=Ve[3];St!=null&&(_.la=St,_.j.info("VER="+_.la));const ct=Ve[4];ct!=null&&(_.Aa=ct,_.j.info("SVER="+_.Aa));const Tn=Ve[5];Tn!=null&&typeof Tn=="number"&&0<Tn&&(T=1.5*Tn,_.L=T,_.j.info("backChannelRequestTimeoutMs_="+T)),T=_;const fn=u.g;if(fn){const Ki=fn.g?fn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ki){var q=T.h;q.g||Ki.indexOf("spdy")==-1&&Ki.indexOf("quic")==-1&&Ki.indexOf("h2")==-1||(q.j=q.l,q.g=new Set,q.h&&(ra(q,q.h),q.h=null))}if(T.D){const Ws=fn.g?fn.g.getResponseHeader("X-HTTP-Session-Id"):null;Ws&&(T.ya=Ws,We(T.I,T.D,Ws))}}_.G=3,_.l&&_.l.ua(),_.ba&&(_.R=Date.now()-u.F,_.j.info("Handshake RTT: "+_.R+"ms")),T=_;var ie=u;if(T.qa=Fl(T,T.J?T.ia:null,T.W),ie.K){Rl(T.h,ie);var He=ie,_t=T.L;_t&&(He.I=_t),He.B&&(ji(He),Ge(He)),T.g=ie}else Wi(T);0<_.i.length&&Zn(_)}else Ve[0]!="stop"&&Ve[0]!="close"||Er(_,7);else _.G==3&&(Ve[0]=="stop"||Ve[0]=="close"?Ve[0]=="stop"?Er(_,7):Nt(_):Ve[0]!="noop"&&_.l&&_.l.ta(Ve),_.v=0)}}gr(4)}catch{}}var Sl=class{constructor(u,p){this.g=u,this.map=p}};function zi(u){this.l=u||10,f.PerformanceNavigationTiming?(u=f.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(f.chrome&&f.chrome.loadTimes&&f.chrome.loadTimes()&&f.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function cn(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Al(u){return u.h?1:u.g?u.g.size:0}function Wt(u,p){return u.h?u.h==p:u.g?u.g.has(p):!1}function ra(u,p){u.g?u.g.add(p):u.h=p}function Rl(u,p){u.h&&u.h==p?u.h=null:u.g&&u.g.has(p)&&u.g.delete(p)}zi.prototype.cancel=function(){if(this.i=Cl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function Cl(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let p=u.i;for(const _ of u.g.values())p=p.concat(_.D);return p}return B(u.i)}function Os(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(m(u)){for(var p=[],_=u.length,T=0;T<_;T++)p.push(u[T]);return p}p=[],_=0;for(T in u)p[_++]=u[T];return p}function Ls(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(m(u)||typeof u=="string"){var p=[];u=u.length;for(var _=0;_<u;_++)p.push(_);return p}p=[],_=0;for(const T in u)p[_++]=T;return p}}}function Kr(u,p){if(u.forEach&&typeof u.forEach=="function")u.forEach(p,void 0);else if(m(u)||typeof u=="string")Array.prototype.forEach.call(u,p,void 0);else for(var _=Ls(u),T=Os(u),F=T.length,q=0;q<F;q++)p.call(void 0,T[q],_&&_[q],u)}var Bi=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function th(u,p){if(u){u=u.split("&");for(var _=0;_<u.length;_++){var T=u[_].indexOf("="),F=null;if(0<=T){var q=u[_].substring(0,T);F=u[_].substring(T+1)}else q=u[_];p(q,F?decodeURIComponent(F.replace(/\+/g," ")):"")}}}function yr(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof yr){this.h=u.h,$i(this,u.j),this.o=u.o,this.g=u.g,Gr(this,u.s),this.l=u.l;var p=u.i,_=new Xn;_.i=p.i,p.g&&(_.g=new Map(p.g),_.h=p.h),Qr(this,_),this.m=u.m}else u&&(p=String(u).match(Bi))?(this.h=!1,$i(this,p[1]||"",!0),this.o=De(p[2]||""),this.g=De(p[3]||"",!0),Gr(this,p[4]),this.l=De(p[5]||"",!0),Qr(this,p[6]||"",!0),this.m=De(p[7]||"")):(this.h=!1,this.i=new Xn(null,this.h))}yr.prototype.toString=function(){var u=[],p=this.j;p&&u.push(Yr(p,Vs,!0),":");var _=this.g;return(_||p=="file")&&(u.push("//"),(p=this.o)&&u.push(Yr(p,Vs,!0),"@"),u.push(encodeURIComponent(String(_)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.s,_!=null&&u.push(":",String(_))),(_=this.l)&&(this.g&&_.charAt(0)!="/"&&u.push("/"),u.push(Yr(_,_.charAt(0)=="/"?xl:Pl,!0))),(_=this.i.toString())&&u.push("?",_),(_=this.m)&&u.push("#",Yr(_,ia)),u.join("")};function hn(u){return new yr(u)}function $i(u,p,_){u.j=_?De(p,!0):p,u.j&&(u.j=u.j.replace(/:$/,""))}function Gr(u,p){if(p){if(p=Number(p),isNaN(p)||0>p)throw Error("Bad port number "+p);u.s=p}else u.s=null}function Qr(u,p,_){p instanceof Xn?(u.i=p,Yn(u.i,u.h)):(_||(p=Yr(p,Nl)),u.i=new Xn(p,u.h))}function We(u,p,_){u.i.set(p,_)}function Xr(u){return We(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function De(u,p){return u?p?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Yr(u,p,_){return typeof u=="string"?(u=encodeURI(u).replace(p,kl),_&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function kl(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Vs=/[#\/\?@]/g,Pl=/[#\?:]/g,xl=/[#\?]/g,Nl=/[#\?@]/g,ia=/#/g;function Xn(u,p){this.h=this.g=null,this.i=u||null,this.j=!!p}function xt(u){u.g||(u.g=new Map,u.h=0,u.i&&th(u.i,function(p,_){u.add(decodeURIComponent(p.replace(/\+/g," ")),_)}))}n=Xn.prototype,n.add=function(u,p){xt(this),this.i=null,u=En(this,u);var _=this.g.get(u);return _||this.g.set(u,_=[]),_.push(p),this.h+=1,this};function On(u,p){xt(u),p=En(u,p),u.g.has(p)&&(u.i=null,u.h-=u.g.get(p).length,u.g.delete(p))}function Ln(u,p){return xt(u),p=En(u,p),u.g.has(p)}n.forEach=function(u,p){xt(this),this.g.forEach(function(_,T){_.forEach(function(F){u.call(p,F,T,this)},this)},this)},n.na=function(){xt(this);const u=Array.from(this.g.values()),p=Array.from(this.g.keys()),_=[];for(let T=0;T<p.length;T++){const F=u[T];for(let q=0;q<F.length;q++)_.push(p[T])}return _},n.V=function(u){xt(this);let p=[];if(typeof u=="string")Ln(this,u)&&(p=p.concat(this.g.get(En(this,u))));else{u=Array.from(this.g.values());for(let _=0;_<u.length;_++)p=p.concat(u[_])}return p},n.set=function(u,p){return xt(this),this.i=null,u=En(this,u),Ln(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[p]),this.h+=1,this},n.get=function(u,p){return u?(u=this.V(u),0<u.length?String(u[0]):p):p};function Jr(u,p,_){On(u,p),0<_.length&&(u.i=null,u.g.set(En(u,p),B(_)),u.h+=_.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],p=Array.from(this.g.keys());for(var _=0;_<p.length;_++){var T=p[_];const q=encodeURIComponent(String(T)),ie=this.V(T);for(T=0;T<ie.length;T++){var F=q;ie[T]!==""&&(F+="="+encodeURIComponent(String(ie[T]))),u.push(F)}}return this.i=u.join("&")};function En(u,p){return p=String(p),u.j&&(p=p.toLowerCase()),p}function Yn(u,p){p&&!u.j&&(xt(u),u.i=null,u.g.forEach(function(_,T){var F=T.toLowerCase();T!=F&&(On(this,T),Jr(this,F,_))},u)),u.j=p}function nh(u,p){const _=new Mi;if(f.Image){const T=new Image;T.onload=M(Yt,_,"TestLoadImage: loaded",!0,p,T),T.onerror=M(Yt,_,"TestLoadImage: error",!1,p,T),T.onabort=M(Yt,_,"TestLoadImage: abort",!1,p,T),T.ontimeout=M(Yt,_,"TestLoadImage: timeout",!1,p,T),f.setTimeout(function(){T.ontimeout&&T.ontimeout()},1e4),T.src=u}else p(!1)}function bl(u,p){const _=new Mi,T=new AbortController,F=setTimeout(()=>{T.abort(),Yt(_,"TestPingServer: timeout",!1,p)},1e4);fetch(u,{signal:T.signal}).then(q=>{clearTimeout(F),q.ok?Yt(_,"TestPingServer: ok",!0,p):Yt(_,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(F),Yt(_,"TestPingServer: error",!1,p)})}function Yt(u,p,_,T,F){try{F&&(F.onload=null,F.onerror=null,F.onabort=null,F.ontimeout=null),T(_)}catch{}}function rh(){this.g=new Qo}function Dl(u,p,_){const T=_||"";try{Kr(u,function(F,q){let ie=F;y(F)&&(ie=Ko(F)),p.push(T+q+"="+encodeURIComponent(ie))})}catch(F){throw p.push(T+"type="+encodeURIComponent("_badmap")),F}}function _r(u){this.l=u.Ub||null,this.j=u.eb||!1}j(_r,Li),_r.prototype.g=function(){return new qi(this.l,this.j)},_r.prototype.i=function(u){return function(){return u}}({});function qi(u,p){gt.call(this),this.D=u,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}j(qi,gt),n=qi.prototype,n.open=function(u,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=p,this.readyState=1,Mn(this)},n.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const p={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(p.body=u),(this.D||f).fetch(new Request(this.A,p)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Vn(this)),this.readyState=0},n.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Mn(this)),this.g&&(this.readyState=3,Mn(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof f.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Ol(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function Ol(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}n.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var p=u.value?u.value:new Uint8Array(0);(p=this.v.decode(p,{stream:!u.done}))&&(this.response=this.responseText+=p)}u.done?Vn(this):Mn(this),this.readyState==3&&Ol(this)}},n.Ra=function(u){this.g&&(this.response=this.responseText=u,Vn(this))},n.Qa=function(u){this.g&&(this.response=u,Vn(this))},n.ga=function(){this.g&&Vn(this)};function Vn(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Mn(u)}n.setRequestHeader=function(u,p){this.u.append(u,p)},n.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],p=this.h.entries();for(var _=p.next();!_.done;)_=_.value,u.push(_[0]+": "+_[1]),_=p.next();return u.join(`\r
`)};function Mn(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(qi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function vr(u){let p="";return fe(u,function(_,T){p+=T,p+=":",p+=_,p+=`\r
`}),p}function Zr(u,p,_){e:{for(T in _){var T=!1;break e}T=!0}T||(_=vr(_),typeof u=="string"?_!=null&&encodeURIComponent(String(_)):We(u,p,_))}function et(u){gt.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}j(et,gt);var ih=/^https?$/i,sa=["POST","PUT"];n=et.prototype,n.Ha=function(u){this.J=u},n.ea=function(u,p,_,T){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);p=p?p.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():bn.g(),this.v=this.o?Rs(this.o):Rs(bn),this.g.onreadystatechange=S(this.Ea,this);try{this.B=!0,this.g.open(p,String(u),!0),this.B=!1}catch(q){Hi(this,q);return}if(u=_||"",_=new Map(this.headers),T)if(Object.getPrototypeOf(T)===Object.prototype)for(var F in T)_.set(F,T[F]);else if(typeof T.keys=="function"&&typeof T.get=="function")for(const q of T.keys())_.set(q,T.get(q));else throw Error("Unknown input type for opt_headers: "+String(T));T=Array.from(_.keys()).find(q=>q.toLowerCase()=="content-type"),F=f.FormData&&u instanceof f.FormData,!(0<=Array.prototype.indexOf.call(sa,p,void 0))||T||F||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[q,ie]of _)this.g.setRequestHeader(q,ie);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Fs(this),this.u=!0,this.g.send(u),this.u=!1}catch(q){Hi(this,q)}};function Hi(u,p){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=p,u.m=5,Ms(u),dn(u)}function Ms(u){u.A||(u.A=!0,yt(u,"complete"),yt(u,"error"))}n.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,yt(this,"complete"),yt(this,"abort"),dn(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),dn(this,!0)),et.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?oa(this):this.bb())},n.bb=function(){oa(this)};function oa(u){if(u.h&&typeof c<"u"&&(!u.v[1]||Jt(u)!=4||u.Z()!=2)){if(u.u&&Jt(u)==4)qo(u.Ea,0,u);else if(yt(u,"readystatechange"),Jt(u)==4){u.h=!1;try{const ie=u.Z();e:switch(ie){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break e;default:p=!1}var _;if(!(_=p)){var T;if(T=ie===0){var F=String(u.D).match(Bi)[1]||null;!F&&f.self&&f.self.location&&(F=f.self.location.protocol.slice(0,-1)),T=!ih.test(F?F.toLowerCase():"")}_=T}if(_)yt(u,"complete"),yt(u,"success");else{u.m=6;try{var q=2<Jt(u)?u.g.statusText:""}catch{q=""}u.l=q+" ["+u.Z()+"]",Ms(u)}}finally{dn(u)}}}}function dn(u,p){if(u.g){Fs(u);const _=u.g,T=u.v[0]?()=>{}:null;u.g=null,u.v=null,p||yt(u,"ready");try{_.onreadystatechange=T}catch{}}}function Fs(u){u.I&&(f.clearTimeout(u.I),u.I=null)}n.isActive=function(){return!!this.g};function Jt(u){return u.g?u.g.readyState:0}n.Z=function(){try{return 2<Jt(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(u){if(this.g){var p=this.g.responseText;return u&&p.indexOf(u)==0&&(p=p.substring(u.length)),Go(p)}};function aa(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function Us(u){const p={};u=(u.g&&2<=Jt(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let T=0;T<u.length;T++){if(W(u[T]))continue;var _=b(u[T]);const F=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const q=p[F]||[];p[F]=q,q.push(_)}k(p,function(T){return T.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Jn(u,p,_){return _&&_.internalChannelParams&&_.internalChannelParams[u]||p}function la(u){this.Aa=0,this.i=[],this.j=new Mi,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Jn("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Jn("baseRetryDelayMs",5e3,u),this.cb=Jn("retryDelaySeedMs",1e4,u),this.Wa=Jn("forwardChannelMaxRetries",2,u),this.wa=Jn("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new zi(u&&u.concurrentRequestLimit),this.Da=new rh,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=la.prototype,n.la=8,n.G=1,n.connect=function(u,p,_,T){at(0),this.W=u,this.H=p||{},_&&T!==void 0&&(this.H.OSID=_,this.H.OAID=T),this.F=this.X,this.I=Fl(this,null,this.W),Zn(this)};function Nt(u){if(js(u),u.G==3){var p=u.U++,_=hn(u.I);if(We(_,"SID",u.K),We(_,"RID",p),We(_,"TYPE","terminate"),wr(u,_),p=new Dn(u,u.j,p),p.L=2,p.v=Xr(hn(_)),_=!1,f.navigator&&f.navigator.sendBeacon)try{_=f.navigator.sendBeacon(p.v.toString(),"")}catch{}!_&&f.Image&&(new Image().src=p.v,_=!0),_||(p.g=Ul(p.j,null),p.g.ea(p.v)),p.F=Date.now(),Ge(p)}Ml(u)}function Fn(u){u.g&&(ua(u),u.g.cancel(),u.g=null)}function js(u){Fn(u),u.u&&(f.clearTimeout(u.u),u.u=null),$s(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&f.clearTimeout(u.s),u.s=null)}function Zn(u){if(!cn(u.h)&&!u.s){u.s=!0;var p=u.Ga;je||oe(),re||(je(),re=!0),_e.add(p,u),u.B=0}}function sh(u,p){return Al(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=p.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=xn(S(u.Ga,u,p),Vl(u,u.B)),u.B++,!0)}n.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const F=new Dn(this,this.j,u);let q=this.o;if(this.S&&(q?(q=I(q),x(q,this.S)):q=this.S),this.m!==null||this.O||(F.H=q,q=null),this.P)e:{for(var p=0,_=0;_<this.i.length;_++){t:{var T=this.i[_];if("__data__"in T.map&&(T=T.map.__data__,typeof T=="string")){T=T.length;break t}T=void 0}if(T===void 0)break;if(p+=T,4096<p){p=_;break e}if(p===4096||_===this.i.length-1){p=_+1;break e}}p=1e3}else p=1e3;p=ei(this,F,p),_=hn(this.I),We(_,"RID",u),We(_,"CVER",22),this.D&&We(_,"X-HTTP-Session-Id",this.D),wr(this,_),q&&(this.O?p="headers="+encodeURIComponent(String(vr(q)))+"&"+p:this.m&&Zr(_,this.m,q)),ra(this.h,F),this.Ua&&We(_,"TYPE","init"),this.P?(We(_,"$req",p),We(_,"SID","null"),F.T=!0,Ds(F,_,null)):Ds(F,_,p),this.G=2}}else this.G==3&&(u?zs(this,u):this.i.length==0||cn(this.h)||zs(this))};function zs(u,p){var _;p?_=p.l:_=u.U++;const T=hn(u.I);We(T,"SID",u.K),We(T,"RID",_),We(T,"AID",u.T),wr(u,T),u.m&&u.o&&Zr(T,u.m,u.o),_=new Dn(u,u.j,_,u.B+1),u.m===null&&(_.H=u.o),p&&(u.i=p.D.concat(u.i)),p=ei(u,_,1e3),_.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),ra(u.h,_),Ds(_,T,p)}function wr(u,p){u.H&&fe(u.H,function(_,T){We(p,T,_)}),u.l&&Kr({},function(_,T){We(p,T,_)})}function ei(u,p,_){_=Math.min(u.i.length,_);var T=u.l?S(u.l.Na,u.l,u):null;e:{var F=u.i;let q=-1;for(;;){const ie=["count="+_];q==-1?0<_?(q=F[0].g,ie.push("ofs="+q)):q=0:ie.push("ofs="+q);let He=!0;for(let _t=0;_t<_;_t++){let Ve=F[_t].g;const St=F[_t].map;if(Ve-=q,0>Ve)q=Math.max(0,F[_t].g-100),He=!1;else try{Dl(St,ie,"req"+Ve+"_")}catch{T&&T(St)}}if(He){T=ie.join("&");break e}}}return u=u.i.splice(0,_),p.D=u,T}function Wi(u){if(!u.g&&!u.u){u.Y=1;var p=u.Fa;je||oe(),re||(je(),re=!0),_e.add(p,u),u.v=0}}function Bs(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=xn(S(u.Fa,u),Vl(u,u.v)),u.v++,!0)}n.Fa=function(){if(this.u=null,Ll(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=xn(S(this.ab,this),u)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,at(10),Fn(this),Ll(this))};function ua(u){u.A!=null&&(f.clearTimeout(u.A),u.A=null)}function Ll(u){u.g=new Dn(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var p=hn(u.qa);We(p,"RID","rpc"),We(p,"SID",u.K),We(p,"AID",u.T),We(p,"CI",u.F?"0":"1"),!u.F&&u.ja&&We(p,"TO",u.ja),We(p,"TYPE","xmlhttp"),wr(u,p),u.m&&u.o&&Zr(p,u.m,u.o),u.L&&(u.g.I=u.L);var _=u.g;u=u.ia,_.L=1,_.v=Xr(hn(p)),_.m=null,_.P=!0,ta(_,u)}n.Za=function(){this.C!=null&&(this.C=null,Fn(this),Bs(this),at(19))};function $s(u){u.C!=null&&(f.clearTimeout(u.C),u.C=null)}function qs(u,p){var _=null;if(u.g==p){$s(u),ua(u),u.g=null;var T=2}else if(Wt(u.h,p))_=p.D,Rl(u.h,p),T=1;else return;if(u.G!=0){if(p.o)if(T==1){_=p.m?p.m.length:0,p=Date.now()-p.F;var F=u.B;T=Vi(),yt(T,new Ps(T,_)),Zn(u)}else Wi(u);else if(F=p.s,F==3||F==0&&0<p.X||!(T==1&&sh(u,p)||T==2&&Bs(u)))switch(_&&0<_.length&&(p=u.h,p.i=p.i.concat(_)),F){case 1:Er(u,5);break;case 4:Er(u,10);break;case 3:Er(u,6);break;default:Er(u,2)}}}function Vl(u,p){let _=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(_*=2),_*p}function Er(u,p){if(u.j.info("Error code "+p),p==2){var _=S(u.fb,u),T=u.Xa;const F=!T;T=new yr(T||"//www.google.com/images/cleardot.gif"),f.location&&f.location.protocol=="http"||$i(T,"https"),Xr(T),F?nh(T.toString(),_):bl(T.toString(),_)}else at(2);u.G=0,u.l&&u.l.sa(p),Ml(u),js(u)}n.fb=function(u){u?(this.j.info("Successfully pinged google.com"),at(2)):(this.j.info("Failed to ping google.com"),at(1))};function Ml(u){if(u.G=0,u.ka=[],u.l){const p=Cl(u.h);(p.length!=0||u.i.length!=0)&&(D(u.ka,p),D(u.ka,u.i),u.h.i.length=0,B(u.i),u.i.length=0),u.l.ra()}}function Fl(u,p,_){var T=_ instanceof yr?hn(_):new yr(_);if(T.g!="")p&&(T.g=p+"."+T.g),Gr(T,T.s);else{var F=f.location;T=F.protocol,p=p?p+"."+F.hostname:F.hostname,F=+F.port;var q=new yr(null);T&&$i(q,T),p&&(q.g=p),F&&Gr(q,F),_&&(q.l=_),T=q}return _=u.D,p=u.ya,_&&p&&We(T,_,p),We(T,"VER",u.la),wr(u,T),T}function Ul(u,p,_){if(p&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return p=u.Ca&&!u.pa?new et(new _r({eb:_})):new et(u.pa),p.Ha(u.J),p}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function ca(){}n=ca.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Hs(){}Hs.prototype.g=function(u,p){return new Kt(u,p)};function Kt(u,p){gt.call(this),this.g=new la(p),this.l=u,this.h=p&&p.messageUrlParams||null,u=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(u?u["X-WebChannel-Content-Type"]=p.messageContentType:u={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.va&&(u?u["X-WebChannel-Client-Profile"]=p.va:u={"X-WebChannel-Client-Profile":p.va}),this.g.S=u,(u=p&&p.Sb)&&!W(u)&&(this.g.m=u),this.v=p&&p.supportsCrossDomainXhr||!1,this.u=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!W(p)&&(this.g.D=p,u=this.h,u!==null&&p in u&&(u=this.h,p in u&&delete u[p])),this.j=new er(this)}j(Kt,gt),Kt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Kt.prototype.close=function(){Nt(this.g)},Kt.prototype.o=function(u){var p=this.g;if(typeof u=="string"){var _={};_.__data__=u,u=_}else this.u&&(_={},_.__data__=Ko(u),u=_);p.i.push(new Sl(p.Ya++,u)),p.G==3&&Zn(p)},Kt.prototype.N=function(){this.g.l=null,delete this.j,Nt(this.g),delete this.g,Kt.aa.N.call(this)};function jl(u){Gn.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var p=u.__sm__;if(p){e:{for(const _ in p){u=_;break e}u=void 0}(this.i=u)&&(u=this.i,p=p!==null&&u in p?p[u]:void 0),this.data=p}else this.data=u}j(jl,Gn);function zl(){ks.call(this),this.status=1}j(zl,ks);function er(u){this.g=u}j(er,ca),er.prototype.ua=function(){yt(this.g,"a")},er.prototype.ta=function(u){yt(this.g,new jl(u))},er.prototype.sa=function(u){yt(this.g,new zl)},er.prototype.ra=function(){yt(this.g,"b")},Hs.prototype.createWebChannel=Hs.prototype.g,Kt.prototype.send=Kt.prototype.o,Kt.prototype.open=Kt.prototype.m,Kt.prototype.close=Kt.prototype.close,Av=function(){return new Hs},Sv=function(){return Vi()},Iv=Qn,sf={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ns.NO_ERROR=0,Ns.TIMEOUT=8,Ns.HTTP_ERROR=6,Hu=Ns,wl.COMPLETE="complete",Tv=wl,Cs.EventType=vn,vn.OPEN="a",vn.CLOSE="b",vn.ERROR="c",vn.MESSAGE="d",gt.prototype.listen=gt.prototype.K,Va=Cs,et.prototype.listenOnce=et.prototype.L,et.prototype.getLastError=et.prototype.Ka,et.prototype.getLastErrorCode=et.prototype.Ba,et.prototype.getStatus=et.prototype.Z,et.prototype.getResponseJson=et.prototype.Oa,et.prototype.getResponseText=et.prototype.oa,et.prototype.send=et.prototype.ea,et.prototype.setWithCredentials=et.prototype.Ha,Ev=et}).apply(typeof Vu<"u"?Vu:typeof self<"u"?self:typeof window<"u"?window:{});const vy="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Bt.UNAUTHENTICATED=new Bt(null),Bt.GOOGLE_CREDENTIALS=new Bt("google-credentials-uid"),Bt.FIRST_PARTY=new Bt("first-party-uid"),Bt.MOCK_USER=new Bt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Do="11.0.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ys=new Pf("@firebase/firestore");function po(){return ys.logLevel}function ae(n,...e){if(ys.logLevel<=Ne.DEBUG){const t=e.map(Hf);ys.debug(`Firestore (${Do}): ${n}`,...t)}}function jr(n,...e){if(ys.logLevel<=Ne.ERROR){const t=e.map(Hf);ys.error(`Firestore (${Do}): ${n}`,...t)}}function So(n,...e){if(ys.logLevel<=Ne.WARN){const t=e.map(Hf);ys.warn(`Firestore (${Do}): ${n}`,...t)}}function Hf(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Te(n="Unexpected state"){const e=`FIRESTORE (${Do}) INTERNAL ASSERTION FAILED: `+n;throw jr(e),new Error(e)}function qe(n,e){n||Te()}function Ae(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class le extends Br{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rv{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class dA{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Bt.UNAUTHENTICATED))}shutdown(){}}class fA{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class pA{constructor(e){this.t=e,this.currentUser=Bt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){qe(this.o===void 0);let i=this.i;const o=m=>this.i!==i?(i=this.i,t(m)):Promise.resolve();let l=new Vr;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Vr,e.enqueueRetryable(()=>o(this.currentUser))};const c=()=>{const m=l;e.enqueueRetryable(async()=>{await m.promise,await o(this.currentUser)})},f=m=>{ae("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=m,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit(m=>f(m)),setTimeout(()=>{if(!this.auth){const m=this.t.getImmediate({optional:!0});m?f(m):(ae("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Vr)}},0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(i=>this.i!==e?(ae("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(qe(typeof i.accessToken=="string"),new Rv(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return qe(e===null||typeof e=="string"),new Bt(e)}}class mA{constructor(e,t,i){this.l=e,this.h=t,this.P=i,this.type="FirstParty",this.user=Bt.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class gA{constructor(e,t,i){this.l=e,this.h=t,this.P=i}getToken(){return Promise.resolve(new mA(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(Bt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class yA{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class _A{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){qe(this.o===void 0);const i=l=>{l.error!=null&&ae("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.R;return this.R=l.token,ae("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable(()=>i(l))};const o=l=>{ae("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(l=>o(l)),setTimeout(()=>{if(!this.appCheck){const l=this.A.getImmediate({optional:!0});l?o(l):ae("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(qe(typeof t.token=="string"),this.R=t.token,new yA(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vA(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cv{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let i="";for(;i.length<20;){const o=vA(40);for(let l=0;l<o.length;++l)i.length<20&&o[l]<t&&(i+=e.charAt(o[l]%e.length))}return i}}function Oe(n,e){return n<e?-1:n>e?1:0}function Ao(n,e,t){return n.length===e.length&&n.every((i,o)=>t(i,e[o]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Et{static now(){return Et.fromMillis(Date.now())}static fromDate(e){return Et.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*t));return new Et(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new le(K.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new le(K.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new le(K.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new le(K.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Oe(this.nanoseconds,e.nanoseconds):Oe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Se{static fromTimestamp(e){return new Se(e)}static min(){return new Se(new Et(0,0))}static max(){return new Se(new Et(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ga{constructor(e,t,i){t===void 0?t=0:t>e.length&&Te(),i===void 0?i=e.length-t:i>e.length-t&&Te(),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return Ga.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ga?e.forEach(i=>{t.push(i)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let o=0;o<i;o++){const l=e.get(o),c=t.get(o);if(l<c)return-1;if(l>c)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Ze extends Ga{construct(e,t,i){return new Ze(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new le(K.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter(o=>o.length>0))}return new Ze(t)}static emptyPath(){return new Ze([])}}const wA=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Lt extends Ga{construct(e,t,i){return new Lt(e,t,i)}static isValidIdentifier(e){return wA.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Lt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Lt(["__name__"])}static fromServerFormat(e){const t=[];let i="",o=0;const l=()=>{if(i.length===0)throw new le(K.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let c=!1;for(;o<e.length;){const f=e[o];if(f==="\\"){if(o+1===e.length)throw new le(K.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const m=e[o+1];if(m!=="\\"&&m!=="."&&m!=="`")throw new le(K.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=m,o+=2}else f==="`"?(c=!c,o++):f!=="."||c?(i+=f,o++):(l(),o++)}if(l(),c)throw new le(K.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Lt(t)}static emptyPath(){return new Lt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ye{constructor(e){this.path=e}static fromPath(e){return new ye(Ze.fromString(e))}static fromName(e){return new ye(Ze.fromString(e).popFirst(5))}static empty(){return new ye(Ze.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ze.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Ze.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ye(new Ze(e.slice()))}}function EA(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,o=Se.fromTimestamp(i===1e9?new Et(t+1,0):new Et(t,i));return new Si(o,ye.empty(),e)}function TA(n){return new Si(n.readTime,n.key,-1)}class Si{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new Si(Se.min(),ye.empty(),-1)}static max(){return new Si(Se.max(),ye.empty(),-1)}}function IA(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=ye.comparator(n.documentKey,e.documentKey),t!==0?t:Oe(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SA="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class AA{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Oo(n){if(n.code!==K.FAILED_PRECONDITION||n.message!==SA)throw n;ae("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Te(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new G((i,o)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(i,o)},this.catchCallback=l=>{this.wrapFailure(t,l).next(i,o)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof G?t:G.resolve(t)}catch(t){return G.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):G.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):G.reject(t)}static resolve(e){return new G((t,i)=>{t(e)})}static reject(e){return new G((t,i)=>{i(e)})}static waitFor(e){return new G((t,i)=>{let o=0,l=0,c=!1;e.forEach(f=>{++o,f.next(()=>{++l,c&&l===o&&t()},m=>i(m))}),c=!0,l===o&&t()})}static or(e){let t=G.resolve(!1);for(const i of e)t=t.next(o=>o?G.resolve(o):i());return t}static forEach(e,t){const i=[];return e.forEach((o,l)=>{i.push(t.call(this,o,l))}),this.waitFor(i)}static mapArray(e,t){return new G((i,o)=>{const l=e.length,c=new Array(l);let f=0;for(let m=0;m<l;m++){const y=m;t(e[y]).next(v=>{c[y]=v,++f,f===l&&i(c)},v=>o(v))}})}static doWhile(e,t){return new G((i,o)=>{const l=()=>{e()===!0?t().next(()=>{l()},o):i()};l()})}}function RA(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Lo(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pc{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ie(i),this.se=i=>t.writeSequenceNumber(i))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Pc.oe=-1;function xc(n){return n==null}function cc(n){return n===0&&1/n==-1/0}function CA(n){return typeof n=="number"&&Number.isInteger(n)&&!cc(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kA(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=wy(e)),e=PA(n.get(t),e);return wy(e)}function PA(n,e){let t=e;const i=n.length;for(let o=0;o<i;o++){const l=n.charAt(o);switch(l){case"\0":t+="";break;case"":t+="";break;default:t+=l}}return t}function wy(n){return n+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ey(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function xi(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function kv(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class st{constructor(e,t){this.comparator=e,this.root=t||Ot.EMPTY}insert(e,t){return new st(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ot.BLACK,null,null))}remove(e){return new st(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ot.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const o=this.comparator(e,i.key);if(o===0)return t+i.left.size;o<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,i)=>(e(t,i),!1))}toString(){const e=[];return this.inorderTraversal((t,i)=>(e.push(`${t}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Mu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Mu(this.root,e,this.comparator,!1)}getReverseIterator(){return new Mu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Mu(this.root,e,this.comparator,!0)}}class Mu{constructor(e,t,i,o){this.isReverse=o,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?i(e.key,t):1,t&&o&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ot{constructor(e,t,i,o,l){this.key=e,this.value=t,this.color=i??Ot.RED,this.left=o??Ot.EMPTY,this.right=l??Ot.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,o,l){return new Ot(e??this.key,t??this.value,i??this.color,o??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let o=this;const l=i(e,o.key);return o=l<0?o.copy(null,null,null,o.left.insert(e,t,i),null):l===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,i)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Ot.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return Ot.EMPTY;i=o.right.min(),o=o.copy(i.key,i.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ot.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ot.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Te();const e=this.left.check();if(e!==this.right.check())throw Te();return e+(this.isRed()?0:1)}}Ot.EMPTY=null,Ot.RED=!0,Ot.BLACK=!1;Ot.EMPTY=new class{constructor(){this.size=0}get key(){throw Te()}get value(){throw Te()}get color(){throw Te()}get left(){throw Te()}get right(){throw Te()}copy(e,t,i,o,l){return this}insert(e,t,i){return new Ot(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tt{constructor(e){this.comparator=e,this.data=new st(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,i)=>(e(t),!1))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const o=i.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Ty(this.data.getIterator())}getIteratorFrom(e){return new Ty(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(i=>{t=t.add(i)}),t}isEqual(e){if(!(e instanceof Tt)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=i.getNext().key;if(this.comparator(o,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Tt(this.comparator);return t.data=e,t}}class Ty{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yn{constructor(e){this.fields=e,e.sort(Lt.comparator)}static empty(){return new yn([])}unionWith(e){let t=new Tt(Lt.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new yn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ao(this.fields,e.fields,(t,i)=>t.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pv extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(o){try{return atob(o)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new Pv("Invalid base64 string: "+l):l}}(e);return new Vt(t)}static fromUint8Array(e){const t=function(o){let l="";for(let c=0;c<o.length;++c)l+=String.fromCharCode(o[c]);return l}(e);return new Vt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const i=new Uint8Array(t.length);for(let o=0;o<t.length;o++)i[o]=t.charCodeAt(o);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Oe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Vt.EMPTY_BYTE_STRING=new Vt("");const xA=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ai(n){if(qe(!!n),typeof n=="string"){let e=0;const t=xA.exec(n);if(qe(!!t),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:ut(n.seconds),nanos:ut(n.nanos)}}function ut(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Ri(n){return typeof n=="string"?Vt.fromBase64String(n):Vt.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wf(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function Nc(n){const e=n.mapValue.fields.__previous_value__;return Wf(e)?Nc(e):e}function Qa(n){const e=Ai(n.mapValue.fields.__local_write_time__.timestampValue);return new Et(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NA{constructor(e,t,i,o,l,c,f,m,y){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=o,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=f,this.longPollingOptions=m,this.useFetchStreams=y}}class Xa{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Xa("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Xa&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fu={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Ci(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Wf(n)?4:DA(n)?9007199254740991:bA(n)?10:11:Te()}function hr(n,e){if(n===e)return!0;const t=Ci(n);if(t!==Ci(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Qa(n).isEqual(Qa(e));case 3:return function(o,l){if(typeof o.timestampValue=="string"&&typeof l.timestampValue=="string"&&o.timestampValue.length===l.timestampValue.length)return o.timestampValue===l.timestampValue;const c=Ai(o.timestampValue),f=Ai(l.timestampValue);return c.seconds===f.seconds&&c.nanos===f.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(o,l){return Ri(o.bytesValue).isEqual(Ri(l.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(o,l){return ut(o.geoPointValue.latitude)===ut(l.geoPointValue.latitude)&&ut(o.geoPointValue.longitude)===ut(l.geoPointValue.longitude)}(n,e);case 2:return function(o,l){if("integerValue"in o&&"integerValue"in l)return ut(o.integerValue)===ut(l.integerValue);if("doubleValue"in o&&"doubleValue"in l){const c=ut(o.doubleValue),f=ut(l.doubleValue);return c===f?cc(c)===cc(f):isNaN(c)&&isNaN(f)}return!1}(n,e);case 9:return Ao(n.arrayValue.values||[],e.arrayValue.values||[],hr);case 10:case 11:return function(o,l){const c=o.mapValue.fields||{},f=l.mapValue.fields||{};if(Ey(c)!==Ey(f))return!1;for(const m in c)if(c.hasOwnProperty(m)&&(f[m]===void 0||!hr(c[m],f[m])))return!1;return!0}(n,e);default:return Te()}}function Ya(n,e){return(n.values||[]).find(t=>hr(t,e))!==void 0}function Ro(n,e){if(n===e)return 0;const t=Ci(n),i=Ci(e);if(t!==i)return Oe(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return Oe(n.booleanValue,e.booleanValue);case 2:return function(l,c){const f=ut(l.integerValue||l.doubleValue),m=ut(c.integerValue||c.doubleValue);return f<m?-1:f>m?1:f===m?0:isNaN(f)?isNaN(m)?0:-1:1}(n,e);case 3:return Iy(n.timestampValue,e.timestampValue);case 4:return Iy(Qa(n),Qa(e));case 5:return Oe(n.stringValue,e.stringValue);case 6:return function(l,c){const f=Ri(l),m=Ri(c);return f.compareTo(m)}(n.bytesValue,e.bytesValue);case 7:return function(l,c){const f=l.split("/"),m=c.split("/");for(let y=0;y<f.length&&y<m.length;y++){const v=Oe(f[y],m[y]);if(v!==0)return v}return Oe(f.length,m.length)}(n.referenceValue,e.referenceValue);case 8:return function(l,c){const f=Oe(ut(l.latitude),ut(c.latitude));return f!==0?f:Oe(ut(l.longitude),ut(c.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return Sy(n.arrayValue,e.arrayValue);case 10:return function(l,c){var f,m,y,v;const E=l.fields||{},S=c.fields||{},M=(f=E.value)===null||f===void 0?void 0:f.arrayValue,j=(m=S.value)===null||m===void 0?void 0:m.arrayValue,B=Oe(((y=M==null?void 0:M.values)===null||y===void 0?void 0:y.length)||0,((v=j==null?void 0:j.values)===null||v===void 0?void 0:v.length)||0);return B!==0?B:Sy(M,j)}(n.mapValue,e.mapValue);case 11:return function(l,c){if(l===Fu.mapValue&&c===Fu.mapValue)return 0;if(l===Fu.mapValue)return 1;if(c===Fu.mapValue)return-1;const f=l.fields||{},m=Object.keys(f),y=c.fields||{},v=Object.keys(y);m.sort(),v.sort();for(let E=0;E<m.length&&E<v.length;++E){const S=Oe(m[E],v[E]);if(S!==0)return S;const M=Ro(f[m[E]],y[v[E]]);if(M!==0)return M}return Oe(m.length,v.length)}(n.mapValue,e.mapValue);default:throw Te()}}function Iy(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Oe(n,e);const t=Ai(n),i=Ai(e),o=Oe(t.seconds,i.seconds);return o!==0?o:Oe(t.nanos,i.nanos)}function Sy(n,e){const t=n.values||[],i=e.values||[];for(let o=0;o<t.length&&o<i.length;++o){const l=Ro(t[o],i[o]);if(l)return l}return Oe(t.length,i.length)}function Co(n){return of(n)}function of(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const i=Ai(t);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return Ri(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return ye.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let i="[",o=!0;for(const l of t.values||[])o?o=!1:i+=",",i+=of(l);return i+"]"}(n.arrayValue):"mapValue"in n?function(t){const i=Object.keys(t.fields||{}).sort();let o="{",l=!0;for(const c of i)l?l=!1:o+=",",o+=`${c}:${of(t.fields[c])}`;return o+"}"}(n.mapValue):Te()}function Wu(n){switch(Ci(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Nc(n);return e?16+Wu(e):16;case 5:return 2*n.stringValue.length;case 6:return Ri(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((o,l)=>o+Wu(l),0)}(n.arrayValue);case 10:case 11:return function(i){let o=0;return xi(i.fields,(l,c)=>{o+=l.length+Wu(c)}),o}(n.mapValue);default:throw Te()}}function Ay(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function af(n){return!!n&&"integerValue"in n}function Kf(n){return!!n&&"arrayValue"in n}function Ry(n){return!!n&&"nullValue"in n}function Cy(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Ku(n){return!!n&&"mapValue"in n}function bA(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function za(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return xi(n.mapValue.fields,(t,i)=>e.mapValue.fields[t]=za(i)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=za(n.arrayValue.values[t]);return e}return Object.assign({},n)}function DA(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class an{constructor(e){this.value=e}static empty(){return new an({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!Ku(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=za(t)}setAll(e){let t=Lt.emptyPath(),i={},o=[];e.forEach((c,f)=>{if(!t.isImmediateParentOf(f)){const m=this.getFieldsMap(t);this.applyChanges(m,i,o),i={},o=[],t=f.popLast()}c?i[f.lastSegment()]=za(c):o.push(f.lastSegment())});const l=this.getFieldsMap(t);this.applyChanges(l,i,o)}delete(e){const t=this.field(e.popLast());Ku(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return hr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let o=t.mapValue.fields[e.get(i)];Ku(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,i){xi(t,(o,l)=>e[o]=l);for(const o of i)delete e[o]}clone(){return new an(za(this.value))}}function xv(n){const e=[];return xi(n.fields,(t,i)=>{const o=new Lt([t]);if(Ku(i)){const l=xv(i.mapValue).fields;if(l.length===0)e.push(o);else for(const c of l)e.push(o.child(c))}else e.push(o)}),new yn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t{constructor(e,t,i,o,l,c,f){this.key=e,this.documentType=t,this.version=i,this.readTime=o,this.createTime=l,this.data=c,this.documentState=f}static newInvalidDocument(e){return new $t(e,0,Se.min(),Se.min(),Se.min(),an.empty(),0)}static newFoundDocument(e,t,i,o){return new $t(e,1,t,Se.min(),i,o,0)}static newNoDocument(e,t){return new $t(e,2,t,Se.min(),Se.min(),an.empty(),0)}static newUnknownDocument(e,t){return new $t(e,3,t,Se.min(),Se.min(),an.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Se.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=an.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=an.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Se.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof $t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new $t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hc{constructor(e,t){this.position=e,this.inclusive=t}}function ky(n,e,t){let i=0;for(let o=0;o<n.position.length;o++){const l=e[o],c=n.position[o];if(l.field.isKeyField()?i=ye.comparator(ye.fromName(c.referenceValue),t.key):i=Ro(c,t.data.field(l.field)),l.dir==="desc"&&(i*=-1),i!==0)break}return i}function Py(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!hr(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dc{constructor(e,t="asc"){this.field=e,this.dir=t}}function OA(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nv{}class ft extends Nv{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new VA(e,t,i):t==="array-contains"?new UA(e,i):t==="in"?new jA(e,i):t==="not-in"?new zA(e,i):t==="array-contains-any"?new BA(e,i):new ft(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new MA(e,i):new FA(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(Ro(t,this.value)):t!==null&&Ci(this.value)===Ci(t)&&this.matchesComparison(Ro(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Te()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Wn extends Nv{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new Wn(e,t)}matches(e){return bv(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function bv(n){return n.op==="and"}function Dv(n){return LA(n)&&bv(n)}function LA(n){for(const e of n.filters)if(e instanceof Wn)return!1;return!0}function lf(n){if(n instanceof ft)return n.field.canonicalString()+n.op.toString()+Co(n.value);if(Dv(n))return n.filters.map(e=>lf(e)).join(",");{const e=n.filters.map(t=>lf(t)).join(",");return`${n.op}(${e})`}}function Ov(n,e){return n instanceof ft?function(i,o){return o instanceof ft&&i.op===o.op&&i.field.isEqual(o.field)&&hr(i.value,o.value)}(n,e):n instanceof Wn?function(i,o){return o instanceof Wn&&i.op===o.op&&i.filters.length===o.filters.length?i.filters.reduce((l,c,f)=>l&&Ov(c,o.filters[f]),!0):!1}(n,e):void Te()}function Lv(n){return n instanceof ft?function(t){return`${t.field.canonicalString()} ${t.op} ${Co(t.value)}`}(n):n instanceof Wn?function(t){return t.op.toString()+" {"+t.getFilters().map(Lv).join(" ,")+"}"}(n):"Filter"}class VA extends ft{constructor(e,t,i){super(e,t,i),this.key=ye.fromName(i.referenceValue)}matches(e){const t=ye.comparator(e.key,this.key);return this.matchesComparison(t)}}class MA extends ft{constructor(e,t){super(e,"in",t),this.keys=Vv("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class FA extends ft{constructor(e,t){super(e,"not-in",t),this.keys=Vv("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Vv(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(i=>ye.fromName(i.referenceValue))}class UA extends ft{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Kf(t)&&Ya(t.arrayValue,this.value)}}class jA extends ft{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Ya(this.value.arrayValue,t)}}class zA extends ft{constructor(e,t){super(e,"not-in",t)}matches(e){if(Ya(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!Ya(this.value.arrayValue,t)}}class BA extends ft{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Kf(t)||!t.arrayValue.values)&&t.arrayValue.values.some(i=>Ya(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $A{constructor(e,t=null,i=[],o=[],l=null,c=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=o,this.limit=l,this.startAt=c,this.endAt=f,this.ue=null}}function xy(n,e=null,t=[],i=[],o=null,l=null,c=null){return new $A(n,e,t,i,o,l,c)}function Gf(n){const e=Ae(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(i=>lf(i)).join(","),t+="|ob:",t+=e.orderBy.map(i=>function(l){return l.field.canonicalString()+l.dir}(i)).join(","),xc(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(i=>Co(i)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(i=>Co(i)).join(",")),e.ue=t}return e.ue}function Qf(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!OA(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!Ov(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Py(n.startAt,e.startAt)&&Py(n.endAt,e.endAt)}function uf(n){return ye.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ul{constructor(e,t=null,i=[],o=[],l=null,c="F",f=null,m=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=o,this.limit=l,this.limitType=c,this.startAt=f,this.endAt=m,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function qA(n,e,t,i,o,l,c,f){return new ul(n,e,t,i,o,l,c,f)}function Xf(n){return new ul(n)}function Ny(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function Mv(n){return n.collectionGroup!==null}function Ba(n){const e=Ae(n);if(e.ce===null){e.ce=[];const t=new Set;for(const l of e.explicitOrderBy)e.ce.push(l),t.add(l.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let f=new Tt(Lt.comparator);return c.filters.forEach(m=>{m.getFlattenedFilters().forEach(y=>{y.isInequality()&&(f=f.add(y.field))})}),f})(e).forEach(l=>{t.has(l.canonicalString())||l.isKeyField()||e.ce.push(new dc(l,i))}),t.has(Lt.keyField().canonicalString())||e.ce.push(new dc(Lt.keyField(),i))}return e.ce}function ar(n){const e=Ae(n);return e.le||(e.le=HA(e,Ba(n))),e.le}function HA(n,e){if(n.limitType==="F")return xy(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(o=>{const l=o.dir==="desc"?"asc":"desc";return new dc(o.field,l)});const t=n.endAt?new hc(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new hc(n.startAt.position,n.startAt.inclusive):null;return xy(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}function cf(n,e){const t=n.filters.concat([e]);return new ul(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function hf(n,e,t){return new ul(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function bc(n,e){return Qf(ar(n),ar(e))&&n.limitType===e.limitType}function Fv(n){return`${Gf(ar(n))}|lt:${n.limitType}`}function mo(n){return`Query(target=${function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map(o=>Lv(o)).join(", ")}]`),xc(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map(o=>function(c){return`${c.field.canonicalString()} (${c.dir})`}(o)).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map(o=>Co(o)).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map(o=>Co(o)).join(",")),`Target(${i})`}(ar(n))}; limitType=${n.limitType})`}function Dc(n,e){return e.isFoundDocument()&&function(i,o){const l=o.key.path;return i.collectionGroup!==null?o.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(l):ye.isDocumentKey(i.path)?i.path.isEqual(l):i.path.isImmediateParentOf(l)}(n,e)&&function(i,o){for(const l of Ba(i))if(!l.field.isKeyField()&&o.data.field(l.field)===null)return!1;return!0}(n,e)&&function(i,o){for(const l of i.filters)if(!l.matches(o))return!1;return!0}(n,e)&&function(i,o){return!(i.startAt&&!function(c,f,m){const y=ky(c,f,m);return c.inclusive?y<=0:y<0}(i.startAt,Ba(i),o)||i.endAt&&!function(c,f,m){const y=ky(c,f,m);return c.inclusive?y>=0:y>0}(i.endAt,Ba(i),o))}(n,e)}function WA(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Uv(n){return(e,t)=>{let i=!1;for(const o of Ba(n)){const l=KA(o,e,t);if(l!==0)return l;i=i||o.field.isKeyField()}return 0}}function KA(n,e,t){const i=n.field.isKeyField()?ye.comparator(e.key,t.key):function(l,c,f){const m=c.data.field(l),y=f.data.field(l);return m!==null&&y!==null?Ro(m,y):Te()}(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return Te()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vs{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[o,l]of i)if(this.equalsFn(o,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),o=this.inner[i];if(o===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let l=0;l<o.length;l++)if(this.equalsFn(o[l][0],e))return void(o[l]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return i.length===1?delete this.inner[t]:i.splice(o,1),this.innerSize--,!0;return!1}forEach(e){xi(this.inner,(t,i)=>{for(const[o,l]of i)e(o,l)})}isEmpty(){return kv(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GA=new st(ye.comparator);function zr(){return GA}const jv=new st(ye.comparator);function Ma(...n){let e=jv;for(const t of n)e=e.insert(t.key,t);return e}function zv(n){let e=jv;return n.forEach((t,i)=>e=e.insert(t,i.overlayedDocument)),e}function ls(){return $a()}function Bv(){return $a()}function $a(){return new vs(n=>n.toString(),(n,e)=>n.isEqual(e))}const QA=new st(ye.comparator),XA=new Tt(ye.comparator);function be(...n){let e=XA;for(const t of n)e=e.add(t);return e}const YA=new Tt(Oe);function JA(){return YA}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yf(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:cc(e)?"-0":e}}function $v(n){return{integerValue:""+n}}function ZA(n,e){return CA(e)?$v(e):Yf(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oc{constructor(){this._=void 0}}function eR(n,e,t){return n instanceof fc?function(o,l){const c={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return l&&Wf(l)&&(l=Nc(l)),l&&(c.fields.__previous_value__=l),{mapValue:c}}(t,e):n instanceof Ja?Hv(n,e):n instanceof Za?Wv(n,e):function(o,l){const c=qv(o,l),f=by(c)+by(o.Pe);return af(c)&&af(o.Pe)?$v(f):Yf(o.serializer,f)}(n,e)}function tR(n,e,t){return n instanceof Ja?Hv(n,e):n instanceof Za?Wv(n,e):t}function qv(n,e){return n instanceof pc?function(i){return af(i)||function(l){return!!l&&"doubleValue"in l}(i)}(e)?e:{integerValue:0}:null}class fc extends Oc{}class Ja extends Oc{constructor(e){super(),this.elements=e}}function Hv(n,e){const t=Kv(e);for(const i of n.elements)t.some(o=>hr(o,i))||t.push(i);return{arrayValue:{values:t}}}class Za extends Oc{constructor(e){super(),this.elements=e}}function Wv(n,e){let t=Kv(e);for(const i of n.elements)t=t.filter(o=>!hr(o,i));return{arrayValue:{values:t}}}class pc extends Oc{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function by(n){return ut(n.integerValue||n.doubleValue)}function Kv(n){return Kf(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function nR(n,e){return n.field.isEqual(e.field)&&function(i,o){return i instanceof Ja&&o instanceof Ja||i instanceof Za&&o instanceof Za?Ao(i.elements,o.elements,hr):i instanceof pc&&o instanceof pc?hr(i.Pe,o.Pe):i instanceof fc&&o instanceof fc}(n.transform,e.transform)}class rR{constructor(e,t){this.version=e,this.transformResults=t}}class Pn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Pn}static exists(e){return new Pn(void 0,e)}static updateTime(e){return new Pn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Gu(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Lc{}function Gv(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Jf(n.key,Pn.none()):new cl(n.key,n.data,Pn.none());{const t=n.data,i=an.empty();let o=new Tt(Lt.comparator);for(let l of e.fields)if(!o.has(l)){let c=t.field(l);c===null&&l.length>1&&(l=l.popLast(),c=t.field(l)),c===null?i.delete(l):i.set(l,c),o=o.add(l)}return new Ni(n.key,i,new yn(o.toArray()),Pn.none())}}function iR(n,e,t){n instanceof cl?function(o,l,c){const f=o.value.clone(),m=Oy(o.fieldTransforms,l,c.transformResults);f.setAll(m),l.convertToFoundDocument(c.version,f).setHasCommittedMutations()}(n,e,t):n instanceof Ni?function(o,l,c){if(!Gu(o.precondition,l))return void l.convertToUnknownDocument(c.version);const f=Oy(o.fieldTransforms,l,c.transformResults),m=l.data;m.setAll(Qv(o)),m.setAll(f),l.convertToFoundDocument(c.version,m).setHasCommittedMutations()}(n,e,t):function(o,l,c){l.convertToNoDocument(c.version).setHasCommittedMutations()}(0,e,t)}function qa(n,e,t,i){return n instanceof cl?function(l,c,f,m){if(!Gu(l.precondition,c))return f;const y=l.value.clone(),v=Ly(l.fieldTransforms,m,c);return y.setAll(v),c.convertToFoundDocument(c.version,y).setHasLocalMutations(),null}(n,e,t,i):n instanceof Ni?function(l,c,f,m){if(!Gu(l.precondition,c))return f;const y=Ly(l.fieldTransforms,m,c),v=c.data;return v.setAll(Qv(l)),v.setAll(y),c.convertToFoundDocument(c.version,v).setHasLocalMutations(),f===null?null:f.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map(E=>E.field))}(n,e,t,i):function(l,c,f){return Gu(l.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):f}(n,e,t)}function sR(n,e){let t=null;for(const i of n.fieldTransforms){const o=e.data.field(i.field),l=qv(i.transform,o||null);l!=null&&(t===null&&(t=an.empty()),t.set(i.field,l))}return t||null}function Dy(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(i,o){return i===void 0&&o===void 0||!(!i||!o)&&Ao(i,o,(l,c)=>nR(l,c))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class cl extends Lc{constructor(e,t,i,o=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Ni extends Lc{constructor(e,t,i,o,l=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=o,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function Qv(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}}),e}function Oy(n,e,t){const i=new Map;qe(n.length===t.length);for(let o=0;o<t.length;o++){const l=n[o],c=l.transform,f=e.data.field(l.field);i.set(l.field,tR(c,f,t[o]))}return i}function Ly(n,e,t){const i=new Map;for(const o of n){const l=o.transform,c=t.data.field(o.field);i.set(o.field,eR(l,c,e))}return i}class Jf extends Lc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class oR extends Lc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aR{constructor(e,t,i,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=o}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const l=this.mutations[o];l.key.isEqual(e.key)&&iR(l,e,i[o])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=qa(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=qa(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=Bv();return this.mutations.forEach(o=>{const l=e.get(o.key),c=l.overlayedDocument;let f=this.applyToLocalView(c,l.mutatedFields);f=t.has(o.key)?null:f;const m=Gv(c,f);m!==null&&i.set(o.key,m),c.isValidDocument()||c.convertToNoDocument(Se.min())}),i}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),be())}isEqual(e){return this.batchId===e.batchId&&Ao(this.mutations,e.mutations,(t,i)=>Dy(t,i))&&Ao(this.baseMutations,e.baseMutations,(t,i)=>Dy(t,i))}}class Zf{constructor(e,t,i,o){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=o}static from(e,t,i){qe(e.mutations.length===i.length);let o=function(){return QA}();const l=e.mutations;for(let c=0;c<l.length;c++)o=o.insert(l[c].key,i[c].version);return new Zf(e,t,i,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lR{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uR{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var dt,Me;function cR(n){switch(n){default:return Te();case K.CANCELLED:case K.UNKNOWN:case K.DEADLINE_EXCEEDED:case K.RESOURCE_EXHAUSTED:case K.INTERNAL:case K.UNAVAILABLE:case K.UNAUTHENTICATED:return!1;case K.INVALID_ARGUMENT:case K.NOT_FOUND:case K.ALREADY_EXISTS:case K.PERMISSION_DENIED:case K.FAILED_PRECONDITION:case K.ABORTED:case K.OUT_OF_RANGE:case K.UNIMPLEMENTED:case K.DATA_LOSS:return!0}}function Xv(n){if(n===void 0)return jr("GRPC error has no .code"),K.UNKNOWN;switch(n){case dt.OK:return K.OK;case dt.CANCELLED:return K.CANCELLED;case dt.UNKNOWN:return K.UNKNOWN;case dt.DEADLINE_EXCEEDED:return K.DEADLINE_EXCEEDED;case dt.RESOURCE_EXHAUSTED:return K.RESOURCE_EXHAUSTED;case dt.INTERNAL:return K.INTERNAL;case dt.UNAVAILABLE:return K.UNAVAILABLE;case dt.UNAUTHENTICATED:return K.UNAUTHENTICATED;case dt.INVALID_ARGUMENT:return K.INVALID_ARGUMENT;case dt.NOT_FOUND:return K.NOT_FOUND;case dt.ALREADY_EXISTS:return K.ALREADY_EXISTS;case dt.PERMISSION_DENIED:return K.PERMISSION_DENIED;case dt.FAILED_PRECONDITION:return K.FAILED_PRECONDITION;case dt.ABORTED:return K.ABORTED;case dt.OUT_OF_RANGE:return K.OUT_OF_RANGE;case dt.UNIMPLEMENTED:return K.UNIMPLEMENTED;case dt.DATA_LOSS:return K.DATA_LOSS;default:return Te()}}(Me=dt||(dt={}))[Me.OK=0]="OK",Me[Me.CANCELLED=1]="CANCELLED",Me[Me.UNKNOWN=2]="UNKNOWN",Me[Me.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Me[Me.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Me[Me.NOT_FOUND=5]="NOT_FOUND",Me[Me.ALREADY_EXISTS=6]="ALREADY_EXISTS",Me[Me.PERMISSION_DENIED=7]="PERMISSION_DENIED",Me[Me.UNAUTHENTICATED=16]="UNAUTHENTICATED",Me[Me.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Me[Me.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Me[Me.ABORTED=10]="ABORTED",Me[Me.OUT_OF_RANGE=11]="OUT_OF_RANGE",Me[Me.UNIMPLEMENTED=12]="UNIMPLEMENTED",Me[Me.INTERNAL=13]="INTERNAL",Me[Me.UNAVAILABLE=14]="UNAVAILABLE",Me[Me.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hR(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dR=new ds([4294967295,4294967295],0);function Vy(n){const e=hR().encode(n),t=new wv;return t.update(e),new Uint8Array(t.digest())}function My(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),o=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new ds([t,i],0),new ds([o,l],0)]}class ep{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new Fa(`Invalid padding: ${t}`);if(i<0)throw new Fa(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Fa(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new Fa(`Invalid padding when bitmap length is 0: ${t}`);this.Te=8*e.length-t,this.Ie=ds.fromNumber(this.Te)}Ee(e,t,i){let o=e.add(t.multiply(ds.fromNumber(i)));return o.compare(dR)===1&&(o=new ds([o.getBits(0),o.getBits(1)],0)),o.modulo(this.Ie).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Te===0)return!1;const t=Vy(e),[i,o]=My(t);for(let l=0;l<this.hashCount;l++){const c=this.Ee(i,o,l);if(!this.de(c))return!1}return!0}static create(e,t,i){const o=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),c=new ep(l,o,t);return i.forEach(f=>c.insert(f)),c}insert(e){if(this.Te===0)return;const t=Vy(e),[i,o]=My(t);for(let l=0;l<this.hashCount;l++){const c=this.Ee(i,o,l);this.Ae(c)}}Ae(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class Fa extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vc{constructor(e,t,i,o,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=o,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const o=new Map;return o.set(e,hl.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new Vc(Se.min(),o,new st(Oe),zr(),be())}}class hl{constructor(e,t,i,o,l){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=o,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new hl(i,t,be(),be(),be())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qu{constructor(e,t,i,o){this.Re=e,this.removedTargetIds=t,this.key=i,this.Ve=o}}class Yv{constructor(e,t){this.targetId=e,this.me=t}}class Jv{constructor(e,t,i=Vt.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=o}}class Fy{constructor(){this.fe=0,this.ge=Uy(),this.pe=Vt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=be(),t=be(),i=be();return this.ge.forEach((o,l)=>{switch(l){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:i=i.add(o);break;default:Te()}}),new hl(this.pe,this.ye,e,t,i)}Ce(){this.we=!1,this.ge=Uy()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,qe(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class fR{constructor(e){this.Le=e,this.Be=new Map,this.ke=zr(),this.qe=Uu(),this.Qe=Uu(),this.Ke=new st(Oe)}$e(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.Ue(t,e.Ve):this.We(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.We(t,e.key,e.Ve)}Ge(e){this.forEachTarget(e,t=>{const i=this.ze(t);switch(e.state){case 0:this.je(t)&&i.De(e.resumeToken);break;case 1:i.Oe(),i.Se||i.Ce(),i.De(e.resumeToken);break;case 2:i.Oe(),i.Se||this.removeTarget(t);break;case 3:this.je(t)&&(i.Ne(),i.De(e.resumeToken));break;case 4:this.je(t)&&(this.He(t),i.De(e.resumeToken));break;default:Te()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((i,o)=>{this.je(o)&&t(o)})}Je(e){const t=e.targetId,i=e.me.count,o=this.Ye(t);if(o){const l=o.target;if(uf(l))if(i===0){const c=new ye(l.path);this.We(t,c,$t.newNoDocument(c,Se.min()))}else qe(i===1);else{const c=this.Ze(t);if(c!==i){const f=this.Xe(e),m=f?this.et(f,e,c):1;if(m!==0){this.He(t);const y=m===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(t,y)}}}}}Xe(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:o=0},hashCount:l=0}=t;let c,f;try{c=Ri(i).toUint8Array()}catch(m){if(m instanceof Pv)return So("Decoding the base64 bloom filter in existence filter failed ("+m.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw m}try{f=new ep(c,o,l)}catch(m){return So(m instanceof Fa?"BloomFilter error: ":"Applying bloom filter failed: ",m),null}return f.Te===0?null:f}et(e,t,i){return t.me.count===i-this.rt(e,t.targetId)?0:2}rt(e,t){const i=this.Le.getRemoteKeysForTarget(t);let o=0;return i.forEach(l=>{const c=this.Le.nt(),f=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;e.mightContain(f)||(this.We(t,l,null),o++)}),o}it(e){const t=new Map;this.Be.forEach((l,c)=>{const f=this.Ye(c);if(f){if(l.current&&uf(f.target)){const m=new ye(f.target.path);this.st(m).has(c)||this.ot(c,m)||this.We(c,m,$t.newNoDocument(m,e))}l.be&&(t.set(c,l.ve()),l.Ce())}});let i=be();this.Qe.forEach((l,c)=>{let f=!0;c.forEachWhile(m=>{const y=this.Ye(m);return!y||y.purpose==="TargetPurposeLimboResolution"||(f=!1,!1)}),f&&(i=i.add(l))}),this.ke.forEach((l,c)=>c.setReadTime(e));const o=new Vc(e,t,this.Ke,this.ke,i);return this.ke=zr(),this.qe=Uu(),this.Qe=Uu(),this.Ke=new st(Oe),o}Ue(e,t){if(!this.je(e))return;const i=this.ot(e,t.key)?2:0;this.ze(e).Fe(t.key,i),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e)),this.Qe=this.Qe.insert(t.key,this._t(t.key).add(e))}We(e,t,i){if(!this.je(e))return;const o=this.ze(e);this.ot(e,t)?o.Fe(t,1):o.Me(t),this.Qe=this.Qe.insert(t,this._t(t).delete(e)),this.Qe=this.Qe.insert(t,this._t(t).add(e)),i&&(this.ke=this.ke.insert(t,i))}removeTarget(e){this.Be.delete(e)}Ze(e){const t=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.ze(e).xe()}ze(e){let t=this.Be.get(e);return t||(t=new Fy,this.Be.set(e,t)),t}_t(e){let t=this.Qe.get(e);return t||(t=new Tt(Oe),this.Qe=this.Qe.insert(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Tt(Oe),this.qe=this.qe.insert(e,t)),t}je(e){const t=this.Ye(e)!==null;return t||ae("WatchChangeAggregator","Detected inactive target",e),t}Ye(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ut(e)}He(e){this.Be.set(e,new Fy),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.We(e,t,null)})}ot(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function Uu(){return new st(ye.comparator)}function Uy(){return new st(ye.comparator)}const pR={asc:"ASCENDING",desc:"DESCENDING"},mR={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},gR={and:"AND",or:"OR"};class yR{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function df(n,e){return n.useProto3Json||xc(e)?e:{value:e}}function mc(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Zv(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function _R(n,e){return mc(n,e.toTimestamp())}function lr(n){return qe(!!n),Se.fromTimestamp(function(t){const i=Ai(t);return new Et(i.seconds,i.nanos)}(n))}function tp(n,e){return ff(n,e).canonicalString()}function ff(n,e){const t=function(o){return new Ze(["projects",o.projectId,"databases",o.database])}(n).child("documents");return e===void 0?t:t.child(e)}function e0(n){const e=Ze.fromString(n);return qe(s0(e)),e}function pf(n,e){return tp(n.databaseId,e.path)}function Md(n,e){const t=e0(e);if(t.get(1)!==n.databaseId.projectId)throw new le(K.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new le(K.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new ye(n0(t))}function t0(n,e){return tp(n.databaseId,e)}function vR(n){const e=e0(n);return e.length===4?Ze.emptyPath():n0(e)}function mf(n){return new Ze(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function n0(n){return qe(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function jy(n,e,t){return{name:pf(n,e),fields:t.value.mapValue.fields}}function wR(n,e){let t;if("targetChange"in e){e.targetChange;const i=function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:Te()}(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],l=function(y,v){return y.useProto3Json?(qe(v===void 0||typeof v=="string"),Vt.fromBase64String(v||"")):(qe(v===void 0||v instanceof Buffer||v instanceof Uint8Array),Vt.fromUint8Array(v||new Uint8Array))}(n,e.targetChange.resumeToken),c=e.targetChange.cause,f=c&&function(y){const v=y.code===void 0?K.UNKNOWN:Xv(y.code);return new le(v,y.message||"")}(c);t=new Jv(i,o,l,f||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const o=Md(n,i.document.name),l=lr(i.document.updateTime),c=i.document.createTime?lr(i.document.createTime):Se.min(),f=new an({mapValue:{fields:i.document.fields}}),m=$t.newFoundDocument(o,l,c,f),y=i.targetIds||[],v=i.removedTargetIds||[];t=new Qu(y,v,m.key,m)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const o=Md(n,i.document),l=i.readTime?lr(i.readTime):Se.min(),c=$t.newNoDocument(o,l),f=i.removedTargetIds||[];t=new Qu([],f,c.key,c)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const o=Md(n,i.document),l=i.removedTargetIds||[];t=new Qu([],l,o,null)}else{if(!("filter"in e))return Te();{e.filter;const i=e.filter;i.targetId;const{count:o=0,unchangedNames:l}=i,c=new uR(o,l),f=i.targetId;t=new Yv(f,c)}}return t}function ER(n,e){let t;if(e instanceof cl)t={update:jy(n,e.key,e.value)};else if(e instanceof Jf)t={delete:pf(n,e.key)};else if(e instanceof Ni)t={update:jy(n,e.key,e.data),updateMask:xR(e.fieldMask)};else{if(!(e instanceof oR))return Te();t={verify:pf(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(i=>function(l,c){const f=c.transform;if(f instanceof fc)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(f instanceof Ja)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:f.elements}};if(f instanceof Za)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:f.elements}};if(f instanceof pc)return{fieldPath:c.field.canonicalString(),increment:f.Pe};throw Te()}(0,i))),e.precondition.isNone||(t.currentDocument=function(o,l){return l.updateTime!==void 0?{updateTime:_R(o,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Te()}(n,e.precondition)),t}function TR(n,e){return n&&n.length>0?(qe(e!==void 0),n.map(t=>function(o,l){let c=o.updateTime?lr(o.updateTime):lr(l);return c.isEqual(Se.min())&&(c=lr(l)),new rR(c,o.transformResults||[])}(t,e))):[]}function IR(n,e){return{documents:[t0(n,e.path)]}}function SR(n,e){const t={structuredQuery:{}},i=e.path;let o;e.collectionGroup!==null?(o=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=t0(n,o);const l=function(y){if(y.length!==0)return i0(Wn.create(y,"and"))}(e.filters);l&&(t.structuredQuery.where=l);const c=function(y){if(y.length!==0)return y.map(v=>function(S){return{field:go(S.field),direction:CR(S.dir)}}(v))}(e.orderBy);c&&(t.structuredQuery.orderBy=c);const f=df(n,e.limit);return f!==null&&(t.structuredQuery.limit=f),e.startAt&&(t.structuredQuery.startAt=function(y){return{before:y.inclusive,values:y.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(y){return{before:!y.inclusive,values:y.position}}(e.endAt)),{ct:t,parent:o}}function AR(n){let e=vR(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let o=null;if(i>0){qe(i===1);const v=t.from[0];v.allDescendants?o=v.collectionId:e=e.child(v.collectionId)}let l=[];t.where&&(l=function(E){const S=r0(E);return S instanceof Wn&&Dv(S)?S.getFilters():[S]}(t.where));let c=[];t.orderBy&&(c=function(E){return E.map(S=>function(j){return new dc(yo(j.field),function(D){switch(D){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(j.direction))}(S))}(t.orderBy));let f=null;t.limit&&(f=function(E){let S;return S=typeof E=="object"?E.value:E,xc(S)?null:S}(t.limit));let m=null;t.startAt&&(m=function(E){const S=!!E.before,M=E.values||[];return new hc(M,S)}(t.startAt));let y=null;return t.endAt&&(y=function(E){const S=!E.before,M=E.values||[];return new hc(M,S)}(t.endAt)),qA(e,o,c,l,f,"F",m,y)}function RR(n,e){const t=function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Te()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function r0(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=yo(t.unaryFilter.field);return ft.create(i,"==",{doubleValue:NaN});case"IS_NULL":const o=yo(t.unaryFilter.field);return ft.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=yo(t.unaryFilter.field);return ft.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=yo(t.unaryFilter.field);return ft.create(c,"!=",{nullValue:"NULL_VALUE"});default:return Te()}}(n):n.fieldFilter!==void 0?function(t){return ft.create(yo(t.fieldFilter.field),function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Te()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return Wn.create(t.compositeFilter.filters.map(i=>r0(i)),function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Te()}}(t.compositeFilter.op))}(n):Te()}function CR(n){return pR[n]}function kR(n){return mR[n]}function PR(n){return gR[n]}function go(n){return{fieldPath:n.canonicalString()}}function yo(n){return Lt.fromServerFormat(n.fieldPath)}function i0(n){return n instanceof ft?function(t){if(t.op==="=="){if(Cy(t.value))return{unaryFilter:{field:go(t.field),op:"IS_NAN"}};if(Ry(t.value))return{unaryFilter:{field:go(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Cy(t.value))return{unaryFilter:{field:go(t.field),op:"IS_NOT_NAN"}};if(Ry(t.value))return{unaryFilter:{field:go(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:go(t.field),op:kR(t.op),value:t.value}}}(n):n instanceof Wn?function(t){const i=t.getFilters().map(o=>i0(o));return i.length===1?i[0]:{compositeFilter:{op:PR(t.op),filters:i}}}(n):Te()}function xR(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function s0(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vi{constructor(e,t,i,o,l=Se.min(),c=Se.min(),f=Vt.EMPTY_BYTE_STRING,m=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=o,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=f,this.expectedCount=m}withSequenceNumber(e){return new vi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new vi(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new vi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new vi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NR{constructor(e){this.ht=e}}function bR(n){const e=AR({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?hf(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DR{constructor(){this.ln=new OR}addToCollectionParentIndex(e,t){return this.ln.add(t),G.resolve()}getCollectionParents(e,t){return G.resolve(this.ln.getEntries(t))}addFieldIndex(e,t){return G.resolve()}deleteFieldIndex(e,t){return G.resolve()}deleteAllFieldIndexes(e){return G.resolve()}createTargetIndexes(e,t){return G.resolve()}getDocumentsMatchingTarget(e,t){return G.resolve(null)}getIndexType(e,t){return G.resolve(0)}getFieldIndexes(e,t){return G.resolve([])}getNextCollectionGroupToUpdate(e){return G.resolve(null)}getMinOffset(e,t){return G.resolve(Si.min())}getMinOffsetFromCollectionGroup(e,t){return G.resolve(Si.min())}updateCollectionGroup(e,t,i){return G.resolve()}updateIndexEntries(e,t){return G.resolve()}}class OR{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t]||new Tt(Ze.comparator),l=!o.has(i);return this.index[t]=o.add(i),l}has(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t];return o&&o.has(i)}getEntries(e){return(this.index[e]||new Tt(Ze.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zy={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class on{static withCacheSize(e){return new on(e,on.DEFAULT_COLLECTION_PERCENTILE,on.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */on.DEFAULT_COLLECTION_PERCENTILE=10,on.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,on.DEFAULT=new on(41943040,on.DEFAULT_COLLECTION_PERCENTILE,on.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),on.DISABLED=new on(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ko{constructor(e){this.kn=e}next(){return this.kn+=2,this.kn}static qn(){return new ko(0)}static Qn(){return new ko(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function By([n,e],[t,i]){const o=Oe(n,t);return o===0?Oe(e,i):o}class LR{constructor(e){this.Gn=e,this.buffer=new Tt(By),this.zn=0}jn(){return++this.zn}Hn(e){const t=[e,this.jn()];if(this.buffer.size<this.Gn)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();By(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class VR{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Yn(6e4)}stop(){this.Jn&&(this.Jn.cancel(),this.Jn=null)}get started(){return this.Jn!==null}Yn(e){ae("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Lo(t)?ae("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",t):await Oo(t)}await this.Yn(3e5)})}}class MR{constructor(e,t){this.Zn=e,this.params=t}calculateTargetCount(e,t){return this.Zn.Xn(e).next(i=>Math.floor(t/100*i))}nthSequenceNumber(e,t){if(t===0)return G.resolve(Pc.oe);const i=new LR(t);return this.Zn.forEachTarget(e,o=>i.Hn(o.sequenceNumber)).next(()=>this.Zn.er(e,o=>i.Hn(o))).next(()=>i.maxValue)}removeTargets(e,t,i){return this.Zn.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.Zn.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ae("LruGarbageCollector","Garbage collection skipped; disabled"),G.resolve(zy)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(ae("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),zy):this.tr(e,t))}getCacheSize(e){return this.Zn.getCacheSize(e)}tr(e,t){let i,o,l,c,f,m,y;const v=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(E=>(E>this.params.maximumSequenceNumbersToCollect?(ae("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),o=this.params.maximumSequenceNumbersToCollect):o=E,c=Date.now(),this.nthSequenceNumber(e,o))).next(E=>(i=E,f=Date.now(),this.removeTargets(e,i,t))).next(E=>(l=E,m=Date.now(),this.removeOrphanedDocuments(e,i))).next(E=>(y=Date.now(),po()<=Ne.DEBUG&&ae("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-v}ms
	Determined least recently used ${o} in `+(f-c)+`ms
	Removed ${l} targets in `+(m-f)+`ms
	Removed ${E} documents in `+(y-m)+`ms
Total Duration: ${y-v}ms`),G.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:l,documentsRemoved:E})))}}function FR(n,e){return new MR(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UR{constructor(){this.changes=new vs(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,$t.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?G.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jR{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zR{constructor(e,t,i,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=o}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next(o=>(i=o,this.remoteDocumentCache.getEntry(e,t))).next(o=>(i!==null&&qa(i.mutation,o,yn.empty(),Et.now()),o))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.getLocalViewOfDocuments(e,i,be()).next(()=>i))}getLocalViewOfDocuments(e,t,i=be()){const o=ls();return this.populateOverlays(e,o,t).next(()=>this.computeViews(e,t,o,i).next(l=>{let c=Ma();return l.forEach((f,m)=>{c=c.insert(f,m.overlayedDocument)}),c}))}getOverlayedDocuments(e,t){const i=ls();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,be()))}populateOverlays(e,t,i){const o=[];return i.forEach(l=>{t.has(l)||o.push(l)}),this.documentOverlayCache.getOverlays(e,o).next(l=>{l.forEach((c,f)=>{t.set(c,f)})})}computeViews(e,t,i,o){let l=zr();const c=$a(),f=function(){return $a()}();return t.forEach((m,y)=>{const v=i.get(y.key);o.has(y.key)&&(v===void 0||v.mutation instanceof Ni)?l=l.insert(y.key,y):v!==void 0?(c.set(y.key,v.mutation.getFieldMask()),qa(v.mutation,y,v.mutation.getFieldMask(),Et.now())):c.set(y.key,yn.empty())}),this.recalculateAndSaveOverlays(e,l).next(m=>(m.forEach((y,v)=>c.set(y,v)),t.forEach((y,v)=>{var E;return f.set(y,new jR(v,(E=c.get(y))!==null&&E!==void 0?E:null))}),f))}recalculateAndSaveOverlays(e,t){const i=$a();let o=new st((c,f)=>c-f),l=be();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(c=>{for(const f of c)f.keys().forEach(m=>{const y=t.get(m);if(y===null)return;let v=i.get(m)||yn.empty();v=f.applyToLocalView(y,v),i.set(m,v);const E=(o.get(f.batchId)||be()).add(m);o=o.insert(f.batchId,E)})}).next(()=>{const c=[],f=o.getReverseIterator();for(;f.hasNext();){const m=f.getNext(),y=m.key,v=m.value,E=Bv();v.forEach(S=>{if(!l.has(S)){const M=Gv(t.get(S),i.get(S));M!==null&&E.set(S,M),l=l.add(S)}}),c.push(this.documentOverlayCache.saveOverlays(e,y,E))}return G.waitFor(c)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,t,i,o){return function(c){return ye.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Mv(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,o):this.getDocumentsMatchingCollectionQuery(e,t,i,o)}getNextDocuments(e,t,i,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,o).next(l=>{const c=o-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,o-l.size):G.resolve(ls());let f=-1,m=l;return c.next(y=>G.forEach(y,(v,E)=>(f<E.largestBatchId&&(f=E.largestBatchId),l.get(v)?G.resolve():this.remoteDocumentCache.getEntry(e,v).next(S=>{m=m.insert(v,S)}))).next(()=>this.populateOverlays(e,y,l)).next(()=>this.computeViews(e,m,y,be())).next(v=>({batchId:f,changes:zv(v)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ye(t)).next(i=>{let o=Ma();return i.isFoundDocument()&&(o=o.insert(i.key,i)),o})}getDocumentsMatchingCollectionGroupQuery(e,t,i,o){const l=t.collectionGroup;let c=Ma();return this.indexManager.getCollectionParents(e,l).next(f=>G.forEach(f,m=>{const y=function(E,S){return new ul(S,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)}(t,m.child(l));return this.getDocumentsMatchingCollectionQuery(e,y,i,o).next(v=>{v.forEach((E,S)=>{c=c.insert(E,S)})})}).next(()=>c))}getDocumentsMatchingCollectionQuery(e,t,i,o){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next(c=>(l=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,l,o))).next(c=>{l.forEach((m,y)=>{const v=y.getKey();c.get(v)===null&&(c=c.insert(v,$t.newInvalidDocument(v)))});let f=Ma();return c.forEach((m,y)=>{const v=l.get(m);v!==void 0&&qa(v.mutation,y,yn.empty(),Et.now()),Dc(t,y)&&(f=f.insert(m,y))}),f})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BR{constructor(e){this.serializer=e,this.Tr=new Map,this.Ir=new Map}getBundleMetadata(e,t){return G.resolve(this.Tr.get(t))}saveBundleMetadata(e,t){return this.Tr.set(t.id,function(o){return{id:o.id,version:o.version,createTime:lr(o.createTime)}}(t)),G.resolve()}getNamedQuery(e,t){return G.resolve(this.Ir.get(t))}saveNamedQuery(e,t){return this.Ir.set(t.name,function(o){return{name:o.name,query:bR(o.bundledQuery),readTime:lr(o.readTime)}}(t)),G.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $R{constructor(){this.overlays=new st(ye.comparator),this.Er=new Map}getOverlay(e,t){return G.resolve(this.overlays.get(t))}getOverlays(e,t){const i=ls();return G.forEach(t,o=>this.getOverlay(e,o).next(l=>{l!==null&&i.set(o,l)})).next(()=>i)}saveOverlays(e,t,i){return i.forEach((o,l)=>{this.Tt(e,t,l)}),G.resolve()}removeOverlaysForBatchId(e,t,i){const o=this.Er.get(i);return o!==void 0&&(o.forEach(l=>this.overlays=this.overlays.remove(l)),this.Er.delete(i)),G.resolve()}getOverlaysForCollection(e,t,i){const o=ls(),l=t.length+1,c=new ye(t.child("")),f=this.overlays.getIteratorFrom(c);for(;f.hasNext();){const m=f.getNext().value,y=m.getKey();if(!t.isPrefixOf(y.path))break;y.path.length===l&&m.largestBatchId>i&&o.set(m.getKey(),m)}return G.resolve(o)}getOverlaysForCollectionGroup(e,t,i,o){let l=new st((y,v)=>y-v);const c=this.overlays.getIterator();for(;c.hasNext();){const y=c.getNext().value;if(y.getKey().getCollectionGroup()===t&&y.largestBatchId>i){let v=l.get(y.largestBatchId);v===null&&(v=ls(),l=l.insert(y.largestBatchId,v)),v.set(y.getKey(),y)}}const f=ls(),m=l.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach((y,v)=>f.set(y,v)),!(f.size()>=o)););return G.resolve(f)}Tt(e,t,i){const o=this.overlays.get(i.key);if(o!==null){const c=this.Er.get(o.largestBatchId).delete(i.key);this.Er.set(o.largestBatchId,c)}this.overlays=this.overlays.insert(i.key,new lR(t,i));let l=this.Er.get(t);l===void 0&&(l=be(),this.Er.set(t,l)),this.Er.set(t,l.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qR{constructor(){this.sessionToken=Vt.EMPTY_BYTE_STRING}getSessionToken(e){return G.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,G.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class np{constructor(){this.dr=new Tt(kt.Ar),this.Rr=new Tt(kt.Vr)}isEmpty(){return this.dr.isEmpty()}addReference(e,t){const i=new kt(e,t);this.dr=this.dr.add(i),this.Rr=this.Rr.add(i)}mr(e,t){e.forEach(i=>this.addReference(i,t))}removeReference(e,t){this.gr(new kt(e,t))}pr(e,t){e.forEach(i=>this.removeReference(i,t))}yr(e){const t=new ye(new Ze([])),i=new kt(t,e),o=new kt(t,e+1),l=[];return this.Rr.forEachInRange([i,o],c=>{this.gr(c),l.push(c.key)}),l}wr(){this.dr.forEach(e=>this.gr(e))}gr(e){this.dr=this.dr.delete(e),this.Rr=this.Rr.delete(e)}Sr(e){const t=new ye(new Ze([])),i=new kt(t,e),o=new kt(t,e+1);let l=be();return this.Rr.forEachInRange([i,o],c=>{l=l.add(c.key)}),l}containsKey(e){const t=new kt(e,0),i=this.dr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class kt{constructor(e,t){this.key=e,this.br=t}static Ar(e,t){return ye.comparator(e.key,t.key)||Oe(e.br,t.br)}static Vr(e,t){return Oe(e.br,t.br)||ye.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HR{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Dr=1,this.vr=new Tt(kt.Ar)}checkEmpty(e){return G.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,o){const l=this.Dr;this.Dr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new aR(l,t,i,o);this.mutationQueue.push(c);for(const f of o)this.vr=this.vr.add(new kt(f.key,l)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return G.resolve(c)}lookupMutationBatch(e,t){return G.resolve(this.Cr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,o=this.Fr(i),l=o<0?0:o;return G.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return G.resolve(this.mutationQueue.length===0?-1:this.Dr-1)}getAllMutationBatches(e){return G.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new kt(t,0),o=new kt(t,Number.POSITIVE_INFINITY),l=[];return this.vr.forEachInRange([i,o],c=>{const f=this.Cr(c.br);l.push(f)}),G.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new Tt(Oe);return t.forEach(o=>{const l=new kt(o,0),c=new kt(o,Number.POSITIVE_INFINITY);this.vr.forEachInRange([l,c],f=>{i=i.add(f.br)})}),G.resolve(this.Mr(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,o=i.length+1;let l=i;ye.isDocumentKey(l)||(l=l.child(""));const c=new kt(new ye(l),0);let f=new Tt(Oe);return this.vr.forEachWhile(m=>{const y=m.key.path;return!!i.isPrefixOf(y)&&(y.length===o&&(f=f.add(m.br)),!0)},c),G.resolve(this.Mr(f))}Mr(e){const t=[];return e.forEach(i=>{const o=this.Cr(i);o!==null&&t.push(o)}),t}removeMutationBatch(e,t){qe(this.Or(t.batchId,"removed")===0),this.mutationQueue.shift();let i=this.vr;return G.forEach(t.mutations,o=>{const l=new kt(o.key,t.batchId);return i=i.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.vr=i})}Ln(e){}containsKey(e,t){const i=new kt(t,0),o=this.vr.firstAfterOrEqual(i);return G.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,G.resolve()}Or(e,t){return this.Fr(e)}Fr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Cr(e){const t=this.Fr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WR{constructor(e){this.Nr=e,this.docs=function(){return new st(ye.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,o=this.docs.get(i),l=o?o.size:0,c=this.Nr(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return G.resolve(i?i.document.mutableCopy():$t.newInvalidDocument(t))}getEntries(e,t){let i=zr();return t.forEach(o=>{const l=this.docs.get(o);i=i.insert(o,l?l.document.mutableCopy():$t.newInvalidDocument(o))}),G.resolve(i)}getDocumentsMatchingQuery(e,t,i,o){let l=zr();const c=t.path,f=new ye(c.child("")),m=this.docs.getIteratorFrom(f);for(;m.hasNext();){const{key:y,value:{document:v}}=m.getNext();if(!c.isPrefixOf(y.path))break;y.path.length>c.length+1||IA(TA(v),i)<=0||(o.has(v.key)||Dc(t,v))&&(l=l.insert(v.key,v.mutableCopy()))}return G.resolve(l)}getAllFromCollectionGroup(e,t,i,o){Te()}Lr(e,t){return G.forEach(this.docs,i=>t(i))}newChangeBuffer(e){return new KR(this)}getSize(e){return G.resolve(this.size)}}class KR extends UR{constructor(e){super(),this.hr=e}applyChanges(e){const t=[];return this.changes.forEach((i,o)=>{o.isValidDocument()?t.push(this.hr.addEntry(e,o)):this.hr.removeEntry(i)}),G.waitFor(t)}getFromCache(e,t){return this.hr.getEntry(e,t)}getAllFromCache(e,t){return this.hr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GR{constructor(e){this.persistence=e,this.Br=new vs(t=>Gf(t),Qf),this.lastRemoteSnapshotVersion=Se.min(),this.highestTargetId=0,this.kr=0,this.qr=new np,this.targetCount=0,this.Qr=ko.qn()}forEachTarget(e,t){return this.Br.forEach((i,o)=>t(o)),G.resolve()}getLastRemoteSnapshotVersion(e){return G.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return G.resolve(this.kr)}allocateTargetId(e){return this.highestTargetId=this.Qr.next(),G.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.kr&&(this.kr=t),G.resolve()}Un(e){this.Br.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Qr=new ko(t),this.highestTargetId=t),e.sequenceNumber>this.kr&&(this.kr=e.sequenceNumber)}addTargetData(e,t){return this.Un(t),this.targetCount+=1,G.resolve()}updateTargetData(e,t){return this.Un(t),G.resolve()}removeTargetData(e,t){return this.Br.delete(t.target),this.qr.yr(t.targetId),this.targetCount-=1,G.resolve()}removeTargets(e,t,i){let o=0;const l=[];return this.Br.forEach((c,f)=>{f.sequenceNumber<=t&&i.get(f.targetId)===null&&(this.Br.delete(c),l.push(this.removeMatchingKeysForTargetId(e,f.targetId)),o++)}),G.waitFor(l).next(()=>o)}getTargetCount(e){return G.resolve(this.targetCount)}getTargetData(e,t){const i=this.Br.get(t)||null;return G.resolve(i)}addMatchingKeys(e,t,i){return this.qr.mr(t,i),G.resolve()}removeMatchingKeys(e,t,i){this.qr.pr(t,i);const o=this.persistence.referenceDelegate,l=[];return o&&t.forEach(c=>{l.push(o.markPotentiallyOrphaned(e,c))}),G.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.qr.yr(t),G.resolve()}getMatchingKeysForTargetId(e,t){const i=this.qr.Sr(t);return G.resolve(i)}containsKey(e,t){return G.resolve(this.qr.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o0{constructor(e,t){this.Kr={},this.overlays={},this.$r=new Pc(0),this.Ur=!1,this.Ur=!0,this.Wr=new qR,this.referenceDelegate=e(this),this.Gr=new GR(this),this.indexManager=new DR,this.remoteDocumentCache=function(o){return new WR(o)}(i=>this.referenceDelegate.zr(i)),this.serializer=new NR(t),this.jr=new BR(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Ur=!1,Promise.resolve()}get started(){return this.Ur}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new $R,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.Kr[e.toKey()];return i||(i=new HR(t,this.referenceDelegate),this.Kr[e.toKey()]=i),i}getGlobalsCache(){return this.Wr}getTargetCache(){return this.Gr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.jr}runTransaction(e,t,i){ae("MemoryPersistence","Starting transaction:",e);const o=new QR(this.$r.next());return this.referenceDelegate.Hr(),i(o).next(l=>this.referenceDelegate.Jr(o).next(()=>l)).toPromise().then(l=>(o.raiseOnCommittedEvent(),l))}Yr(e,t){return G.or(Object.values(this.Kr).map(i=>()=>i.containsKey(e,t)))}}class QR extends AA{constructor(e){super(),this.currentSequenceNumber=e}}class rp{constructor(e){this.persistence=e,this.Zr=new np,this.Xr=null}static ei(e){return new rp(e)}get ti(){if(this.Xr)return this.Xr;throw Te()}addReference(e,t,i){return this.Zr.addReference(i,t),this.ti.delete(i.toString()),G.resolve()}removeReference(e,t,i){return this.Zr.removeReference(i,t),this.ti.add(i.toString()),G.resolve()}markPotentiallyOrphaned(e,t){return this.ti.add(t.toString()),G.resolve()}removeTarget(e,t){this.Zr.yr(t.targetId).forEach(o=>this.ti.add(o.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next(o=>{o.forEach(l=>this.ti.add(l.toString()))}).next(()=>i.removeTargetData(e,t))}Hr(){this.Xr=new Set}Jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return G.forEach(this.ti,i=>{const o=ye.fromPath(i);return this.ni(e,o).next(l=>{l||t.removeEntry(o,Se.min())})}).next(()=>(this.Xr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ni(e,t).next(i=>{i?this.ti.delete(t.toString()):this.ti.add(t.toString())})}zr(e){return 0}ni(e,t){return G.or([()=>G.resolve(this.Zr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Yr(e,t)])}}class gc{constructor(e,t){this.persistence=e,this.ri=new vs(i=>kA(i.path),(i,o)=>i.isEqual(o)),this.garbageCollector=FR(this,t)}static ei(e,t){return new gc(e,t)}Hr(){}Jr(e){return G.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}Xn(e){const t=this.nr(e);return this.persistence.getTargetCache().getTargetCount(e).next(i=>t.next(o=>i+o))}nr(e){let t=0;return this.er(e,i=>{t++}).next(()=>t)}er(e,t){return G.forEach(this.ri,(i,o)=>this.ir(e,i,o).next(l=>l?G.resolve():t(o)))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const o=this.persistence.getRemoteDocumentCache(),l=o.newChangeBuffer();return o.Lr(e,c=>this.ir(e,c,t).next(f=>{f||(i++,l.removeEntry(c,Se.min()))})).next(()=>l.apply(e)).next(()=>i)}markPotentiallyOrphaned(e,t){return this.ri.set(t,e.currentSequenceNumber),G.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.ri.set(i,e.currentSequenceNumber),G.resolve()}removeReference(e,t,i){return this.ri.set(i,e.currentSequenceNumber),G.resolve()}updateLimboDocument(e,t){return this.ri.set(t,e.currentSequenceNumber),G.resolve()}zr(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Wu(e.data.value)),t}ir(e,t,i){return G.or([()=>this.persistence.Yr(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.ri.get(t);return G.resolve(o!==void 0&&o>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ip{constructor(e,t,i,o){this.targetId=e,this.fromCache=t,this.Wi=i,this.Gi=o}static zi(e,t){let i=be(),o=be();for(const l of t.docChanges)switch(l.type){case 0:i=i.add(l.doc.key);break;case 1:o=o.add(l.doc.key)}return new ip(e,t.fromCache,i,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XR{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YR{constructor(){this.ji=!1,this.Hi=!1,this.Ji=100,this.Yi=function(){return bT()?8:RA(Ht())>0?6:4}()}initialize(e,t){this.Zi=e,this.indexManager=t,this.ji=!0}getDocumentsMatchingQuery(e,t,i,o){const l={result:null};return this.Xi(e,t).next(c=>{l.result=c}).next(()=>{if(!l.result)return this.es(e,t,o,i).next(c=>{l.result=c})}).next(()=>{if(l.result)return;const c=new XR;return this.ts(e,t,c).next(f=>{if(l.result=f,this.Hi)return this.ns(e,t,c,f.size)})}).next(()=>l.result)}ns(e,t,i,o){return i.documentReadCount<this.Ji?(po()<=Ne.DEBUG&&ae("QueryEngine","SDK will not create cache indexes for query:",mo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Ji,"documents"),G.resolve()):(po()<=Ne.DEBUG&&ae("QueryEngine","Query:",mo(t),"scans",i.documentReadCount,"local documents and returns",o,"documents as results."),i.documentReadCount>this.Yi*o?(po()<=Ne.DEBUG&&ae("QueryEngine","The SDK decides to create cache indexes for query:",mo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ar(t))):G.resolve())}Xi(e,t){if(Ny(t))return G.resolve(null);let i=ar(t);return this.indexManager.getIndexType(e,i).next(o=>o===0?null:(t.limit!==null&&o===1&&(t=hf(t,null,"F"),i=ar(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next(l=>{const c=be(...l);return this.Zi.getDocuments(e,c).next(f=>this.indexManager.getMinOffset(e,i).next(m=>{const y=this.rs(t,f);return this.ss(t,y,c,m.readTime)?this.Xi(e,hf(t,null,"F")):this.os(e,y,t,m)}))})))}es(e,t,i,o){return Ny(t)||o.isEqual(Se.min())?G.resolve(null):this.Zi.getDocuments(e,i).next(l=>{const c=this.rs(t,l);return this.ss(t,c,i,o)?G.resolve(null):(po()<=Ne.DEBUG&&ae("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),mo(t)),this.os(e,c,t,EA(o,-1)).next(f=>f))})}rs(e,t){let i=new Tt(Uv(e));return t.forEach((o,l)=>{Dc(e,l)&&(i=i.add(l))}),i}ss(e,t,i,o){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(o)>0)}ts(e,t,i){return po()<=Ne.DEBUG&&ae("QueryEngine","Using full collection scan to execute query:",mo(t)),this.Zi.getDocumentsMatchingQuery(e,t,Si.min(),i)}os(e,t,i,o){return this.Zi.getDocumentsMatchingQuery(e,i,o).next(l=>(t.forEach(c=>{l=l.insert(c.key,c)}),l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JR{constructor(e,t,i,o){this.persistence=e,this._s=t,this.serializer=o,this.us=new st(Oe),this.cs=new vs(l=>Gf(l),Qf),this.ls=new Map,this.hs=e.getRemoteDocumentCache(),this.Gr=e.getTargetCache(),this.jr=e.getBundleCache(),this.Ps(i)}Ps(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new zR(this.hs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.hs.setIndexManager(this.indexManager),this._s.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.us))}}function ZR(n,e,t,i){return new JR(n,e,t,i)}async function a0(n,e){const t=Ae(n);return await t.persistence.runTransaction("Handle user change","readonly",i=>{let o;return t.mutationQueue.getAllMutationBatches(i).next(l=>(o=l,t.Ps(e),t.mutationQueue.getAllMutationBatches(i))).next(l=>{const c=[],f=[];let m=be();for(const y of o){c.push(y.batchId);for(const v of y.mutations)m=m.add(v.key)}for(const y of l){f.push(y.batchId);for(const v of y.mutations)m=m.add(v.key)}return t.localDocuments.getDocuments(i,m).next(y=>({Ts:y,removedBatchIds:c,addedBatchIds:f}))})})}function eC(n,e){const t=Ae(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const o=e.batch.keys(),l=t.hs.newChangeBuffer({trackRemovals:!0});return function(f,m,y,v){const E=y.batch,S=E.keys();let M=G.resolve();return S.forEach(j=>{M=M.next(()=>v.getEntry(m,j)).next(B=>{const D=y.docVersions.get(j);qe(D!==null),B.version.compareTo(D)<0&&(E.applyToRemoteDocument(B,y),B.isValidDocument()&&(B.setReadTime(y.commitVersion),v.addEntry(B)))})}),M.next(()=>f.mutationQueue.removeMutationBatch(m,E))}(t,i,e,l).next(()=>l.apply(i)).next(()=>t.mutationQueue.performConsistencyCheck(i)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(i,o,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(f){let m=be();for(let y=0;y<f.mutationResults.length;++y)f.mutationResults[y].transformResults.length>0&&(m=m.add(f.batch.mutations[y].key));return m}(e))).next(()=>t.localDocuments.getDocuments(i,o))})}function l0(n){const e=Ae(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Gr.getLastRemoteSnapshotVersion(t))}function tC(n,e){const t=Ae(n),i=e.snapshotVersion;let o=t.us;return t.persistence.runTransaction("Apply remote event","readwrite-primary",l=>{const c=t.hs.newChangeBuffer({trackRemovals:!0});o=t.us;const f=[];e.targetChanges.forEach((v,E)=>{const S=o.get(E);if(!S)return;f.push(t.Gr.removeMatchingKeys(l,v.removedDocuments,E).next(()=>t.Gr.addMatchingKeys(l,v.addedDocuments,E)));let M=S.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(E)!==null?M=M.withResumeToken(Vt.EMPTY_BYTE_STRING,Se.min()).withLastLimboFreeSnapshotVersion(Se.min()):v.resumeToken.approximateByteSize()>0&&(M=M.withResumeToken(v.resumeToken,i)),o=o.insert(E,M),function(B,D,ee){return B.resumeToken.approximateByteSize()===0||D.snapshotVersion.toMicroseconds()-B.snapshotVersion.toMicroseconds()>=3e8?!0:ee.addedDocuments.size+ee.modifiedDocuments.size+ee.removedDocuments.size>0}(S,M,v)&&f.push(t.Gr.updateTargetData(l,M))});let m=zr(),y=be();if(e.documentUpdates.forEach(v=>{e.resolvedLimboDocuments.has(v)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(l,v))}),f.push(nC(l,c,e.documentUpdates).next(v=>{m=v.Is,y=v.Es})),!i.isEqual(Se.min())){const v=t.Gr.getLastRemoteSnapshotVersion(l).next(E=>t.Gr.setTargetsMetadata(l,l.currentSequenceNumber,i));f.push(v)}return G.waitFor(f).next(()=>c.apply(l)).next(()=>t.localDocuments.getLocalViewOfDocuments(l,m,y)).next(()=>m)}).then(l=>(t.us=o,l))}function nC(n,e,t){let i=be(),o=be();return t.forEach(l=>i=i.add(l)),e.getEntries(n,i).next(l=>{let c=zr();return t.forEach((f,m)=>{const y=l.get(f);m.isFoundDocument()!==y.isFoundDocument()&&(o=o.add(f)),m.isNoDocument()&&m.version.isEqual(Se.min())?(e.removeEntry(f,m.readTime),c=c.insert(f,m)):!y.isValidDocument()||m.version.compareTo(y.version)>0||m.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(m),c=c.insert(f,m)):ae("LocalStore","Ignoring outdated watch update for ",f,". Current version:",y.version," Watch version:",m.version)}),{Is:c,Es:o}})}function rC(n,e){const t=Ae(n);return t.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function iC(n,e){const t=Ae(n);return t.persistence.runTransaction("Allocate target","readwrite",i=>{let o;return t.Gr.getTargetData(i,e).next(l=>l?(o=l,G.resolve(o)):t.Gr.allocateTargetId(i).next(c=>(o=new vi(e,c,"TargetPurposeListen",i.currentSequenceNumber),t.Gr.addTargetData(i,o).next(()=>o))))}).then(i=>{const o=t.us.get(i.targetId);return(o===null||i.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.us=t.us.insert(i.targetId,i),t.cs.set(e,i.targetId)),i})}async function gf(n,e,t){const i=Ae(n),o=i.us.get(e),l=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",l,c=>i.persistence.referenceDelegate.removeTarget(c,o))}catch(c){if(!Lo(c))throw c;ae("LocalStore",`Failed to update sequence numbers for target ${e}: ${c}`)}i.us=i.us.remove(e),i.cs.delete(o.target)}function $y(n,e,t){const i=Ae(n);let o=Se.min(),l=be();return i.persistence.runTransaction("Execute query","readwrite",c=>function(m,y,v){const E=Ae(m),S=E.cs.get(v);return S!==void 0?G.resolve(E.us.get(S)):E.Gr.getTargetData(y,v)}(i,c,ar(e)).next(f=>{if(f)return o=f.lastLimboFreeSnapshotVersion,i.Gr.getMatchingKeysForTargetId(c,f.targetId).next(m=>{l=m})}).next(()=>i._s.getDocumentsMatchingQuery(c,e,t?o:Se.min(),t?l:be())).next(f=>(sC(i,WA(e),f),{documents:f,ds:l})))}function sC(n,e,t){let i=n.ls.get(e)||Se.min();t.forEach((o,l)=>{l.readTime.compareTo(i)>0&&(i=l.readTime)}),n.ls.set(e,i)}class qy{constructor(){this.activeTargetIds=JA()}ps(e){this.activeTargetIds=this.activeTargetIds.add(e)}ys(e){this.activeTargetIds=this.activeTargetIds.delete(e)}gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class oC{constructor(){this._o=new qy,this.ao={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this._o.ps(e),this.ao[e]||"not-current"}updateQueryState(e,t,i){this.ao[e]=t}removeLocalQueryTarget(e){this._o.ys(e)}isLocalQueryTarget(e){return this._o.activeTargetIds.has(e)}clearQueryState(e){delete this.ao[e]}getAllActiveQueryTargets(){return this._o.activeTargetIds}isActiveQueryTarget(e){return this._o.activeTargetIds.has(e)}start(){return this._o=new qy,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aC{uo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hy{constructor(){this.co=()=>this.lo(),this.ho=()=>this.Po(),this.To=[],this.Io()}uo(e){this.To.push(e)}shutdown(){window.removeEventListener("online",this.co),window.removeEventListener("offline",this.ho)}Io(){window.addEventListener("online",this.co),window.addEventListener("offline",this.ho)}lo(){ae("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.To)e(0)}Po(){ae("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.To)e(1)}static p(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ju=null;function Fd(){return ju===null?ju=function(){return 268435456+Math.round(2147483648*Math.random())}():ju++,"0x"+ju.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lC={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uC{constructor(e){this.Eo=e.Eo,this.Ao=e.Ao}Ro(e){this.Vo=e}mo(e){this.fo=e}po(e){this.yo=e}onMessage(e){this.wo=e}close(){this.Ao()}send(e){this.Eo(e)}So(){this.Vo()}bo(){this.fo()}Do(e){this.yo(e)}vo(e){this.wo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zt="WebChannelConnection";class cC extends class{get Co(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const i=t.ssl?"https":"http",o=encodeURIComponent(this.databaseId.projectId),l=encodeURIComponent(this.databaseId.database);this.Fo=i+"://"+t.host,this.Mo=`projects/${o}/databases/${l}`,this.xo=this.databaseId.database==="(default)"?`project_id=${o}`:`project_id=${o}&database_id=${l}`}Oo(t,i,o,l,c){const f=Fd(),m=this.No(t,i.toUriEncodedString());ae("RestConnection",`Sending RPC '${t}' ${f}:`,m,o);const y={"google-cloud-resource-prefix":this.Mo,"x-goog-request-params":this.xo};return this.Lo(y,l,c),this.Bo(t,m,y,o).then(v=>(ae("RestConnection",`Received RPC '${t}' ${f}: `,v),v),v=>{throw So("RestConnection",`RPC '${t}' ${f} failed with error: `,v,"url: ",m,"request:",o),v})}ko(t,i,o,l,c,f){return this.Oo(t,i,o,l,c)}Lo(t,i,o){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Do}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((l,c)=>t[c]=l),o&&o.headers.forEach((l,c)=>t[c]=l)}No(t,i){const o=lC[t];return`${this.Fo}/v1/${i}:${o}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Bo(e,t,i,o){const l=Fd();return new Promise((c,f)=>{const m=new Ev;m.setWithCredentials(!0),m.listenOnce(Tv.COMPLETE,()=>{try{switch(m.getLastErrorCode()){case Hu.NO_ERROR:const v=m.getResponseJson();ae(zt,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(v)),c(v);break;case Hu.TIMEOUT:ae(zt,`RPC '${e}' ${l} timed out`),f(new le(K.DEADLINE_EXCEEDED,"Request time out"));break;case Hu.HTTP_ERROR:const E=m.getStatus();if(ae(zt,`RPC '${e}' ${l} failed with status:`,E,"response text:",m.getResponseText()),E>0){let S=m.getResponseJson();Array.isArray(S)&&(S=S[0]);const M=S==null?void 0:S.error;if(M&&M.status&&M.message){const j=function(D){const ee=D.toLowerCase().replace(/_/g,"-");return Object.values(K).indexOf(ee)>=0?ee:K.UNKNOWN}(M.status);f(new le(j,M.message))}else f(new le(K.UNKNOWN,"Server responded with status "+m.getStatus()))}else f(new le(K.UNAVAILABLE,"Connection failed."));break;default:Te()}}finally{ae(zt,`RPC '${e}' ${l} completed.`)}});const y=JSON.stringify(o);ae(zt,`RPC '${e}' ${l} sending request:`,o),m.send(t,"POST",y,i,15)})}qo(e,t,i){const o=Fd(),l=[this.Fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=Av(),f=Sv(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;y!==void 0&&(m.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(m.useFetchStreams=!0),this.Lo(m.initMessageHeaders,t,i),m.encodeInitMessageHeaders=!0;const v=l.join("");ae(zt,`Creating RPC '${e}' stream ${o}: ${v}`,m);const E=c.createWebChannel(v,m);let S=!1,M=!1;const j=new uC({Eo:D=>{M?ae(zt,`Not sending because RPC '${e}' stream ${o} is closed:`,D):(S||(ae(zt,`Opening RPC '${e}' stream ${o} transport.`),E.open(),S=!0),ae(zt,`RPC '${e}' stream ${o} sending:`,D),E.send(D))},Ao:()=>E.close()}),B=(D,ee,W)=>{D.listen(ee,X=>{try{W(X)}catch(ne){setTimeout(()=>{throw ne},0)}})};return B(E,Va.EventType.OPEN,()=>{M||(ae(zt,`RPC '${e}' stream ${o} transport opened.`),j.So())}),B(E,Va.EventType.CLOSE,()=>{M||(M=!0,ae(zt,`RPC '${e}' stream ${o} transport closed`),j.Do())}),B(E,Va.EventType.ERROR,D=>{M||(M=!0,So(zt,`RPC '${e}' stream ${o} transport errored:`,D),j.Do(new le(K.UNAVAILABLE,"The operation could not be completed")))}),B(E,Va.EventType.MESSAGE,D=>{var ee;if(!M){const W=D.data[0];qe(!!W);const X=W,ne=(X==null?void 0:X.error)||((ee=X[0])===null||ee===void 0?void 0:ee.error);if(ne){ae(zt,`RPC '${e}' stream ${o} received error:`,ne);const me=ne.status;let fe=function(R){const x=dt[R];if(x!==void 0)return Xv(x)}(me),k=ne.message;fe===void 0&&(fe=K.INTERNAL,k="Unknown error status: "+me+" with message "+ne.message),M=!0,j.Do(new le(fe,k)),E.close()}else ae(zt,`RPC '${e}' stream ${o} received:`,W),j.vo(W)}}),B(f,Iv.STAT_EVENT,D=>{D.stat===sf.PROXY?ae(zt,`RPC '${e}' stream ${o} detected buffering proxy`):D.stat===sf.NOPROXY&&ae(zt,`RPC '${e}' stream ${o} detected no buffering proxy`)}),setTimeout(()=>{j.bo()},0),j}}function Ud(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mc(n){return new yR(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u0{constructor(e,t,i=1e3,o=1.5,l=6e4){this.li=e,this.timerId=t,this.Qo=i,this.Ko=o,this.$o=l,this.Uo=0,this.Wo=null,this.Go=Date.now(),this.reset()}reset(){this.Uo=0}zo(){this.Uo=this.$o}jo(e){this.cancel();const t=Math.floor(this.Uo+this.Ho()),i=Math.max(0,Date.now()-this.Go),o=Math.max(0,t-i);o>0&&ae("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.Uo} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.Wo=this.li.enqueueAfterDelay(this.timerId,o,()=>(this.Go=Date.now(),e())),this.Uo*=this.Ko,this.Uo<this.Qo&&(this.Uo=this.Qo),this.Uo>this.$o&&(this.Uo=this.$o)}Jo(){this.Wo!==null&&(this.Wo.skipDelay(),this.Wo=null)}cancel(){this.Wo!==null&&(this.Wo.cancel(),this.Wo=null)}Ho(){return(Math.random()-.5)*this.Uo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c0{constructor(e,t,i,o,l,c,f,m){this.li=e,this.Yo=i,this.Zo=o,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=f,this.listener=m,this.state=0,this.Xo=0,this.e_=null,this.t_=null,this.stream=null,this.n_=0,this.r_=new u0(e,t)}i_(){return this.state===1||this.state===5||this.s_()}s_(){return this.state===2||this.state===3}start(){this.n_=0,this.state!==4?this.auth():this.o_()}async stop(){this.i_()&&await this.close(0)}__(){this.state=0,this.r_.reset()}a_(){this.s_()&&this.e_===null&&(this.e_=this.li.enqueueAfterDelay(this.Yo,6e4,()=>this.u_()))}c_(e){this.l_(),this.stream.send(e)}async u_(){if(this.s_())return this.close(0)}l_(){this.e_&&(this.e_.cancel(),this.e_=null)}h_(){this.t_&&(this.t_.cancel(),this.t_=null)}async close(e,t){this.l_(),this.h_(),this.r_.cancel(),this.Xo++,e!==4?this.r_.reset():t&&t.code===K.RESOURCE_EXHAUSTED?(jr(t.toString()),jr("Using maximum backoff delay to prevent overloading the backend."),this.r_.zo()):t&&t.code===K.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.P_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.po(t)}P_(){}auth(){this.state=1;const e=this.T_(this.Xo),t=this.Xo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,o])=>{this.Xo===t&&this.I_(i,o)},i=>{e(()=>{const o=new le(K.UNKNOWN,"Fetching auth token failed: "+i.message);return this.E_(o)})})}I_(e,t){const i=this.T_(this.Xo);this.stream=this.d_(e,t),this.stream.Ro(()=>{i(()=>this.listener.Ro())}),this.stream.mo(()=>{i(()=>(this.state=2,this.t_=this.li.enqueueAfterDelay(this.Zo,1e4,()=>(this.s_()&&(this.state=3),Promise.resolve())),this.listener.mo()))}),this.stream.po(o=>{i(()=>this.E_(o))}),this.stream.onMessage(o=>{i(()=>++this.n_==1?this.A_(o):this.onNext(o))})}o_(){this.state=5,this.r_.jo(async()=>{this.state=0,this.start()})}E_(e){return ae("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}T_(e){return t=>{this.li.enqueueAndForget(()=>this.Xo===e?t():(ae("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class hC extends c0{constructor(e,t,i,o,l,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,o,c),this.serializer=l}d_(e,t){return this.connection.qo("Listen",e,t)}A_(e){return this.onNext(e)}onNext(e){this.r_.reset();const t=wR(this.serializer,e),i=function(l){if(!("targetChange"in l))return Se.min();const c=l.targetChange;return c.targetIds&&c.targetIds.length?Se.min():c.readTime?lr(c.readTime):Se.min()}(e);return this.listener.R_(t,i)}V_(e){const t={};t.database=mf(this.serializer),t.addTarget=function(l,c){let f;const m=c.target;if(f=uf(m)?{documents:IR(l,m)}:{query:SR(l,m).ct},f.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){f.resumeToken=Zv(l,c.resumeToken);const y=df(l,c.expectedCount);y!==null&&(f.expectedCount=y)}else if(c.snapshotVersion.compareTo(Se.min())>0){f.readTime=mc(l,c.snapshotVersion.toTimestamp());const y=df(l,c.expectedCount);y!==null&&(f.expectedCount=y)}return f}(this.serializer,e);const i=RR(this.serializer,e);i&&(t.labels=i),this.c_(t)}m_(e){const t={};t.database=mf(this.serializer),t.removeTarget=e,this.c_(t)}}class dC extends c0{constructor(e,t,i,o,l,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,o,c),this.serializer=l}get f_(){return this.n_>0}start(){this.lastStreamToken=void 0,super.start()}P_(){this.f_&&this.g_([])}d_(e,t){return this.connection.qo("Write",e,t)}A_(e){return qe(!!e.streamToken),this.lastStreamToken=e.streamToken,qe(!e.writeResults||e.writeResults.length===0),this.listener.p_()}onNext(e){qe(!!e.streamToken),this.lastStreamToken=e.streamToken,this.r_.reset();const t=TR(e.writeResults,e.commitTime),i=lr(e.commitTime);return this.listener.y_(i,t)}w_(){const e={};e.database=mf(this.serializer),this.c_(e)}g_(e){const t={streamToken:this.lastStreamToken,writes:e.map(i=>ER(this.serializer,i))};this.c_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fC extends class{}{constructor(e,t,i,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=o,this.S_=!1}b_(){if(this.S_)throw new le(K.FAILED_PRECONDITION,"The client has already been terminated.")}Oo(e,t,i,o){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,c])=>this.connection.Oo(e,ff(t,i),o,l,c)).catch(l=>{throw l.name==="FirebaseError"?(l.code===K.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new le(K.UNKNOWN,l.toString())})}ko(e,t,i,o,l){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,f])=>this.connection.ko(e,ff(t,i),o,c,f,l)).catch(c=>{throw c.name==="FirebaseError"?(c.code===K.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new le(K.UNKNOWN,c.toString())})}terminate(){this.S_=!0,this.connection.terminate()}}class pC{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.D_=0,this.v_=null,this.C_=!0}F_(){this.D_===0&&(this.M_("Unknown"),this.v_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.v_=null,this.x_("Backend didn't respond within 10 seconds."),this.M_("Offline"),Promise.resolve())))}O_(e){this.state==="Online"?this.M_("Unknown"):(this.D_++,this.D_>=1&&(this.N_(),this.x_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.M_("Offline")))}set(e){this.N_(),this.D_=0,e==="Online"&&(this.C_=!1),this.M_(e)}M_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}x_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.C_?(jr(t),this.C_=!1):ae("OnlineStateTracker",t)}N_(){this.v_!==null&&(this.v_.cancel(),this.v_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mC{constructor(e,t,i,o,l){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.L_=[],this.B_=new Map,this.k_=new Set,this.q_=[],this.Q_=l,this.Q_.uo(c=>{i.enqueueAndForget(async()=>{ws(this)&&(ae("RemoteStore","Restarting streams for network reachability change."),await async function(m){const y=Ae(m);y.k_.add(4),await dl(y),y.K_.set("Unknown"),y.k_.delete(4),await Fc(y)}(this))})}),this.K_=new pC(i,o)}}async function Fc(n){if(ws(n))for(const e of n.q_)await e(!0)}async function dl(n){for(const e of n.q_)await e(!1)}function h0(n,e){const t=Ae(n);t.B_.has(e.targetId)||(t.B_.set(e.targetId,e),lp(t)?ap(t):Vo(t).s_()&&op(t,e))}function sp(n,e){const t=Ae(n),i=Vo(t);t.B_.delete(e),i.s_()&&d0(t,e),t.B_.size===0&&(i.s_()?i.a_():ws(t)&&t.K_.set("Unknown"))}function op(n,e){if(n.U_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Se.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Vo(n).V_(e)}function d0(n,e){n.U_.xe(e),Vo(n).m_(e)}function ap(n){n.U_=new fR({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ut:e=>n.B_.get(e)||null,nt:()=>n.datastore.serializer.databaseId}),Vo(n).start(),n.K_.F_()}function lp(n){return ws(n)&&!Vo(n).i_()&&n.B_.size>0}function ws(n){return Ae(n).k_.size===0}function f0(n){n.U_=void 0}async function gC(n){n.K_.set("Online")}async function yC(n){n.B_.forEach((e,t)=>{op(n,e)})}async function _C(n,e){f0(n),lp(n)?(n.K_.O_(e),ap(n)):n.K_.set("Unknown")}async function vC(n,e,t){if(n.K_.set("Online"),e instanceof Jv&&e.state===2&&e.cause)try{await async function(o,l){const c=l.cause;for(const f of l.targetIds)o.B_.has(f)&&(await o.remoteSyncer.rejectListen(f,c),o.B_.delete(f),o.U_.removeTarget(f))}(n,e)}catch(i){ae("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),await yc(n,i)}else if(e instanceof Qu?n.U_.$e(e):e instanceof Yv?n.U_.Je(e):n.U_.Ge(e),!t.isEqual(Se.min()))try{const i=await l0(n.localStore);t.compareTo(i)>=0&&await function(l,c){const f=l.U_.it(c);return f.targetChanges.forEach((m,y)=>{if(m.resumeToken.approximateByteSize()>0){const v=l.B_.get(y);v&&l.B_.set(y,v.withResumeToken(m.resumeToken,c))}}),f.targetMismatches.forEach((m,y)=>{const v=l.B_.get(m);if(!v)return;l.B_.set(m,v.withResumeToken(Vt.EMPTY_BYTE_STRING,v.snapshotVersion)),d0(l,m);const E=new vi(v.target,m,y,v.sequenceNumber);op(l,E)}),l.remoteSyncer.applyRemoteEvent(f)}(n,t)}catch(i){ae("RemoteStore","Failed to raise snapshot:",i),await yc(n,i)}}async function yc(n,e,t){if(!Lo(e))throw e;n.k_.add(1),await dl(n),n.K_.set("Offline"),t||(t=()=>l0(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{ae("RemoteStore","Retrying IndexedDB access"),await t(),n.k_.delete(1),await Fc(n)})}function p0(n,e){return e().catch(t=>yc(n,t,e))}async function Uc(n){const e=Ae(n),t=ki(e);let i=e.L_.length>0?e.L_[e.L_.length-1].batchId:-1;for(;wC(e);)try{const o=await rC(e.localStore,i);if(o===null){e.L_.length===0&&t.a_();break}i=o.batchId,EC(e,o)}catch(o){await yc(e,o)}m0(e)&&g0(e)}function wC(n){return ws(n)&&n.L_.length<10}function EC(n,e){n.L_.push(e);const t=ki(n);t.s_()&&t.f_&&t.g_(e.mutations)}function m0(n){return ws(n)&&!ki(n).i_()&&n.L_.length>0}function g0(n){ki(n).start()}async function TC(n){ki(n).w_()}async function IC(n){const e=ki(n);for(const t of n.L_)e.g_(t.mutations)}async function SC(n,e,t){const i=n.L_.shift(),o=Zf.from(i,e,t);await p0(n,()=>n.remoteSyncer.applySuccessfulWrite(o)),await Uc(n)}async function AC(n,e){e&&ki(n).f_&&await async function(i,o){if(function(c){return cR(c)&&c!==K.ABORTED}(o.code)){const l=i.L_.shift();ki(i).__(),await p0(i,()=>i.remoteSyncer.rejectFailedWrite(l.batchId,o)),await Uc(i)}}(n,e),m0(n)&&g0(n)}async function Wy(n,e){const t=Ae(n);t.asyncQueue.verifyOperationInProgress(),ae("RemoteStore","RemoteStore received new credentials");const i=ws(t);t.k_.add(3),await dl(t),i&&t.K_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.k_.delete(3),await Fc(t)}async function RC(n,e){const t=Ae(n);e?(t.k_.delete(2),await Fc(t)):e||(t.k_.add(2),await dl(t),t.K_.set("Unknown"))}function Vo(n){return n.W_||(n.W_=function(t,i,o){const l=Ae(t);return l.b_(),new hC(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)}(n.datastore,n.asyncQueue,{Ro:gC.bind(null,n),mo:yC.bind(null,n),po:_C.bind(null,n),R_:vC.bind(null,n)}),n.q_.push(async e=>{e?(n.W_.__(),lp(n)?ap(n):n.K_.set("Unknown")):(await n.W_.stop(),f0(n))})),n.W_}function ki(n){return n.G_||(n.G_=function(t,i,o){const l=Ae(t);return l.b_(),new dC(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)}(n.datastore,n.asyncQueue,{Ro:()=>Promise.resolve(),mo:TC.bind(null,n),po:AC.bind(null,n),p_:IC.bind(null,n),y_:SC.bind(null,n)}),n.q_.push(async e=>{e?(n.G_.__(),await Uc(n)):(await n.G_.stop(),n.L_.length>0&&(ae("RemoteStore",`Stopping write stream with ${n.L_.length} pending writes`),n.L_=[]))})),n.G_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class up{constructor(e,t,i,o,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=o,this.removalCallback=l,this.deferred=new Vr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,o,l){const c=Date.now()+i,f=new up(e,t,c,o,l);return f.start(i),f}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new le(K.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function cp(n,e){if(jr("AsyncQueue",`${e}: ${n}`),Lo(n))return new le(K.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eo{static emptySet(e){return new Eo(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||ye.comparator(t.key,i.key):(t,i)=>ye.comparator(t.key,i.key),this.keyedMap=Ma(),this.sortedSet=new st(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,i)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Eo)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=i.getNext().key;if(!o.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new Eo;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ky{constructor(){this.z_=new st(ye.comparator)}track(e){const t=e.doc.key,i=this.z_.get(t);i?e.type!==0&&i.type===3?this.z_=this.z_.insert(t,e):e.type===3&&i.type!==1?this.z_=this.z_.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.z_=this.z_.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.z_=this.z_.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.z_=this.z_.remove(t):e.type===1&&i.type===2?this.z_=this.z_.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.z_=this.z_.insert(t,{type:2,doc:e.doc}):Te():this.z_=this.z_.insert(t,e)}j_(){const e=[];return this.z_.inorderTraversal((t,i)=>{e.push(i)}),e}}class Po{constructor(e,t,i,o,l,c,f,m,y){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=o,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=f,this.excludesMetadataChanges=m,this.hasCachedResults=y}static fromInitialDocuments(e,t,i,o,l){const c=[];return t.forEach(f=>{c.push({type:0,doc:f})}),new Po(e,t,Eo.emptySet(t),c,i,o,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&bc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==i[o].type||!t[o].doc.isEqual(i[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CC{constructor(){this.H_=void 0,this.J_=[]}Y_(){return this.J_.some(e=>e.Z_())}}class kC{constructor(){this.queries=Gy(),this.onlineState="Unknown",this.X_=new Set}terminate(){(function(t,i){const o=Ae(t),l=o.queries;o.queries=Gy(),l.forEach((c,f)=>{for(const m of f.J_)m.onError(i)})})(this,new le(K.ABORTED,"Firestore shutting down"))}}function Gy(){return new vs(n=>Fv(n),bc)}async function y0(n,e){const t=Ae(n);let i=3;const o=e.query;let l=t.queries.get(o);l?!l.Y_()&&e.Z_()&&(i=2):(l=new CC,i=e.Z_()?0:1);try{switch(i){case 0:l.H_=await t.onListen(o,!0);break;case 1:l.H_=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(c){const f=cp(c,`Initialization of query '${mo(e.query)}' failed`);return void e.onError(f)}t.queries.set(o,l),l.J_.push(e),e.ea(t.onlineState),l.H_&&e.ta(l.H_)&&hp(t)}async function _0(n,e){const t=Ae(n),i=e.query;let o=3;const l=t.queries.get(i);if(l){const c=l.J_.indexOf(e);c>=0&&(l.J_.splice(c,1),l.J_.length===0?o=e.Z_()?0:1:!l.Y_()&&e.Z_()&&(o=2))}switch(o){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function PC(n,e){const t=Ae(n);let i=!1;for(const o of e){const l=o.query,c=t.queries.get(l);if(c){for(const f of c.J_)f.ta(o)&&(i=!0);c.H_=o}}i&&hp(t)}function xC(n,e,t){const i=Ae(n),o=i.queries.get(e);if(o)for(const l of o.J_)l.onError(t);i.queries.delete(e)}function hp(n){n.X_.forEach(e=>{e.next()})}var yf,Qy;(Qy=yf||(yf={})).na="default",Qy.Cache="cache";class v0{constructor(e,t,i){this.query=e,this.ra=t,this.ia=!1,this.sa=null,this.onlineState="Unknown",this.options=i||{}}ta(e){if(!this.options.includeMetadataChanges){const i=[];for(const o of e.docChanges)o.type!==3&&i.push(o);e=new Po(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ia?this.oa(e)&&(this.ra.next(e),t=!0):this._a(e,this.onlineState)&&(this.aa(e),t=!0),this.sa=e,t}onError(e){this.ra.error(e)}ea(e){this.onlineState=e;let t=!1;return this.sa&&!this.ia&&this._a(this.sa,e)&&(this.aa(this.sa),t=!0),t}_a(e,t){if(!e.fromCache||!this.Z_())return!0;const i=t!=="Offline";return(!this.options.ua||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}oa(e){if(e.docChanges.length>0)return!0;const t=this.sa&&this.sa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}aa(e){e=Po.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ia=!0,this.ra.next(e)}Z_(){return this.options.source!==yf.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w0{constructor(e){this.key=e}}class E0{constructor(e){this.key=e}}class NC{constructor(e,t){this.query=e,this.da=t,this.Aa=null,this.hasCachedResults=!1,this.current=!1,this.Ra=be(),this.mutatedKeys=be(),this.Va=Uv(e),this.ma=new Eo(this.Va)}get fa(){return this.da}ga(e,t){const i=t?t.pa:new Ky,o=t?t.ma:this.ma;let l=t?t.mutatedKeys:this.mutatedKeys,c=o,f=!1;const m=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,y=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((v,E)=>{const S=o.get(v),M=Dc(this.query,E)?E:null,j=!!S&&this.mutatedKeys.has(S.key),B=!!M&&(M.hasLocalMutations||this.mutatedKeys.has(M.key)&&M.hasCommittedMutations);let D=!1;S&&M?S.data.isEqual(M.data)?j!==B&&(i.track({type:3,doc:M}),D=!0):this.ya(S,M)||(i.track({type:2,doc:M}),D=!0,(m&&this.Va(M,m)>0||y&&this.Va(M,y)<0)&&(f=!0)):!S&&M?(i.track({type:0,doc:M}),D=!0):S&&!M&&(i.track({type:1,doc:S}),D=!0,(m||y)&&(f=!0)),D&&(M?(c=c.add(M),l=B?l.add(v):l.delete(v)):(c=c.delete(v),l=l.delete(v)))}),this.query.limit!==null)for(;c.size>this.query.limit;){const v=this.query.limitType==="F"?c.last():c.first();c=c.delete(v.key),l=l.delete(v.key),i.track({type:1,doc:v})}return{ma:c,pa:i,ss:f,mutatedKeys:l}}ya(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,o){const l=this.ma;this.ma=e.ma,this.mutatedKeys=e.mutatedKeys;const c=e.pa.j_();c.sort((v,E)=>function(M,j){const B=D=>{switch(D){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Te()}};return B(M)-B(j)}(v.type,E.type)||this.Va(v.doc,E.doc)),this.wa(i),o=o!=null&&o;const f=t&&!o?this.Sa():[],m=this.Ra.size===0&&this.current&&!o?1:0,y=m!==this.Aa;return this.Aa=m,c.length!==0||y?{snapshot:new Po(this.query,e.ma,l,c,e.mutatedKeys,m===0,y,!1,!!i&&i.resumeToken.approximateByteSize()>0),ba:f}:{ba:f}}ea(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({ma:this.ma,pa:new Ky,mutatedKeys:this.mutatedKeys,ss:!1},!1)):{ba:[]}}Da(e){return!this.da.has(e)&&!!this.ma.has(e)&&!this.ma.get(e).hasLocalMutations}wa(e){e&&(e.addedDocuments.forEach(t=>this.da=this.da.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.da=this.da.delete(t)),this.current=e.current)}Sa(){if(!this.current)return[];const e=this.Ra;this.Ra=be(),this.ma.forEach(i=>{this.Da(i.key)&&(this.Ra=this.Ra.add(i.key))});const t=[];return e.forEach(i=>{this.Ra.has(i)||t.push(new E0(i))}),this.Ra.forEach(i=>{e.has(i)||t.push(new w0(i))}),t}va(e){this.da=e.ds,this.Ra=be();const t=this.ga(e.documents);return this.applyChanges(t,!0)}Ca(){return Po.fromInitialDocuments(this.query,this.ma,this.mutatedKeys,this.Aa===0,this.hasCachedResults)}}class bC{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class DC{constructor(e){this.key=e,this.Fa=!1}}class OC{constructor(e,t,i,o,l,c){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=o,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.Ma={},this.xa=new vs(f=>Fv(f),bc),this.Oa=new Map,this.Na=new Set,this.La=new st(ye.comparator),this.Ba=new Map,this.ka=new np,this.qa={},this.Qa=new Map,this.Ka=ko.Qn(),this.onlineState="Unknown",this.$a=void 0}get isPrimaryClient(){return this.$a===!0}}async function LC(n,e,t=!0){const i=C0(n);let o;const l=i.xa.get(e);return l?(i.sharedClientState.addLocalQueryTarget(l.targetId),o=l.view.Ca()):o=await T0(i,e,t,!0),o}async function VC(n,e){const t=C0(n);await T0(t,e,!0,!1)}async function T0(n,e,t,i){const o=await iC(n.localStore,ar(e)),l=o.targetId,c=n.sharedClientState.addLocalQueryTarget(l,t);let f;return i&&(f=await MC(n,e,l,c==="current",o.resumeToken)),n.isPrimaryClient&&t&&h0(n.remoteStore,o),f}async function MC(n,e,t,i,o){n.Ua=(E,S,M)=>async function(B,D,ee,W){let X=D.view.ga(ee);X.ss&&(X=await $y(B.localStore,D.query,!1).then(({documents:k})=>D.view.ga(k,X)));const ne=W&&W.targetChanges.get(D.targetId),me=W&&W.targetMismatches.get(D.targetId)!=null,fe=D.view.applyChanges(X,B.isPrimaryClient,ne,me);return Yy(B,D.targetId,fe.ba),fe.snapshot}(n,E,S,M);const l=await $y(n.localStore,e,!0),c=new NC(e,l.ds),f=c.ga(l.documents),m=hl.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",o),y=c.applyChanges(f,n.isPrimaryClient,m);Yy(n,t,y.ba);const v=new bC(e,t,c);return n.xa.set(e,v),n.Oa.has(t)?n.Oa.get(t).push(e):n.Oa.set(t,[e]),y.snapshot}async function FC(n,e,t){const i=Ae(n),o=i.xa.get(e),l=i.Oa.get(o.targetId);if(l.length>1)return i.Oa.set(o.targetId,l.filter(c=>!bc(c,e))),void i.xa.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(o.targetId),i.sharedClientState.isActiveQueryTarget(o.targetId)||await gf(i.localStore,o.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(o.targetId),t&&sp(i.remoteStore,o.targetId),_f(i,o.targetId)}).catch(Oo)):(_f(i,o.targetId),await gf(i.localStore,o.targetId,!0))}async function UC(n,e){const t=Ae(n),i=t.xa.get(e),o=t.Oa.get(i.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),sp(t.remoteStore,i.targetId))}async function jC(n,e,t){const i=KC(n);try{const o=await function(c,f){const m=Ae(c),y=Et.now(),v=f.reduce((M,j)=>M.add(j.key),be());let E,S;return m.persistence.runTransaction("Locally write mutations","readwrite",M=>{let j=zr(),B=be();return m.hs.getEntries(M,v).next(D=>{j=D,j.forEach((ee,W)=>{W.isValidDocument()||(B=B.add(ee))})}).next(()=>m.localDocuments.getOverlayedDocuments(M,j)).next(D=>{E=D;const ee=[];for(const W of f){const X=sR(W,E.get(W.key).overlayedDocument);X!=null&&ee.push(new Ni(W.key,X,xv(X.value.mapValue),Pn.exists(!0)))}return m.mutationQueue.addMutationBatch(M,y,ee,f)}).next(D=>{S=D;const ee=D.applyToLocalDocumentSet(E,B);return m.documentOverlayCache.saveOverlays(M,D.batchId,ee)})}).then(()=>({batchId:S.batchId,changes:zv(E)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(o.batchId),function(c,f,m){let y=c.qa[c.currentUser.toKey()];y||(y=new st(Oe)),y=y.insert(f,m),c.qa[c.currentUser.toKey()]=y}(i,o.batchId,t),await fl(i,o.changes),await Uc(i.remoteStore)}catch(o){const l=cp(o,"Failed to persist write");t.reject(l)}}async function I0(n,e){const t=Ae(n);try{const i=await tC(t.localStore,e);e.targetChanges.forEach((o,l)=>{const c=t.Ba.get(l);c&&(qe(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?c.Fa=!0:o.modifiedDocuments.size>0?qe(c.Fa):o.removedDocuments.size>0&&(qe(c.Fa),c.Fa=!1))}),await fl(t,i,e)}catch(i){await Oo(i)}}function Xy(n,e,t){const i=Ae(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const o=[];i.xa.forEach((l,c)=>{const f=c.view.ea(e);f.snapshot&&o.push(f.snapshot)}),function(c,f){const m=Ae(c);m.onlineState=f;let y=!1;m.queries.forEach((v,E)=>{for(const S of E.J_)S.ea(f)&&(y=!0)}),y&&hp(m)}(i.eventManager,e),o.length&&i.Ma.R_(o),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function zC(n,e,t){const i=Ae(n);i.sharedClientState.updateQueryState(e,"rejected",t);const o=i.Ba.get(e),l=o&&o.key;if(l){let c=new st(ye.comparator);c=c.insert(l,$t.newNoDocument(l,Se.min()));const f=be().add(l),m=new Vc(Se.min(),new Map,new st(Oe),c,f);await I0(i,m),i.La=i.La.remove(l),i.Ba.delete(e),dp(i)}else await gf(i.localStore,e,!1).then(()=>_f(i,e,t)).catch(Oo)}async function BC(n,e){const t=Ae(n),i=e.batch.batchId;try{const o=await eC(t.localStore,e);A0(t,i,null),S0(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await fl(t,o)}catch(o){await Oo(o)}}async function $C(n,e,t){const i=Ae(n);try{const o=await function(c,f){const m=Ae(c);return m.persistence.runTransaction("Reject batch","readwrite-primary",y=>{let v;return m.mutationQueue.lookupMutationBatch(y,f).next(E=>(qe(E!==null),v=E.keys(),m.mutationQueue.removeMutationBatch(y,E))).next(()=>m.mutationQueue.performConsistencyCheck(y)).next(()=>m.documentOverlayCache.removeOverlaysForBatchId(y,v,f)).next(()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,v)).next(()=>m.localDocuments.getDocuments(y,v))})}(i.localStore,e);A0(i,e,t),S0(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await fl(i,o)}catch(o){await Oo(o)}}function S0(n,e){(n.Qa.get(e)||[]).forEach(t=>{t.resolve()}),n.Qa.delete(e)}function A0(n,e,t){const i=Ae(n);let o=i.qa[i.currentUser.toKey()];if(o){const l=o.get(e);l&&(t?l.reject(t):l.resolve(),o=o.remove(e)),i.qa[i.currentUser.toKey()]=o}}function _f(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.Oa.get(e))n.xa.delete(i),t&&n.Ma.Wa(i,t);n.Oa.delete(e),n.isPrimaryClient&&n.ka.yr(e).forEach(i=>{n.ka.containsKey(i)||R0(n,i)})}function R0(n,e){n.Na.delete(e.path.canonicalString());const t=n.La.get(e);t!==null&&(sp(n.remoteStore,t),n.La=n.La.remove(e),n.Ba.delete(t),dp(n))}function Yy(n,e,t){for(const i of t)i instanceof w0?(n.ka.addReference(i.key,e),qC(n,i)):i instanceof E0?(ae("SyncEngine","Document no longer in limbo: "+i.key),n.ka.removeReference(i.key,e),n.ka.containsKey(i.key)||R0(n,i.key)):Te()}function qC(n,e){const t=e.key,i=t.path.canonicalString();n.La.get(t)||n.Na.has(i)||(ae("SyncEngine","New document in limbo: "+t),n.Na.add(i),dp(n))}function dp(n){for(;n.Na.size>0&&n.La.size<n.maxConcurrentLimboResolutions;){const e=n.Na.values().next().value;n.Na.delete(e);const t=new ye(Ze.fromString(e)),i=n.Ka.next();n.Ba.set(i,new DC(t)),n.La=n.La.insert(t,i),h0(n.remoteStore,new vi(ar(Xf(t.path)),i,"TargetPurposeLimboResolution",Pc.oe))}}async function fl(n,e,t){const i=Ae(n),o=[],l=[],c=[];i.xa.isEmpty()||(i.xa.forEach((f,m)=>{c.push(i.Ua(m,e,t).then(y=>{var v;if((y||t)&&i.isPrimaryClient){const E=y?!y.fromCache:(v=t==null?void 0:t.targetChanges.get(m.targetId))===null||v===void 0?void 0:v.current;i.sharedClientState.updateQueryState(m.targetId,E?"current":"not-current")}if(y){o.push(y);const E=ip.zi(m.targetId,y);l.push(E)}}))}),await Promise.all(c),i.Ma.R_(o),await async function(m,y){const v=Ae(m);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",E=>G.forEach(y,S=>G.forEach(S.Wi,M=>v.persistence.referenceDelegate.addReference(E,S.targetId,M)).next(()=>G.forEach(S.Gi,M=>v.persistence.referenceDelegate.removeReference(E,S.targetId,M)))))}catch(E){if(!Lo(E))throw E;ae("LocalStore","Failed to update sequence numbers: "+E)}for(const E of y){const S=E.targetId;if(!E.fromCache){const M=v.us.get(S),j=M.snapshotVersion,B=M.withLastLimboFreeSnapshotVersion(j);v.us=v.us.insert(S,B)}}}(i.localStore,l))}async function HC(n,e){const t=Ae(n);if(!t.currentUser.isEqual(e)){ae("SyncEngine","User change. New user:",e.toKey());const i=await a0(t.localStore,e);t.currentUser=e,function(l,c){l.Qa.forEach(f=>{f.forEach(m=>{m.reject(new le(K.CANCELLED,c))})}),l.Qa.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await fl(t,i.Ts)}}function WC(n,e){const t=Ae(n),i=t.Ba.get(e);if(i&&i.Fa)return be().add(i.key);{let o=be();const l=t.Oa.get(e);if(!l)return o;for(const c of l){const f=t.xa.get(c);o=o.unionWith(f.view.fa)}return o}}function C0(n){const e=Ae(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=I0.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=WC.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=zC.bind(null,e),e.Ma.R_=PC.bind(null,e.eventManager),e.Ma.Wa=xC.bind(null,e.eventManager),e}function KC(n){const e=Ae(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=BC.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=$C.bind(null,e),e}class _c{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Mc(e.databaseInfo.databaseId),this.sharedClientState=this.za(e),this.persistence=this.ja(e),await this.persistence.start(),this.localStore=this.Ha(e),this.gcScheduler=this.Ja(e,this.localStore),this.indexBackfillerScheduler=this.Ya(e,this.localStore)}Ja(e,t){return null}Ya(e,t){return null}Ha(e){return ZR(this.persistence,new YR,e.initialUser,this.serializer)}ja(e){return new o0(rp.ei,this.serializer)}za(e){return new oC}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}_c.provider={build:()=>new _c};class GC extends _c{constructor(e){super(),this.cacheSizeBytes=e}Ja(e,t){qe(this.persistence.referenceDelegate instanceof gc);const i=this.persistence.referenceDelegate.garbageCollector;return new VR(i,e.asyncQueue,t)}ja(e){const t=this.cacheSizeBytes!==void 0?on.withCacheSize(this.cacheSizeBytes):on.DEFAULT;return new o0(i=>gc.ei(i,t),this.serializer)}}class vf{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>Xy(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=HC.bind(null,this.syncEngine),await RC(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new kC}()}createDatastore(e){const t=Mc(e.databaseInfo.databaseId),i=function(l){return new cC(l)}(e.databaseInfo);return function(l,c,f,m){return new fC(l,c,f,m)}(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return function(i,o,l,c,f){return new mC(i,o,l,c,f)}(this.localStore,this.datastore,e.asyncQueue,t=>Xy(this.syncEngine,t,0),function(){return Hy.p()?new Hy:new aC}())}createSyncEngine(e,t){return function(o,l,c,f,m,y,v){const E=new OC(o,l,c,f,m,y);return v&&(E.$a=!0),E}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(o){const l=Ae(o);ae("RemoteStore","RemoteStore shutting down."),l.k_.add(5),await dl(l),l.Q_.shutdown(),l.K_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}vf.provider={build:()=>new vf};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k0{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Xa(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Xa(this.observer.error,e):jr("Uncaught Error in snapshot listener:",e.toString()))}eu(){this.muted=!0}Xa(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QC{constructor(e,t,i,o,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=o,this.user=Bt.UNAUTHENTICATED,this.clientId=Cv.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(i,async c=>{ae("FirestoreClient","Received user=",c.uid),await this.authCredentialListener(c),this.user=c}),this.appCheckCredentials.start(i,c=>(ae("FirestoreClient","Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Vr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=cp(t,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function jd(n,e){n.asyncQueue.verifyOperationInProgress(),ae("FirestoreClient","Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener(async o=>{i.isEqual(o)||(await a0(e.localStore,o),i=o)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function Jy(n,e){n.asyncQueue.verifyOperationInProgress();const t=await XC(n);ae("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(i=>Wy(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,o)=>Wy(e.remoteStore,o)),n._onlineComponents=e}async function XC(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ae("FirestoreClient","Using user provided OfflineComponentProvider");try{await jd(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(o){return o.name==="FirebaseError"?o.code===K.FAILED_PRECONDITION||o.code===K.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11}(t))throw t;So("Error using user provided cache. Falling back to memory cache: "+t),await jd(n,new _c)}}else ae("FirestoreClient","Using default OfflineComponentProvider"),await jd(n,new GC(void 0));return n._offlineComponents}async function P0(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ae("FirestoreClient","Using user provided OnlineComponentProvider"),await Jy(n,n._uninitializedComponentsProvider._online)):(ae("FirestoreClient","Using default OnlineComponentProvider"),await Jy(n,new vf))),n._onlineComponents}function YC(n){return P0(n).then(e=>e.syncEngine)}async function x0(n){const e=await P0(n),t=e.eventManager;return t.onListen=LC.bind(null,e.syncEngine),t.onUnlisten=FC.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=VC.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=UC.bind(null,e.syncEngine),t}function JC(n,e,t={}){const i=new Vr;return n.asyncQueue.enqueueAndForget(async()=>function(l,c,f,m,y){const v=new k0({next:S=>{v.eu(),c.enqueueAndForget(()=>_0(l,E));const M=S.docs.has(f);!M&&S.fromCache?y.reject(new le(K.UNAVAILABLE,"Failed to get document because the client is offline.")):M&&S.fromCache&&m&&m.source==="server"?y.reject(new le(K.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(S)},error:S=>y.reject(S)}),E=new v0(Xf(f.path),v,{includeMetadataChanges:!0,ua:!0});return y0(l,E)}(await x0(n),n.asyncQueue,e,t,i)),i.promise}function ZC(n,e,t={}){const i=new Vr;return n.asyncQueue.enqueueAndForget(async()=>function(l,c,f,m,y){const v=new k0({next:S=>{v.eu(),c.enqueueAndForget(()=>_0(l,E)),S.fromCache&&m.source==="server"?y.reject(new le(K.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(S)},error:S=>y.reject(S)}),E=new v0(f,v,{includeMetadataChanges:!0,ua:!0});return y0(l,E)}(await x0(n),n.asyncQueue,e,t,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N0(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zy=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b0(n,e,t){if(!t)throw new le(K.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function ek(n,e,t,i){if(e===!0&&i===!0)throw new le(K.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function e_(n){if(!ye.isDocumentKey(n))throw new le(K.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function t_(n){if(ye.isDocumentKey(n))throw new le(K.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function jc(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Te()}function Pi(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new le(K.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=jc(n);throw new le(K.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n_{constructor(e){var t,i;if(e.host===void 0){if(e.ssl!==void 0)throw new le(K.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new le(K.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}ek("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=N0((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(l){if(l.timeoutSeconds!==void 0){if(isNaN(l.timeoutSeconds))throw new le(K.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (must not be NaN)`);if(l.timeoutSeconds<5)throw new le(K.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (minimum allowed value is 5)`);if(l.timeoutSeconds>30)throw new le(K.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,o){return i.timeoutSeconds===o.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class zc{constructor(e,t,i,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new n_({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new le(K.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new le(K.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new n_(e),e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new dA;switch(i.type){case"firstParty":return new gA(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new le(K.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const i=Zy.get(t);i&&(ae("ComponentProvider","Removing Datastore"),Zy.delete(t),i.terminate())}(this),Promise.resolve()}}function tk(n,e,t,i={}){var o;const l=(n=Pi(n,zc))._getSettings(),c=`${e}:${t}`;if(l.host!=="firestore.googleapis.com"&&l.host!==c&&So("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},l),{host:c,ssl:!1})),i.mockUserToken){let f,m;if(typeof i.mockUserToken=="string")f=i.mockUserToken,m=Bt.MOCK_USER;else{f=AT(i.mockUserToken,(o=n._app)===null||o===void 0?void 0:o.options.projectId);const y=i.mockUserToken.sub||i.mockUserToken.user_id;if(!y)throw new le(K.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new Bt(y)}n._authCredentials=new fA(new Rv(f,m))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mo{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Mo(this.firestore,e,this._query)}}class ln{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ii(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ln(this.firestore,e,this._key)}}class Ii extends Mo{constructor(e,t,i){super(e,t,Xf(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ln(this.firestore,null,new ye(e))}withConverter(e){return new Ii(this.firestore,e,this._path)}}function nk(n,e,...t){if(n=Pt(n),b0("collection","path",e),n instanceof zc){const i=Ze.fromString(e,...t);return t_(i),new Ii(n,null,i)}{if(!(n instanceof ln||n instanceof Ii))throw new le(K.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(Ze.fromString(e,...t));return t_(i),new Ii(n.firestore,null,i)}}function ur(n,e,...t){if(n=Pt(n),arguments.length===1&&(e=Cv.newId()),b0("doc","path",e),n instanceof zc){const i=Ze.fromString(e,...t);return e_(i),new ln(n,null,new ye(i))}{if(!(n instanceof ln||n instanceof Ii))throw new le(K.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(Ze.fromString(e,...t));return e_(i),new ln(n.firestore,n instanceof Ii?n.converter:null,new ye(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r_{constructor(e=Promise.resolve()){this.Iu=[],this.Eu=!1,this.du=[],this.Au=null,this.Ru=!1,this.Vu=!1,this.mu=[],this.r_=new u0(this,"async_queue_retry"),this.fu=()=>{const i=Ud();i&&ae("AsyncQueue","Visibility state changed to "+i.visibilityState),this.r_.Jo()},this.gu=e;const t=Ud();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.fu)}get isShuttingDown(){return this.Eu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.pu(),this.yu(e)}enterRestrictedMode(e){if(!this.Eu){this.Eu=!0,this.Vu=e||!1;const t=Ud();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.fu)}}enqueue(e){if(this.pu(),this.Eu)return new Promise(()=>{});const t=new Vr;return this.yu(()=>this.Eu&&this.Vu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Iu.push(e),this.wu()))}async wu(){if(this.Iu.length!==0){try{await this.Iu[0](),this.Iu.shift(),this.r_.reset()}catch(e){if(!Lo(e))throw e;ae("AsyncQueue","Operation failed with retryable error: "+e)}this.Iu.length>0&&this.r_.jo(()=>this.wu())}}yu(e){const t=this.gu.then(()=>(this.Ru=!0,e().catch(i=>{this.Au=i,this.Ru=!1;const o=function(c){let f=c.message||"";return c.stack&&(f=c.stack.includes(c.message)?c.stack:c.message+`
`+c.stack),f}(i);throw jr("INTERNAL UNHANDLED ERROR: ",o),i}).then(i=>(this.Ru=!1,i))));return this.gu=t,t}enqueueAfterDelay(e,t,i){this.pu(),this.mu.indexOf(e)>-1&&(t=0);const o=up.createAndSchedule(this,e,t,i,l=>this.Su(l));return this.du.push(o),o}pu(){this.Au&&Te()}verifyOperationInProgress(){}async bu(){let e;do e=this.gu,await e;while(e!==this.gu)}Du(e){for(const t of this.du)if(t.timerId===e)return!0;return!1}vu(e){return this.bu().then(()=>{this.du.sort((t,i)=>t.targetTimeMs-i.targetTimeMs);for(const t of this.du)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.bu()})}Cu(e){this.mu.push(e)}Su(e){const t=this.du.indexOf(e);this.du.splice(t,1)}}class pl extends zc{constructor(e,t,i,o){super(e,t,i,o),this.type="firestore",this._queue=new r_,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new r_(e),this._firestoreClient=void 0,await e}}}function ml(n,e){const t=F_(),i="(default)",o=Nf(t,"firestore").getImmediate({identifier:i});if(!o._initialized){const l=IT("firestore");l&&tk(o,...l)}return o}function Bc(n){if(n._terminated)throw new le(K.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||rk(n),n._firestoreClient}function rk(n){var e,t,i;const o=n._freezeSettings(),l=function(f,m,y,v){return new NA(f,m,y,v.host,v.ssl,v.experimentalForceLongPolling,v.experimentalAutoDetectLongPolling,N0(v.experimentalLongPollingOptions),v.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,o);n._componentsProvider||!((t=o.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((i=o.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(n._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),n._firestoreClient=new QC(n._authCredentials,n._appCheckCredentials,n._queue,l,n._componentsProvider&&function(f){const m=f==null?void 0:f._online.build();return{_offline:f==null?void 0:f._offline.build(m),_online:m}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xo{constructor(e){this._byteString=e}static fromBase64String(e){try{return new xo(Vt.fromBase64String(e))}catch(t){throw new le(K.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new xo(Vt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $c{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new le(K.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Lt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fp{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pp{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new le(K.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new le(K.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Oe(this._lat,e._lat)||Oe(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mp{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,o){if(i.length!==o.length)return!1;for(let l=0;l<i.length;++l)if(i[l]!==o[l])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ik=/^__.*__$/;class sk{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new Ni(e,this.data,this.fieldMask,t,this.fieldTransforms):new cl(e,this.data,t,this.fieldTransforms)}}class D0{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new Ni(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function O0(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Te()}}class gp{constructor(e,t,i,o,l,c){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=o,l===void 0&&this.Fu(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Mu(){return this.settings.Mu}xu(e){return new gp(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ou(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.xu({path:i,Nu:!1});return o.Lu(e),o}Bu(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.xu({path:i,Nu:!1});return o.Fu(),o}ku(e){return this.xu({path:void 0,Nu:!0})}qu(e){return vc(e,this.settings.methodName,this.settings.Qu||!1,this.path,this.settings.Ku)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Fu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Lu(this.path.get(e))}Lu(e){if(e.length===0)throw this.qu("Document fields must not be empty");if(O0(this.Mu)&&ik.test(e))throw this.qu('Document fields cannot begin and end with "__"')}}class ok{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||Mc(e)}$u(e,t,i,o=!1){return new gp({Mu:e,methodName:t,Ku:i,path:Lt.emptyPath(),Nu:!1,Qu:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function yp(n){const e=n._freezeSettings(),t=Mc(n._databaseId);return new ok(n._databaseId,!!e.ignoreUndefinedProperties,t)}function L0(n,e,t,i,o,l={}){const c=n.$u(l.merge||l.mergeFields?2:0,e,t,o);_p("Data must be an object, but it was:",c,i);const f=V0(i,c);let m,y;if(l.merge)m=new yn(c.fieldMask),y=c.fieldTransforms;else if(l.mergeFields){const v=[];for(const E of l.mergeFields){const S=wf(e,E,t);if(!c.contains(S))throw new le(K.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);F0(v,S)||v.push(S)}m=new yn(v),y=c.fieldTransforms.filter(E=>m.covers(E.field))}else m=null,y=c.fieldTransforms;return new sk(new an(f),m,y)}class qc extends fp{_toFieldTransform(e){if(e.Mu!==2)throw e.Mu===1?e.qu(`${this._methodName}() can only appear at the top level of your update data`):e.qu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof qc}}function ak(n,e,t,i){const o=n.$u(1,e,t);_p("Data must be an object, but it was:",o,i);const l=[],c=an.empty();xi(i,(m,y)=>{const v=vp(e,m,t);y=Pt(y);const E=o.Bu(v);if(y instanceof qc)l.push(v);else{const S=gl(y,E);S!=null&&(l.push(v),c.set(v,S))}});const f=new yn(l);return new D0(c,f,o.fieldTransforms)}function lk(n,e,t,i,o,l){const c=n.$u(1,e,t),f=[wf(e,i,t)],m=[o];if(l.length%2!=0)throw new le(K.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let S=0;S<l.length;S+=2)f.push(wf(e,l[S])),m.push(l[S+1]);const y=[],v=an.empty();for(let S=f.length-1;S>=0;--S)if(!F0(y,f[S])){const M=f[S];let j=m[S];j=Pt(j);const B=c.Bu(M);if(j instanceof qc)y.push(M);else{const D=gl(j,B);D!=null&&(y.push(M),v.set(M,D))}}const E=new yn(y);return new D0(v,E,c.fieldTransforms)}function uk(n,e,t,i=!1){return gl(t,n.$u(i?4:3,e))}function gl(n,e){if(M0(n=Pt(n)))return _p("Unsupported field value:",e,n),V0(n,e);if(n instanceof fp)return function(i,o){if(!O0(o.Mu))throw o.qu(`${i._methodName}() can only be used with update() and set()`);if(!o.path)throw o.qu(`${i._methodName}() is not currently supported inside arrays`);const l=i._toFieldTransform(o);l&&o.fieldTransforms.push(l)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Nu&&e.Mu!==4)throw e.qu("Nested arrays are not supported");return function(i,o){const l=[];let c=0;for(const f of i){let m=gl(f,o.ku(c));m==null&&(m={nullValue:"NULL_VALUE"}),l.push(m),c++}return{arrayValue:{values:l}}}(n,e)}return function(i,o){if((i=Pt(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return ZA(o.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const l=Et.fromDate(i);return{timestampValue:mc(o.serializer,l)}}if(i instanceof Et){const l=new Et(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:mc(o.serializer,l)}}if(i instanceof pp)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof xo)return{bytesValue:Zv(o.serializer,i._byteString)};if(i instanceof ln){const l=o.databaseId,c=i.firestore._databaseId;if(!c.isEqual(l))throw o.qu(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:tp(i.firestore._databaseId||o.databaseId,i._key.path)}}if(i instanceof mp)return function(c,f){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:c.toArray().map(m=>{if(typeof m!="number")throw f.qu("VectorValues must only contain numeric values.");return Yf(f.serializer,m)})}}}}}}(i,o);throw o.qu(`Unsupported field value: ${jc(i)}`)}(n,e)}function V0(n,e){const t={};return kv(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):xi(n,(i,o)=>{const l=gl(o,e.Ou(i));l!=null&&(t[i]=l)}),{mapValue:{fields:t}}}function M0(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Et||n instanceof pp||n instanceof xo||n instanceof ln||n instanceof fp||n instanceof mp)}function _p(n,e,t){if(!M0(t)||!function(o){return typeof o=="object"&&o!==null&&(Object.getPrototypeOf(o)===Object.prototype||Object.getPrototypeOf(o)===null)}(t)){const i=jc(t);throw i==="an object"?e.qu(n+" a custom object"):e.qu(n+" "+i)}}function wf(n,e,t){if((e=Pt(e))instanceof $c)return e._internalPath;if(typeof e=="string")return vp(n,e);throw vc("Field path arguments must be of type string or ",n,!1,void 0,t)}const ck=new RegExp("[~\\*/\\[\\]]");function vp(n,e,t){if(e.search(ck)>=0)throw vc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new $c(...e.split("."))._internalPath}catch{throw vc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function vc(n,e,t,i,o){const l=i&&!i.isEmpty(),c=o!==void 0;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let m="";return(l||c)&&(m+=" (found",l&&(m+=` in field ${i}`),c&&(m+=` in document ${o}`),m+=")"),new le(K.INVALID_ARGUMENT,f+n+m)}function F0(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U0{constructor(e,t,i,o,l){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=o,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new ln(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new hk(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(wp("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class hk extends U0{data(){return super.data()}}function wp(n,e){return typeof e=="string"?vp(n,e):e instanceof $c?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dk(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new le(K.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Ep{}class fk extends Ep{}function pk(n,e,...t){let i=[];e instanceof Ep&&i.push(e),i=i.concat(t),function(l){const c=l.filter(m=>m instanceof Tp).length,f=l.filter(m=>m instanceof Hc).length;if(c>1||c>0&&f>0)throw new le(K.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const o of i)n=o._apply(n);return n}class Hc extends fk{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new Hc(e,t,i)}_apply(e){const t=this._parse(e);return j0(e._query,t),new Mo(e.firestore,e.converter,cf(e._query,t))}_parse(e){const t=yp(e.firestore);return function(l,c,f,m,y,v,E){let S;if(y.isKeyField()){if(v==="array-contains"||v==="array-contains-any")throw new le(K.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if(v==="in"||v==="not-in"){s_(E,v);const M=[];for(const j of E)M.push(i_(m,l,j));S={arrayValue:{values:M}}}else S=i_(m,l,E)}else v!=="in"&&v!=="not-in"&&v!=="array-contains-any"||s_(E,v),S=uk(f,c,E,v==="in"||v==="not-in");return ft.create(y,v,S)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function mk(n,e,t){const i=e,o=wp("where",n);return Hc._create(o,i,t)}class Tp extends Ep{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Tp(e,t)}_parse(e){const t=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return t.length===1?t[0]:Wn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(o,l){let c=o;const f=l.getFlattenedFilters();for(const m of f)j0(c,m),c=cf(c,m)}(e._query,t),new Mo(e.firestore,e.converter,cf(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function i_(n,e,t){if(typeof(t=Pt(t))=="string"){if(t==="")throw new le(K.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Mv(e)&&t.indexOf("/")!==-1)throw new le(K.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(Ze.fromString(t));if(!ye.isDocumentKey(i))throw new le(K.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return Ay(n,new ye(i))}if(t instanceof ln)return Ay(n,t._key);throw new le(K.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${jc(t)}.`)}function s_(n,e){if(!Array.isArray(n)||n.length===0)throw new le(K.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function j0(n,e){const t=function(o,l){for(const c of o)for(const f of c.getFlattenedFilters())if(l.indexOf(f.op)>=0)return f.op;return null}(n.filters,function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new le(K.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new le(K.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class gk{convertValue(e,t="none"){switch(Ci(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ut(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ri(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Te()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return xi(e,(o,l)=>{i[o]=this.convertValue(l,t)}),i}convertVectorValue(e){var t,i,o;const l=(o=(i=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||i===void 0?void 0:i.values)===null||o===void 0?void 0:o.map(c=>ut(c.doubleValue));return new mp(l)}convertGeoPoint(e){return new pp(ut(e.latitude),ut(e.longitude))}convertArray(e,t){return(e.values||[]).map(i=>this.convertValue(i,t))}convertServerTimestamp(e,t){switch(t){case"previous":const i=Nc(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(Qa(e));default:return null}}convertTimestamp(e){const t=Ai(e);return new Et(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=Ze.fromString(e);qe(s0(i));const o=new Xa(i.get(1),i.get(3)),l=new ye(i.popFirst(5));return o.isEqual(t)||jr(`Document ${l} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z0(n,e,t){let i;return i=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ua{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class B0 extends U0{constructor(e,t,i,o,l,c){super(e,t,i,o,c),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Xu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(wp("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}}class Xu extends B0{data(e={}){return super.data(e)}}class yk{constructor(e,t,i,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new Ua(o.hasPendingWrites,o.fromCache),this.query=i}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(i=>{e.call(t,new Xu(this._firestore,this._userDataWriter,i.key,i,new Ua(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new le(K.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(o,l){if(o._snapshot.oldDocs.isEmpty()){let c=0;return o._snapshot.docChanges.map(f=>{const m=new Xu(o._firestore,o._userDataWriter,f.doc.key,f.doc,new Ua(o._snapshot.mutatedKeys.has(f.doc.key),o._snapshot.fromCache),o.query.converter);return f.doc,{type:"added",doc:m,oldIndex:-1,newIndex:c++}})}{let c=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(f=>l||f.type!==3).map(f=>{const m=new Xu(o._firestore,o._userDataWriter,f.doc.key,f.doc,new Ua(o._snapshot.mutatedKeys.has(f.doc.key),o._snapshot.fromCache),o.query.converter);let y=-1,v=-1;return f.type!==0&&(y=c.indexOf(f.doc.key),c=c.delete(f.doc.key)),f.type!==1&&(c=c.add(f.doc),v=c.indexOf(f.doc.key)),{type:_k(f.type),doc:m,oldIndex:y,newIndex:v}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function _k(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Te()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function el(n){n=Pi(n,ln);const e=Pi(n.firestore,pl);return JC(Bc(e),n._key).then(t=>wk(e,n,t))}class $0 extends gk{constructor(e){super(),this.firestore=e}convertBytes(e){return new xo(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ln(this.firestore,null,t)}}function vk(n){n=Pi(n,Mo);const e=Pi(n.firestore,pl),t=Bc(e),i=new $0(e);return dk(n._query),ZC(t,n._query).then(o=>new yk(e,i,n,o))}function Ef(n,e,t){n=Pi(n,ln);const i=Pi(n.firestore,pl),o=z0(n.converter,e,t);return q0(i,[L0(yp(i),"setDoc",n._key,o,n.converter!==null,t).toMutation(n._key,Pn.none())])}function q0(n,e){return function(i,o){const l=new Vr;return i.asyncQueue.enqueueAndForget(async()=>jC(await YC(i),o,l)),l.promise}(Bc(n),e)}function wk(n,e,t){const i=t.docs.get(e._key),o=new $0(n);return new B0(n,o,e._key,i,new Ua(t.hasPendingWrites,t.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ek{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=yp(e)}set(e,t,i){this._verifyNotCommitted();const o=zd(e,this._firestore),l=z0(o.converter,t,i),c=L0(this._dataReader,"WriteBatch.set",o._key,l,o.converter!==null,i);return this._mutations.push(c.toMutation(o._key,Pn.none())),this}update(e,t,i,...o){this._verifyNotCommitted();const l=zd(e,this._firestore);let c;return c=typeof(t=Pt(t))=="string"||t instanceof $c?lk(this._dataReader,"WriteBatch.update",l._key,t,i,o):ak(this._dataReader,"WriteBatch.update",l._key,t),this._mutations.push(c.toMutation(l._key,Pn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=zd(e,this._firestore);return this._mutations=this._mutations.concat(new Jf(t._key,Pn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new le(K.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function zd(n,e){if((n=Pt(n)).firestore!==e)throw new le(K.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H0(n){return Bc(n=Pi(n,pl)),new Ek(n,e=>q0(n,e))}(function(e,t=!0){(function(o){Do=o})(No),To(new ms("firestore",(i,{instanceIdentifier:o,options:l})=>{const c=i.getProvider("app").getImmediate(),f=new pl(new pA(i.getProvider("auth-internal")),new _A(i.getProvider("app-check-internal")),function(y,v){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new le(K.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Xa(y.options.projectId,v)}(c,o),c);return l=Object.assign({useFetchStreams:t},l),f._setSettings(l),f},"PUBLIC").setMultipleInstances(!0)),Ti(vy,"4.7.5",e),Ti(vy,"4.7.5","esm2017")})();const Tk=ml(),W0=async(n,e,t)=>{var i,o;try{const l=ur(Tk,"users",n),f=ur(l,t==="movie"?"movies":"tv",e.id.toString());if((await el(f)).exists()){Re.error(`${t==="movie"?"Movie":"TV Show"} is already on your list!`);return}const y=t==="movie"?e.title:e.name,v=t==="movie"?(i=e.release_date)==null?void 0:i.slice(0,4):(o=e.first_air_date)==null?void 0:o.slice(0,4);await Ef(f,{id:e.id,type:t,name:y||"Unknown",year:v||"Unknown",rating:e.vote_average,poster_path:e.poster_path,updatedDate:new Date().toISOString().split("T")[0]}),Re.success(`${t==="movie"?"Movie":"TV Show"} added to your list!`)}catch(l){Re.error("Error fetching results. Please refresh and try again."),console.error("Error adding media to list:",l)}},K0=he.createContext(void 0),Ik=()=>{const n=he.useContext(K0);if(!n)throw new Error("useSearchResults must be used within a SearchResultsProvider");return n},G0=he.createContext({currentUser:null,isAuthorizing:!0}),$r=()=>{const n=he.useContext(G0);if(!n)throw new Error("useAuthContext must be used within an AuthProvider");return n},Wc=()=>L.jsx("div",{className:"flex items-center justify-center h-screen",children:L.jsx("div",{className:"w-8 h-8 border-4 border-blue-500 border-t-transparent border-solid rounded-full animate-spin"})}),Sk=()=>{const{currentUser:n}=$r(),{searchOptions:e,setSearchOptions:t,handleSearch:i,isLoadingSearchResults:o,results:l}=Ik(),[c,f]=he.useState(!1);he.useEffect(()=>{c&&(i(),f(!1))},[e.page,c]);const m=E=>{t({page:E}),f(!0)},y=async(E,S)=>{if(!n){Re.error("You must be logged in to add items to your list.");return}try{await W0(n.uid,E,S)}catch(M){console.error("Error adding media to list:",M)}};console.log(e.page);const v=E=>E.map(S=>{if(S.media_type){if(S.media_type==="movie")return L.jsx(Lr,{media:S,type:"movie",actionLabel:"Add to My List",onActionClick:()=>y(S,"movie")},S.id);if(S.media_type==="tv")return L.jsx(Lr,{media:S,type:"tv",actionLabel:"Add to My List",onActionClick:()=>y(S,"tv")},S.id);if(S.media_type==="person")return null}return"title"in S?L.jsx(Lr,{media:S,type:"movie",actionLabel:"Add to My List",onActionClick:()=>y(S,"movie")},S.id):"name"in S&&"first_air_date"in S?L.jsx(Lr,{media:S,type:"tv",actionLabel:"Add to My List",onActionClick:()=>y(S,"tv")},S.id):null});return L.jsxs("div",{className:"max-w-full md:max-w-3xl lg:max-w-4xl mx-auto p-6",children:[L.jsx("h1",{className:"text-2xl font-bold mb-6 text-gray-800",children:"Search"}),L.jsx("div",{className:"mb-6 w-full",children:L.jsx("input",{type:"text",value:e.query,onChange:E=>t({query:E.target.value}),placeholder:"Search for movies, TV shows, or people...",className:"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring focus:ring-blue-300",onKeyDown:E=>{E.key==="Enter"&&e.query&&i()}})}),L.jsxs("div",{className:"mb-6",children:[L.jsx("h2",{className:"text-lg font-semibold text-gray-700 mb-4",children:"Filters"}),L.jsxs("div",{className:"flex items-center text-gray-600",children:[L.jsx("div",{className:"mb-4",children:L.jsxs("label",{className:"flex items-center space-x-3",children:[L.jsx("span",{children:"Include Adult Content:"}),L.jsx("input",{type:"checkbox",checked:e.includeAdult,onChange:E=>t({includeAdult:E.target.checked}),className:"w-4 h-4"})]})}),L.jsx("div",{className:"mb-4",children:L.jsxs("label",{className:"flex items-center space-x-3",children:[L.jsx("span",{children:"Exclude Incomplete Results:"}),L.jsx("input",{type:"checkbox",checked:e.excludeIncomplete,onChange:E=>t({excludeIncomplete:E.target.checked}),className:"w-4 h-4"})]})})]}),L.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[L.jsxs("div",{children:[L.jsx("label",{className:"block text-sm font-medium text-gray-600",children:"Search Type"}),L.jsxs("select",{value:e.searchType,onChange:E=>t({searchType:E.target.value}),className:"w-full p-2 border border-gray-300 rounded-lg focus:outline-none focus:ring focus:ring-blue-300",children:[L.jsx("option",{value:"movie",children:"Movies"}),L.jsx("option",{value:"tv",children:"TV Shows"}),L.jsx("option",{value:"person",children:"People"}),L.jsx("option",{value:"multi",children:"All"})]})]}),L.jsxs("div",{children:[L.jsx("label",{className:"block text-sm font-medium text-gray-600",children:"Language"}),L.jsx("input",{type:"text",value:e.language,onChange:E=>t({language:E.target.value}),placeholder:"e.g., en-US",className:"w-full p-2 border border-gray-300 rounded-lg focus:outline-none focus:ring focus:ring-blue-300"})]}),L.jsxs("div",{children:[L.jsx("label",{className:"block text-sm font-medium text-gray-600",children:"Primary Release Year"}),L.jsx("input",{type:"text",value:e.primaryReleaseYear,onChange:E=>t({primaryReleaseYear:E.target.value}),placeholder:"e.g., 2023",className:"w-full p-2 border border-gray-300 rounded-lg focus:outline-none focus:ring focus:ring-blue-300"})]}),L.jsxs("div",{children:[L.jsx("label",{className:"block text-sm font-medium text-gray-600",children:"Year"}),L.jsx("input",{type:"text",value:e.year,onChange:E=>t({year:E.target.value}),placeholder:"e.g., 2023",className:"w-full p-2 border border-gray-300 rounded-lg focus:outline-none focus:ring focus:ring-blue-300"})]}),L.jsxs("div",{children:[L.jsx("label",{className:"block text-sm font-medium text-gray-600",children:"Region"}),L.jsx("input",{type:"text",value:e.region,onChange:E=>t({region:E.target.value}),placeholder:"e.g., US",className:"w-full p-2 border border-gray-300 rounded-lg focus:outline-none focus:ring focus:ring-blue-300"})]}),L.jsxs("div",{children:[L.jsx("label",{className:"block text-sm font-medium text-gray-600",children:"Page"}),L.jsx("input",{type:"number",value:e.page,onChange:E=>m(Number(E.target.value)),min:"1",className:"w-full p-2 border border-gray-300 rounded-lg focus:outline-none focus:ring focus:ring-blue-300"})]})]})]}),L.jsx("button",{onClick:i,className:"px-4 py-2 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:ring-offset-2 transition",children:"Search"}),L.jsx("div",{className:"mt-6",children:o?L.jsx(Wc,{}):l.length>0?v(l):L.jsx("p",{className:"text-gray-600",children:"No results found. Try searching with different filters!"})})]})},Q0=he.createContext(void 0),Ak=()=>{const n=he.useContext(Q0);if(!n)throw new Error("useMyList must be used within a MyListProvider");return n},X0=he.createContext(void 0),Rk=()=>{const n=he.useContext(X0);if(!n)throw new Error("useMyList must be used within a MyListProvider");return n},Ck=()=>{const{currentUser:n}=$r(),{myList:e,refreshMyList:t,isLoadingMyList:i}=Ak(),{duoPartnerList:o,refreshDuoPartnerList:l,isLoadingDuoPartnerList:c}=Rk(),[f,m]=he.useState("myList"),[y,v]=he.useState([]);return he.useEffect(()=>{t(),l()},[]),he.useEffect(()=>{if(f==="myList")v(e);else if(f==="partnerList")v(o);else if(f==="ourList"){const E=e.filter(S=>o.some(M=>M.id===S.id&&M.media_type===S.media_type));v(E)}},[f,e,o]),i||c?L.jsx(Wc,{}):L.jsxs("div",{children:[L.jsxs("div",{className:"flex justify-center mb-4",children:[L.jsx("button",{className:`px-4 py-2 mx-2 rounded ${f==="myList"?"bg-blue-500 text-white":"bg-gray-200"}`,onClick:()=>m("myList"),children:"My List"}),(n==null?void 0:n.partnerUid)&&L.jsxs(L.Fragment,{children:[L.jsx("button",{className:`px-4 py-2 mx-2 rounded ${f==="partnerList"?"bg-blue-500 text-white":"bg-gray-200"}`,onClick:()=>m("partnerList"),children:"Duo Partner's List"}),L.jsx("button",{className:`px-4 py-2 mx-2 rounded ${f==="ourList"?"bg-blue-500 text-white":"bg-gray-200"}`,onClick:()=>m("ourList"),children:"Our List"})]})]}),y.length===0?L.jsx("p",{children:"No items to display in this list."}):L.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4",children:y.map(E=>L.jsx(Lr,{media:E,type:E.media_type,actionLabel:"Remove from My List",actionBtnColor:"bg-red-500",actionBtnHoverColor:"hover:bg-red-700",onActionClick:()=>console.log(`Removed ${E.media_type}: ${E.id}`)},E.id))})]})},Y0=he.createContext(void 0),kk=()=>{const n=he.useContext(Y0);if(!n)throw new Error("useDiscoverResults must be used within a DiscoverResultsProvider");return n},Pk=()=>{const{currentUser:n}=$r(),{discoverOptions:e,setDiscoverOptions:t,handleSearch:i,isLoadingDiscoverResults:o,results:l}=kk(),[c,f]=he.useState(!1);he.useEffect(()=>{c&&(i(),f(!1))},[e.page,c]);const m=E=>{t({page:E}),f(!0)},y=async(E,S)=>{if(!n){Re.error("You must be logged in to add items to your list.");return}try{await W0(n.uid,E,S)}catch(M){console.error("Error adding media to list:",M)}};console.log(e.page);const v=E=>E.map(S=>S.media_type?S.media_type==="movie"?L.jsx(Lr,{media:S,type:"movie",actionLabel:"Add to My List",onActionClick:()=>y(S,"movie")},S.id):S.media_type==="tv"?L.jsx(Lr,{media:S,type:"tv",actionLabel:"Add to My List",onActionClick:()=>y(S,"tv")},S.id):null:"title"in S?L.jsx(Lr,{media:S,type:"movie",actionLabel:"Add to My List",onActionClick:()=>y(S,"movie")},S.id):"name"in S&&"first_air_date"in S?L.jsx(Lr,{media:S,type:"tv",actionLabel:"Add to My List",onActionClick:()=>y(S,"tv")},S.id):null);return L.jsxs("div",{className:"max-w-full md:max-w-3xl lg:max-w-4xl mx-auto p-6",children:[L.jsx("h1",{className:"text-2xl font-bold mb-6 text-gray-800",children:"Discover"}),L.jsxs("div",{className:"mb-6",children:[L.jsx("h2",{className:"text-lg font-semibold text-gray-700 mb-4",children:"Filters"}),L.jsx("div",{className:"flex items-center text-gray-600",children:L.jsx("div",{className:"mb-4",children:L.jsxs("label",{className:"flex items-center space-x-3",children:[L.jsx("span",{children:"Exclude Incomplete Results:"}),L.jsx("input",{type:"checkbox",checked:e.excludeIncomplete,onChange:E=>t({excludeIncomplete:E.target.checked}),className:"w-4 h-4"})]})})}),L.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[L.jsxs("div",{children:[L.jsx("label",{className:"block text-sm font-medium text-gray-600",children:"Search Type"}),L.jsxs("select",{value:e.mediaType,onChange:E=>t({mediaType:E.target.value}),className:"w-full p-2 border border-gray-300 rounded-lg focus:outline-none focus:ring focus:ring-blue-300",children:[L.jsx("option",{value:"movie",children:"Movies"}),L.jsx("option",{value:"tv",children:"TV Shows"})]})]}),L.jsxs("div",{children:[L.jsx("label",{className:"block text-sm font-medium text-gray-600",children:"Discover Type"}),L.jsxs("select",{value:e.discoverType,onChange:E=>t({discoverType:E.target.value}),className:"w-full p-2 border border-gray-300 rounded-lg focus:outline-none focus:ring focus:ring-blue-300",children:[L.jsx("option",{value:"popular",children:"Popular"}),L.jsx("option",{value:"trending",children:"Trending"})]})]}),e.discoverType=="trending"&&L.jsxs("div",{children:[L.jsx("label",{className:"block text-sm font-medium text-gray-600",children:"Trending Time Window"}),L.jsxs("select",{value:e.timeWindow,onChange:E=>t({timeWindow:E.target.value}),className:"w-full p-2 border border-gray-300 rounded-lg focus:outline-none focus:ring focus:ring-blue-300",children:[L.jsx("option",{value:"day",children:"Day"}),L.jsx("option",{value:"week",children:"Week"})]})]}),L.jsxs("div",{children:[L.jsx("label",{className:"block text-sm font-medium text-gray-600",children:"Language"}),L.jsx("input",{type:"text",value:e.language,onChange:E=>t({language:E.target.value}),placeholder:"e.g., en-US",className:"w-full p-2 border border-gray-300 rounded-lg focus:outline-none focus:ring focus:ring-blue-300"})]}),L.jsxs("div",{children:[L.jsx("label",{className:"block text-sm font-medium text-gray-600",children:"Page"}),L.jsx("input",{type:"number",value:e.page,onChange:E=>m(Number(E.target.value)),min:"1",className:"w-full p-2 border border-gray-300 rounded-lg focus:outline-none focus:ring focus:ring-blue-300"})]})]})]}),L.jsx("button",{onClick:i,className:"px-4 py-2 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:ring-offset-2 transition",children:`Get ${e.discoverType} ${e.mediaType}s`}),L.jsx("div",{className:"mt-6",children:o?L.jsx(Wc,{}):l.length>0?v(l):L.jsx("p",{className:"text-gray-600",children:"No results found. Somethign went wrong!"})})]})},xk=async(n,e)=>{const t=ml(),i=nk(t,"users"),o=pk(i,mk("partnerCode","==",e)),l=await vk(o);if(l.empty)throw new Error("Partner code not found.");const c=l.docs[0];if(c.data().partnerUid)throw new Error("This partner is already connected with someone else.");const m=H0(t),y=ur(i,n),v=ur(i,c.id);m.update(y,{partnerUid:c.id}),m.update(v,{partnerUid:n}),await m.commit()},Nk=async n=>{const e=ml(),t=ur(e,"users",n),i=await el(t);if(!i.exists())throw new Error("User not found.");const{partnerUid:o}=i.data();if(!o)throw new Error("No partner to disconnect.");const l=ur(e,"users",o),c=H0(e);c.update(t,{partnerUid:null}),c.update(l,{partnerUid:null}),await c.commit()},bk=()=>{const{currentUser:n}=$r(),[e,t]=he.useState(""),[i,o]=he.useState(!1),l=()=>{n&&navigator.clipboard.writeText(n.partnerCode||"").then(()=>Re.success("Partner code copied to clipboard!")).catch(()=>Re.error("Failed to copy code."))},c=async()=>{if(!e.trim()){Re.error("Please enter a valid partner code.");return}try{o(!0),await xk((n==null?void 0:n.uid)||"",e),Re.success("Connected with partner successfully!"),t("")}catch(m){Re.error("Failed to connect with partner. Please try again."),console.error("Error connecting with partner:",m)}finally{o(!1)}},f=async()=>{try{await Nk((n==null?void 0:n.uid)||""),Re.success("Disconnected from partner.")}catch(m){Re.error("Failed to disconnect from partner."),console.error("Error disconnecting from partner:",m)}};return L.jsxs("div",{className:"max-w-2xl mx-auto p-6 bg-white shadow-md rounded-md",children:[L.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Settings"}),L.jsxs("div",{className:"mb-6",children:[L.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Partner Management"}),L.jsxs("div",{className:"mb-4",children:[L.jsx("p",{className:"text-gray-700",children:"Share this code with your partner to connect your accounts:"}),L.jsx("div",{className:"flex flex-wrap items-center mt-4 max-w-full",children:L.jsxs("div",{className:"flex flex-wrap sm:flex-nowrap items-center mt-4 max-w-full",children:[L.jsx("input",{type:"text",readOnly:!0,value:(n==null?void 0:n.partnerCode)||"Loading...",className:"w-full sm:flex-grow p-2 border border-gray-300 rounded-t-lg sm:rounded-l-lg sm:rounded-t-none focus:outline-none bg-gray-100"}),L.jsx("button",{onClick:l,className:"w-full sm:w-auto px-4 py-2 bg-blue-600 text-white font-medium rounded-b-lg sm:rounded-r-lg sm:rounded-b-none hover:bg-blue-700 focus:outline-none whitespace-nowrap",children:"Copy Code"})]})})]}),!(n!=null&&n.partnerUid)&&L.jsxs("div",{className:"mb-4 mt-8",children:[L.jsx("p",{className:"text-gray-700",children:"Enter your partner's code to connect:"}),L.jsxs("div",{className:"flex items-center mt-2",children:[L.jsx("input",{type:"text",value:e,onChange:m=>t(m.target.value),placeholder:"Enter partner code",className:"w-full p-2 border border-gray-300 rounded-l-lg focus:outline-none"}),L.jsx("button",{onClick:c,disabled:i,className:`px-4 py-2 ${i?"bg-gray-400 cursor-not-allowed":"bg-green-600 hover:bg-green-700"} text-white font-medium rounded-r-lg focus:outline-none`,children:i?"Connecting...":"Connect"})]})]}),(n==null?void 0:n.partnerUid)&&L.jsxs("div",{className:"mb-4 mt-8",children:[L.jsx("p",{className:"text-gray-700",children:"You are currently connected with a partner."}),L.jsx("button",{onClick:f,className:"px-4 py-2 bg-red-600 text-white font-medium rounded-lg hover:bg-red-700 focus:outline-none mt-2",children:"Disconnect Partner"})]})]})]})},Dk=()=>{var y;const{currentUser:n,isAuthorizing:e}=$r(),[t,i]=he.useState("list"),[o,l]=he.useState(!1),c=he.useRef(null);if(he.useEffect(()=>{const v=E=>{c.current&&!c.current.contains(E.target)&&l(!1)};return o?document.addEventListener("mousedown",v):document.removeEventListener("mousedown",v),()=>{document.removeEventListener("mousedown",v)}},[o]),e)return L.jsx(Wc,{});if(!n)return L.jsx(eA,{});const f=((y=n.displayName)==null?void 0:y.split(" ")[0])||"User",m=async()=>{try{await VI($f),console.log("User signed out successfully")}catch(v){console.error("Error signing out:",v)}};return L.jsxs("div",{className:"min-h-screen bg-gray-100",children:[L.jsxs("nav",{className:"bg-gray-800 text-white p-4 flex items-center justify-between",children:[L.jsxs("div",{className:"flex gap-4",children:[L.jsx("button",{className:`px-4 py-2 rounded ${t==="list"?"bg-gray-600":"hover:bg-gray-700"}`,onClick:()=>i("list"),children:"Media Lists"}),L.jsx("button",{className:`px-4 py-2 rounded ${t==="search"?"bg-gray-600":"hover:bg-gray-700"}`,onClick:()=>i("search"),children:"Search"}),L.jsx("button",{className:`px-4 py-2 rounded ${t==="discover"?"bg-gray-600":"hover:bg-gray-700"}`,onClick:()=>i("discover"),children:"Discover"})]}),L.jsxs("div",{className:"flex items-center gap-2 relative",ref:c,children:[L.jsxs("div",{className:"flex items-center gap-2",children:[L.jsx("img",{src:n.photoURL||"https://via.placeholder.com/32",alt:f,className:"w-8 h-8 rounded-full",referrerPolicy:"no-referrer",loading:"lazy"}),L.jsx("span",{className:"text-sm",children:f})]}),L.jsx("button",{className:"text-white p-2 hover:bg-gray-700 rounded-full focus:outline-none",onClick:()=>l(v=>!v),children:L.jsx(lA,{size:24})}),o&&L.jsxs("div",{className:"absolute right-0 mt-32 w-48 bg-white text-gray-800 shadow-lg rounded-md",children:[L.jsx("button",{className:"w-full text-left px-4 py-2 hover:bg-gray-100",onClick:()=>{i("settings"),l(!1)},children:"Settings"}),L.jsx("button",{className:"w-full text-left px-4 py-2 hover:bg-gray-100 text-red-600",onClick:m,children:"Logout"})]})]})]}),L.jsx(mT,{}),L.jsxs("div",{className:"p-4",children:[t==="list"&&L.jsx(Ck,{}),t==="search"&&L.jsx(Sk,{}),t==="settings"&&L.jsx(bk,{}),t==="discover"&&L.jsx(Pk,{})]})]})},o_=()=>Math.random().toString(36).substring(2,10),Ok=async n=>{const e=ml(),t=ur(e,"users",n.uid);try{if((await el(t)).exists())console.log("User already exists in the database.");else{let o=o_(),l=!1;for(;!l;)(await el(ur(e,"partnerCodes",o))).exists()?o=o_():l=!0;const c={uid:n.uid,displayName:n.displayName||"Anonymous",email:n.email||"No Email",partnerCode:o,partner:null,createdAt:new Date().toISOString()};await Ef(t,c),console.log("User initialized in the database."),await Ef(ur(e,"partnerCodes",o),{uid:n.uid})}}catch(i){throw console.error("Error initializing user in database:",i),i}},Lk=({children:n})=>{const[e,t]=he.useState(null),[i,o]=he.useState(!0);return he.useEffect(()=>{const l=LI($f,async c=>{if(c){console.log(c);try{await Ok(c);const f=ml(),m=ur(f,"users",c.uid),y=await el(m);if(y.exists()){const v=y.data();t({...c,partnerCode:v.partnerCode||"",partnerUid:v.partnerUid||null,createdAt:v.createdAt||c.metadata.creationTime||""})}else console.warn(`No Firestore document found for user ${c.uid}`),t({...c,partnerCode:"",partnerUid:null,createdAt:c.metadata.creationTime||""})}catch(f){console.error("Error initializing user or fetching data:",f),t(null)}}else t(null);o(!1)});return()=>l()},[]),i?L.jsx("div",{children:"Loading..."}):L.jsx(G0.Provider,{value:{currentUser:e,isAuthorizing:i},children:n})},Vk=({children:n})=>{const{currentUser:e}=$r(),[t,i]=he.useState([]),[o,l]=he.useState(!0),c=async()=>{var f;if(e)try{const m=(f=e==null?void 0:e.stsTokenManager)==null?void 0:f.accessToken,y=await fetch("https://watchlist-duo-backend.onrender.com/api/mylist",{method:"GET",headers:{Authorization:`Bearer ${m}`,"Content-Type":"application/json"}});if(!y.ok)throw new Error(`Failed to fetch: ${y.statusText}`);const v=await y.json();i(v),l(!1)}catch(m){console.error("Error fetching My List:",m)}};return he.useEffect(()=>{c()},[e]),L.jsx(Q0.Provider,{value:{isLoadingMyList:o,myList:t,setMyList:i,refreshMyList:c},children:n})};function J0(n,e){return function(){return n.apply(e,arguments)}}const{toString:Mk}=Object.prototype,{getPrototypeOf:Ip}=Object,Kc=(n=>e=>{const t=Mk.call(e);return n[t]||(n[t]=t.slice(8,-1).toLowerCase())})(Object.create(null)),Kn=n=>(n=n.toLowerCase(),e=>Kc(e)===n),Gc=n=>e=>typeof e===n,{isArray:Fo}=Array,tl=Gc("undefined");function Fk(n){return n!==null&&!tl(n)&&n.constructor!==null&&!tl(n.constructor)&&_n(n.constructor.isBuffer)&&n.constructor.isBuffer(n)}const Z0=Kn("ArrayBuffer");function Uk(n){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(n):e=n&&n.buffer&&Z0(n.buffer),e}const jk=Gc("string"),_n=Gc("function"),ew=Gc("number"),Qc=n=>n!==null&&typeof n=="object",zk=n=>n===!0||n===!1,Yu=n=>{if(Kc(n)!=="object")return!1;const e=Ip(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)},Bk=Kn("Date"),$k=Kn("File"),qk=Kn("Blob"),Hk=Kn("FileList"),Wk=n=>Qc(n)&&_n(n.pipe),Kk=n=>{let e;return n&&(typeof FormData=="function"&&n instanceof FormData||_n(n.append)&&((e=Kc(n))==="formdata"||e==="object"&&_n(n.toString)&&n.toString()==="[object FormData]"))},Gk=Kn("URLSearchParams"),[Qk,Xk,Yk,Jk]=["ReadableStream","Request","Response","Headers"].map(Kn),Zk=n=>n.trim?n.trim():n.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function yl(n,e,{allOwnKeys:t=!1}={}){if(n===null||typeof n>"u")return;let i,o;if(typeof n!="object"&&(n=[n]),Fo(n))for(i=0,o=n.length;i<o;i++)e.call(null,n[i],i,n);else{const l=t?Object.getOwnPropertyNames(n):Object.keys(n),c=l.length;let f;for(i=0;i<c;i++)f=l[i],e.call(null,n[f],f,n)}}function tw(n,e){e=e.toLowerCase();const t=Object.keys(n);let i=t.length,o;for(;i-- >0;)if(o=t[i],e===o.toLowerCase())return o;return null}const us=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,nw=n=>!tl(n)&&n!==us;function Tf(){const{caseless:n}=nw(this)&&this||{},e={},t=(i,o)=>{const l=n&&tw(e,o)||o;Yu(e[l])&&Yu(i)?e[l]=Tf(e[l],i):Yu(i)?e[l]=Tf({},i):Fo(i)?e[l]=i.slice():e[l]=i};for(let i=0,o=arguments.length;i<o;i++)arguments[i]&&yl(arguments[i],t);return e}const eP=(n,e,t,{allOwnKeys:i}={})=>(yl(e,(o,l)=>{t&&_n(o)?n[l]=J0(o,t):n[l]=o},{allOwnKeys:i}),n),tP=n=>(n.charCodeAt(0)===65279&&(n=n.slice(1)),n),nP=(n,e,t,i)=>{n.prototype=Object.create(e.prototype,i),n.prototype.constructor=n,Object.defineProperty(n,"super",{value:e.prototype}),t&&Object.assign(n.prototype,t)},rP=(n,e,t,i)=>{let o,l,c;const f={};if(e=e||{},n==null)return e;do{for(o=Object.getOwnPropertyNames(n),l=o.length;l-- >0;)c=o[l],(!i||i(c,n,e))&&!f[c]&&(e[c]=n[c],f[c]=!0);n=t!==!1&&Ip(n)}while(n&&(!t||t(n,e))&&n!==Object.prototype);return e},iP=(n,e,t)=>{n=String(n),(t===void 0||t>n.length)&&(t=n.length),t-=e.length;const i=n.indexOf(e,t);return i!==-1&&i===t},sP=n=>{if(!n)return null;if(Fo(n))return n;let e=n.length;if(!ew(e))return null;const t=new Array(e);for(;e-- >0;)t[e]=n[e];return t},oP=(n=>e=>n&&e instanceof n)(typeof Uint8Array<"u"&&Ip(Uint8Array)),aP=(n,e)=>{const i=(n&&n[Symbol.iterator]).call(n);let o;for(;(o=i.next())&&!o.done;){const l=o.value;e.call(n,l[0],l[1])}},lP=(n,e)=>{let t;const i=[];for(;(t=n.exec(e))!==null;)i.push(t);return i},uP=Kn("HTMLFormElement"),cP=n=>n.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,i,o){return i.toUpperCase()+o}),a_=(({hasOwnProperty:n})=>(e,t)=>n.call(e,t))(Object.prototype),hP=Kn("RegExp"),rw=(n,e)=>{const t=Object.getOwnPropertyDescriptors(n),i={};yl(t,(o,l)=>{let c;(c=e(o,l,n))!==!1&&(i[l]=c||o)}),Object.defineProperties(n,i)},dP=n=>{rw(n,(e,t)=>{if(_n(n)&&["arguments","caller","callee"].indexOf(t)!==-1)return!1;const i=n[t];if(_n(i)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+t+"'")})}})},fP=(n,e)=>{const t={},i=o=>{o.forEach(l=>{t[l]=!0})};return Fo(n)?i(n):i(String(n).split(e)),t},pP=()=>{},mP=(n,e)=>n!=null&&Number.isFinite(n=+n)?n:e,Bd="abcdefghijklmnopqrstuvwxyz",l_="0123456789",iw={DIGIT:l_,ALPHA:Bd,ALPHA_DIGIT:Bd+Bd.toUpperCase()+l_},gP=(n=16,e=iw.ALPHA_DIGIT)=>{let t="";const{length:i}=e;for(;n--;)t+=e[Math.random()*i|0];return t};function yP(n){return!!(n&&_n(n.append)&&n[Symbol.toStringTag]==="FormData"&&n[Symbol.iterator])}const _P=n=>{const e=new Array(10),t=(i,o)=>{if(Qc(i)){if(e.indexOf(i)>=0)return;if(!("toJSON"in i)){e[o]=i;const l=Fo(i)?[]:{};return yl(i,(c,f)=>{const m=t(c,o+1);!tl(m)&&(l[f]=m)}),e[o]=void 0,l}}return i};return t(n,0)},vP=Kn("AsyncFunction"),wP=n=>n&&(Qc(n)||_n(n))&&_n(n.then)&&_n(n.catch),sw=((n,e)=>n?setImmediate:e?((t,i)=>(us.addEventListener("message",({source:o,data:l})=>{o===us&&l===t&&i.length&&i.shift()()},!1),o=>{i.push(o),us.postMessage(t,"*")}))(`axios@${Math.random()}`,[]):t=>setTimeout(t))(typeof setImmediate=="function",_n(us.postMessage)),EP=typeof queueMicrotask<"u"?queueMicrotask.bind(us):typeof process<"u"&&process.nextTick||sw,H={isArray:Fo,isArrayBuffer:Z0,isBuffer:Fk,isFormData:Kk,isArrayBufferView:Uk,isString:jk,isNumber:ew,isBoolean:zk,isObject:Qc,isPlainObject:Yu,isReadableStream:Qk,isRequest:Xk,isResponse:Yk,isHeaders:Jk,isUndefined:tl,isDate:Bk,isFile:$k,isBlob:qk,isRegExp:hP,isFunction:_n,isStream:Wk,isURLSearchParams:Gk,isTypedArray:oP,isFileList:Hk,forEach:yl,merge:Tf,extend:eP,trim:Zk,stripBOM:tP,inherits:nP,toFlatObject:rP,kindOf:Kc,kindOfTest:Kn,endsWith:iP,toArray:sP,forEachEntry:aP,matchAll:lP,isHTMLForm:uP,hasOwnProperty:a_,hasOwnProp:a_,reduceDescriptors:rw,freezeMethods:dP,toObjectSet:fP,toCamelCase:cP,noop:pP,toFiniteNumber:mP,findKey:tw,global:us,isContextDefined:nw,ALPHABET:iw,generateString:gP,isSpecCompliantForm:yP,toJSONObject:_P,isAsyncFn:vP,isThenable:wP,setImmediate:sw,asap:EP};function Ce(n,e,t,i,o){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=n,this.name="AxiosError",e&&(this.code=e),t&&(this.config=t),i&&(this.request=i),o&&(this.response=o,this.status=o.status?o.status:null)}H.inherits(Ce,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:H.toJSONObject(this.config),code:this.code,status:this.status}}});const ow=Ce.prototype,aw={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(n=>{aw[n]={value:n}});Object.defineProperties(Ce,aw);Object.defineProperty(ow,"isAxiosError",{value:!0});Ce.from=(n,e,t,i,o,l)=>{const c=Object.create(ow);return H.toFlatObject(n,c,function(m){return m!==Error.prototype},f=>f!=="isAxiosError"),Ce.call(c,n.message,e,t,i,o),c.cause=n,c.name=n.name,l&&Object.assign(c,l),c};const TP=null;function If(n){return H.isPlainObject(n)||H.isArray(n)}function lw(n){return H.endsWith(n,"[]")?n.slice(0,-2):n}function u_(n,e,t){return n?n.concat(e).map(function(o,l){return o=lw(o),!t&&l?"["+o+"]":o}).join(t?".":""):e}function IP(n){return H.isArray(n)&&!n.some(If)}const SP=H.toFlatObject(H,{},null,function(e){return/^is[A-Z]/.test(e)});function Xc(n,e,t){if(!H.isObject(n))throw new TypeError("target must be an object");e=e||new FormData,t=H.toFlatObject(t,{metaTokens:!0,dots:!1,indexes:!1},!1,function(B,D){return!H.isUndefined(D[B])});const i=t.metaTokens,o=t.visitor||v,l=t.dots,c=t.indexes,m=(t.Blob||typeof Blob<"u"&&Blob)&&H.isSpecCompliantForm(e);if(!H.isFunction(o))throw new TypeError("visitor must be a function");function y(j){if(j===null)return"";if(H.isDate(j))return j.toISOString();if(!m&&H.isBlob(j))throw new Ce("Blob is not supported. Use a Buffer instead.");return H.isArrayBuffer(j)||H.isTypedArray(j)?m&&typeof Blob=="function"?new Blob([j]):Buffer.from(j):j}function v(j,B,D){let ee=j;if(j&&!D&&typeof j=="object"){if(H.endsWith(B,"{}"))B=i?B:B.slice(0,-2),j=JSON.stringify(j);else if(H.isArray(j)&&IP(j)||(H.isFileList(j)||H.endsWith(B,"[]"))&&(ee=H.toArray(j)))return B=lw(B),ee.forEach(function(X,ne){!(H.isUndefined(X)||X===null)&&e.append(c===!0?u_([B],ne,l):c===null?B:B+"[]",y(X))}),!1}return If(j)?!0:(e.append(u_(D,B,l),y(j)),!1)}const E=[],S=Object.assign(SP,{defaultVisitor:v,convertValue:y,isVisitable:If});function M(j,B){if(!H.isUndefined(j)){if(E.indexOf(j)!==-1)throw Error("Circular reference detected in "+B.join("."));E.push(j),H.forEach(j,function(ee,W){(!(H.isUndefined(ee)||ee===null)&&o.call(e,ee,H.isString(W)?W.trim():W,B,S))===!0&&M(ee,B?B.concat(W):[W])}),E.pop()}}if(!H.isObject(n))throw new TypeError("data must be an object");return M(n),e}function c_(n){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(n).replace(/[!'()~]|%20|%00/g,function(i){return e[i]})}function Sp(n,e){this._pairs=[],n&&Xc(n,this,e)}const uw=Sp.prototype;uw.append=function(e,t){this._pairs.push([e,t])};uw.toString=function(e){const t=e?function(i){return e.call(this,i,c_)}:c_;return this._pairs.map(function(o){return t(o[0])+"="+t(o[1])},"").join("&")};function AP(n){return encodeURIComponent(n).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function cw(n,e,t){if(!e)return n;const i=t&&t.encode||AP;H.isFunction(t)&&(t={serialize:t});const o=t&&t.serialize;let l;if(o?l=o(e,t):l=H.isURLSearchParams(e)?e.toString():new Sp(e,t).toString(i),l){const c=n.indexOf("#");c!==-1&&(n=n.slice(0,c)),n+=(n.indexOf("?")===-1?"?":"&")+l}return n}class h_{constructor(){this.handlers=[]}use(e,t,i){return this.handlers.push({fulfilled:e,rejected:t,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){H.forEach(this.handlers,function(i){i!==null&&e(i)})}}const hw={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},RP=typeof URLSearchParams<"u"?URLSearchParams:Sp,CP=typeof FormData<"u"?FormData:null,kP=typeof Blob<"u"?Blob:null,PP={isBrowser:!0,classes:{URLSearchParams:RP,FormData:CP,Blob:kP},protocols:["http","https","file","blob","url","data"]},Ap=typeof window<"u"&&typeof document<"u",Sf=typeof navigator=="object"&&navigator||void 0,xP=Ap&&(!Sf||["ReactNative","NativeScript","NS"].indexOf(Sf.product)<0),NP=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",bP=Ap&&window.location.href||"http://localhost",DP=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Ap,hasStandardBrowserEnv:xP,hasStandardBrowserWebWorkerEnv:NP,navigator:Sf,origin:bP},Symbol.toStringTag,{value:"Module"})),qt={...DP,...PP};function OP(n,e){return Xc(n,new qt.classes.URLSearchParams,Object.assign({visitor:function(t,i,o,l){return qt.isNode&&H.isBuffer(t)?(this.append(i,t.toString("base64")),!1):l.defaultVisitor.apply(this,arguments)}},e))}function LP(n){return H.matchAll(/\w+|\[(\w*)]/g,n).map(e=>e[0]==="[]"?"":e[1]||e[0])}function VP(n){const e={},t=Object.keys(n);let i;const o=t.length;let l;for(i=0;i<o;i++)l=t[i],e[l]=n[l];return e}function dw(n){function e(t,i,o,l){let c=t[l++];if(c==="__proto__")return!0;const f=Number.isFinite(+c),m=l>=t.length;return c=!c&&H.isArray(o)?o.length:c,m?(H.hasOwnProp(o,c)?o[c]=[o[c],i]:o[c]=i,!f):((!o[c]||!H.isObject(o[c]))&&(o[c]=[]),e(t,i,o[c],l)&&H.isArray(o[c])&&(o[c]=VP(o[c])),!f)}if(H.isFormData(n)&&H.isFunction(n.entries)){const t={};return H.forEachEntry(n,(i,o)=>{e(LP(i),o,t,0)}),t}return null}function MP(n,e,t){if(H.isString(n))try{return(e||JSON.parse)(n),H.trim(n)}catch(i){if(i.name!=="SyntaxError")throw i}return(0,JSON.stringify)(n)}const _l={transitional:hw,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const i=t.getContentType()||"",o=i.indexOf("application/json")>-1,l=H.isObject(e);if(l&&H.isHTMLForm(e)&&(e=new FormData(e)),H.isFormData(e))return o?JSON.stringify(dw(e)):e;if(H.isArrayBuffer(e)||H.isBuffer(e)||H.isStream(e)||H.isFile(e)||H.isBlob(e)||H.isReadableStream(e))return e;if(H.isArrayBufferView(e))return e.buffer;if(H.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let f;if(l){if(i.indexOf("application/x-www-form-urlencoded")>-1)return OP(e,this.formSerializer).toString();if((f=H.isFileList(e))||i.indexOf("multipart/form-data")>-1){const m=this.env&&this.env.FormData;return Xc(f?{"files[]":e}:e,m&&new m,this.formSerializer)}}return l||o?(t.setContentType("application/json",!1),MP(e)):e}],transformResponse:[function(e){const t=this.transitional||_l.transitional,i=t&&t.forcedJSONParsing,o=this.responseType==="json";if(H.isResponse(e)||H.isReadableStream(e))return e;if(e&&H.isString(e)&&(i&&!this.responseType||o)){const c=!(t&&t.silentJSONParsing)&&o;try{return JSON.parse(e)}catch(f){if(c)throw f.name==="SyntaxError"?Ce.from(f,Ce.ERR_BAD_RESPONSE,this,null,this.response):f}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:qt.classes.FormData,Blob:qt.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};H.forEach(["delete","get","head","post","put","patch"],n=>{_l.headers[n]={}});const FP=H.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),UP=n=>{const e={};let t,i,o;return n&&n.split(`
`).forEach(function(c){o=c.indexOf(":"),t=c.substring(0,o).trim().toLowerCase(),i=c.substring(o+1).trim(),!(!t||e[t]&&FP[t])&&(t==="set-cookie"?e[t]?e[t].push(i):e[t]=[i]:e[t]=e[t]?e[t]+", "+i:i)}),e},d_=Symbol("internals");function La(n){return n&&String(n).trim().toLowerCase()}function Ju(n){return n===!1||n==null?n:H.isArray(n)?n.map(Ju):String(n)}function jP(n){const e=Object.create(null),t=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let i;for(;i=t.exec(n);)e[i[1]]=i[2];return e}const zP=n=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(n.trim());function $d(n,e,t,i,o){if(H.isFunction(i))return i.call(this,e,t);if(o&&(e=t),!!H.isString(e)){if(H.isString(i))return e.indexOf(i)!==-1;if(H.isRegExp(i))return i.test(e)}}function BP(n){return n.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,i)=>t.toUpperCase()+i)}function $P(n,e){const t=H.toCamelCase(" "+e);["get","set","has"].forEach(i=>{Object.defineProperty(n,i+t,{value:function(o,l,c){return this[i].call(this,e,o,l,c)},configurable:!0})})}class un{constructor(e){e&&this.set(e)}set(e,t,i){const o=this;function l(f,m,y){const v=La(m);if(!v)throw new Error("header name must be a non-empty string");const E=H.findKey(o,v);(!E||o[E]===void 0||y===!0||y===void 0&&o[E]!==!1)&&(o[E||m]=Ju(f))}const c=(f,m)=>H.forEach(f,(y,v)=>l(y,v,m));if(H.isPlainObject(e)||e instanceof this.constructor)c(e,t);else if(H.isString(e)&&(e=e.trim())&&!zP(e))c(UP(e),t);else if(H.isHeaders(e))for(const[f,m]of e.entries())l(m,f,i);else e!=null&&l(t,e,i);return this}get(e,t){if(e=La(e),e){const i=H.findKey(this,e);if(i){const o=this[i];if(!t)return o;if(t===!0)return jP(o);if(H.isFunction(t))return t.call(this,o,i);if(H.isRegExp(t))return t.exec(o);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=La(e),e){const i=H.findKey(this,e);return!!(i&&this[i]!==void 0&&(!t||$d(this,this[i],i,t)))}return!1}delete(e,t){const i=this;let o=!1;function l(c){if(c=La(c),c){const f=H.findKey(i,c);f&&(!t||$d(i,i[f],f,t))&&(delete i[f],o=!0)}}return H.isArray(e)?e.forEach(l):l(e),o}clear(e){const t=Object.keys(this);let i=t.length,o=!1;for(;i--;){const l=t[i];(!e||$d(this,this[l],l,e,!0))&&(delete this[l],o=!0)}return o}normalize(e){const t=this,i={};return H.forEach(this,(o,l)=>{const c=H.findKey(i,l);if(c){t[c]=Ju(o),delete t[l];return}const f=e?BP(l):String(l).trim();f!==l&&delete t[l],t[f]=Ju(o),i[f]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return H.forEach(this,(i,o)=>{i!=null&&i!==!1&&(t[o]=e&&H.isArray(i)?i.join(", "):i)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const i=new this(e);return t.forEach(o=>i.set(o)),i}static accessor(e){const i=(this[d_]=this[d_]={accessors:{}}).accessors,o=this.prototype;function l(c){const f=La(c);i[f]||($P(o,c),i[f]=!0)}return H.isArray(e)?e.forEach(l):l(e),this}}un.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);H.reduceDescriptors(un.prototype,({value:n},e)=>{let t=e[0].toUpperCase()+e.slice(1);return{get:()=>n,set(i){this[t]=i}}});H.freezeMethods(un);function qd(n,e){const t=this||_l,i=e||t,o=un.from(i.headers);let l=i.data;return H.forEach(n,function(f){l=f.call(t,l,o.normalize(),e?e.status:void 0)}),o.normalize(),l}function fw(n){return!!(n&&n.__CANCEL__)}function Uo(n,e,t){Ce.call(this,n??"canceled",Ce.ERR_CANCELED,e,t),this.name="CanceledError"}H.inherits(Uo,Ce,{__CANCEL__:!0});function pw(n,e,t){const i=t.config.validateStatus;!t.status||!i||i(t.status)?n(t):e(new Ce("Request failed with status code "+t.status,[Ce.ERR_BAD_REQUEST,Ce.ERR_BAD_RESPONSE][Math.floor(t.status/100)-4],t.config,t.request,t))}function qP(n){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(n);return e&&e[1]||""}function HP(n,e){n=n||10;const t=new Array(n),i=new Array(n);let o=0,l=0,c;return e=e!==void 0?e:1e3,function(m){const y=Date.now(),v=i[l];c||(c=y),t[o]=m,i[o]=y;let E=l,S=0;for(;E!==o;)S+=t[E++],E=E%n;if(o=(o+1)%n,o===l&&(l=(l+1)%n),y-c<e)return;const M=v&&y-v;return M?Math.round(S*1e3/M):void 0}}function WP(n,e){let t=0,i=1e3/e,o,l;const c=(y,v=Date.now())=>{t=v,o=null,l&&(clearTimeout(l),l=null),n.apply(null,y)};return[(...y)=>{const v=Date.now(),E=v-t;E>=i?c(y,v):(o=y,l||(l=setTimeout(()=>{l=null,c(o)},i-E)))},()=>o&&c(o)]}const wc=(n,e,t=3)=>{let i=0;const o=HP(50,250);return WP(l=>{const c=l.loaded,f=l.lengthComputable?l.total:void 0,m=c-i,y=o(m),v=c<=f;i=c;const E={loaded:c,total:f,progress:f?c/f:void 0,bytes:m,rate:y||void 0,estimated:y&&f&&v?(f-c)/y:void 0,event:l,lengthComputable:f!=null,[e?"download":"upload"]:!0};n(E)},t)},f_=(n,e)=>{const t=n!=null;return[i=>e[0]({lengthComputable:t,total:n,loaded:i}),e[1]]},p_=n=>(...e)=>H.asap(()=>n(...e)),KP=qt.hasStandardBrowserEnv?((n,e)=>t=>(t=new URL(t,qt.origin),n.protocol===t.protocol&&n.host===t.host&&(e||n.port===t.port)))(new URL(qt.origin),qt.navigator&&/(msie|trident)/i.test(qt.navigator.userAgent)):()=>!0,GP=qt.hasStandardBrowserEnv?{write(n,e,t,i,o,l){const c=[n+"="+encodeURIComponent(e)];H.isNumber(t)&&c.push("expires="+new Date(t).toGMTString()),H.isString(i)&&c.push("path="+i),H.isString(o)&&c.push("domain="+o),l===!0&&c.push("secure"),document.cookie=c.join("; ")},read(n){const e=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(n){this.write(n,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function QP(n){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(n)}function XP(n,e){return e?n.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):n}function mw(n,e){return n&&!QP(e)?XP(n,e):e}const m_=n=>n instanceof un?{...n}:n;function _s(n,e){e=e||{};const t={};function i(y,v,E,S){return H.isPlainObject(y)&&H.isPlainObject(v)?H.merge.call({caseless:S},y,v):H.isPlainObject(v)?H.merge({},v):H.isArray(v)?v.slice():v}function o(y,v,E,S){if(H.isUndefined(v)){if(!H.isUndefined(y))return i(void 0,y,E,S)}else return i(y,v,E,S)}function l(y,v){if(!H.isUndefined(v))return i(void 0,v)}function c(y,v){if(H.isUndefined(v)){if(!H.isUndefined(y))return i(void 0,y)}else return i(void 0,v)}function f(y,v,E){if(E in e)return i(y,v);if(E in n)return i(void 0,y)}const m={url:l,method:l,data:l,baseURL:c,transformRequest:c,transformResponse:c,paramsSerializer:c,timeout:c,timeoutMessage:c,withCredentials:c,withXSRFToken:c,adapter:c,responseType:c,xsrfCookieName:c,xsrfHeaderName:c,onUploadProgress:c,onDownloadProgress:c,decompress:c,maxContentLength:c,maxBodyLength:c,beforeRedirect:c,transport:c,httpAgent:c,httpsAgent:c,cancelToken:c,socketPath:c,responseEncoding:c,validateStatus:f,headers:(y,v,E)=>o(m_(y),m_(v),E,!0)};return H.forEach(Object.keys(Object.assign({},n,e)),function(v){const E=m[v]||o,S=E(n[v],e[v],v);H.isUndefined(S)&&E!==f||(t[v]=S)}),t}const gw=n=>{const e=_s({},n);let{data:t,withXSRFToken:i,xsrfHeaderName:o,xsrfCookieName:l,headers:c,auth:f}=e;e.headers=c=un.from(c),e.url=cw(mw(e.baseURL,e.url),n.params,n.paramsSerializer),f&&c.set("Authorization","Basic "+btoa((f.username||"")+":"+(f.password?unescape(encodeURIComponent(f.password)):"")));let m;if(H.isFormData(t)){if(qt.hasStandardBrowserEnv||qt.hasStandardBrowserWebWorkerEnv)c.setContentType(void 0);else if((m=c.getContentType())!==!1){const[y,...v]=m?m.split(";").map(E=>E.trim()).filter(Boolean):[];c.setContentType([y||"multipart/form-data",...v].join("; "))}}if(qt.hasStandardBrowserEnv&&(i&&H.isFunction(i)&&(i=i(e)),i||i!==!1&&KP(e.url))){const y=o&&l&&GP.read(l);y&&c.set(o,y)}return e},YP=typeof XMLHttpRequest<"u",JP=YP&&function(n){return new Promise(function(t,i){const o=gw(n);let l=o.data;const c=un.from(o.headers).normalize();let{responseType:f,onUploadProgress:m,onDownloadProgress:y}=o,v,E,S,M,j;function B(){M&&M(),j&&j(),o.cancelToken&&o.cancelToken.unsubscribe(v),o.signal&&o.signal.removeEventListener("abort",v)}let D=new XMLHttpRequest;D.open(o.method.toUpperCase(),o.url,!0),D.timeout=o.timeout;function ee(){if(!D)return;const X=un.from("getAllResponseHeaders"in D&&D.getAllResponseHeaders()),me={data:!f||f==="text"||f==="json"?D.responseText:D.response,status:D.status,statusText:D.statusText,headers:X,config:n,request:D};pw(function(k){t(k),B()},function(k){i(k),B()},me),D=null}"onloadend"in D?D.onloadend=ee:D.onreadystatechange=function(){!D||D.readyState!==4||D.status===0&&!(D.responseURL&&D.responseURL.indexOf("file:")===0)||setTimeout(ee)},D.onabort=function(){D&&(i(new Ce("Request aborted",Ce.ECONNABORTED,n,D)),D=null)},D.onerror=function(){i(new Ce("Network Error",Ce.ERR_NETWORK,n,D)),D=null},D.ontimeout=function(){let ne=o.timeout?"timeout of "+o.timeout+"ms exceeded":"timeout exceeded";const me=o.transitional||hw;o.timeoutErrorMessage&&(ne=o.timeoutErrorMessage),i(new Ce(ne,me.clarifyTimeoutError?Ce.ETIMEDOUT:Ce.ECONNABORTED,n,D)),D=null},l===void 0&&c.setContentType(null),"setRequestHeader"in D&&H.forEach(c.toJSON(),function(ne,me){D.setRequestHeader(me,ne)}),H.isUndefined(o.withCredentials)||(D.withCredentials=!!o.withCredentials),f&&f!=="json"&&(D.responseType=o.responseType),y&&([S,j]=wc(y,!0),D.addEventListener("progress",S)),m&&D.upload&&([E,M]=wc(m),D.upload.addEventListener("progress",E),D.upload.addEventListener("loadend",M)),(o.cancelToken||o.signal)&&(v=X=>{D&&(i(!X||X.type?new Uo(null,n,D):X),D.abort(),D=null)},o.cancelToken&&o.cancelToken.subscribe(v),o.signal&&(o.signal.aborted?v():o.signal.addEventListener("abort",v)));const W=qP(o.url);if(W&&qt.protocols.indexOf(W)===-1){i(new Ce("Unsupported protocol "+W+":",Ce.ERR_BAD_REQUEST,n));return}D.send(l||null)})},ZP=(n,e)=>{const{length:t}=n=n?n.filter(Boolean):[];if(e||t){let i=new AbortController,o;const l=function(y){if(!o){o=!0,f();const v=y instanceof Error?y:this.reason;i.abort(v instanceof Ce?v:new Uo(v instanceof Error?v.message:v))}};let c=e&&setTimeout(()=>{c=null,l(new Ce(`timeout ${e} of ms exceeded`,Ce.ETIMEDOUT))},e);const f=()=>{n&&(c&&clearTimeout(c),c=null,n.forEach(y=>{y.unsubscribe?y.unsubscribe(l):y.removeEventListener("abort",l)}),n=null)};n.forEach(y=>y.addEventListener("abort",l));const{signal:m}=i;return m.unsubscribe=()=>H.asap(f),m}},ex=function*(n,e){let t=n.byteLength;if(t<e){yield n;return}let i=0,o;for(;i<t;)o=i+e,yield n.slice(i,o),i=o},tx=async function*(n,e){for await(const t of nx(n))yield*ex(t,e)},nx=async function*(n){if(n[Symbol.asyncIterator]){yield*n;return}const e=n.getReader();try{for(;;){const{done:t,value:i}=await e.read();if(t)break;yield i}}finally{await e.cancel()}},g_=(n,e,t,i)=>{const o=tx(n,e);let l=0,c,f=m=>{c||(c=!0,i&&i(m))};return new ReadableStream({async pull(m){try{const{done:y,value:v}=await o.next();if(y){f(),m.close();return}let E=v.byteLength;if(t){let S=l+=E;t(S)}m.enqueue(new Uint8Array(v))}catch(y){throw f(y),y}},cancel(m){return f(m),o.return()}},{highWaterMark:2})},Yc=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",yw=Yc&&typeof ReadableStream=="function",rx=Yc&&(typeof TextEncoder=="function"?(n=>e=>n.encode(e))(new TextEncoder):async n=>new Uint8Array(await new Response(n).arrayBuffer())),_w=(n,...e)=>{try{return!!n(...e)}catch{return!1}},ix=yw&&_w(()=>{let n=!1;const e=new Request(qt.origin,{body:new ReadableStream,method:"POST",get duplex(){return n=!0,"half"}}).headers.has("Content-Type");return n&&!e}),y_=64*1024,Af=yw&&_w(()=>H.isReadableStream(new Response("").body)),Ec={stream:Af&&(n=>n.body)};Yc&&(n=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!Ec[e]&&(Ec[e]=H.isFunction(n[e])?t=>t[e]():(t,i)=>{throw new Ce(`Response type '${e}' is not supported`,Ce.ERR_NOT_SUPPORT,i)})})})(new Response);const sx=async n=>{if(n==null)return 0;if(H.isBlob(n))return n.size;if(H.isSpecCompliantForm(n))return(await new Request(qt.origin,{method:"POST",body:n}).arrayBuffer()).byteLength;if(H.isArrayBufferView(n)||H.isArrayBuffer(n))return n.byteLength;if(H.isURLSearchParams(n)&&(n=n+""),H.isString(n))return(await rx(n)).byteLength},ox=async(n,e)=>{const t=H.toFiniteNumber(n.getContentLength());return t??sx(e)},ax=Yc&&(async n=>{let{url:e,method:t,data:i,signal:o,cancelToken:l,timeout:c,onDownloadProgress:f,onUploadProgress:m,responseType:y,headers:v,withCredentials:E="same-origin",fetchOptions:S}=gw(n);y=y?(y+"").toLowerCase():"text";let M=ZP([o,l&&l.toAbortSignal()],c),j;const B=M&&M.unsubscribe&&(()=>{M.unsubscribe()});let D;try{if(m&&ix&&t!=="get"&&t!=="head"&&(D=await ox(v,i))!==0){let me=new Request(e,{method:"POST",body:i,duplex:"half"}),fe;if(H.isFormData(i)&&(fe=me.headers.get("content-type"))&&v.setContentType(fe),me.body){const[k,I]=f_(D,wc(p_(m)));i=g_(me.body,y_,k,I)}}H.isString(E)||(E=E?"include":"omit");const ee="credentials"in Request.prototype;j=new Request(e,{...S,signal:M,method:t.toUpperCase(),headers:v.normalize().toJSON(),body:i,duplex:"half",credentials:ee?E:void 0});let W=await fetch(j);const X=Af&&(y==="stream"||y==="response");if(Af&&(f||X&&B)){const me={};["status","statusText","headers"].forEach(R=>{me[R]=W[R]});const fe=H.toFiniteNumber(W.headers.get("content-length")),[k,I]=f&&f_(fe,wc(p_(f),!0))||[];W=new Response(g_(W.body,y_,k,()=>{I&&I(),B&&B()}),me)}y=y||"text";let ne=await Ec[H.findKey(Ec,y)||"text"](W,n);return!X&&B&&B(),await new Promise((me,fe)=>{pw(me,fe,{data:ne,headers:un.from(W.headers),status:W.status,statusText:W.statusText,config:n,request:j})})}catch(ee){throw B&&B(),ee&&ee.name==="TypeError"&&/fetch/i.test(ee.message)?Object.assign(new Ce("Network Error",Ce.ERR_NETWORK,n,j),{cause:ee.cause||ee}):Ce.from(ee,ee&&ee.code,n,j)}}),Rf={http:TP,xhr:JP,fetch:ax};H.forEach(Rf,(n,e)=>{if(n){try{Object.defineProperty(n,"name",{value:e})}catch{}Object.defineProperty(n,"adapterName",{value:e})}});const __=n=>`- ${n}`,lx=n=>H.isFunction(n)||n===null||n===!1,vw={getAdapter:n=>{n=H.isArray(n)?n:[n];const{length:e}=n;let t,i;const o={};for(let l=0;l<e;l++){t=n[l];let c;if(i=t,!lx(t)&&(i=Rf[(c=String(t)).toLowerCase()],i===void 0))throw new Ce(`Unknown adapter '${c}'`);if(i)break;o[c||"#"+l]=i}if(!i){const l=Object.entries(o).map(([f,m])=>`adapter ${f} `+(m===!1?"is not supported by the environment":"is not available in the build"));let c=e?l.length>1?`since :
`+l.map(__).join(`
`):" "+__(l[0]):"as no adapter specified";throw new Ce("There is no suitable adapter to dispatch the request "+c,"ERR_NOT_SUPPORT")}return i},adapters:Rf};function Hd(n){if(n.cancelToken&&n.cancelToken.throwIfRequested(),n.signal&&n.signal.aborted)throw new Uo(null,n)}function v_(n){return Hd(n),n.headers=un.from(n.headers),n.data=qd.call(n,n.transformRequest),["post","put","patch"].indexOf(n.method)!==-1&&n.headers.setContentType("application/x-www-form-urlencoded",!1),vw.getAdapter(n.adapter||_l.adapter)(n).then(function(i){return Hd(n),i.data=qd.call(n,n.transformResponse,i),i.headers=un.from(i.headers),i},function(i){return fw(i)||(Hd(n),i&&i.response&&(i.response.data=qd.call(n,n.transformResponse,i.response),i.response.headers=un.from(i.response.headers))),Promise.reject(i)})}const ww="1.7.9",Jc={};["object","boolean","number","function","string","symbol"].forEach((n,e)=>{Jc[n]=function(i){return typeof i===n||"a"+(e<1?"n ":" ")+n}});const w_={};Jc.transitional=function(e,t,i){function o(l,c){return"[Axios v"+ww+"] Transitional option '"+l+"'"+c+(i?". "+i:"")}return(l,c,f)=>{if(e===!1)throw new Ce(o(c," has been removed"+(t?" in "+t:"")),Ce.ERR_DEPRECATED);return t&&!w_[c]&&(w_[c]=!0,console.warn(o(c," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(l,c,f):!0}};Jc.spelling=function(e){return(t,i)=>(console.warn(`${i} is likely a misspelling of ${e}`),!0)};function ux(n,e,t){if(typeof n!="object")throw new Ce("options must be an object",Ce.ERR_BAD_OPTION_VALUE);const i=Object.keys(n);let o=i.length;for(;o-- >0;){const l=i[o],c=e[l];if(c){const f=n[l],m=f===void 0||c(f,l,n);if(m!==!0)throw new Ce("option "+l+" must be "+m,Ce.ERR_BAD_OPTION_VALUE);continue}if(t!==!0)throw new Ce("Unknown option "+l,Ce.ERR_BAD_OPTION)}}const Zu={assertOptions:ux,validators:Jc},sr=Zu.validators;class fs{constructor(e){this.defaults=e,this.interceptors={request:new h_,response:new h_}}async request(e,t){try{return await this._request(e,t)}catch(i){if(i instanceof Error){let o={};Error.captureStackTrace?Error.captureStackTrace(o):o=new Error;const l=o.stack?o.stack.replace(/^.+\n/,""):"";try{i.stack?l&&!String(i.stack).endsWith(l.replace(/^.+\n.+\n/,""))&&(i.stack+=`
`+l):i.stack=l}catch{}}throw i}}_request(e,t){typeof e=="string"?(t=t||{},t.url=e):t=e||{},t=_s(this.defaults,t);const{transitional:i,paramsSerializer:o,headers:l}=t;i!==void 0&&Zu.assertOptions(i,{silentJSONParsing:sr.transitional(sr.boolean),forcedJSONParsing:sr.transitional(sr.boolean),clarifyTimeoutError:sr.transitional(sr.boolean)},!1),o!=null&&(H.isFunction(o)?t.paramsSerializer={serialize:o}:Zu.assertOptions(o,{encode:sr.function,serialize:sr.function},!0)),Zu.assertOptions(t,{baseUrl:sr.spelling("baseURL"),withXsrfToken:sr.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let c=l&&H.merge(l.common,l[t.method]);l&&H.forEach(["delete","get","head","post","put","patch","common"],j=>{delete l[j]}),t.headers=un.concat(c,l);const f=[];let m=!0;this.interceptors.request.forEach(function(B){typeof B.runWhen=="function"&&B.runWhen(t)===!1||(m=m&&B.synchronous,f.unshift(B.fulfilled,B.rejected))});const y=[];this.interceptors.response.forEach(function(B){y.push(B.fulfilled,B.rejected)});let v,E=0,S;if(!m){const j=[v_.bind(this),void 0];for(j.unshift.apply(j,f),j.push.apply(j,y),S=j.length,v=Promise.resolve(t);E<S;)v=v.then(j[E++],j[E++]);return v}S=f.length;let M=t;for(E=0;E<S;){const j=f[E++],B=f[E++];try{M=j(M)}catch(D){B.call(this,D);break}}try{v=v_.call(this,M)}catch(j){return Promise.reject(j)}for(E=0,S=y.length;E<S;)v=v.then(y[E++],y[E++]);return v}getUri(e){e=_s(this.defaults,e);const t=mw(e.baseURL,e.url);return cw(t,e.params,e.paramsSerializer)}}H.forEach(["delete","get","head","options"],function(e){fs.prototype[e]=function(t,i){return this.request(_s(i||{},{method:e,url:t,data:(i||{}).data}))}});H.forEach(["post","put","patch"],function(e){function t(i){return function(l,c,f){return this.request(_s(f||{},{method:e,headers:i?{"Content-Type":"multipart/form-data"}:{},url:l,data:c}))}}fs.prototype[e]=t(),fs.prototype[e+"Form"]=t(!0)});class Rp{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(l){t=l});const i=this;this.promise.then(o=>{if(!i._listeners)return;let l=i._listeners.length;for(;l-- >0;)i._listeners[l](o);i._listeners=null}),this.promise.then=o=>{let l;const c=new Promise(f=>{i.subscribe(f),l=f}).then(o);return c.cancel=function(){i.unsubscribe(l)},c},e(function(l,c,f){i.reason||(i.reason=new Uo(l,c,f),t(i.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);t!==-1&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=i=>{e.abort(i)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new Rp(function(o){e=o}),cancel:e}}}function cx(n){return function(t){return n.apply(null,t)}}function hx(n){return H.isObject(n)&&n.isAxiosError===!0}const Cf={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Cf).forEach(([n,e])=>{Cf[e]=n});function Ew(n){const e=new fs(n),t=J0(fs.prototype.request,e);return H.extend(t,fs.prototype,e,{allOwnKeys:!0}),H.extend(t,e,null,{allOwnKeys:!0}),t.create=function(o){return Ew(_s(n,o))},t}const Xe=Ew(_l);Xe.Axios=fs;Xe.CanceledError=Uo;Xe.CancelToken=Rp;Xe.isCancel=fw;Xe.VERSION=ww;Xe.toFormData=Xc;Xe.AxiosError=Ce;Xe.Cancel=Xe.CanceledError;Xe.all=function(e){return Promise.all(e)};Xe.spread=cx;Xe.isAxiosError=hx;Xe.mergeConfig=_s;Xe.AxiosHeaders=un;Xe.formToJSON=n=>dw(H.isHTMLForm(n)?new FormData(n):n);Xe.getAdapter=vw.getAdapter;Xe.HttpStatusCode=Cf;Xe.default=Xe;const dx=({children:n})=>{const{currentUser:e}=$r(),[t,i]=he.useState([]),[o,l]=he.useState(!1),[c,f]=he.useState({query:"",includeAdult:!1,language:"en-US",primaryReleaseYear:"",year:"",region:"",searchType:"multi",excludeIncomplete:!1,page:1}),m=async()=>{var v;if(!c.query)return;const y="https://watchlist-duo-backend.onrender.com/api/search";try{if(!e){Re.error("User not authenticated. Please log in.");return}const E=(v=e==null?void 0:e.stsTokenManager)==null?void 0:v.accessToken;l(!0);let S;c.searchType==="movie"?S=await Xe.get(y,{headers:{Authorization:`Bearer ${E}`,"Content-Type":"application/json"},params:{query:c.query.trim(),includeAdult:c.includeAdult,language:c.language,primaryReleaseYear:c.primaryReleaseYear||void 0,year:c.year||void 0,region:c.region||void 0,searchType:c.searchType,page:c.page}}):c.searchType==="tv"?S=await Xe.get(y,{headers:{Authorization:`Bearer ${E}`,"Content-Type":"application/json"},params:{query:c.query.trim(),includeAdult:c.includeAdult,language:c.language,primaryReleaseYear:c.primaryReleaseYear||void 0,year:c.year||void 0,region:c.region||void 0,searchType:c.searchType,page:c.page}}):c.searchType==="person"?S=await Xe.get(y,{headers:{Authorization:`Bearer ${E}`,"Content-Type":"application/json"},params:{query:c.query.trim(),includeAdult:c.includeAdult,language:c.language,searchType:c.searchType,page:c.page}}):S=await Xe.get(y,{headers:{Authorization:`Bearer ${E}`,"Content-Type":"application/json"},params:{query:c.query.trim(),includeAdult:c.includeAdult,language:c.language,primaryReleaseYear:c.primaryReleaseYear||void 0,year:c.year||void 0,region:c.region||void 0,searchType:c.searchType,page:c.page}}),console.log(S.data.results),i(S.data.results)}catch(E){Re.error("Error fetching results. Please refresh and try again."),console.error("Error fetching results:",E)}finally{l(!1)}};return L.jsx(K0.Provider,{value:{isLoadingSearchResults:o,results:t,searchOptions:c,setSearchOptions:y=>f(v=>({...v,...y})),handleSearch:m},children:n})},fx=({children:n})=>{const{currentUser:e}=$r(),[t,i]=he.useState([]),[o,l]=he.useState(!0),c=async()=>{var f;if(e)try{const m=(f=e==null?void 0:e.stsTokenManager)==null?void 0:f.accessToken,v=await(await fetch("https://watchlist-duo-backend.onrender.com/api/duoPartnerList",{headers:{Authorization:`Bearer ${m}`,"Content-Type":"application/json"}})).json();i(v),l(!1)}catch(m){console.error("Error fetching My List:",m)}};return he.useEffect(()=>{c()},[e]),L.jsx(X0.Provider,{value:{isLoadingDuoPartnerList:o,duoPartnerList:t,setDuoPartnerList:i,refreshDuoPartnerList:c},children:n})},px=({children:n})=>{const{currentUser:e}=$r(),[t,i]=he.useState([]),[o,l]=he.useState(!1),[c,f]=he.useState({language:"en-US",mediaType:"movie",discoverType:"popular",timeWindow:"week",excludeIncomplete:!1,page:1}),m=async()=>{var E;const v=`https://watchlist-duo-backend.onrender.com/api/${{popular:"popular",trending:"trending"}[c.discoverType]}`;try{if(!e){Re.error("User not authenticated. Please log in.");return}const S=(E=e==null?void 0:e.stsTokenManager)==null?void 0:E.accessToken;l(!0);let M;c.mediaType==="movie"?M=await Xe.get(v,{headers:{Authorization:`Bearer ${S}`,"Content-Type":"application/json"},params:{language:c.language,mediaType:c.mediaType,discoverType:c.discoverType,timeWindow:c.timeWindow,page:c.page}}):c.mediaType==="tv"?M=await Xe.get(v,{headers:{Authorization:`Bearer ${S}`,"Content-Type":"application/json"},params:{language:c.language,mediaType:c.mediaType,discoverType:c.discoverType,timeWindow:c.timeWindow,page:c.page}}):M=await Xe.get(v,{headers:{Authorization:`Bearer ${S}`,"Content-Type":"application/json"},params:{language:c.language,mediaType:c.mediaType,discoverType:c.discoverType,timeWindow:c.timeWindow,page:c.page}}),console.log(M.data.results),i(M.data.results)}catch(S){Re.error("Error fetching results. Please refresh and try again."),console.error("Error fetching results:",S)}finally{l(!1)}};return L.jsx(Y0.Provider,{value:{isLoadingDiscoverResults:o,results:t,discoverOptions:c,setDiscoverOptions:y=>f(v=>({...v,...y})),handleSearch:m},children:n})};OE.createRoot(document.getElementById("root")).render(L.jsx(Ue.StrictMode,{children:L.jsx(Lk,{children:L.jsx(Vk,{children:L.jsx(fx,{children:L.jsx(dx,{children:L.jsx(px,{children:L.jsx(Dk,{})})})})})})}));
