var vv=n=>{throw TypeError(n)};var qf=(n,e,t)=>e.has(n)||vv("Cannot "+t);var N=(n,e,t)=>(qf(n,e,"read from private field"),t?t.call(n):e.get(n)),Ie=(n,e,t)=>e.has(n)?vv("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),ce=(n,e,t,i)=>(qf(n,e,"write to private field"),i?i.call(n,t):e.set(n,t),t),be=(n,e,t)=>(qf(n,e,"access private method"),t);var qc=(n,e,t,i)=>({set _(o){ce(n,e,o,t)},get _(){return N(n,e,i)}});(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function t(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(o){if(o.ep)return;o.ep=!0;const l=t(o);fetch(o.href,l)}})();function P0(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Hf={exports:{}},Ul={},Wf={exports:{}},De={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _v;function H1(){if(_v)return De;_v=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),E=Symbol.iterator;function S(j){return j===null||typeof j!="object"?null:(j=E&&j[E]||j["@@iterator"],typeof j=="function"?j:null)}var P={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,V={};function b(j,Y,ve){this.props=j,this.context=Y,this.refs=V,this.updater=ve||P}b.prototype.isReactComponent={},b.prototype.setState=function(j,Y){if(typeof j!="object"&&typeof j!="function"&&j!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,j,Y,"setState")},b.prototype.forceUpdate=function(j){this.updater.enqueueForceUpdate(this,j,"forceUpdate")};function G(){}G.prototype=b.prototype;function Q(j,Y,ve){this.props=j,this.context=Y,this.refs=V,this.updater=ve||P}var K=Q.prototype=new G;K.constructor=Q,x(K,b.prototype),K.isPureReactComponent=!0;var te=Array.isArray,oe=Object.prototype.hasOwnProperty,ae={current:null},C={key:!0,ref:!0,__self:!0,__source:!0};function I(j,Y,ve){var Ne,Oe={},je=null,Ke=null;if(Y!=null)for(Ne in Y.ref!==void 0&&(Ke=Y.ref),Y.key!==void 0&&(je=""+Y.key),Y)oe.call(Y,Ne)&&!C.hasOwnProperty(Ne)&&(Oe[Ne]=Y[Ne]);var Qe=arguments.length-2;if(Qe===1)Oe.children=ve;else if(1<Qe){for(var Ze=Array(Qe),bt=0;bt<Qe;bt++)Ze[bt]=arguments[bt+2];Oe.children=Ze}if(j&&j.defaultProps)for(Ne in Qe=j.defaultProps,Qe)Oe[Ne]===void 0&&(Oe[Ne]=Qe[Ne]);return{$$typeof:n,type:j,key:je,ref:Ke,props:Oe,_owner:ae.current}}function R(j,Y){return{$$typeof:n,type:j.type,key:Y,ref:j.ref,props:j.props,_owner:j._owner}}function O(j){return typeof j=="object"&&j!==null&&j.$$typeof===n}function L(j){var Y={"=":"=0",":":"=2"};return"$"+j.replace(/[=:]/g,function(ve){return Y[ve]})}var F=/\/+/g;function k(j,Y){return typeof j=="object"&&j!==null&&j.key!=null?L(""+j.key):Y.toString(36)}function at(j,Y,ve,Ne,Oe){var je=typeof j;(je==="undefined"||je==="boolean")&&(j=null);var Ke=!1;if(j===null)Ke=!0;else switch(je){case"string":case"number":Ke=!0;break;case"object":switch(j.$$typeof){case n:case e:Ke=!0}}if(Ke)return Ke=j,Oe=Oe(Ke),j=Ne===""?"."+k(Ke,0):Ne,te(Oe)?(ve="",j!=null&&(ve=j.replace(F,"$&/")+"/"),at(Oe,Y,ve,"",function(bt){return bt})):Oe!=null&&(O(Oe)&&(Oe=R(Oe,ve+(!Oe.key||Ke&&Ke.key===Oe.key?"":(""+Oe.key).replace(F,"$&/")+"/")+j)),Y.push(Oe)),1;if(Ke=0,Ne=Ne===""?".":Ne+":",te(j))for(var Qe=0;Qe<j.length;Qe++){je=j[Qe];var Ze=Ne+k(je,Qe);Ke+=at(je,Y,ve,Ze,Oe)}else if(Ze=S(j),typeof Ze=="function")for(j=Ze.call(j),Qe=0;!(je=j.next()).done;)je=je.value,Ze=Ne+k(je,Qe++),Ke+=at(je,Y,ve,Ze,Oe);else if(je==="object")throw Y=String(j),Error("Objects are not valid as a React child (found: "+(Y==="[object Object]"?"object with keys {"+Object.keys(j).join(", ")+"}":Y)+"). If you meant to render a collection of children, use an array instead.");return Ke}function Et(j,Y,ve){if(j==null)return j;var Ne=[],Oe=0;return at(j,Ne,"","",function(je){return Y.call(ve,je,Oe++)}),Ne}function Tt(j){if(j._status===-1){var Y=j._result;Y=Y(),Y.then(function(ve){(j._status===0||j._status===-1)&&(j._status=1,j._result=ve)},function(ve){(j._status===0||j._status===-1)&&(j._status=2,j._result=ve)}),j._status===-1&&(j._status=0,j._result=Y)}if(j._status===1)return j._result.default;throw j._result}var He={current:null},ie={transition:null},we={ReactCurrentDispatcher:He,ReactCurrentBatchConfig:ie,ReactCurrentOwner:ae};function he(){throw Error("act(...) is not supported in production builds of React.")}return De.Children={map:Et,forEach:function(j,Y,ve){Et(j,function(){Y.apply(this,arguments)},ve)},count:function(j){var Y=0;return Et(j,function(){Y++}),Y},toArray:function(j){return Et(j,function(Y){return Y})||[]},only:function(j){if(!O(j))throw Error("React.Children.only expected to receive a single React element child.");return j}},De.Component=b,De.Fragment=t,De.Profiler=o,De.PureComponent=Q,De.StrictMode=i,De.Suspense=p,De.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=we,De.act=he,De.cloneElement=function(j,Y,ve){if(j==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+j+".");var Ne=x({},j.props),Oe=j.key,je=j.ref,Ke=j._owner;if(Y!=null){if(Y.ref!==void 0&&(je=Y.ref,Ke=ae.current),Y.key!==void 0&&(Oe=""+Y.key),j.type&&j.type.defaultProps)var Qe=j.type.defaultProps;for(Ze in Y)oe.call(Y,Ze)&&!C.hasOwnProperty(Ze)&&(Ne[Ze]=Y[Ze]===void 0&&Qe!==void 0?Qe[Ze]:Y[Ze])}var Ze=arguments.length-2;if(Ze===1)Ne.children=ve;else if(1<Ze){Qe=Array(Ze);for(var bt=0;bt<Ze;bt++)Qe[bt]=arguments[bt+2];Ne.children=Qe}return{$$typeof:n,type:j.type,key:Oe,ref:je,props:Ne,_owner:Ke}},De.createContext=function(j){return j={$$typeof:c,_currentValue:j,_currentValue2:j,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},j.Provider={$$typeof:l,_context:j},j.Consumer=j},De.createElement=I,De.createFactory=function(j){var Y=I.bind(null,j);return Y.type=j,Y},De.createRef=function(){return{current:null}},De.forwardRef=function(j){return{$$typeof:d,render:j}},De.isValidElement=O,De.lazy=function(j){return{$$typeof:_,_payload:{_status:-1,_result:j},_init:Tt}},De.memo=function(j,Y){return{$$typeof:y,type:j,compare:Y===void 0?null:Y}},De.startTransition=function(j){var Y=ie.transition;ie.transition={};try{j()}finally{ie.transition=Y}},De.unstable_act=he,De.useCallback=function(j,Y){return He.current.useCallback(j,Y)},De.useContext=function(j){return He.current.useContext(j)},De.useDebugValue=function(){},De.useDeferredValue=function(j){return He.current.useDeferredValue(j)},De.useEffect=function(j,Y){return He.current.useEffect(j,Y)},De.useId=function(){return He.current.useId()},De.useImperativeHandle=function(j,Y,ve){return He.current.useImperativeHandle(j,Y,ve)},De.useInsertionEffect=function(j,Y){return He.current.useInsertionEffect(j,Y)},De.useLayoutEffect=function(j,Y){return He.current.useLayoutEffect(j,Y)},De.useMemo=function(j,Y){return He.current.useMemo(j,Y)},De.useReducer=function(j,Y,ve){return He.current.useReducer(j,Y,ve)},De.useRef=function(j){return He.current.useRef(j)},De.useState=function(j){return He.current.useState(j)},De.useSyncExternalStore=function(j,Y,ve){return He.current.useSyncExternalStore(j,Y,ve)},De.useTransition=function(){return He.current.useTransition()},De.version="18.3.1",De}var wv;function am(){return wv||(wv=1,Wf.exports=H1()),Wf.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ev;function W1(){if(Ev)return Ul;Ev=1;var n=am(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,o=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(d,p,y){var _,E={},S=null,P=null;y!==void 0&&(S=""+y),p.key!==void 0&&(S=""+p.key),p.ref!==void 0&&(P=p.ref);for(_ in p)i.call(p,_)&&!l.hasOwnProperty(_)&&(E[_]=p[_]);if(d&&d.defaultProps)for(_ in p=d.defaultProps,p)E[_]===void 0&&(E[_]=p[_]);return{$$typeof:e,type:d,key:S,ref:P,props:E,_owner:o.current}}return Ul.Fragment=t,Ul.jsx=c,Ul.jsxs=c,Ul}var Tv;function K1(){return Tv||(Tv=1,Hf.exports=W1()),Hf.exports}var U=K1(),le=am();const qe=P0(le);var Hc={},Kf={exports:{}},gn={},Qf={exports:{}},Gf={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Iv;function Q1(){return Iv||(Iv=1,function(n){function e(ie,we){var he=ie.length;ie.push(we);e:for(;0<he;){var j=he-1>>>1,Y=ie[j];if(0<o(Y,we))ie[j]=we,ie[he]=Y,he=j;else break e}}function t(ie){return ie.length===0?null:ie[0]}function i(ie){if(ie.length===0)return null;var we=ie[0],he=ie.pop();if(he!==we){ie[0]=he;e:for(var j=0,Y=ie.length,ve=Y>>>1;j<ve;){var Ne=2*(j+1)-1,Oe=ie[Ne],je=Ne+1,Ke=ie[je];if(0>o(Oe,he))je<Y&&0>o(Ke,Oe)?(ie[j]=Ke,ie[je]=he,j=je):(ie[j]=Oe,ie[Ne]=he,j=Ne);else if(je<Y&&0>o(Ke,he))ie[j]=Ke,ie[je]=he,j=je;else break e}}return we}function o(ie,we){var he=ie.sortIndex-we.sortIndex;return he!==0?he:ie.id-we.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var c=Date,d=c.now();n.unstable_now=function(){return c.now()-d}}var p=[],y=[],_=1,E=null,S=3,P=!1,x=!1,V=!1,b=typeof setTimeout=="function"?setTimeout:null,G=typeof clearTimeout=="function"?clearTimeout:null,Q=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function K(ie){for(var we=t(y);we!==null;){if(we.callback===null)i(y);else if(we.startTime<=ie)i(y),we.sortIndex=we.expirationTime,e(p,we);else break;we=t(y)}}function te(ie){if(V=!1,K(ie),!x)if(t(p)!==null)x=!0,Tt(oe);else{var we=t(y);we!==null&&He(te,we.startTime-ie)}}function oe(ie,we){x=!1,V&&(V=!1,G(I),I=-1),P=!0;var he=S;try{for(K(we),E=t(p);E!==null&&(!(E.expirationTime>we)||ie&&!L());){var j=E.callback;if(typeof j=="function"){E.callback=null,S=E.priorityLevel;var Y=j(E.expirationTime<=we);we=n.unstable_now(),typeof Y=="function"?E.callback=Y:E===t(p)&&i(p),K(we)}else i(p);E=t(p)}if(E!==null)var ve=!0;else{var Ne=t(y);Ne!==null&&He(te,Ne.startTime-we),ve=!1}return ve}finally{E=null,S=he,P=!1}}var ae=!1,C=null,I=-1,R=5,O=-1;function L(){return!(n.unstable_now()-O<R)}function F(){if(C!==null){var ie=n.unstable_now();O=ie;var we=!0;try{we=C(!0,ie)}finally{we?k():(ae=!1,C=null)}}else ae=!1}var k;if(typeof Q=="function")k=function(){Q(F)};else if(typeof MessageChannel<"u"){var at=new MessageChannel,Et=at.port2;at.port1.onmessage=F,k=function(){Et.postMessage(null)}}else k=function(){b(F,0)};function Tt(ie){C=ie,ae||(ae=!0,k())}function He(ie,we){I=b(function(){ie(n.unstable_now())},we)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(ie){ie.callback=null},n.unstable_continueExecution=function(){x||P||(x=!0,Tt(oe))},n.unstable_forceFrameRate=function(ie){0>ie||125<ie?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<ie?Math.floor(1e3/ie):5},n.unstable_getCurrentPriorityLevel=function(){return S},n.unstable_getFirstCallbackNode=function(){return t(p)},n.unstable_next=function(ie){switch(S){case 1:case 2:case 3:var we=3;break;default:we=S}var he=S;S=we;try{return ie()}finally{S=he}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(ie,we){switch(ie){case 1:case 2:case 3:case 4:case 5:break;default:ie=3}var he=S;S=ie;try{return we()}finally{S=he}},n.unstable_scheduleCallback=function(ie,we,he){var j=n.unstable_now();switch(typeof he=="object"&&he!==null?(he=he.delay,he=typeof he=="number"&&0<he?j+he:j):he=j,ie){case 1:var Y=-1;break;case 2:Y=250;break;case 5:Y=1073741823;break;case 4:Y=1e4;break;default:Y=5e3}return Y=he+Y,ie={id:_++,callback:we,priorityLevel:ie,startTime:he,expirationTime:Y,sortIndex:-1},he>j?(ie.sortIndex=he,e(y,ie),t(p)===null&&ie===t(y)&&(V?(G(I),I=-1):V=!0,He(te,he-j))):(ie.sortIndex=Y,e(p,ie),x||P||(x=!0,Tt(oe))),ie},n.unstable_shouldYield=L,n.unstable_wrapCallback=function(ie){var we=S;return function(){var he=S;S=we;try{return ie.apply(this,arguments)}finally{S=he}}}}(Gf)),Gf}var Sv;function G1(){return Sv||(Sv=1,Qf.exports=Q1()),Qf.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rv;function X1(){if(Rv)return gn;Rv=1;var n=am(),e=G1();function t(r){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+r,a=1;a<arguments.length;a++)s+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+r+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,o={};function l(r,s){c(r,s),c(r+"Capture",s)}function c(r,s){for(o[r]=s,r=0;r<s.length;r++)i.add(s[r])}var d=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),p=Object.prototype.hasOwnProperty,y=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,_={},E={};function S(r){return p.call(E,r)?!0:p.call(_,r)?!1:y.test(r)?E[r]=!0:(_[r]=!0,!1)}function P(r,s,a,h){if(a!==null&&a.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return h?!1:a!==null?!a.acceptsBooleans:(r=r.toLowerCase().slice(0,5),r!=="data-"&&r!=="aria-");default:return!1}}function x(r,s,a,h){if(s===null||typeof s>"u"||P(r,s,a,h))return!0;if(h)return!1;if(a!==null)switch(a.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function V(r,s,a,h,f,g,w){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=h,this.attributeNamespace=f,this.mustUseProperty=a,this.propertyName=r,this.type=s,this.sanitizeURL=g,this.removeEmptyString=w}var b={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(r){b[r]=new V(r,0,!1,r,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(r){var s=r[0];b[s]=new V(s,1,!1,r[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(r){b[r]=new V(r,2,!1,r.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(r){b[r]=new V(r,2,!1,r,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(r){b[r]=new V(r,3,!1,r.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(r){b[r]=new V(r,3,!0,r,null,!1,!1)}),["capture","download"].forEach(function(r){b[r]=new V(r,4,!1,r,null,!1,!1)}),["cols","rows","size","span"].forEach(function(r){b[r]=new V(r,6,!1,r,null,!1,!1)}),["rowSpan","start"].forEach(function(r){b[r]=new V(r,5,!1,r.toLowerCase(),null,!1,!1)});var G=/[\-:]([a-z])/g;function Q(r){return r[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(r){var s=r.replace(G,Q);b[s]=new V(s,1,!1,r,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(r){var s=r.replace(G,Q);b[s]=new V(s,1,!1,r,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(r){var s=r.replace(G,Q);b[s]=new V(s,1,!1,r,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(r){b[r]=new V(r,1,!1,r.toLowerCase(),null,!1,!1)}),b.xlinkHref=new V("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(r){b[r]=new V(r,1,!1,r.toLowerCase(),null,!0,!0)});function K(r,s,a,h){var f=b.hasOwnProperty(s)?b[s]:null;(f!==null?f.type!==0:h||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(x(s,a,f,h)&&(a=null),h||f===null?S(s)&&(a===null?r.removeAttribute(s):r.setAttribute(s,""+a)):f.mustUseProperty?r[f.propertyName]=a===null?f.type===3?!1:"":a:(s=f.attributeName,h=f.attributeNamespace,a===null?r.removeAttribute(s):(f=f.type,a=f===3||f===4&&a===!0?"":""+a,h?r.setAttributeNS(h,s,a):r.setAttribute(s,a))))}var te=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,oe=Symbol.for("react.element"),ae=Symbol.for("react.portal"),C=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),R=Symbol.for("react.profiler"),O=Symbol.for("react.provider"),L=Symbol.for("react.context"),F=Symbol.for("react.forward_ref"),k=Symbol.for("react.suspense"),at=Symbol.for("react.suspense_list"),Et=Symbol.for("react.memo"),Tt=Symbol.for("react.lazy"),He=Symbol.for("react.offscreen"),ie=Symbol.iterator;function we(r){return r===null||typeof r!="object"?null:(r=ie&&r[ie]||r["@@iterator"],typeof r=="function"?r:null)}var he=Object.assign,j;function Y(r){if(j===void 0)try{throw Error()}catch(a){var s=a.stack.trim().match(/\n( *(at )?)/);j=s&&s[1]||""}return`
`+j+r}var ve=!1;function Ne(r,s){if(!r||ve)return"";ve=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(q){var h=q}Reflect.construct(r,[],s)}else{try{s.call()}catch(q){h=q}r.call(s.prototype)}else{try{throw Error()}catch(q){h=q}r()}}catch(q){if(q&&h&&typeof q.stack=="string"){for(var f=q.stack.split(`
`),g=h.stack.split(`
`),w=f.length-1,A=g.length-1;1<=w&&0<=A&&f[w]!==g[A];)A--;for(;1<=w&&0<=A;w--,A--)if(f[w]!==g[A]){if(w!==1||A!==1)do if(w--,A--,0>A||f[w]!==g[A]){var D=`
`+f[w].replace(" at new "," at ");return r.displayName&&D.includes("<anonymous>")&&(D=D.replace("<anonymous>",r.displayName)),D}while(1<=w&&0<=A);break}}}finally{ve=!1,Error.prepareStackTrace=a}return(r=r?r.displayName||r.name:"")?Y(r):""}function Oe(r){switch(r.tag){case 5:return Y(r.type);case 16:return Y("Lazy");case 13:return Y("Suspense");case 19:return Y("SuspenseList");case 0:case 2:case 15:return r=Ne(r.type,!1),r;case 11:return r=Ne(r.type.render,!1),r;case 1:return r=Ne(r.type,!0),r;default:return""}}function je(r){if(r==null)return null;if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case C:return"Fragment";case ae:return"Portal";case R:return"Profiler";case I:return"StrictMode";case k:return"Suspense";case at:return"SuspenseList"}if(typeof r=="object")switch(r.$$typeof){case L:return(r.displayName||"Context")+".Consumer";case O:return(r._context.displayName||"Context")+".Provider";case F:var s=r.render;return r=r.displayName,r||(r=s.displayName||s.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case Et:return s=r.displayName||null,s!==null?s:je(r.type)||"Memo";case Tt:s=r._payload,r=r._init;try{return je(r(s))}catch{}}return null}function Ke(r){var s=r.type;switch(r.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return r=s.render,r=r.displayName||r.name||"",s.displayName||(r!==""?"ForwardRef("+r+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return je(s);case 8:return s===I?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function Qe(r){switch(typeof r){case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function Ze(r){var s=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function bt(r){var s=Ze(r)?"checked":"value",a=Object.getOwnPropertyDescriptor(r.constructor.prototype,s),h=""+r[s];if(!r.hasOwnProperty(s)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var f=a.get,g=a.set;return Object.defineProperty(r,s,{configurable:!0,get:function(){return f.call(this)},set:function(w){h=""+w,g.call(this,w)}}),Object.defineProperty(r,s,{enumerable:a.enumerable}),{getValue:function(){return h},setValue:function(w){h=""+w},stopTracking:function(){r._valueTracker=null,delete r[s]}}}}function Or(r){r._valueTracker||(r._valueTracker=bt(r))}function fo(r){if(!r)return!1;var s=r._valueTracker;if(!s)return!0;var a=s.getValue(),h="";return r&&(h=Ze(r)?r.checked?"true":"false":r.value),r=h,r!==a?(s.setValue(r),!0):!1}function mi(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}function ps(r,s){var a=s.checked;return he({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??r._wrapperState.initialChecked})}function po(r,s){var a=s.defaultValue==null?"":s.defaultValue,h=s.checked!=null?s.checked:s.defaultChecked;a=Qe(s.value!=null?s.value:a),r._wrapperState={initialChecked:h,initialValue:a,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function Ha(r,s){s=s.checked,s!=null&&K(r,"checked",s,!1)}function Wa(r,s){Ha(r,s);var a=Qe(s.value),h=s.type;if(a!=null)h==="number"?(a===0&&r.value===""||r.value!=a)&&(r.value=""+a):r.value!==""+a&&(r.value=""+a);else if(h==="submit"||h==="reset"){r.removeAttribute("value");return}s.hasOwnProperty("value")?mo(r,s.type,a):s.hasOwnProperty("defaultValue")&&mo(r,s.type,Qe(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(r.defaultChecked=!!s.defaultChecked)}function ku(r,s,a){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var h=s.type;if(!(h!=="submit"&&h!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+r._wrapperState.initialValue,a||s===r.value||(r.value=s),r.defaultValue=s}a=r.name,a!==""&&(r.name=""),r.defaultChecked=!!r._wrapperState.initialChecked,a!==""&&(r.name=a)}function mo(r,s,a){(s!=="number"||mi(r.ownerDocument)!==r)&&(a==null?r.defaultValue=""+r._wrapperState.initialValue:r.defaultValue!==""+a&&(r.defaultValue=""+a))}var Dr=Array.isArray;function Lr(r,s,a,h){if(r=r.options,s){s={};for(var f=0;f<a.length;f++)s["$"+a[f]]=!0;for(a=0;a<r.length;a++)f=s.hasOwnProperty("$"+r[a].value),r[a].selected!==f&&(r[a].selected=f),f&&h&&(r[a].defaultSelected=!0)}else{for(a=""+Qe(a),s=null,f=0;f<r.length;f++){if(r[f].value===a){r[f].selected=!0,h&&(r[f].defaultSelected=!0);return}s!==null||r[f].disabled||(s=r[f])}s!==null&&(s.selected=!0)}}function Ka(r,s){if(s.dangerouslySetInnerHTML!=null)throw Error(t(91));return he({},s,{value:void 0,defaultValue:void 0,children:""+r._wrapperState.initialValue})}function go(r,s){var a=s.value;if(a==null){if(a=s.children,s=s.defaultValue,a!=null){if(s!=null)throw Error(t(92));if(Dr(a)){if(1<a.length)throw Error(t(93));a=a[0]}s=a}s==null&&(s=""),a=s}r._wrapperState={initialValue:Qe(a)}}function yo(r,s){var a=Qe(s.value),h=Qe(s.defaultValue);a!=null&&(a=""+a,a!==r.value&&(r.value=a),s.defaultValue==null&&r.defaultValue!==a&&(r.defaultValue=a)),h!=null&&(r.defaultValue=""+h)}function Qa(r){var s=r.textContent;s===r._wrapperState.initialValue&&s!==""&&s!==null&&(r.value=s)}function It(r){switch(r){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function St(r,s){return r==null||r==="http://www.w3.org/1999/xhtml"?It(s):r==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":r}var Vr,Ga=function(r){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,a,h,f){MSApp.execUnsafeLocalFunction(function(){return r(s,a,h,f)})}:r}(function(r,s){if(r.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in r)r.innerHTML=s;else{for(Vr=Vr||document.createElement("div"),Vr.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=Vr.firstChild;r.firstChild;)r.removeChild(r.firstChild);for(;s.firstChild;)r.appendChild(s.firstChild)}});function gi(r,s){if(s){var a=r.firstChild;if(a&&a===r.lastChild&&a.nodeType===3){a.nodeValue=s;return}}r.textContent=s}var ms={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},gs=["Webkit","ms","Moz","O"];Object.keys(ms).forEach(function(r){gs.forEach(function(s){s=s+r.charAt(0).toUpperCase()+r.substring(1),ms[s]=ms[r]})});function Xa(r,s,a){return s==null||typeof s=="boolean"||s===""?"":a||typeof s!="number"||s===0||ms.hasOwnProperty(r)&&ms[r]?(""+s).trim():s+"px"}function Ja(r,s){r=r.style;for(var a in s)if(s.hasOwnProperty(a)){var h=a.indexOf("--")===0,f=Xa(a,s[a],h);a==="float"&&(a="cssFloat"),h?r.setProperty(a,f):r[a]=f}}var Ya=he({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Za(r,s){if(s){if(Ya[r]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(t(137,r));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(t(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(t(61))}if(s.style!=null&&typeof s.style!="object")throw Error(t(62))}}function el(r,s){if(r.indexOf("-")===-1)return typeof s.is=="string";switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ys=null;function vo(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var _o=null,Nn=null,dr=null;function wo(r){if(r=Sl(r)){if(typeof _o!="function")throw Error(t(280));var s=r.stateNode;s&&(s=sc(s),_o(r.stateNode,r.type,s))}}function fr(r){Nn?dr?dr.push(r):dr=[r]:Nn=r}function tl(){if(Nn){var r=Nn,s=dr;if(dr=Nn=null,wo(r),s)for(r=0;r<s.length;r++)wo(s[r])}}function vs(r,s){return r(s)}function nl(){}var Mr=!1;function rl(r,s,a){if(Mr)return r(s,a);Mr=!0;try{return vs(r,s,a)}finally{Mr=!1,(Nn!==null||dr!==null)&&(nl(),tl())}}function ft(r,s){var a=r.stateNode;if(a===null)return null;var h=sc(a);if(h===null)return null;a=h[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(r=r.type,h=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!h;break e;default:r=!1}if(r)return null;if(a&&typeof a!="function")throw Error(t(231,s,typeof a));return a}var Eo=!1;if(d)try{var Hn={};Object.defineProperty(Hn,"passive",{get:function(){Eo=!0}}),window.addEventListener("test",Hn,Hn),window.removeEventListener("test",Hn,Hn)}catch{Eo=!1}function _s(r,s,a,h,f,g,w,A,D){var q=Array.prototype.slice.call(arguments,3);try{s.apply(a,q)}catch(ee){this.onError(ee)}}var ws=!1,To=null,Wn=!1,il=null,yd={onError:function(r){ws=!0,To=r}};function Io(r,s,a,h,f,g,w,A,D){ws=!1,To=null,_s.apply(yd,arguments)}function xu(r,s,a,h,f,g,w,A,D){if(Io.apply(this,arguments),ws){if(ws){var q=To;ws=!1,To=null}else throw Error(t(198));Wn||(Wn=!0,il=q)}}function Kn(r){var s=r,a=r;if(r.alternate)for(;s.return;)s=s.return;else{r=s;do s=r,s.flags&4098&&(a=s.return),r=s.return;while(r)}return s.tag===3?a:null}function Es(r){if(r.tag===13){var s=r.memoizedState;if(s===null&&(r=r.alternate,r!==null&&(s=r.memoizedState)),s!==null)return s.dehydrated}return null}function Qn(r){if(Kn(r)!==r)throw Error(t(188))}function bu(r){var s=r.alternate;if(!s){if(s=Kn(r),s===null)throw Error(t(188));return s!==r?null:r}for(var a=r,h=s;;){var f=a.return;if(f===null)break;var g=f.alternate;if(g===null){if(h=f.return,h!==null){a=h;continue}break}if(f.child===g.child){for(g=f.child;g;){if(g===a)return Qn(f),r;if(g===h)return Qn(f),s;g=g.sibling}throw Error(t(188))}if(a.return!==h.return)a=f,h=g;else{for(var w=!1,A=f.child;A;){if(A===a){w=!0,a=f,h=g;break}if(A===h){w=!0,h=f,a=g;break}A=A.sibling}if(!w){for(A=g.child;A;){if(A===a){w=!0,a=g,h=f;break}if(A===h){w=!0,h=g,a=f;break}A=A.sibling}if(!w)throw Error(t(189))}}if(a.alternate!==h)throw Error(t(190))}if(a.tag!==3)throw Error(t(188));return a.stateNode.current===a?r:s}function sl(r){return r=bu(r),r!==null?So(r):null}function So(r){if(r.tag===5||r.tag===6)return r;for(r=r.child;r!==null;){var s=So(r);if(s!==null)return s;r=r.sibling}return null}var Ro=e.unstable_scheduleCallback,ol=e.unstable_cancelCallback,Nu=e.unstable_shouldYield,vd=e.unstable_requestPaint,et=e.unstable_now,Ou=e.unstable_getCurrentPriorityLevel,Ts=e.unstable_ImmediatePriority,yi=e.unstable_UserBlockingPriority,On=e.unstable_NormalPriority,al=e.unstable_LowPriority,Du=e.unstable_IdlePriority,Is=null,In=null;function Lu(r){if(In&&typeof In.onCommitFiberRoot=="function")try{In.onCommitFiberRoot(Is,r,void 0,(r.current.flags&128)===128)}catch{}}var tn=Math.clz32?Math.clz32:Mu,ll=Math.log,Vu=Math.LN2;function Mu(r){return r>>>=0,r===0?32:31-(ll(r)/Vu|0)|0}var Ao=64,Co=4194304;function vi(r){switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return r&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return r}}function Ss(r,s){var a=r.pendingLanes;if(a===0)return 0;var h=0,f=r.suspendedLanes,g=r.pingedLanes,w=a&268435455;if(w!==0){var A=w&~f;A!==0?h=vi(A):(g&=w,g!==0&&(h=vi(g)))}else w=a&~f,w!==0?h=vi(w):g!==0&&(h=vi(g));if(h===0)return 0;if(s!==0&&s!==h&&!(s&f)&&(f=h&-h,g=s&-s,f>=g||f===16&&(g&4194240)!==0))return s;if(h&4&&(h|=a&16),s=r.entangledLanes,s!==0)for(r=r.entanglements,s&=h;0<s;)a=31-tn(s),f=1<<a,h|=r[a],s&=~f;return h}function _d(r,s){switch(r){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Fr(r,s){for(var a=r.suspendedLanes,h=r.pingedLanes,f=r.expirationTimes,g=r.pendingLanes;0<g;){var w=31-tn(g),A=1<<w,D=f[w];D===-1?(!(A&a)||A&h)&&(f[w]=_d(A,s)):D<=s&&(r.expiredLanes|=A),g&=~A}}function Sn(r){return r=r.pendingLanes&-1073741825,r!==0?r:r&1073741824?1073741824:0}function Rs(){var r=Ao;return Ao<<=1,!(Ao&4194240)&&(Ao=64),r}function _i(r){for(var s=[],a=0;31>a;a++)s.push(r);return s}function wi(r,s,a){r.pendingLanes|=s,s!==536870912&&(r.suspendedLanes=0,r.pingedLanes=0),r=r.eventTimes,s=31-tn(s),r[s]=a}function Ye(r,s){var a=r.pendingLanes&~s;r.pendingLanes=s,r.suspendedLanes=0,r.pingedLanes=0,r.expiredLanes&=s,r.mutableReadLanes&=s,r.entangledLanes&=s,s=r.entanglements;var h=r.eventTimes;for(r=r.expirationTimes;0<a;){var f=31-tn(a),g=1<<f;s[f]=0,h[f]=-1,r[f]=-1,a&=~g}}function Ei(r,s){var a=r.entangledLanes|=s;for(r=r.entanglements;a;){var h=31-tn(a),f=1<<h;f&s|r[h]&s&&(r[h]|=s),a&=~f}}var Me=0;function Ti(r){return r&=-r,1<r?4<r?r&268435455?16:536870912:4:1}var Fu,Po,Uu,ju,zu,ul=!1,pr=[],Ft=null,Gn=null,Xn=null,Ii=new Map,Dn=new Map,mr=[],wd="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Bu(r,s){switch(r){case"focusin":case"focusout":Ft=null;break;case"dragenter":case"dragleave":Gn=null;break;case"mouseover":case"mouseout":Xn=null;break;case"pointerover":case"pointerout":Ii.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Dn.delete(s.pointerId)}}function un(r,s,a,h,f,g){return r===null||r.nativeEvent!==g?(r={blockedOn:s,domEventName:a,eventSystemFlags:h,nativeEvent:g,targetContainers:[f]},s!==null&&(s=Sl(s),s!==null&&Po(s)),r):(r.eventSystemFlags|=h,s=r.targetContainers,f!==null&&s.indexOf(f)===-1&&s.push(f),r)}function Ed(r,s,a,h,f){switch(s){case"focusin":return Ft=un(Ft,r,s,a,h,f),!0;case"dragenter":return Gn=un(Gn,r,s,a,h,f),!0;case"mouseover":return Xn=un(Xn,r,s,a,h,f),!0;case"pointerover":var g=f.pointerId;return Ii.set(g,un(Ii.get(g)||null,r,s,a,h,f)),!0;case"gotpointercapture":return g=f.pointerId,Dn.set(g,un(Dn.get(g)||null,r,s,a,h,f)),!0}return!1}function $u(r){var s=xs(r.target);if(s!==null){var a=Kn(s);if(a!==null){if(s=a.tag,s===13){if(s=Es(a),s!==null){r.blockedOn=s,zu(r.priority,function(){Uu(a)});return}}else if(s===3&&a.stateNode.current.memoizedState.isDehydrated){r.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}r.blockedOn=null}function Ur(r){if(r.blockedOn!==null)return!1;for(var s=r.targetContainers;0<s.length;){var a=ko(r.domEventName,r.eventSystemFlags,s[0],r.nativeEvent);if(a===null){a=r.nativeEvent;var h=new a.constructor(a.type,a);ys=h,a.target.dispatchEvent(h),ys=null}else return s=Sl(a),s!==null&&Po(s),r.blockedOn=a,!1;s.shift()}return!0}function As(r,s,a){Ur(r)&&a.delete(s)}function qu(){ul=!1,Ft!==null&&Ur(Ft)&&(Ft=null),Gn!==null&&Ur(Gn)&&(Gn=null),Xn!==null&&Ur(Xn)&&(Xn=null),Ii.forEach(As),Dn.forEach(As)}function Jn(r,s){r.blockedOn===s&&(r.blockedOn=null,ul||(ul=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,qu)))}function Yn(r){function s(f){return Jn(f,r)}if(0<pr.length){Jn(pr[0],r);for(var a=1;a<pr.length;a++){var h=pr[a];h.blockedOn===r&&(h.blockedOn=null)}}for(Ft!==null&&Jn(Ft,r),Gn!==null&&Jn(Gn,r),Xn!==null&&Jn(Xn,r),Ii.forEach(s),Dn.forEach(s),a=0;a<mr.length;a++)h=mr[a],h.blockedOn===r&&(h.blockedOn=null);for(;0<mr.length&&(a=mr[0],a.blockedOn===null);)$u(a),a.blockedOn===null&&mr.shift()}var jr=te.ReactCurrentBatchConfig,Si=!0;function st(r,s,a,h){var f=Me,g=jr.transition;jr.transition=null;try{Me=1,cl(r,s,a,h)}finally{Me=f,jr.transition=g}}function Td(r,s,a,h){var f=Me,g=jr.transition;jr.transition=null;try{Me=4,cl(r,s,a,h)}finally{Me=f,jr.transition=g}}function cl(r,s,a,h){if(Si){var f=ko(r,s,a,h);if(f===null)Od(r,s,h,Cs,a),Bu(r,h);else if(Ed(f,r,s,a,h))h.stopPropagation();else if(Bu(r,h),s&4&&-1<wd.indexOf(r)){for(;f!==null;){var g=Sl(f);if(g!==null&&Fu(g),g=ko(r,s,a,h),g===null&&Od(r,s,h,Cs,a),g===f)break;f=g}f!==null&&h.stopPropagation()}else Od(r,s,h,null,a)}}var Cs=null;function ko(r,s,a,h){if(Cs=null,r=vo(h),r=xs(r),r!==null)if(s=Kn(r),s===null)r=null;else if(a=s.tag,a===13){if(r=Es(s),r!==null)return r;r=null}else if(a===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;r=null}else s!==r&&(r=null);return Cs=r,null}function hl(r){switch(r){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ou()){case Ts:return 1;case yi:return 4;case On:case al:return 16;case Du:return 536870912;default:return 16}default:return 16}}var Rn=null,xo=null,cn=null;function dl(){if(cn)return cn;var r,s=xo,a=s.length,h,f="value"in Rn?Rn.value:Rn.textContent,g=f.length;for(r=0;r<a&&s[r]===f[r];r++);var w=a-r;for(h=1;h<=w&&s[a-h]===f[g-h];h++);return cn=f.slice(r,1<h?1-h:void 0)}function bo(r){var s=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&s===13&&(r=13)):r=s,r===10&&(r=13),32<=r||r===13?r:0}function gr(){return!0}function fl(){return!1}function Ut(r){function s(a,h,f,g,w){this._reactName=a,this._targetInst=f,this.type=h,this.nativeEvent=g,this.target=w,this.currentTarget=null;for(var A in r)r.hasOwnProperty(A)&&(a=r[A],this[A]=a?a(g):g[A]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?gr:fl,this.isPropagationStopped=fl,this}return he(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=gr)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=gr)},persist:function(){},isPersistent:gr}),s}var Zn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},No=Ut(Zn),yr=he({},Zn,{view:0,detail:0}),Id=Ut(yr),Oo,zr,Ri,Ps=he({},yr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:vr,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==Ri&&(Ri&&r.type==="mousemove"?(Oo=r.screenX-Ri.screenX,zr=r.screenY-Ri.screenY):zr=Oo=0,Ri=r),Oo)},movementY:function(r){return"movementY"in r?r.movementY:zr}}),Do=Ut(Ps),pl=he({},Ps,{dataTransfer:0}),Hu=Ut(pl),Lo=he({},yr,{relatedTarget:0}),Vo=Ut(Lo),Wu=he({},Zn,{animationName:0,elapsedTime:0,pseudoElement:0}),Br=Ut(Wu),Ku=he({},Zn,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),Qu=Ut(Ku),Gu=he({},Zn,{data:0}),ml=Ut(Gu),Mo={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},nn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Xu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ju(r){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(r):(r=Xu[r])?!!s[r]:!1}function vr(){return Ju}var u=he({},yr,{key:function(r){if(r.key){var s=Mo[r.key]||r.key;if(s!=="Unidentified")return s}return r.type==="keypress"?(r=bo(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?nn[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:vr,charCode:function(r){return r.type==="keypress"?bo(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?bo(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),m=Ut(u),v=he({},Ps,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),T=Ut(v),z=he({},yr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:vr}),H=Ut(z),se=he({},Zn,{propertyName:0,elapsedTime:0,pseudoElement:0}),Je=Ut(se),Rt=he({},Ps,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),ze=Ut(Rt),Nt=[9,13,27,32],yt=d&&"CompositionEvent"in window,Ln=null;d&&"documentMode"in document&&(Ln=document.documentMode);var An=d&&"TextEvent"in window&&!Ln,ks=d&&(!yt||Ln&&8<Ln&&11>=Ln),Fo=" ",dg=!1;function fg(r,s){switch(r){case"keyup":return Nt.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function pg(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var Uo=!1;function BT(r,s){switch(r){case"compositionend":return pg(s);case"keypress":return s.which!==32?null:(dg=!0,Fo);case"textInput":return r=s.data,r===Fo&&dg?null:r;default:return null}}function $T(r,s){if(Uo)return r==="compositionend"||!yt&&fg(r,s)?(r=dl(),cn=xo=Rn=null,Uo=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return ks&&s.locale!=="ko"?null:s.data;default:return null}}var qT={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function mg(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s==="input"?!!qT[r.type]:s==="textarea"}function gg(r,s,a,h){fr(h),s=nc(s,"onChange"),0<s.length&&(a=new No("onChange","change",null,a,h),r.push({event:a,listeners:s}))}var gl=null,yl=null;function HT(r){Dg(r,0)}function Yu(r){var s=qo(r);if(fo(s))return r}function WT(r,s){if(r==="change")return s}var yg=!1;if(d){var Sd;if(d){var Rd="oninput"in document;if(!Rd){var vg=document.createElement("div");vg.setAttribute("oninput","return;"),Rd=typeof vg.oninput=="function"}Sd=Rd}else Sd=!1;yg=Sd&&(!document.documentMode||9<document.documentMode)}function _g(){gl&&(gl.detachEvent("onpropertychange",wg),yl=gl=null)}function wg(r){if(r.propertyName==="value"&&Yu(yl)){var s=[];gg(s,yl,r,vo(r)),rl(HT,s)}}function KT(r,s,a){r==="focusin"?(_g(),gl=s,yl=a,gl.attachEvent("onpropertychange",wg)):r==="focusout"&&_g()}function QT(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return Yu(yl)}function GT(r,s){if(r==="click")return Yu(s)}function XT(r,s){if(r==="input"||r==="change")return Yu(s)}function JT(r,s){return r===s&&(r!==0||1/r===1/s)||r!==r&&s!==s}var er=typeof Object.is=="function"?Object.is:JT;function vl(r,s){if(er(r,s))return!0;if(typeof r!="object"||r===null||typeof s!="object"||s===null)return!1;var a=Object.keys(r),h=Object.keys(s);if(a.length!==h.length)return!1;for(h=0;h<a.length;h++){var f=a[h];if(!p.call(s,f)||!er(r[f],s[f]))return!1}return!0}function Eg(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function Tg(r,s){var a=Eg(r);r=0;for(var h;a;){if(a.nodeType===3){if(h=r+a.textContent.length,r<=s&&h>=s)return{node:a,offset:s-r};r=h}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Eg(a)}}function Ig(r,s){return r&&s?r===s?!0:r&&r.nodeType===3?!1:s&&s.nodeType===3?Ig(r,s.parentNode):"contains"in r?r.contains(s):r.compareDocumentPosition?!!(r.compareDocumentPosition(s)&16):!1:!1}function Sg(){for(var r=window,s=mi();s instanceof r.HTMLIFrameElement;){try{var a=typeof s.contentWindow.location.href=="string"}catch{a=!1}if(a)r=s.contentWindow;else break;s=mi(r.document)}return s}function Ad(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s&&(s==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||s==="textarea"||r.contentEditable==="true")}function YT(r){var s=Sg(),a=r.focusedElem,h=r.selectionRange;if(s!==a&&a&&a.ownerDocument&&Ig(a.ownerDocument.documentElement,a)){if(h!==null&&Ad(a)){if(s=h.start,r=h.end,r===void 0&&(r=s),"selectionStart"in a)a.selectionStart=s,a.selectionEnd=Math.min(r,a.value.length);else if(r=(s=a.ownerDocument||document)&&s.defaultView||window,r.getSelection){r=r.getSelection();var f=a.textContent.length,g=Math.min(h.start,f);h=h.end===void 0?g:Math.min(h.end,f),!r.extend&&g>h&&(f=h,h=g,g=f),f=Tg(a,g);var w=Tg(a,h);f&&w&&(r.rangeCount!==1||r.anchorNode!==f.node||r.anchorOffset!==f.offset||r.focusNode!==w.node||r.focusOffset!==w.offset)&&(s=s.createRange(),s.setStart(f.node,f.offset),r.removeAllRanges(),g>h?(r.addRange(s),r.extend(w.node,w.offset)):(s.setEnd(w.node,w.offset),r.addRange(s)))}}for(s=[],r=a;r=r.parentNode;)r.nodeType===1&&s.push({element:r,left:r.scrollLeft,top:r.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<s.length;a++)r=s[a],r.element.scrollLeft=r.left,r.element.scrollTop=r.top}}var ZT=d&&"documentMode"in document&&11>=document.documentMode,jo=null,Cd=null,_l=null,Pd=!1;function Rg(r,s,a){var h=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Pd||jo==null||jo!==mi(h)||(h=jo,"selectionStart"in h&&Ad(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),_l&&vl(_l,h)||(_l=h,h=nc(Cd,"onSelect"),0<h.length&&(s=new No("onSelect","select",null,s,a),r.push({event:s,listeners:h}),s.target=jo)))}function Zu(r,s){var a={};return a[r.toLowerCase()]=s.toLowerCase(),a["Webkit"+r]="webkit"+s,a["Moz"+r]="moz"+s,a}var zo={animationend:Zu("Animation","AnimationEnd"),animationiteration:Zu("Animation","AnimationIteration"),animationstart:Zu("Animation","AnimationStart"),transitionend:Zu("Transition","TransitionEnd")},kd={},Ag={};d&&(Ag=document.createElement("div").style,"AnimationEvent"in window||(delete zo.animationend.animation,delete zo.animationiteration.animation,delete zo.animationstart.animation),"TransitionEvent"in window||delete zo.transitionend.transition);function ec(r){if(kd[r])return kd[r];if(!zo[r])return r;var s=zo[r],a;for(a in s)if(s.hasOwnProperty(a)&&a in Ag)return kd[r]=s[a];return r}var Cg=ec("animationend"),Pg=ec("animationiteration"),kg=ec("animationstart"),xg=ec("transitionend"),bg=new Map,Ng="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ai(r,s){bg.set(r,s),l(s,[r])}for(var xd=0;xd<Ng.length;xd++){var bd=Ng[xd],e1=bd.toLowerCase(),t1=bd[0].toUpperCase()+bd.slice(1);Ai(e1,"on"+t1)}Ai(Cg,"onAnimationEnd"),Ai(Pg,"onAnimationIteration"),Ai(kg,"onAnimationStart"),Ai("dblclick","onDoubleClick"),Ai("focusin","onFocus"),Ai("focusout","onBlur"),Ai(xg,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var wl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),n1=new Set("cancel close invalid load scroll toggle".split(" ").concat(wl));function Og(r,s,a){var h=r.type||"unknown-event";r.currentTarget=a,xu(h,s,void 0,r),r.currentTarget=null}function Dg(r,s){s=(s&4)!==0;for(var a=0;a<r.length;a++){var h=r[a],f=h.event;h=h.listeners;e:{var g=void 0;if(s)for(var w=h.length-1;0<=w;w--){var A=h[w],D=A.instance,q=A.currentTarget;if(A=A.listener,D!==g&&f.isPropagationStopped())break e;Og(f,A,q),g=D}else for(w=0;w<h.length;w++){if(A=h[w],D=A.instance,q=A.currentTarget,A=A.listener,D!==g&&f.isPropagationStopped())break e;Og(f,A,q),g=D}}}if(Wn)throw r=il,Wn=!1,il=null,r}function nt(r,s){var a=s[Ud];a===void 0&&(a=s[Ud]=new Set);var h=r+"__bubble";a.has(h)||(Lg(s,r,2,!1),a.add(h))}function Nd(r,s,a){var h=0;s&&(h|=4),Lg(a,r,h,s)}var tc="_reactListening"+Math.random().toString(36).slice(2);function El(r){if(!r[tc]){r[tc]=!0,i.forEach(function(a){a!=="selectionchange"&&(n1.has(a)||Nd(a,!1,r),Nd(a,!0,r))});var s=r.nodeType===9?r:r.ownerDocument;s===null||s[tc]||(s[tc]=!0,Nd("selectionchange",!1,s))}}function Lg(r,s,a,h){switch(hl(s)){case 1:var f=st;break;case 4:f=Td;break;default:f=cl}a=f.bind(null,s,a,r),f=void 0,!Eo||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(f=!0),h?f!==void 0?r.addEventListener(s,a,{capture:!0,passive:f}):r.addEventListener(s,a,!0):f!==void 0?r.addEventListener(s,a,{passive:f}):r.addEventListener(s,a,!1)}function Od(r,s,a,h,f){var g=h;if(!(s&1)&&!(s&2)&&h!==null)e:for(;;){if(h===null)return;var w=h.tag;if(w===3||w===4){var A=h.stateNode.containerInfo;if(A===f||A.nodeType===8&&A.parentNode===f)break;if(w===4)for(w=h.return;w!==null;){var D=w.tag;if((D===3||D===4)&&(D=w.stateNode.containerInfo,D===f||D.nodeType===8&&D.parentNode===f))return;w=w.return}for(;A!==null;){if(w=xs(A),w===null)return;if(D=w.tag,D===5||D===6){h=g=w;continue e}A=A.parentNode}}h=h.return}rl(function(){var q=g,ee=vo(a),ne=[];e:{var Z=bg.get(r);if(Z!==void 0){var ue=No,me=r;switch(r){case"keypress":if(bo(a)===0)break e;case"keydown":case"keyup":ue=m;break;case"focusin":me="focus",ue=Vo;break;case"focusout":me="blur",ue=Vo;break;case"beforeblur":case"afterblur":ue=Vo;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ue=Do;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ue=Hu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ue=H;break;case Cg:case Pg:case kg:ue=Br;break;case xg:ue=Je;break;case"scroll":ue=Id;break;case"wheel":ue=ze;break;case"copy":case"cut":case"paste":ue=Qu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ue=T}var ge=(s&4)!==0,pt=!ge&&r==="scroll",B=ge?Z!==null?Z+"Capture":null:Z;ge=[];for(var M=q,$;M!==null;){$=M;var re=$.stateNode;if($.tag===5&&re!==null&&($=re,B!==null&&(re=ft(M,B),re!=null&&ge.push(Tl(M,re,$)))),pt)break;M=M.return}0<ge.length&&(Z=new ue(Z,me,null,a,ee),ne.push({event:Z,listeners:ge}))}}if(!(s&7)){e:{if(Z=r==="mouseover"||r==="pointerover",ue=r==="mouseout"||r==="pointerout",Z&&a!==ys&&(me=a.relatedTarget||a.fromElement)&&(xs(me)||me[$r]))break e;if((ue||Z)&&(Z=ee.window===ee?ee:(Z=ee.ownerDocument)?Z.defaultView||Z.parentWindow:window,ue?(me=a.relatedTarget||a.toElement,ue=q,me=me?xs(me):null,me!==null&&(pt=Kn(me),me!==pt||me.tag!==5&&me.tag!==6)&&(me=null)):(ue=null,me=q),ue!==me)){if(ge=Do,re="onMouseLeave",B="onMouseEnter",M="mouse",(r==="pointerout"||r==="pointerover")&&(ge=T,re="onPointerLeave",B="onPointerEnter",M="pointer"),pt=ue==null?Z:qo(ue),$=me==null?Z:qo(me),Z=new ge(re,M+"leave",ue,a,ee),Z.target=pt,Z.relatedTarget=$,re=null,xs(ee)===q&&(ge=new ge(B,M+"enter",me,a,ee),ge.target=$,ge.relatedTarget=pt,re=ge),pt=re,ue&&me)t:{for(ge=ue,B=me,M=0,$=ge;$;$=Bo($))M++;for($=0,re=B;re;re=Bo(re))$++;for(;0<M-$;)ge=Bo(ge),M--;for(;0<$-M;)B=Bo(B),$--;for(;M--;){if(ge===B||B!==null&&ge===B.alternate)break t;ge=Bo(ge),B=Bo(B)}ge=null}else ge=null;ue!==null&&Vg(ne,Z,ue,ge,!1),me!==null&&pt!==null&&Vg(ne,pt,me,ge,!0)}}e:{if(Z=q?qo(q):window,ue=Z.nodeName&&Z.nodeName.toLowerCase(),ue==="select"||ue==="input"&&Z.type==="file")var ye=WT;else if(mg(Z))if(yg)ye=XT;else{ye=QT;var Ee=KT}else(ue=Z.nodeName)&&ue.toLowerCase()==="input"&&(Z.type==="checkbox"||Z.type==="radio")&&(ye=GT);if(ye&&(ye=ye(r,q))){gg(ne,ye,a,ee);break e}Ee&&Ee(r,Z,q),r==="focusout"&&(Ee=Z._wrapperState)&&Ee.controlled&&Z.type==="number"&&mo(Z,"number",Z.value)}switch(Ee=q?qo(q):window,r){case"focusin":(mg(Ee)||Ee.contentEditable==="true")&&(jo=Ee,Cd=q,_l=null);break;case"focusout":_l=Cd=jo=null;break;case"mousedown":Pd=!0;break;case"contextmenu":case"mouseup":case"dragend":Pd=!1,Rg(ne,a,ee);break;case"selectionchange":if(ZT)break;case"keydown":case"keyup":Rg(ne,a,ee)}var Te;if(yt)e:{switch(r){case"compositionstart":var Se="onCompositionStart";break e;case"compositionend":Se="onCompositionEnd";break e;case"compositionupdate":Se="onCompositionUpdate";break e}Se=void 0}else Uo?fg(r,a)&&(Se="onCompositionEnd"):r==="keydown"&&a.keyCode===229&&(Se="onCompositionStart");Se&&(ks&&a.locale!=="ko"&&(Uo||Se!=="onCompositionStart"?Se==="onCompositionEnd"&&Uo&&(Te=dl()):(Rn=ee,xo="value"in Rn?Rn.value:Rn.textContent,Uo=!0)),Ee=nc(q,Se),0<Ee.length&&(Se=new ml(Se,r,null,a,ee),ne.push({event:Se,listeners:Ee}),Te?Se.data=Te:(Te=pg(a),Te!==null&&(Se.data=Te)))),(Te=An?BT(r,a):$T(r,a))&&(q=nc(q,"onBeforeInput"),0<q.length&&(ee=new ml("onBeforeInput","beforeinput",null,a,ee),ne.push({event:ee,listeners:q}),ee.data=Te))}Dg(ne,s)})}function Tl(r,s,a){return{instance:r,listener:s,currentTarget:a}}function nc(r,s){for(var a=s+"Capture",h=[];r!==null;){var f=r,g=f.stateNode;f.tag===5&&g!==null&&(f=g,g=ft(r,a),g!=null&&h.unshift(Tl(r,g,f)),g=ft(r,s),g!=null&&h.push(Tl(r,g,f))),r=r.return}return h}function Bo(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5);return r||null}function Vg(r,s,a,h,f){for(var g=s._reactName,w=[];a!==null&&a!==h;){var A=a,D=A.alternate,q=A.stateNode;if(D!==null&&D===h)break;A.tag===5&&q!==null&&(A=q,f?(D=ft(a,g),D!=null&&w.unshift(Tl(a,D,A))):f||(D=ft(a,g),D!=null&&w.push(Tl(a,D,A)))),a=a.return}w.length!==0&&r.push({event:s,listeners:w})}var r1=/\r\n?/g,i1=/\u0000|\uFFFD/g;function Mg(r){return(typeof r=="string"?r:""+r).replace(r1,`
`).replace(i1,"")}function rc(r,s,a){if(s=Mg(s),Mg(r)!==s&&a)throw Error(t(425))}function ic(){}var Dd=null,Ld=null;function Vd(r,s){return r==="textarea"||r==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Md=typeof setTimeout=="function"?setTimeout:void 0,s1=typeof clearTimeout=="function"?clearTimeout:void 0,Fg=typeof Promise=="function"?Promise:void 0,o1=typeof queueMicrotask=="function"?queueMicrotask:typeof Fg<"u"?function(r){return Fg.resolve(null).then(r).catch(a1)}:Md;function a1(r){setTimeout(function(){throw r})}function Fd(r,s){var a=s,h=0;do{var f=a.nextSibling;if(r.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"){if(h===0){r.removeChild(f),Yn(s);return}h--}else a!=="$"&&a!=="$?"&&a!=="$!"||h++;a=f}while(a);Yn(s)}function Ci(r){for(;r!=null;r=r.nextSibling){var s=r.nodeType;if(s===1||s===3)break;if(s===8){if(s=r.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return r}function Ug(r){r=r.previousSibling;for(var s=0;r;){if(r.nodeType===8){var a=r.data;if(a==="$"||a==="$!"||a==="$?"){if(s===0)return r;s--}else a==="/$"&&s++}r=r.previousSibling}return null}var $o=Math.random().toString(36).slice(2),_r="__reactFiber$"+$o,Il="__reactProps$"+$o,$r="__reactContainer$"+$o,Ud="__reactEvents$"+$o,l1="__reactListeners$"+$o,u1="__reactHandles$"+$o;function xs(r){var s=r[_r];if(s)return s;for(var a=r.parentNode;a;){if(s=a[$r]||a[_r]){if(a=s.alternate,s.child!==null||a!==null&&a.child!==null)for(r=Ug(r);r!==null;){if(a=r[_r])return a;r=Ug(r)}return s}r=a,a=r.parentNode}return null}function Sl(r){return r=r[_r]||r[$r],!r||r.tag!==5&&r.tag!==6&&r.tag!==13&&r.tag!==3?null:r}function qo(r){if(r.tag===5||r.tag===6)return r.stateNode;throw Error(t(33))}function sc(r){return r[Il]||null}var jd=[],Ho=-1;function Pi(r){return{current:r}}function rt(r){0>Ho||(r.current=jd[Ho],jd[Ho]=null,Ho--)}function tt(r,s){Ho++,jd[Ho]=r.current,r.current=s}var ki={},Ht=Pi(ki),hn=Pi(!1),bs=ki;function Wo(r,s){var a=r.type.contextTypes;if(!a)return ki;var h=r.stateNode;if(h&&h.__reactInternalMemoizedUnmaskedChildContext===s)return h.__reactInternalMemoizedMaskedChildContext;var f={},g;for(g in a)f[g]=s[g];return h&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=s,r.__reactInternalMemoizedMaskedChildContext=f),f}function dn(r){return r=r.childContextTypes,r!=null}function oc(){rt(hn),rt(Ht)}function jg(r,s,a){if(Ht.current!==ki)throw Error(t(168));tt(Ht,s),tt(hn,a)}function zg(r,s,a){var h=r.stateNode;if(s=s.childContextTypes,typeof h.getChildContext!="function")return a;h=h.getChildContext();for(var f in h)if(!(f in s))throw Error(t(108,Ke(r)||"Unknown",f));return he({},a,h)}function ac(r){return r=(r=r.stateNode)&&r.__reactInternalMemoizedMergedChildContext||ki,bs=Ht.current,tt(Ht,r),tt(hn,hn.current),!0}function Bg(r,s,a){var h=r.stateNode;if(!h)throw Error(t(169));a?(r=zg(r,s,bs),h.__reactInternalMemoizedMergedChildContext=r,rt(hn),rt(Ht),tt(Ht,r)):rt(hn),tt(hn,a)}var qr=null,lc=!1,zd=!1;function $g(r){qr===null?qr=[r]:qr.push(r)}function c1(r){lc=!0,$g(r)}function xi(){if(!zd&&qr!==null){zd=!0;var r=0,s=Me;try{var a=qr;for(Me=1;r<a.length;r++){var h=a[r];do h=h(!0);while(h!==null)}qr=null,lc=!1}catch(f){throw qr!==null&&(qr=qr.slice(r+1)),Ro(Ts,xi),f}finally{Me=s,zd=!1}}return null}var Ko=[],Qo=0,uc=null,cc=0,Vn=[],Mn=0,Ns=null,Hr=1,Wr="";function Os(r,s){Ko[Qo++]=cc,Ko[Qo++]=uc,uc=r,cc=s}function qg(r,s,a){Vn[Mn++]=Hr,Vn[Mn++]=Wr,Vn[Mn++]=Ns,Ns=r;var h=Hr;r=Wr;var f=32-tn(h)-1;h&=~(1<<f),a+=1;var g=32-tn(s)+f;if(30<g){var w=f-f%5;g=(h&(1<<w)-1).toString(32),h>>=w,f-=w,Hr=1<<32-tn(s)+f|a<<f|h,Wr=g+r}else Hr=1<<g|a<<f|h,Wr=r}function Bd(r){r.return!==null&&(Os(r,1),qg(r,1,0))}function $d(r){for(;r===uc;)uc=Ko[--Qo],Ko[Qo]=null,cc=Ko[--Qo],Ko[Qo]=null;for(;r===Ns;)Ns=Vn[--Mn],Vn[Mn]=null,Wr=Vn[--Mn],Vn[Mn]=null,Hr=Vn[--Mn],Vn[Mn]=null}var Cn=null,Pn=null,ot=!1,tr=null;function Hg(r,s){var a=zn(5,null,null,0);a.elementType="DELETED",a.stateNode=s,a.return=r,s=r.deletions,s===null?(r.deletions=[a],r.flags|=16):s.push(a)}function Wg(r,s){switch(r.tag){case 5:var a=r.type;return s=s.nodeType!==1||a.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(r.stateNode=s,Cn=r,Pn=Ci(s.firstChild),!0):!1;case 6:return s=r.pendingProps===""||s.nodeType!==3?null:s,s!==null?(r.stateNode=s,Cn=r,Pn=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(a=Ns!==null?{id:Hr,overflow:Wr}:null,r.memoizedState={dehydrated:s,treeContext:a,retryLane:1073741824},a=zn(18,null,null,0),a.stateNode=s,a.return=r,r.child=a,Cn=r,Pn=null,!0):!1;default:return!1}}function qd(r){return(r.mode&1)!==0&&(r.flags&128)===0}function Hd(r){if(ot){var s=Pn;if(s){var a=s;if(!Wg(r,s)){if(qd(r))throw Error(t(418));s=Ci(a.nextSibling);var h=Cn;s&&Wg(r,s)?Hg(h,a):(r.flags=r.flags&-4097|2,ot=!1,Cn=r)}}else{if(qd(r))throw Error(t(418));r.flags=r.flags&-4097|2,ot=!1,Cn=r}}}function Kg(r){for(r=r.return;r!==null&&r.tag!==5&&r.tag!==3&&r.tag!==13;)r=r.return;Cn=r}function hc(r){if(r!==Cn)return!1;if(!ot)return Kg(r),ot=!0,!1;var s;if((s=r.tag!==3)&&!(s=r.tag!==5)&&(s=r.type,s=s!=="head"&&s!=="body"&&!Vd(r.type,r.memoizedProps)),s&&(s=Pn)){if(qd(r))throw Qg(),Error(t(418));for(;s;)Hg(r,s),s=Ci(s.nextSibling)}if(Kg(r),r.tag===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(t(317));e:{for(r=r.nextSibling,s=0;r;){if(r.nodeType===8){var a=r.data;if(a==="/$"){if(s===0){Pn=Ci(r.nextSibling);break e}s--}else a!=="$"&&a!=="$!"&&a!=="$?"||s++}r=r.nextSibling}Pn=null}}else Pn=Cn?Ci(r.stateNode.nextSibling):null;return!0}function Qg(){for(var r=Pn;r;)r=Ci(r.nextSibling)}function Go(){Pn=Cn=null,ot=!1}function Wd(r){tr===null?tr=[r]:tr.push(r)}var h1=te.ReactCurrentBatchConfig;function Rl(r,s,a){if(r=a.ref,r!==null&&typeof r!="function"&&typeof r!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(t(309));var h=a.stateNode}if(!h)throw Error(t(147,r));var f=h,g=""+r;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===g?s.ref:(s=function(w){var A=f.refs;w===null?delete A[g]:A[g]=w},s._stringRef=g,s)}if(typeof r!="string")throw Error(t(284));if(!a._owner)throw Error(t(290,r))}return r}function dc(r,s){throw r=Object.prototype.toString.call(s),Error(t(31,r==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":r))}function Gg(r){var s=r._init;return s(r._payload)}function Xg(r){function s(B,M){if(r){var $=B.deletions;$===null?(B.deletions=[M],B.flags|=16):$.push(M)}}function a(B,M){if(!r)return null;for(;M!==null;)s(B,M),M=M.sibling;return null}function h(B,M){for(B=new Map;M!==null;)M.key!==null?B.set(M.key,M):B.set(M.index,M),M=M.sibling;return B}function f(B,M){return B=Fi(B,M),B.index=0,B.sibling=null,B}function g(B,M,$){return B.index=$,r?($=B.alternate,$!==null?($=$.index,$<M?(B.flags|=2,M):$):(B.flags|=2,M)):(B.flags|=1048576,M)}function w(B){return r&&B.alternate===null&&(B.flags|=2),B}function A(B,M,$,re){return M===null||M.tag!==6?(M=Ff($,B.mode,re),M.return=B,M):(M=f(M,$),M.return=B,M)}function D(B,M,$,re){var ye=$.type;return ye===C?ee(B,M,$.props.children,re,$.key):M!==null&&(M.elementType===ye||typeof ye=="object"&&ye!==null&&ye.$$typeof===Tt&&Gg(ye)===M.type)?(re=f(M,$.props),re.ref=Rl(B,M,$),re.return=B,re):(re=Vc($.type,$.key,$.props,null,B.mode,re),re.ref=Rl(B,M,$),re.return=B,re)}function q(B,M,$,re){return M===null||M.tag!==4||M.stateNode.containerInfo!==$.containerInfo||M.stateNode.implementation!==$.implementation?(M=Uf($,B.mode,re),M.return=B,M):(M=f(M,$.children||[]),M.return=B,M)}function ee(B,M,$,re,ye){return M===null||M.tag!==7?(M=zs($,B.mode,re,ye),M.return=B,M):(M=f(M,$),M.return=B,M)}function ne(B,M,$){if(typeof M=="string"&&M!==""||typeof M=="number")return M=Ff(""+M,B.mode,$),M.return=B,M;if(typeof M=="object"&&M!==null){switch(M.$$typeof){case oe:return $=Vc(M.type,M.key,M.props,null,B.mode,$),$.ref=Rl(B,null,M),$.return=B,$;case ae:return M=Uf(M,B.mode,$),M.return=B,M;case Tt:var re=M._init;return ne(B,re(M._payload),$)}if(Dr(M)||we(M))return M=zs(M,B.mode,$,null),M.return=B,M;dc(B,M)}return null}function Z(B,M,$,re){var ye=M!==null?M.key:null;if(typeof $=="string"&&$!==""||typeof $=="number")return ye!==null?null:A(B,M,""+$,re);if(typeof $=="object"&&$!==null){switch($.$$typeof){case oe:return $.key===ye?D(B,M,$,re):null;case ae:return $.key===ye?q(B,M,$,re):null;case Tt:return ye=$._init,Z(B,M,ye($._payload),re)}if(Dr($)||we($))return ye!==null?null:ee(B,M,$,re,null);dc(B,$)}return null}function ue(B,M,$,re,ye){if(typeof re=="string"&&re!==""||typeof re=="number")return B=B.get($)||null,A(M,B,""+re,ye);if(typeof re=="object"&&re!==null){switch(re.$$typeof){case oe:return B=B.get(re.key===null?$:re.key)||null,D(M,B,re,ye);case ae:return B=B.get(re.key===null?$:re.key)||null,q(M,B,re,ye);case Tt:var Ee=re._init;return ue(B,M,$,Ee(re._payload),ye)}if(Dr(re)||we(re))return B=B.get($)||null,ee(M,B,re,ye,null);dc(M,re)}return null}function me(B,M,$,re){for(var ye=null,Ee=null,Te=M,Se=M=0,Lt=null;Te!==null&&Se<$.length;Se++){Te.index>Se?(Lt=Te,Te=null):Lt=Te.sibling;var We=Z(B,Te,$[Se],re);if(We===null){Te===null&&(Te=Lt);break}r&&Te&&We.alternate===null&&s(B,Te),M=g(We,M,Se),Ee===null?ye=We:Ee.sibling=We,Ee=We,Te=Lt}if(Se===$.length)return a(B,Te),ot&&Os(B,Se),ye;if(Te===null){for(;Se<$.length;Se++)Te=ne(B,$[Se],re),Te!==null&&(M=g(Te,M,Se),Ee===null?ye=Te:Ee.sibling=Te,Ee=Te);return ot&&Os(B,Se),ye}for(Te=h(B,Te);Se<$.length;Se++)Lt=ue(Te,B,Se,$[Se],re),Lt!==null&&(r&&Lt.alternate!==null&&Te.delete(Lt.key===null?Se:Lt.key),M=g(Lt,M,Se),Ee===null?ye=Lt:Ee.sibling=Lt,Ee=Lt);return r&&Te.forEach(function(Ui){return s(B,Ui)}),ot&&Os(B,Se),ye}function ge(B,M,$,re){var ye=we($);if(typeof ye!="function")throw Error(t(150));if($=ye.call($),$==null)throw Error(t(151));for(var Ee=ye=null,Te=M,Se=M=0,Lt=null,We=$.next();Te!==null&&!We.done;Se++,We=$.next()){Te.index>Se?(Lt=Te,Te=null):Lt=Te.sibling;var Ui=Z(B,Te,We.value,re);if(Ui===null){Te===null&&(Te=Lt);break}r&&Te&&Ui.alternate===null&&s(B,Te),M=g(Ui,M,Se),Ee===null?ye=Ui:Ee.sibling=Ui,Ee=Ui,Te=Lt}if(We.done)return a(B,Te),ot&&Os(B,Se),ye;if(Te===null){for(;!We.done;Se++,We=$.next())We=ne(B,We.value,re),We!==null&&(M=g(We,M,Se),Ee===null?ye=We:Ee.sibling=We,Ee=We);return ot&&Os(B,Se),ye}for(Te=h(B,Te);!We.done;Se++,We=$.next())We=ue(Te,B,Se,We.value,re),We!==null&&(r&&We.alternate!==null&&Te.delete(We.key===null?Se:We.key),M=g(We,M,Se),Ee===null?ye=We:Ee.sibling=We,Ee=We);return r&&Te.forEach(function(q1){return s(B,q1)}),ot&&Os(B,Se),ye}function pt(B,M,$,re){if(typeof $=="object"&&$!==null&&$.type===C&&$.key===null&&($=$.props.children),typeof $=="object"&&$!==null){switch($.$$typeof){case oe:e:{for(var ye=$.key,Ee=M;Ee!==null;){if(Ee.key===ye){if(ye=$.type,ye===C){if(Ee.tag===7){a(B,Ee.sibling),M=f(Ee,$.props.children),M.return=B,B=M;break e}}else if(Ee.elementType===ye||typeof ye=="object"&&ye!==null&&ye.$$typeof===Tt&&Gg(ye)===Ee.type){a(B,Ee.sibling),M=f(Ee,$.props),M.ref=Rl(B,Ee,$),M.return=B,B=M;break e}a(B,Ee);break}else s(B,Ee);Ee=Ee.sibling}$.type===C?(M=zs($.props.children,B.mode,re,$.key),M.return=B,B=M):(re=Vc($.type,$.key,$.props,null,B.mode,re),re.ref=Rl(B,M,$),re.return=B,B=re)}return w(B);case ae:e:{for(Ee=$.key;M!==null;){if(M.key===Ee)if(M.tag===4&&M.stateNode.containerInfo===$.containerInfo&&M.stateNode.implementation===$.implementation){a(B,M.sibling),M=f(M,$.children||[]),M.return=B,B=M;break e}else{a(B,M);break}else s(B,M);M=M.sibling}M=Uf($,B.mode,re),M.return=B,B=M}return w(B);case Tt:return Ee=$._init,pt(B,M,Ee($._payload),re)}if(Dr($))return me(B,M,$,re);if(we($))return ge(B,M,$,re);dc(B,$)}return typeof $=="string"&&$!==""||typeof $=="number"?($=""+$,M!==null&&M.tag===6?(a(B,M.sibling),M=f(M,$),M.return=B,B=M):(a(B,M),M=Ff($,B.mode,re),M.return=B,B=M),w(B)):a(B,M)}return pt}var Xo=Xg(!0),Jg=Xg(!1),fc=Pi(null),pc=null,Jo=null,Kd=null;function Qd(){Kd=Jo=pc=null}function Gd(r){var s=fc.current;rt(fc),r._currentValue=s}function Xd(r,s,a){for(;r!==null;){var h=r.alternate;if((r.childLanes&s)!==s?(r.childLanes|=s,h!==null&&(h.childLanes|=s)):h!==null&&(h.childLanes&s)!==s&&(h.childLanes|=s),r===a)break;r=r.return}}function Yo(r,s){pc=r,Kd=Jo=null,r=r.dependencies,r!==null&&r.firstContext!==null&&(r.lanes&s&&(fn=!0),r.firstContext=null)}function Fn(r){var s=r._currentValue;if(Kd!==r)if(r={context:r,memoizedValue:s,next:null},Jo===null){if(pc===null)throw Error(t(308));Jo=r,pc.dependencies={lanes:0,firstContext:r}}else Jo=Jo.next=r;return s}var Ds=null;function Jd(r){Ds===null?Ds=[r]:Ds.push(r)}function Yg(r,s,a,h){var f=s.interleaved;return f===null?(a.next=a,Jd(s)):(a.next=f.next,f.next=a),s.interleaved=a,Kr(r,h)}function Kr(r,s){r.lanes|=s;var a=r.alternate;for(a!==null&&(a.lanes|=s),a=r,r=r.return;r!==null;)r.childLanes|=s,a=r.alternate,a!==null&&(a.childLanes|=s),a=r,r=r.return;return a.tag===3?a.stateNode:null}var bi=!1;function Yd(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Zg(r,s){r=r.updateQueue,s.updateQueue===r&&(s.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,effects:r.effects})}function Qr(r,s){return{eventTime:r,lane:s,tag:0,payload:null,callback:null,next:null}}function Ni(r,s,a){var h=r.updateQueue;if(h===null)return null;if(h=h.shared,$e&2){var f=h.pending;return f===null?s.next=s:(s.next=f.next,f.next=s),h.pending=s,Kr(r,a)}return f=h.interleaved,f===null?(s.next=s,Jd(h)):(s.next=f.next,f.next=s),h.interleaved=s,Kr(r,a)}function mc(r,s,a){if(s=s.updateQueue,s!==null&&(s=s.shared,(a&4194240)!==0)){var h=s.lanes;h&=r.pendingLanes,a|=h,s.lanes=a,Ei(r,a)}}function ey(r,s){var a=r.updateQueue,h=r.alternate;if(h!==null&&(h=h.updateQueue,a===h)){var f=null,g=null;if(a=a.firstBaseUpdate,a!==null){do{var w={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};g===null?f=g=w:g=g.next=w,a=a.next}while(a!==null);g===null?f=g=s:g=g.next=s}else f=g=s;a={baseState:h.baseState,firstBaseUpdate:f,lastBaseUpdate:g,shared:h.shared,effects:h.effects},r.updateQueue=a;return}r=a.lastBaseUpdate,r===null?a.firstBaseUpdate=s:r.next=s,a.lastBaseUpdate=s}function gc(r,s,a,h){var f=r.updateQueue;bi=!1;var g=f.firstBaseUpdate,w=f.lastBaseUpdate,A=f.shared.pending;if(A!==null){f.shared.pending=null;var D=A,q=D.next;D.next=null,w===null?g=q:w.next=q,w=D;var ee=r.alternate;ee!==null&&(ee=ee.updateQueue,A=ee.lastBaseUpdate,A!==w&&(A===null?ee.firstBaseUpdate=q:A.next=q,ee.lastBaseUpdate=D))}if(g!==null){var ne=f.baseState;w=0,ee=q=D=null,A=g;do{var Z=A.lane,ue=A.eventTime;if((h&Z)===Z){ee!==null&&(ee=ee.next={eventTime:ue,lane:0,tag:A.tag,payload:A.payload,callback:A.callback,next:null});e:{var me=r,ge=A;switch(Z=s,ue=a,ge.tag){case 1:if(me=ge.payload,typeof me=="function"){ne=me.call(ue,ne,Z);break e}ne=me;break e;case 3:me.flags=me.flags&-65537|128;case 0:if(me=ge.payload,Z=typeof me=="function"?me.call(ue,ne,Z):me,Z==null)break e;ne=he({},ne,Z);break e;case 2:bi=!0}}A.callback!==null&&A.lane!==0&&(r.flags|=64,Z=f.effects,Z===null?f.effects=[A]:Z.push(A))}else ue={eventTime:ue,lane:Z,tag:A.tag,payload:A.payload,callback:A.callback,next:null},ee===null?(q=ee=ue,D=ne):ee=ee.next=ue,w|=Z;if(A=A.next,A===null){if(A=f.shared.pending,A===null)break;Z=A,A=Z.next,Z.next=null,f.lastBaseUpdate=Z,f.shared.pending=null}}while(!0);if(ee===null&&(D=ne),f.baseState=D,f.firstBaseUpdate=q,f.lastBaseUpdate=ee,s=f.shared.interleaved,s!==null){f=s;do w|=f.lane,f=f.next;while(f!==s)}else g===null&&(f.shared.lanes=0);Ms|=w,r.lanes=w,r.memoizedState=ne}}function ty(r,s,a){if(r=s.effects,s.effects=null,r!==null)for(s=0;s<r.length;s++){var h=r[s],f=h.callback;if(f!==null){if(h.callback=null,h=a,typeof f!="function")throw Error(t(191,f));f.call(h)}}}var Al={},wr=Pi(Al),Cl=Pi(Al),Pl=Pi(Al);function Ls(r){if(r===Al)throw Error(t(174));return r}function Zd(r,s){switch(tt(Pl,s),tt(Cl,r),tt(wr,Al),r=s.nodeType,r){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:St(null,"");break;default:r=r===8?s.parentNode:s,s=r.namespaceURI||null,r=r.tagName,s=St(s,r)}rt(wr),tt(wr,s)}function Zo(){rt(wr),rt(Cl),rt(Pl)}function ny(r){Ls(Pl.current);var s=Ls(wr.current),a=St(s,r.type);s!==a&&(tt(Cl,r),tt(wr,a))}function ef(r){Cl.current===r&&(rt(wr),rt(Cl))}var lt=Pi(0);function yc(r){for(var s=r;s!==null;){if(s.tag===13){var a=s.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if(s.flags&128)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var tf=[];function nf(){for(var r=0;r<tf.length;r++)tf[r]._workInProgressVersionPrimary=null;tf.length=0}var vc=te.ReactCurrentDispatcher,rf=te.ReactCurrentBatchConfig,Vs=0,ut=null,At=null,Ot=null,_c=!1,kl=!1,xl=0,d1=0;function Wt(){throw Error(t(321))}function sf(r,s){if(s===null)return!1;for(var a=0;a<s.length&&a<r.length;a++)if(!er(r[a],s[a]))return!1;return!0}function of(r,s,a,h,f,g){if(Vs=g,ut=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,vc.current=r===null||r.memoizedState===null?g1:y1,r=a(h,f),kl){g=0;do{if(kl=!1,xl=0,25<=g)throw Error(t(301));g+=1,Ot=At=null,s.updateQueue=null,vc.current=v1,r=a(h,f)}while(kl)}if(vc.current=Tc,s=At!==null&&At.next!==null,Vs=0,Ot=At=ut=null,_c=!1,s)throw Error(t(300));return r}function af(){var r=xl!==0;return xl=0,r}function Er(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ot===null?ut.memoizedState=Ot=r:Ot=Ot.next=r,Ot}function Un(){if(At===null){var r=ut.alternate;r=r!==null?r.memoizedState:null}else r=At.next;var s=Ot===null?ut.memoizedState:Ot.next;if(s!==null)Ot=s,At=r;else{if(r===null)throw Error(t(310));At=r,r={memoizedState:At.memoizedState,baseState:At.baseState,baseQueue:At.baseQueue,queue:At.queue,next:null},Ot===null?ut.memoizedState=Ot=r:Ot=Ot.next=r}return Ot}function bl(r,s){return typeof s=="function"?s(r):s}function lf(r){var s=Un(),a=s.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=r;var h=At,f=h.baseQueue,g=a.pending;if(g!==null){if(f!==null){var w=f.next;f.next=g.next,g.next=w}h.baseQueue=f=g,a.pending=null}if(f!==null){g=f.next,h=h.baseState;var A=w=null,D=null,q=g;do{var ee=q.lane;if((Vs&ee)===ee)D!==null&&(D=D.next={lane:0,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null}),h=q.hasEagerState?q.eagerState:r(h,q.action);else{var ne={lane:ee,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null};D===null?(A=D=ne,w=h):D=D.next=ne,ut.lanes|=ee,Ms|=ee}q=q.next}while(q!==null&&q!==g);D===null?w=h:D.next=A,er(h,s.memoizedState)||(fn=!0),s.memoizedState=h,s.baseState=w,s.baseQueue=D,a.lastRenderedState=h}if(r=a.interleaved,r!==null){f=r;do g=f.lane,ut.lanes|=g,Ms|=g,f=f.next;while(f!==r)}else f===null&&(a.lanes=0);return[s.memoizedState,a.dispatch]}function uf(r){var s=Un(),a=s.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=r;var h=a.dispatch,f=a.pending,g=s.memoizedState;if(f!==null){a.pending=null;var w=f=f.next;do g=r(g,w.action),w=w.next;while(w!==f);er(g,s.memoizedState)||(fn=!0),s.memoizedState=g,s.baseQueue===null&&(s.baseState=g),a.lastRenderedState=g}return[g,h]}function ry(){}function iy(r,s){var a=ut,h=Un(),f=s(),g=!er(h.memoizedState,f);if(g&&(h.memoizedState=f,fn=!0),h=h.queue,cf(ay.bind(null,a,h,r),[r]),h.getSnapshot!==s||g||Ot!==null&&Ot.memoizedState.tag&1){if(a.flags|=2048,Nl(9,oy.bind(null,a,h,f,s),void 0,null),Dt===null)throw Error(t(349));Vs&30||sy(a,s,f)}return f}function sy(r,s,a){r.flags|=16384,r={getSnapshot:s,value:a},s=ut.updateQueue,s===null?(s={lastEffect:null,stores:null},ut.updateQueue=s,s.stores=[r]):(a=s.stores,a===null?s.stores=[r]:a.push(r))}function oy(r,s,a,h){s.value=a,s.getSnapshot=h,ly(s)&&uy(r)}function ay(r,s,a){return a(function(){ly(s)&&uy(r)})}function ly(r){var s=r.getSnapshot;r=r.value;try{var a=s();return!er(r,a)}catch{return!0}}function uy(r){var s=Kr(r,1);s!==null&&sr(s,r,1,-1)}function cy(r){var s=Er();return typeof r=="function"&&(r=r()),s.memoizedState=s.baseState=r,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:bl,lastRenderedState:r},s.queue=r,r=r.dispatch=m1.bind(null,ut,r),[s.memoizedState,r]}function Nl(r,s,a,h){return r={tag:r,create:s,destroy:a,deps:h,next:null},s=ut.updateQueue,s===null?(s={lastEffect:null,stores:null},ut.updateQueue=s,s.lastEffect=r.next=r):(a=s.lastEffect,a===null?s.lastEffect=r.next=r:(h=a.next,a.next=r,r.next=h,s.lastEffect=r)),r}function hy(){return Un().memoizedState}function wc(r,s,a,h){var f=Er();ut.flags|=r,f.memoizedState=Nl(1|s,a,void 0,h===void 0?null:h)}function Ec(r,s,a,h){var f=Un();h=h===void 0?null:h;var g=void 0;if(At!==null){var w=At.memoizedState;if(g=w.destroy,h!==null&&sf(h,w.deps)){f.memoizedState=Nl(s,a,g,h);return}}ut.flags|=r,f.memoizedState=Nl(1|s,a,g,h)}function dy(r,s){return wc(8390656,8,r,s)}function cf(r,s){return Ec(2048,8,r,s)}function fy(r,s){return Ec(4,2,r,s)}function py(r,s){return Ec(4,4,r,s)}function my(r,s){if(typeof s=="function")return r=r(),s(r),function(){s(null)};if(s!=null)return r=r(),s.current=r,function(){s.current=null}}function gy(r,s,a){return a=a!=null?a.concat([r]):null,Ec(4,4,my.bind(null,s,r),a)}function hf(){}function yy(r,s){var a=Un();s=s===void 0?null:s;var h=a.memoizedState;return h!==null&&s!==null&&sf(s,h[1])?h[0]:(a.memoizedState=[r,s],r)}function vy(r,s){var a=Un();s=s===void 0?null:s;var h=a.memoizedState;return h!==null&&s!==null&&sf(s,h[1])?h[0]:(r=r(),a.memoizedState=[r,s],r)}function _y(r,s,a){return Vs&21?(er(a,s)||(a=Rs(),ut.lanes|=a,Ms|=a,r.baseState=!0),s):(r.baseState&&(r.baseState=!1,fn=!0),r.memoizedState=a)}function f1(r,s){var a=Me;Me=a!==0&&4>a?a:4,r(!0);var h=rf.transition;rf.transition={};try{r(!1),s()}finally{Me=a,rf.transition=h}}function wy(){return Un().memoizedState}function p1(r,s,a){var h=Vi(r);if(a={lane:h,action:a,hasEagerState:!1,eagerState:null,next:null},Ey(r))Ty(s,a);else if(a=Yg(r,s,a,h),a!==null){var f=sn();sr(a,r,h,f),Iy(a,s,h)}}function m1(r,s,a){var h=Vi(r),f={lane:h,action:a,hasEagerState:!1,eagerState:null,next:null};if(Ey(r))Ty(s,f);else{var g=r.alternate;if(r.lanes===0&&(g===null||g.lanes===0)&&(g=s.lastRenderedReducer,g!==null))try{var w=s.lastRenderedState,A=g(w,a);if(f.hasEagerState=!0,f.eagerState=A,er(A,w)){var D=s.interleaved;D===null?(f.next=f,Jd(s)):(f.next=D.next,D.next=f),s.interleaved=f;return}}catch{}finally{}a=Yg(r,s,f,h),a!==null&&(f=sn(),sr(a,r,h,f),Iy(a,s,h))}}function Ey(r){var s=r.alternate;return r===ut||s!==null&&s===ut}function Ty(r,s){kl=_c=!0;var a=r.pending;a===null?s.next=s:(s.next=a.next,a.next=s),r.pending=s}function Iy(r,s,a){if(a&4194240){var h=s.lanes;h&=r.pendingLanes,a|=h,s.lanes=a,Ei(r,a)}}var Tc={readContext:Fn,useCallback:Wt,useContext:Wt,useEffect:Wt,useImperativeHandle:Wt,useInsertionEffect:Wt,useLayoutEffect:Wt,useMemo:Wt,useReducer:Wt,useRef:Wt,useState:Wt,useDebugValue:Wt,useDeferredValue:Wt,useTransition:Wt,useMutableSource:Wt,useSyncExternalStore:Wt,useId:Wt,unstable_isNewReconciler:!1},g1={readContext:Fn,useCallback:function(r,s){return Er().memoizedState=[r,s===void 0?null:s],r},useContext:Fn,useEffect:dy,useImperativeHandle:function(r,s,a){return a=a!=null?a.concat([r]):null,wc(4194308,4,my.bind(null,s,r),a)},useLayoutEffect:function(r,s){return wc(4194308,4,r,s)},useInsertionEffect:function(r,s){return wc(4,2,r,s)},useMemo:function(r,s){var a=Er();return s=s===void 0?null:s,r=r(),a.memoizedState=[r,s],r},useReducer:function(r,s,a){var h=Er();return s=a!==void 0?a(s):s,h.memoizedState=h.baseState=s,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:s},h.queue=r,r=r.dispatch=p1.bind(null,ut,r),[h.memoizedState,r]},useRef:function(r){var s=Er();return r={current:r},s.memoizedState=r},useState:cy,useDebugValue:hf,useDeferredValue:function(r){return Er().memoizedState=r},useTransition:function(){var r=cy(!1),s=r[0];return r=f1.bind(null,r[1]),Er().memoizedState=r,[s,r]},useMutableSource:function(){},useSyncExternalStore:function(r,s,a){var h=ut,f=Er();if(ot){if(a===void 0)throw Error(t(407));a=a()}else{if(a=s(),Dt===null)throw Error(t(349));Vs&30||sy(h,s,a)}f.memoizedState=a;var g={value:a,getSnapshot:s};return f.queue=g,dy(ay.bind(null,h,g,r),[r]),h.flags|=2048,Nl(9,oy.bind(null,h,g,a,s),void 0,null),a},useId:function(){var r=Er(),s=Dt.identifierPrefix;if(ot){var a=Wr,h=Hr;a=(h&~(1<<32-tn(h)-1)).toString(32)+a,s=":"+s+"R"+a,a=xl++,0<a&&(s+="H"+a.toString(32)),s+=":"}else a=d1++,s=":"+s+"r"+a.toString(32)+":";return r.memoizedState=s},unstable_isNewReconciler:!1},y1={readContext:Fn,useCallback:yy,useContext:Fn,useEffect:cf,useImperativeHandle:gy,useInsertionEffect:fy,useLayoutEffect:py,useMemo:vy,useReducer:lf,useRef:hy,useState:function(){return lf(bl)},useDebugValue:hf,useDeferredValue:function(r){var s=Un();return _y(s,At.memoizedState,r)},useTransition:function(){var r=lf(bl)[0],s=Un().memoizedState;return[r,s]},useMutableSource:ry,useSyncExternalStore:iy,useId:wy,unstable_isNewReconciler:!1},v1={readContext:Fn,useCallback:yy,useContext:Fn,useEffect:cf,useImperativeHandle:gy,useInsertionEffect:fy,useLayoutEffect:py,useMemo:vy,useReducer:uf,useRef:hy,useState:function(){return uf(bl)},useDebugValue:hf,useDeferredValue:function(r){var s=Un();return At===null?s.memoizedState=r:_y(s,At.memoizedState,r)},useTransition:function(){var r=uf(bl)[0],s=Un().memoizedState;return[r,s]},useMutableSource:ry,useSyncExternalStore:iy,useId:wy,unstable_isNewReconciler:!1};function nr(r,s){if(r&&r.defaultProps){s=he({},s),r=r.defaultProps;for(var a in r)s[a]===void 0&&(s[a]=r[a]);return s}return s}function df(r,s,a,h){s=r.memoizedState,a=a(h,s),a=a==null?s:he({},s,a),r.memoizedState=a,r.lanes===0&&(r.updateQueue.baseState=a)}var Ic={isMounted:function(r){return(r=r._reactInternals)?Kn(r)===r:!1},enqueueSetState:function(r,s,a){r=r._reactInternals;var h=sn(),f=Vi(r),g=Qr(h,f);g.payload=s,a!=null&&(g.callback=a),s=Ni(r,g,f),s!==null&&(sr(s,r,f,h),mc(s,r,f))},enqueueReplaceState:function(r,s,a){r=r._reactInternals;var h=sn(),f=Vi(r),g=Qr(h,f);g.tag=1,g.payload=s,a!=null&&(g.callback=a),s=Ni(r,g,f),s!==null&&(sr(s,r,f,h),mc(s,r,f))},enqueueForceUpdate:function(r,s){r=r._reactInternals;var a=sn(),h=Vi(r),f=Qr(a,h);f.tag=2,s!=null&&(f.callback=s),s=Ni(r,f,h),s!==null&&(sr(s,r,h,a),mc(s,r,h))}};function Sy(r,s,a,h,f,g,w){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(h,g,w):s.prototype&&s.prototype.isPureReactComponent?!vl(a,h)||!vl(f,g):!0}function Ry(r,s,a){var h=!1,f=ki,g=s.contextType;return typeof g=="object"&&g!==null?g=Fn(g):(f=dn(s)?bs:Ht.current,h=s.contextTypes,g=(h=h!=null)?Wo(r,f):ki),s=new s(a,g),r.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=Ic,r.stateNode=s,s._reactInternals=r,h&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=f,r.__reactInternalMemoizedMaskedChildContext=g),s}function Ay(r,s,a,h){r=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(a,h),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(a,h),s.state!==r&&Ic.enqueueReplaceState(s,s.state,null)}function ff(r,s,a,h){var f=r.stateNode;f.props=a,f.state=r.memoizedState,f.refs={},Yd(r);var g=s.contextType;typeof g=="object"&&g!==null?f.context=Fn(g):(g=dn(s)?bs:Ht.current,f.context=Wo(r,g)),f.state=r.memoizedState,g=s.getDerivedStateFromProps,typeof g=="function"&&(df(r,s,g,a),f.state=r.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(s=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),s!==f.state&&Ic.enqueueReplaceState(f,f.state,null),gc(r,a,f,h),f.state=r.memoizedState),typeof f.componentDidMount=="function"&&(r.flags|=4194308)}function ea(r,s){try{var a="",h=s;do a+=Oe(h),h=h.return;while(h);var f=a}catch(g){f=`
Error generating stack: `+g.message+`
`+g.stack}return{value:r,source:s,stack:f,digest:null}}function pf(r,s,a){return{value:r,source:null,stack:a??null,digest:s??null}}function mf(r,s){try{console.error(s.value)}catch(a){setTimeout(function(){throw a})}}var _1=typeof WeakMap=="function"?WeakMap:Map;function Cy(r,s,a){a=Qr(-1,a),a.tag=3,a.payload={element:null};var h=s.value;return a.callback=function(){xc||(xc=!0,xf=h),mf(r,s)},a}function Py(r,s,a){a=Qr(-1,a),a.tag=3;var h=r.type.getDerivedStateFromError;if(typeof h=="function"){var f=s.value;a.payload=function(){return h(f)},a.callback=function(){mf(r,s)}}var g=r.stateNode;return g!==null&&typeof g.componentDidCatch=="function"&&(a.callback=function(){mf(r,s),typeof h!="function"&&(Di===null?Di=new Set([this]):Di.add(this));var w=s.stack;this.componentDidCatch(s.value,{componentStack:w!==null?w:""})}),a}function ky(r,s,a){var h=r.pingCache;if(h===null){h=r.pingCache=new _1;var f=new Set;h.set(s,f)}else f=h.get(s),f===void 0&&(f=new Set,h.set(s,f));f.has(a)||(f.add(a),r=O1.bind(null,r,s,a),s.then(r,r))}function xy(r){do{var s;if((s=r.tag===13)&&(s=r.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return r;r=r.return}while(r!==null);return null}function by(r,s,a,h,f){return r.mode&1?(r.flags|=65536,r.lanes=f,r):(r===s?r.flags|=65536:(r.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(s=Qr(-1,1),s.tag=2,Ni(a,s,1))),a.lanes|=1),r)}var w1=te.ReactCurrentOwner,fn=!1;function rn(r,s,a,h){s.child=r===null?Jg(s,null,a,h):Xo(s,r.child,a,h)}function Ny(r,s,a,h,f){a=a.render;var g=s.ref;return Yo(s,f),h=of(r,s,a,h,g,f),a=af(),r!==null&&!fn?(s.updateQueue=r.updateQueue,s.flags&=-2053,r.lanes&=~f,Gr(r,s,f)):(ot&&a&&Bd(s),s.flags|=1,rn(r,s,h,f),s.child)}function Oy(r,s,a,h,f){if(r===null){var g=a.type;return typeof g=="function"&&!Mf(g)&&g.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(s.tag=15,s.type=g,Dy(r,s,g,h,f)):(r=Vc(a.type,null,h,s,s.mode,f),r.ref=s.ref,r.return=s,s.child=r)}if(g=r.child,!(r.lanes&f)){var w=g.memoizedProps;if(a=a.compare,a=a!==null?a:vl,a(w,h)&&r.ref===s.ref)return Gr(r,s,f)}return s.flags|=1,r=Fi(g,h),r.ref=s.ref,r.return=s,s.child=r}function Dy(r,s,a,h,f){if(r!==null){var g=r.memoizedProps;if(vl(g,h)&&r.ref===s.ref)if(fn=!1,s.pendingProps=h=g,(r.lanes&f)!==0)r.flags&131072&&(fn=!0);else return s.lanes=r.lanes,Gr(r,s,f)}return gf(r,s,a,h,f)}function Ly(r,s,a){var h=s.pendingProps,f=h.children,g=r!==null?r.memoizedState:null;if(h.mode==="hidden")if(!(s.mode&1))s.memoizedState={baseLanes:0,cachePool:null,transitions:null},tt(na,kn),kn|=a;else{if(!(a&1073741824))return r=g!==null?g.baseLanes|a:a,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:r,cachePool:null,transitions:null},s.updateQueue=null,tt(na,kn),kn|=r,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},h=g!==null?g.baseLanes:a,tt(na,kn),kn|=h}else g!==null?(h=g.baseLanes|a,s.memoizedState=null):h=a,tt(na,kn),kn|=h;return rn(r,s,f,a),s.child}function Vy(r,s){var a=s.ref;(r===null&&a!==null||r!==null&&r.ref!==a)&&(s.flags|=512,s.flags|=2097152)}function gf(r,s,a,h,f){var g=dn(a)?bs:Ht.current;return g=Wo(s,g),Yo(s,f),a=of(r,s,a,h,g,f),h=af(),r!==null&&!fn?(s.updateQueue=r.updateQueue,s.flags&=-2053,r.lanes&=~f,Gr(r,s,f)):(ot&&h&&Bd(s),s.flags|=1,rn(r,s,a,f),s.child)}function My(r,s,a,h,f){if(dn(a)){var g=!0;ac(s)}else g=!1;if(Yo(s,f),s.stateNode===null)Rc(r,s),Ry(s,a,h),ff(s,a,h,f),h=!0;else if(r===null){var w=s.stateNode,A=s.memoizedProps;w.props=A;var D=w.context,q=a.contextType;typeof q=="object"&&q!==null?q=Fn(q):(q=dn(a)?bs:Ht.current,q=Wo(s,q));var ee=a.getDerivedStateFromProps,ne=typeof ee=="function"||typeof w.getSnapshotBeforeUpdate=="function";ne||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(A!==h||D!==q)&&Ay(s,w,h,q),bi=!1;var Z=s.memoizedState;w.state=Z,gc(s,h,w,f),D=s.memoizedState,A!==h||Z!==D||hn.current||bi?(typeof ee=="function"&&(df(s,a,ee,h),D=s.memoizedState),(A=bi||Sy(s,a,A,h,Z,D,q))?(ne||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(s.flags|=4194308)):(typeof w.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=h,s.memoizedState=D),w.props=h,w.state=D,w.context=q,h=A):(typeof w.componentDidMount=="function"&&(s.flags|=4194308),h=!1)}else{w=s.stateNode,Zg(r,s),A=s.memoizedProps,q=s.type===s.elementType?A:nr(s.type,A),w.props=q,ne=s.pendingProps,Z=w.context,D=a.contextType,typeof D=="object"&&D!==null?D=Fn(D):(D=dn(a)?bs:Ht.current,D=Wo(s,D));var ue=a.getDerivedStateFromProps;(ee=typeof ue=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(A!==ne||Z!==D)&&Ay(s,w,h,D),bi=!1,Z=s.memoizedState,w.state=Z,gc(s,h,w,f);var me=s.memoizedState;A!==ne||Z!==me||hn.current||bi?(typeof ue=="function"&&(df(s,a,ue,h),me=s.memoizedState),(q=bi||Sy(s,a,q,h,Z,me,D)||!1)?(ee||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(h,me,D),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(h,me,D)),typeof w.componentDidUpdate=="function"&&(s.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof w.componentDidUpdate!="function"||A===r.memoizedProps&&Z===r.memoizedState||(s.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||A===r.memoizedProps&&Z===r.memoizedState||(s.flags|=1024),s.memoizedProps=h,s.memoizedState=me),w.props=h,w.state=me,w.context=D,h=q):(typeof w.componentDidUpdate!="function"||A===r.memoizedProps&&Z===r.memoizedState||(s.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||A===r.memoizedProps&&Z===r.memoizedState||(s.flags|=1024),h=!1)}return yf(r,s,a,h,g,f)}function yf(r,s,a,h,f,g){Vy(r,s);var w=(s.flags&128)!==0;if(!h&&!w)return f&&Bg(s,a,!1),Gr(r,s,g);h=s.stateNode,w1.current=s;var A=w&&typeof a.getDerivedStateFromError!="function"?null:h.render();return s.flags|=1,r!==null&&w?(s.child=Xo(s,r.child,null,g),s.child=Xo(s,null,A,g)):rn(r,s,A,g),s.memoizedState=h.state,f&&Bg(s,a,!0),s.child}function Fy(r){var s=r.stateNode;s.pendingContext?jg(r,s.pendingContext,s.pendingContext!==s.context):s.context&&jg(r,s.context,!1),Zd(r,s.containerInfo)}function Uy(r,s,a,h,f){return Go(),Wd(f),s.flags|=256,rn(r,s,a,h),s.child}var vf={dehydrated:null,treeContext:null,retryLane:0};function _f(r){return{baseLanes:r,cachePool:null,transitions:null}}function jy(r,s,a){var h=s.pendingProps,f=lt.current,g=!1,w=(s.flags&128)!==0,A;if((A=w)||(A=r!==null&&r.memoizedState===null?!1:(f&2)!==0),A?(g=!0,s.flags&=-129):(r===null||r.memoizedState!==null)&&(f|=1),tt(lt,f&1),r===null)return Hd(s),r=s.memoizedState,r!==null&&(r=r.dehydrated,r!==null)?(s.mode&1?r.data==="$!"?s.lanes=8:s.lanes=1073741824:s.lanes=1,null):(w=h.children,r=h.fallback,g?(h=s.mode,g=s.child,w={mode:"hidden",children:w},!(h&1)&&g!==null?(g.childLanes=0,g.pendingProps=w):g=Mc(w,h,0,null),r=zs(r,h,a,null),g.return=s,r.return=s,g.sibling=r,s.child=g,s.child.memoizedState=_f(a),s.memoizedState=vf,r):wf(s,w));if(f=r.memoizedState,f!==null&&(A=f.dehydrated,A!==null))return E1(r,s,w,h,A,f,a);if(g){g=h.fallback,w=s.mode,f=r.child,A=f.sibling;var D={mode:"hidden",children:h.children};return!(w&1)&&s.child!==f?(h=s.child,h.childLanes=0,h.pendingProps=D,s.deletions=null):(h=Fi(f,D),h.subtreeFlags=f.subtreeFlags&14680064),A!==null?g=Fi(A,g):(g=zs(g,w,a,null),g.flags|=2),g.return=s,h.return=s,h.sibling=g,s.child=h,h=g,g=s.child,w=r.child.memoizedState,w=w===null?_f(a):{baseLanes:w.baseLanes|a,cachePool:null,transitions:w.transitions},g.memoizedState=w,g.childLanes=r.childLanes&~a,s.memoizedState=vf,h}return g=r.child,r=g.sibling,h=Fi(g,{mode:"visible",children:h.children}),!(s.mode&1)&&(h.lanes=a),h.return=s,h.sibling=null,r!==null&&(a=s.deletions,a===null?(s.deletions=[r],s.flags|=16):a.push(r)),s.child=h,s.memoizedState=null,h}function wf(r,s){return s=Mc({mode:"visible",children:s},r.mode,0,null),s.return=r,r.child=s}function Sc(r,s,a,h){return h!==null&&Wd(h),Xo(s,r.child,null,a),r=wf(s,s.pendingProps.children),r.flags|=2,s.memoizedState=null,r}function E1(r,s,a,h,f,g,w){if(a)return s.flags&256?(s.flags&=-257,h=pf(Error(t(422))),Sc(r,s,w,h)):s.memoizedState!==null?(s.child=r.child,s.flags|=128,null):(g=h.fallback,f=s.mode,h=Mc({mode:"visible",children:h.children},f,0,null),g=zs(g,f,w,null),g.flags|=2,h.return=s,g.return=s,h.sibling=g,s.child=h,s.mode&1&&Xo(s,r.child,null,w),s.child.memoizedState=_f(w),s.memoizedState=vf,g);if(!(s.mode&1))return Sc(r,s,w,null);if(f.data==="$!"){if(h=f.nextSibling&&f.nextSibling.dataset,h)var A=h.dgst;return h=A,g=Error(t(419)),h=pf(g,h,void 0),Sc(r,s,w,h)}if(A=(w&r.childLanes)!==0,fn||A){if(h=Dt,h!==null){switch(w&-w){case 4:f=2;break;case 16:f=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:f=32;break;case 536870912:f=268435456;break;default:f=0}f=f&(h.suspendedLanes|w)?0:f,f!==0&&f!==g.retryLane&&(g.retryLane=f,Kr(r,f),sr(h,r,f,-1))}return Vf(),h=pf(Error(t(421))),Sc(r,s,w,h)}return f.data==="$?"?(s.flags|=128,s.child=r.child,s=D1.bind(null,r),f._reactRetry=s,null):(r=g.treeContext,Pn=Ci(f.nextSibling),Cn=s,ot=!0,tr=null,r!==null&&(Vn[Mn++]=Hr,Vn[Mn++]=Wr,Vn[Mn++]=Ns,Hr=r.id,Wr=r.overflow,Ns=s),s=wf(s,h.children),s.flags|=4096,s)}function zy(r,s,a){r.lanes|=s;var h=r.alternate;h!==null&&(h.lanes|=s),Xd(r.return,s,a)}function Ef(r,s,a,h,f){var g=r.memoizedState;g===null?r.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:h,tail:a,tailMode:f}:(g.isBackwards=s,g.rendering=null,g.renderingStartTime=0,g.last=h,g.tail=a,g.tailMode=f)}function By(r,s,a){var h=s.pendingProps,f=h.revealOrder,g=h.tail;if(rn(r,s,h.children,a),h=lt.current,h&2)h=h&1|2,s.flags|=128;else{if(r!==null&&r.flags&128)e:for(r=s.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&zy(r,a,s);else if(r.tag===19)zy(r,a,s);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break e;for(;r.sibling===null;){if(r.return===null||r.return===s)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}h&=1}if(tt(lt,h),!(s.mode&1))s.memoizedState=null;else switch(f){case"forwards":for(a=s.child,f=null;a!==null;)r=a.alternate,r!==null&&yc(r)===null&&(f=a),a=a.sibling;a=f,a===null?(f=s.child,s.child=null):(f=a.sibling,a.sibling=null),Ef(s,!1,f,a,g);break;case"backwards":for(a=null,f=s.child,s.child=null;f!==null;){if(r=f.alternate,r!==null&&yc(r)===null){s.child=f;break}r=f.sibling,f.sibling=a,a=f,f=r}Ef(s,!0,a,null,g);break;case"together":Ef(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function Rc(r,s){!(s.mode&1)&&r!==null&&(r.alternate=null,s.alternate=null,s.flags|=2)}function Gr(r,s,a){if(r!==null&&(s.dependencies=r.dependencies),Ms|=s.lanes,!(a&s.childLanes))return null;if(r!==null&&s.child!==r.child)throw Error(t(153));if(s.child!==null){for(r=s.child,a=Fi(r,r.pendingProps),s.child=a,a.return=s;r.sibling!==null;)r=r.sibling,a=a.sibling=Fi(r,r.pendingProps),a.return=s;a.sibling=null}return s.child}function T1(r,s,a){switch(s.tag){case 3:Fy(s),Go();break;case 5:ny(s);break;case 1:dn(s.type)&&ac(s);break;case 4:Zd(s,s.stateNode.containerInfo);break;case 10:var h=s.type._context,f=s.memoizedProps.value;tt(fc,h._currentValue),h._currentValue=f;break;case 13:if(h=s.memoizedState,h!==null)return h.dehydrated!==null?(tt(lt,lt.current&1),s.flags|=128,null):a&s.child.childLanes?jy(r,s,a):(tt(lt,lt.current&1),r=Gr(r,s,a),r!==null?r.sibling:null);tt(lt,lt.current&1);break;case 19:if(h=(a&s.childLanes)!==0,r.flags&128){if(h)return By(r,s,a);s.flags|=128}if(f=s.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),tt(lt,lt.current),h)break;return null;case 22:case 23:return s.lanes=0,Ly(r,s,a)}return Gr(r,s,a)}var $y,Tf,qy,Hy;$y=function(r,s){for(var a=s.child;a!==null;){if(a.tag===5||a.tag===6)r.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},Tf=function(){},qy=function(r,s,a,h){var f=r.memoizedProps;if(f!==h){r=s.stateNode,Ls(wr.current);var g=null;switch(a){case"input":f=ps(r,f),h=ps(r,h),g=[];break;case"select":f=he({},f,{value:void 0}),h=he({},h,{value:void 0}),g=[];break;case"textarea":f=Ka(r,f),h=Ka(r,h),g=[];break;default:typeof f.onClick!="function"&&typeof h.onClick=="function"&&(r.onclick=ic)}Za(a,h);var w;a=null;for(q in f)if(!h.hasOwnProperty(q)&&f.hasOwnProperty(q)&&f[q]!=null)if(q==="style"){var A=f[q];for(w in A)A.hasOwnProperty(w)&&(a||(a={}),a[w]="")}else q!=="dangerouslySetInnerHTML"&&q!=="children"&&q!=="suppressContentEditableWarning"&&q!=="suppressHydrationWarning"&&q!=="autoFocus"&&(o.hasOwnProperty(q)?g||(g=[]):(g=g||[]).push(q,null));for(q in h){var D=h[q];if(A=f!=null?f[q]:void 0,h.hasOwnProperty(q)&&D!==A&&(D!=null||A!=null))if(q==="style")if(A){for(w in A)!A.hasOwnProperty(w)||D&&D.hasOwnProperty(w)||(a||(a={}),a[w]="");for(w in D)D.hasOwnProperty(w)&&A[w]!==D[w]&&(a||(a={}),a[w]=D[w])}else a||(g||(g=[]),g.push(q,a)),a=D;else q==="dangerouslySetInnerHTML"?(D=D?D.__html:void 0,A=A?A.__html:void 0,D!=null&&A!==D&&(g=g||[]).push(q,D)):q==="children"?typeof D!="string"&&typeof D!="number"||(g=g||[]).push(q,""+D):q!=="suppressContentEditableWarning"&&q!=="suppressHydrationWarning"&&(o.hasOwnProperty(q)?(D!=null&&q==="onScroll"&&nt("scroll",r),g||A===D||(g=[])):(g=g||[]).push(q,D))}a&&(g=g||[]).push("style",a);var q=g;(s.updateQueue=q)&&(s.flags|=4)}},Hy=function(r,s,a,h){a!==h&&(s.flags|=4)};function Ol(r,s){if(!ot)switch(r.tailMode){case"hidden":s=r.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?r.tail=null:a.sibling=null;break;case"collapsed":a=r.tail;for(var h=null;a!==null;)a.alternate!==null&&(h=a),a=a.sibling;h===null?s||r.tail===null?r.tail=null:r.tail.sibling=null:h.sibling=null}}function Kt(r){var s=r.alternate!==null&&r.alternate.child===r.child,a=0,h=0;if(s)for(var f=r.child;f!==null;)a|=f.lanes|f.childLanes,h|=f.subtreeFlags&14680064,h|=f.flags&14680064,f.return=r,f=f.sibling;else for(f=r.child;f!==null;)a|=f.lanes|f.childLanes,h|=f.subtreeFlags,h|=f.flags,f.return=r,f=f.sibling;return r.subtreeFlags|=h,r.childLanes=a,s}function I1(r,s,a){var h=s.pendingProps;switch($d(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Kt(s),null;case 1:return dn(s.type)&&oc(),Kt(s),null;case 3:return h=s.stateNode,Zo(),rt(hn),rt(Ht),nf(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(r===null||r.child===null)&&(hc(s)?s.flags|=4:r===null||r.memoizedState.isDehydrated&&!(s.flags&256)||(s.flags|=1024,tr!==null&&(Of(tr),tr=null))),Tf(r,s),Kt(s),null;case 5:ef(s);var f=Ls(Pl.current);if(a=s.type,r!==null&&s.stateNode!=null)qy(r,s,a,h,f),r.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!h){if(s.stateNode===null)throw Error(t(166));return Kt(s),null}if(r=Ls(wr.current),hc(s)){h=s.stateNode,a=s.type;var g=s.memoizedProps;switch(h[_r]=s,h[Il]=g,r=(s.mode&1)!==0,a){case"dialog":nt("cancel",h),nt("close",h);break;case"iframe":case"object":case"embed":nt("load",h);break;case"video":case"audio":for(f=0;f<wl.length;f++)nt(wl[f],h);break;case"source":nt("error",h);break;case"img":case"image":case"link":nt("error",h),nt("load",h);break;case"details":nt("toggle",h);break;case"input":po(h,g),nt("invalid",h);break;case"select":h._wrapperState={wasMultiple:!!g.multiple},nt("invalid",h);break;case"textarea":go(h,g),nt("invalid",h)}Za(a,g),f=null;for(var w in g)if(g.hasOwnProperty(w)){var A=g[w];w==="children"?typeof A=="string"?h.textContent!==A&&(g.suppressHydrationWarning!==!0&&rc(h.textContent,A,r),f=["children",A]):typeof A=="number"&&h.textContent!==""+A&&(g.suppressHydrationWarning!==!0&&rc(h.textContent,A,r),f=["children",""+A]):o.hasOwnProperty(w)&&A!=null&&w==="onScroll"&&nt("scroll",h)}switch(a){case"input":Or(h),ku(h,g,!0);break;case"textarea":Or(h),Qa(h);break;case"select":case"option":break;default:typeof g.onClick=="function"&&(h.onclick=ic)}h=f,s.updateQueue=h,h!==null&&(s.flags|=4)}else{w=f.nodeType===9?f:f.ownerDocument,r==="http://www.w3.org/1999/xhtml"&&(r=It(a)),r==="http://www.w3.org/1999/xhtml"?a==="script"?(r=w.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild)):typeof h.is=="string"?r=w.createElement(a,{is:h.is}):(r=w.createElement(a),a==="select"&&(w=r,h.multiple?w.multiple=!0:h.size&&(w.size=h.size))):r=w.createElementNS(r,a),r[_r]=s,r[Il]=h,$y(r,s,!1,!1),s.stateNode=r;e:{switch(w=el(a,h),a){case"dialog":nt("cancel",r),nt("close",r),f=h;break;case"iframe":case"object":case"embed":nt("load",r),f=h;break;case"video":case"audio":for(f=0;f<wl.length;f++)nt(wl[f],r);f=h;break;case"source":nt("error",r),f=h;break;case"img":case"image":case"link":nt("error",r),nt("load",r),f=h;break;case"details":nt("toggle",r),f=h;break;case"input":po(r,h),f=ps(r,h),nt("invalid",r);break;case"option":f=h;break;case"select":r._wrapperState={wasMultiple:!!h.multiple},f=he({},h,{value:void 0}),nt("invalid",r);break;case"textarea":go(r,h),f=Ka(r,h),nt("invalid",r);break;default:f=h}Za(a,f),A=f;for(g in A)if(A.hasOwnProperty(g)){var D=A[g];g==="style"?Ja(r,D):g==="dangerouslySetInnerHTML"?(D=D?D.__html:void 0,D!=null&&Ga(r,D)):g==="children"?typeof D=="string"?(a!=="textarea"||D!=="")&&gi(r,D):typeof D=="number"&&gi(r,""+D):g!=="suppressContentEditableWarning"&&g!=="suppressHydrationWarning"&&g!=="autoFocus"&&(o.hasOwnProperty(g)?D!=null&&g==="onScroll"&&nt("scroll",r):D!=null&&K(r,g,D,w))}switch(a){case"input":Or(r),ku(r,h,!1);break;case"textarea":Or(r),Qa(r);break;case"option":h.value!=null&&r.setAttribute("value",""+Qe(h.value));break;case"select":r.multiple=!!h.multiple,g=h.value,g!=null?Lr(r,!!h.multiple,g,!1):h.defaultValue!=null&&Lr(r,!!h.multiple,h.defaultValue,!0);break;default:typeof f.onClick=="function"&&(r.onclick=ic)}switch(a){case"button":case"input":case"select":case"textarea":h=!!h.autoFocus;break e;case"img":h=!0;break e;default:h=!1}}h&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return Kt(s),null;case 6:if(r&&s.stateNode!=null)Hy(r,s,r.memoizedProps,h);else{if(typeof h!="string"&&s.stateNode===null)throw Error(t(166));if(a=Ls(Pl.current),Ls(wr.current),hc(s)){if(h=s.stateNode,a=s.memoizedProps,h[_r]=s,(g=h.nodeValue!==a)&&(r=Cn,r!==null))switch(r.tag){case 3:rc(h.nodeValue,a,(r.mode&1)!==0);break;case 5:r.memoizedProps.suppressHydrationWarning!==!0&&rc(h.nodeValue,a,(r.mode&1)!==0)}g&&(s.flags|=4)}else h=(a.nodeType===9?a:a.ownerDocument).createTextNode(h),h[_r]=s,s.stateNode=h}return Kt(s),null;case 13:if(rt(lt),h=s.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(ot&&Pn!==null&&s.mode&1&&!(s.flags&128))Qg(),Go(),s.flags|=98560,g=!1;else if(g=hc(s),h!==null&&h.dehydrated!==null){if(r===null){if(!g)throw Error(t(318));if(g=s.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(t(317));g[_r]=s}else Go(),!(s.flags&128)&&(s.memoizedState=null),s.flags|=4;Kt(s),g=!1}else tr!==null&&(Of(tr),tr=null),g=!0;if(!g)return s.flags&65536?s:null}return s.flags&128?(s.lanes=a,s):(h=h!==null,h!==(r!==null&&r.memoizedState!==null)&&h&&(s.child.flags|=8192,s.mode&1&&(r===null||lt.current&1?Ct===0&&(Ct=3):Vf())),s.updateQueue!==null&&(s.flags|=4),Kt(s),null);case 4:return Zo(),Tf(r,s),r===null&&El(s.stateNode.containerInfo),Kt(s),null;case 10:return Gd(s.type._context),Kt(s),null;case 17:return dn(s.type)&&oc(),Kt(s),null;case 19:if(rt(lt),g=s.memoizedState,g===null)return Kt(s),null;if(h=(s.flags&128)!==0,w=g.rendering,w===null)if(h)Ol(g,!1);else{if(Ct!==0||r!==null&&r.flags&128)for(r=s.child;r!==null;){if(w=yc(r),w!==null){for(s.flags|=128,Ol(g,!1),h=w.updateQueue,h!==null&&(s.updateQueue=h,s.flags|=4),s.subtreeFlags=0,h=a,a=s.child;a!==null;)g=a,r=h,g.flags&=14680066,w=g.alternate,w===null?(g.childLanes=0,g.lanes=r,g.child=null,g.subtreeFlags=0,g.memoizedProps=null,g.memoizedState=null,g.updateQueue=null,g.dependencies=null,g.stateNode=null):(g.childLanes=w.childLanes,g.lanes=w.lanes,g.child=w.child,g.subtreeFlags=0,g.deletions=null,g.memoizedProps=w.memoizedProps,g.memoizedState=w.memoizedState,g.updateQueue=w.updateQueue,g.type=w.type,r=w.dependencies,g.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),a=a.sibling;return tt(lt,lt.current&1|2),s.child}r=r.sibling}g.tail!==null&&et()>ra&&(s.flags|=128,h=!0,Ol(g,!1),s.lanes=4194304)}else{if(!h)if(r=yc(w),r!==null){if(s.flags|=128,h=!0,a=r.updateQueue,a!==null&&(s.updateQueue=a,s.flags|=4),Ol(g,!0),g.tail===null&&g.tailMode==="hidden"&&!w.alternate&&!ot)return Kt(s),null}else 2*et()-g.renderingStartTime>ra&&a!==1073741824&&(s.flags|=128,h=!0,Ol(g,!1),s.lanes=4194304);g.isBackwards?(w.sibling=s.child,s.child=w):(a=g.last,a!==null?a.sibling=w:s.child=w,g.last=w)}return g.tail!==null?(s=g.tail,g.rendering=s,g.tail=s.sibling,g.renderingStartTime=et(),s.sibling=null,a=lt.current,tt(lt,h?a&1|2:a&1),s):(Kt(s),null);case 22:case 23:return Lf(),h=s.memoizedState!==null,r!==null&&r.memoizedState!==null!==h&&(s.flags|=8192),h&&s.mode&1?kn&1073741824&&(Kt(s),s.subtreeFlags&6&&(s.flags|=8192)):Kt(s),null;case 24:return null;case 25:return null}throw Error(t(156,s.tag))}function S1(r,s){switch($d(s),s.tag){case 1:return dn(s.type)&&oc(),r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 3:return Zo(),rt(hn),rt(Ht),nf(),r=s.flags,r&65536&&!(r&128)?(s.flags=r&-65537|128,s):null;case 5:return ef(s),null;case 13:if(rt(lt),r=s.memoizedState,r!==null&&r.dehydrated!==null){if(s.alternate===null)throw Error(t(340));Go()}return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 19:return rt(lt),null;case 4:return Zo(),null;case 10:return Gd(s.type._context),null;case 22:case 23:return Lf(),null;case 24:return null;default:return null}}var Ac=!1,Qt=!1,R1=typeof WeakSet=="function"?WeakSet:Set,pe=null;function ta(r,s){var a=r.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(h){ht(r,s,h)}else a.current=null}function If(r,s,a){try{a()}catch(h){ht(r,s,h)}}var Wy=!1;function A1(r,s){if(Dd=Si,r=Sg(),Ad(r)){if("selectionStart"in r)var a={start:r.selectionStart,end:r.selectionEnd};else e:{a=(a=r.ownerDocument)&&a.defaultView||window;var h=a.getSelection&&a.getSelection();if(h&&h.rangeCount!==0){a=h.anchorNode;var f=h.anchorOffset,g=h.focusNode;h=h.focusOffset;try{a.nodeType,g.nodeType}catch{a=null;break e}var w=0,A=-1,D=-1,q=0,ee=0,ne=r,Z=null;t:for(;;){for(var ue;ne!==a||f!==0&&ne.nodeType!==3||(A=w+f),ne!==g||h!==0&&ne.nodeType!==3||(D=w+h),ne.nodeType===3&&(w+=ne.nodeValue.length),(ue=ne.firstChild)!==null;)Z=ne,ne=ue;for(;;){if(ne===r)break t;if(Z===a&&++q===f&&(A=w),Z===g&&++ee===h&&(D=w),(ue=ne.nextSibling)!==null)break;ne=Z,Z=ne.parentNode}ne=ue}a=A===-1||D===-1?null:{start:A,end:D}}else a=null}a=a||{start:0,end:0}}else a=null;for(Ld={focusedElem:r,selectionRange:a},Si=!1,pe=s;pe!==null;)if(s=pe,r=s.child,(s.subtreeFlags&1028)!==0&&r!==null)r.return=s,pe=r;else for(;pe!==null;){s=pe;try{var me=s.alternate;if(s.flags&1024)switch(s.tag){case 0:case 11:case 15:break;case 1:if(me!==null){var ge=me.memoizedProps,pt=me.memoizedState,B=s.stateNode,M=B.getSnapshotBeforeUpdate(s.elementType===s.type?ge:nr(s.type,ge),pt);B.__reactInternalSnapshotBeforeUpdate=M}break;case 3:var $=s.stateNode.containerInfo;$.nodeType===1?$.textContent="":$.nodeType===9&&$.documentElement&&$.removeChild($.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(re){ht(s,s.return,re)}if(r=s.sibling,r!==null){r.return=s.return,pe=r;break}pe=s.return}return me=Wy,Wy=!1,me}function Dl(r,s,a){var h=s.updateQueue;if(h=h!==null?h.lastEffect:null,h!==null){var f=h=h.next;do{if((f.tag&r)===r){var g=f.destroy;f.destroy=void 0,g!==void 0&&If(s,a,g)}f=f.next}while(f!==h)}}function Cc(r,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var a=s=s.next;do{if((a.tag&r)===r){var h=a.create;a.destroy=h()}a=a.next}while(a!==s)}}function Sf(r){var s=r.ref;if(s!==null){var a=r.stateNode;switch(r.tag){case 5:r=a;break;default:r=a}typeof s=="function"?s(r):s.current=r}}function Ky(r){var s=r.alternate;s!==null&&(r.alternate=null,Ky(s)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(s=r.stateNode,s!==null&&(delete s[_r],delete s[Il],delete s[Ud],delete s[l1],delete s[u1])),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}function Qy(r){return r.tag===5||r.tag===3||r.tag===4}function Gy(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||Qy(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function Rf(r,s,a){var h=r.tag;if(h===5||h===6)r=r.stateNode,s?a.nodeType===8?a.parentNode.insertBefore(r,s):a.insertBefore(r,s):(a.nodeType===8?(s=a.parentNode,s.insertBefore(r,a)):(s=a,s.appendChild(r)),a=a._reactRootContainer,a!=null||s.onclick!==null||(s.onclick=ic));else if(h!==4&&(r=r.child,r!==null))for(Rf(r,s,a),r=r.sibling;r!==null;)Rf(r,s,a),r=r.sibling}function Af(r,s,a){var h=r.tag;if(h===5||h===6)r=r.stateNode,s?a.insertBefore(r,s):a.appendChild(r);else if(h!==4&&(r=r.child,r!==null))for(Af(r,s,a),r=r.sibling;r!==null;)Af(r,s,a),r=r.sibling}var jt=null,rr=!1;function Oi(r,s,a){for(a=a.child;a!==null;)Xy(r,s,a),a=a.sibling}function Xy(r,s,a){if(In&&typeof In.onCommitFiberUnmount=="function")try{In.onCommitFiberUnmount(Is,a)}catch{}switch(a.tag){case 5:Qt||ta(a,s);case 6:var h=jt,f=rr;jt=null,Oi(r,s,a),jt=h,rr=f,jt!==null&&(rr?(r=jt,a=a.stateNode,r.nodeType===8?r.parentNode.removeChild(a):r.removeChild(a)):jt.removeChild(a.stateNode));break;case 18:jt!==null&&(rr?(r=jt,a=a.stateNode,r.nodeType===8?Fd(r.parentNode,a):r.nodeType===1&&Fd(r,a),Yn(r)):Fd(jt,a.stateNode));break;case 4:h=jt,f=rr,jt=a.stateNode.containerInfo,rr=!0,Oi(r,s,a),jt=h,rr=f;break;case 0:case 11:case 14:case 15:if(!Qt&&(h=a.updateQueue,h!==null&&(h=h.lastEffect,h!==null))){f=h=h.next;do{var g=f,w=g.destroy;g=g.tag,w!==void 0&&(g&2||g&4)&&If(a,s,w),f=f.next}while(f!==h)}Oi(r,s,a);break;case 1:if(!Qt&&(ta(a,s),h=a.stateNode,typeof h.componentWillUnmount=="function"))try{h.props=a.memoizedProps,h.state=a.memoizedState,h.componentWillUnmount()}catch(A){ht(a,s,A)}Oi(r,s,a);break;case 21:Oi(r,s,a);break;case 22:a.mode&1?(Qt=(h=Qt)||a.memoizedState!==null,Oi(r,s,a),Qt=h):Oi(r,s,a);break;default:Oi(r,s,a)}}function Jy(r){var s=r.updateQueue;if(s!==null){r.updateQueue=null;var a=r.stateNode;a===null&&(a=r.stateNode=new R1),s.forEach(function(h){var f=L1.bind(null,r,h);a.has(h)||(a.add(h),h.then(f,f))})}}function ir(r,s){var a=s.deletions;if(a!==null)for(var h=0;h<a.length;h++){var f=a[h];try{var g=r,w=s,A=w;e:for(;A!==null;){switch(A.tag){case 5:jt=A.stateNode,rr=!1;break e;case 3:jt=A.stateNode.containerInfo,rr=!0;break e;case 4:jt=A.stateNode.containerInfo,rr=!0;break e}A=A.return}if(jt===null)throw Error(t(160));Xy(g,w,f),jt=null,rr=!1;var D=f.alternate;D!==null&&(D.return=null),f.return=null}catch(q){ht(f,s,q)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)Yy(s,r),s=s.sibling}function Yy(r,s){var a=r.alternate,h=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:if(ir(s,r),Tr(r),h&4){try{Dl(3,r,r.return),Cc(3,r)}catch(ge){ht(r,r.return,ge)}try{Dl(5,r,r.return)}catch(ge){ht(r,r.return,ge)}}break;case 1:ir(s,r),Tr(r),h&512&&a!==null&&ta(a,a.return);break;case 5:if(ir(s,r),Tr(r),h&512&&a!==null&&ta(a,a.return),r.flags&32){var f=r.stateNode;try{gi(f,"")}catch(ge){ht(r,r.return,ge)}}if(h&4&&(f=r.stateNode,f!=null)){var g=r.memoizedProps,w=a!==null?a.memoizedProps:g,A=r.type,D=r.updateQueue;if(r.updateQueue=null,D!==null)try{A==="input"&&g.type==="radio"&&g.name!=null&&Ha(f,g),el(A,w);var q=el(A,g);for(w=0;w<D.length;w+=2){var ee=D[w],ne=D[w+1];ee==="style"?Ja(f,ne):ee==="dangerouslySetInnerHTML"?Ga(f,ne):ee==="children"?gi(f,ne):K(f,ee,ne,q)}switch(A){case"input":Wa(f,g);break;case"textarea":yo(f,g);break;case"select":var Z=f._wrapperState.wasMultiple;f._wrapperState.wasMultiple=!!g.multiple;var ue=g.value;ue!=null?Lr(f,!!g.multiple,ue,!1):Z!==!!g.multiple&&(g.defaultValue!=null?Lr(f,!!g.multiple,g.defaultValue,!0):Lr(f,!!g.multiple,g.multiple?[]:"",!1))}f[Il]=g}catch(ge){ht(r,r.return,ge)}}break;case 6:if(ir(s,r),Tr(r),h&4){if(r.stateNode===null)throw Error(t(162));f=r.stateNode,g=r.memoizedProps;try{f.nodeValue=g}catch(ge){ht(r,r.return,ge)}}break;case 3:if(ir(s,r),Tr(r),h&4&&a!==null&&a.memoizedState.isDehydrated)try{Yn(s.containerInfo)}catch(ge){ht(r,r.return,ge)}break;case 4:ir(s,r),Tr(r);break;case 13:ir(s,r),Tr(r),f=r.child,f.flags&8192&&(g=f.memoizedState!==null,f.stateNode.isHidden=g,!g||f.alternate!==null&&f.alternate.memoizedState!==null||(kf=et())),h&4&&Jy(r);break;case 22:if(ee=a!==null&&a.memoizedState!==null,r.mode&1?(Qt=(q=Qt)||ee,ir(s,r),Qt=q):ir(s,r),Tr(r),h&8192){if(q=r.memoizedState!==null,(r.stateNode.isHidden=q)&&!ee&&r.mode&1)for(pe=r,ee=r.child;ee!==null;){for(ne=pe=ee;pe!==null;){switch(Z=pe,ue=Z.child,Z.tag){case 0:case 11:case 14:case 15:Dl(4,Z,Z.return);break;case 1:ta(Z,Z.return);var me=Z.stateNode;if(typeof me.componentWillUnmount=="function"){h=Z,a=Z.return;try{s=h,me.props=s.memoizedProps,me.state=s.memoizedState,me.componentWillUnmount()}catch(ge){ht(h,a,ge)}}break;case 5:ta(Z,Z.return);break;case 22:if(Z.memoizedState!==null){tv(ne);continue}}ue!==null?(ue.return=Z,pe=ue):tv(ne)}ee=ee.sibling}e:for(ee=null,ne=r;;){if(ne.tag===5){if(ee===null){ee=ne;try{f=ne.stateNode,q?(g=f.style,typeof g.setProperty=="function"?g.setProperty("display","none","important"):g.display="none"):(A=ne.stateNode,D=ne.memoizedProps.style,w=D!=null&&D.hasOwnProperty("display")?D.display:null,A.style.display=Xa("display",w))}catch(ge){ht(r,r.return,ge)}}}else if(ne.tag===6){if(ee===null)try{ne.stateNode.nodeValue=q?"":ne.memoizedProps}catch(ge){ht(r,r.return,ge)}}else if((ne.tag!==22&&ne.tag!==23||ne.memoizedState===null||ne===r)&&ne.child!==null){ne.child.return=ne,ne=ne.child;continue}if(ne===r)break e;for(;ne.sibling===null;){if(ne.return===null||ne.return===r)break e;ee===ne&&(ee=null),ne=ne.return}ee===ne&&(ee=null),ne.sibling.return=ne.return,ne=ne.sibling}}break;case 19:ir(s,r),Tr(r),h&4&&Jy(r);break;case 21:break;default:ir(s,r),Tr(r)}}function Tr(r){var s=r.flags;if(s&2){try{e:{for(var a=r.return;a!==null;){if(Qy(a)){var h=a;break e}a=a.return}throw Error(t(160))}switch(h.tag){case 5:var f=h.stateNode;h.flags&32&&(gi(f,""),h.flags&=-33);var g=Gy(r);Af(r,g,f);break;case 3:case 4:var w=h.stateNode.containerInfo,A=Gy(r);Rf(r,A,w);break;default:throw Error(t(161))}}catch(D){ht(r,r.return,D)}r.flags&=-3}s&4096&&(r.flags&=-4097)}function C1(r,s,a){pe=r,Zy(r)}function Zy(r,s,a){for(var h=(r.mode&1)!==0;pe!==null;){var f=pe,g=f.child;if(f.tag===22&&h){var w=f.memoizedState!==null||Ac;if(!w){var A=f.alternate,D=A!==null&&A.memoizedState!==null||Qt;A=Ac;var q=Qt;if(Ac=w,(Qt=D)&&!q)for(pe=f;pe!==null;)w=pe,D=w.child,w.tag===22&&w.memoizedState!==null?nv(f):D!==null?(D.return=w,pe=D):nv(f);for(;g!==null;)pe=g,Zy(g),g=g.sibling;pe=f,Ac=A,Qt=q}ev(r)}else f.subtreeFlags&8772&&g!==null?(g.return=f,pe=g):ev(r)}}function ev(r){for(;pe!==null;){var s=pe;if(s.flags&8772){var a=s.alternate;try{if(s.flags&8772)switch(s.tag){case 0:case 11:case 15:Qt||Cc(5,s);break;case 1:var h=s.stateNode;if(s.flags&4&&!Qt)if(a===null)h.componentDidMount();else{var f=s.elementType===s.type?a.memoizedProps:nr(s.type,a.memoizedProps);h.componentDidUpdate(f,a.memoizedState,h.__reactInternalSnapshotBeforeUpdate)}var g=s.updateQueue;g!==null&&ty(s,g,h);break;case 3:var w=s.updateQueue;if(w!==null){if(a=null,s.child!==null)switch(s.child.tag){case 5:a=s.child.stateNode;break;case 1:a=s.child.stateNode}ty(s,w,a)}break;case 5:var A=s.stateNode;if(a===null&&s.flags&4){a=A;var D=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":D.autoFocus&&a.focus();break;case"img":D.src&&(a.src=D.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var q=s.alternate;if(q!==null){var ee=q.memoizedState;if(ee!==null){var ne=ee.dehydrated;ne!==null&&Yn(ne)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Qt||s.flags&512&&Sf(s)}catch(Z){ht(s,s.return,Z)}}if(s===r){pe=null;break}if(a=s.sibling,a!==null){a.return=s.return,pe=a;break}pe=s.return}}function tv(r){for(;pe!==null;){var s=pe;if(s===r){pe=null;break}var a=s.sibling;if(a!==null){a.return=s.return,pe=a;break}pe=s.return}}function nv(r){for(;pe!==null;){var s=pe;try{switch(s.tag){case 0:case 11:case 15:var a=s.return;try{Cc(4,s)}catch(D){ht(s,a,D)}break;case 1:var h=s.stateNode;if(typeof h.componentDidMount=="function"){var f=s.return;try{h.componentDidMount()}catch(D){ht(s,f,D)}}var g=s.return;try{Sf(s)}catch(D){ht(s,g,D)}break;case 5:var w=s.return;try{Sf(s)}catch(D){ht(s,w,D)}}}catch(D){ht(s,s.return,D)}if(s===r){pe=null;break}var A=s.sibling;if(A!==null){A.return=s.return,pe=A;break}pe=s.return}}var P1=Math.ceil,Pc=te.ReactCurrentDispatcher,Cf=te.ReactCurrentOwner,jn=te.ReactCurrentBatchConfig,$e=0,Dt=null,vt=null,zt=0,kn=0,na=Pi(0),Ct=0,Ll=null,Ms=0,kc=0,Pf=0,Vl=null,pn=null,kf=0,ra=1/0,Xr=null,xc=!1,xf=null,Di=null,bc=!1,Li=null,Nc=0,Ml=0,bf=null,Oc=-1,Dc=0;function sn(){return $e&6?et():Oc!==-1?Oc:Oc=et()}function Vi(r){return r.mode&1?$e&2&&zt!==0?zt&-zt:h1.transition!==null?(Dc===0&&(Dc=Rs()),Dc):(r=Me,r!==0||(r=window.event,r=r===void 0?16:hl(r.type)),r):1}function sr(r,s,a,h){if(50<Ml)throw Ml=0,bf=null,Error(t(185));wi(r,a,h),(!($e&2)||r!==Dt)&&(r===Dt&&(!($e&2)&&(kc|=a),Ct===4&&Mi(r,zt)),mn(r,h),a===1&&$e===0&&!(s.mode&1)&&(ra=et()+500,lc&&xi()))}function mn(r,s){var a=r.callbackNode;Fr(r,s);var h=Ss(r,r===Dt?zt:0);if(h===0)a!==null&&ol(a),r.callbackNode=null,r.callbackPriority=0;else if(s=h&-h,r.callbackPriority!==s){if(a!=null&&ol(a),s===1)r.tag===0?c1(iv.bind(null,r)):$g(iv.bind(null,r)),o1(function(){!($e&6)&&xi()}),a=null;else{switch(Ti(h)){case 1:a=Ts;break;case 4:a=yi;break;case 16:a=On;break;case 536870912:a=Du;break;default:a=On}a=dv(a,rv.bind(null,r))}r.callbackPriority=s,r.callbackNode=a}}function rv(r,s){if(Oc=-1,Dc=0,$e&6)throw Error(t(327));var a=r.callbackNode;if(ia()&&r.callbackNode!==a)return null;var h=Ss(r,r===Dt?zt:0);if(h===0)return null;if(h&30||h&r.expiredLanes||s)s=Lc(r,h);else{s=h;var f=$e;$e|=2;var g=ov();(Dt!==r||zt!==s)&&(Xr=null,ra=et()+500,Us(r,s));do try{b1();break}catch(A){sv(r,A)}while(!0);Qd(),Pc.current=g,$e=f,vt!==null?s=0:(Dt=null,zt=0,s=Ct)}if(s!==0){if(s===2&&(f=Sn(r),f!==0&&(h=f,s=Nf(r,f))),s===1)throw a=Ll,Us(r,0),Mi(r,h),mn(r,et()),a;if(s===6)Mi(r,h);else{if(f=r.current.alternate,!(h&30)&&!k1(f)&&(s=Lc(r,h),s===2&&(g=Sn(r),g!==0&&(h=g,s=Nf(r,g))),s===1))throw a=Ll,Us(r,0),Mi(r,h),mn(r,et()),a;switch(r.finishedWork=f,r.finishedLanes=h,s){case 0:case 1:throw Error(t(345));case 2:js(r,pn,Xr);break;case 3:if(Mi(r,h),(h&130023424)===h&&(s=kf+500-et(),10<s)){if(Ss(r,0)!==0)break;if(f=r.suspendedLanes,(f&h)!==h){sn(),r.pingedLanes|=r.suspendedLanes&f;break}r.timeoutHandle=Md(js.bind(null,r,pn,Xr),s);break}js(r,pn,Xr);break;case 4:if(Mi(r,h),(h&4194240)===h)break;for(s=r.eventTimes,f=-1;0<h;){var w=31-tn(h);g=1<<w,w=s[w],w>f&&(f=w),h&=~g}if(h=f,h=et()-h,h=(120>h?120:480>h?480:1080>h?1080:1920>h?1920:3e3>h?3e3:4320>h?4320:1960*P1(h/1960))-h,10<h){r.timeoutHandle=Md(js.bind(null,r,pn,Xr),h);break}js(r,pn,Xr);break;case 5:js(r,pn,Xr);break;default:throw Error(t(329))}}}return mn(r,et()),r.callbackNode===a?rv.bind(null,r):null}function Nf(r,s){var a=Vl;return r.current.memoizedState.isDehydrated&&(Us(r,s).flags|=256),r=Lc(r,s),r!==2&&(s=pn,pn=a,s!==null&&Of(s)),r}function Of(r){pn===null?pn=r:pn.push.apply(pn,r)}function k1(r){for(var s=r;;){if(s.flags&16384){var a=s.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var h=0;h<a.length;h++){var f=a[h],g=f.getSnapshot;f=f.value;try{if(!er(g(),f))return!1}catch{return!1}}}if(a=s.child,s.subtreeFlags&16384&&a!==null)a.return=s,s=a;else{if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Mi(r,s){for(s&=~Pf,s&=~kc,r.suspendedLanes|=s,r.pingedLanes&=~s,r=r.expirationTimes;0<s;){var a=31-tn(s),h=1<<a;r[a]=-1,s&=~h}}function iv(r){if($e&6)throw Error(t(327));ia();var s=Ss(r,0);if(!(s&1))return mn(r,et()),null;var a=Lc(r,s);if(r.tag!==0&&a===2){var h=Sn(r);h!==0&&(s=h,a=Nf(r,h))}if(a===1)throw a=Ll,Us(r,0),Mi(r,s),mn(r,et()),a;if(a===6)throw Error(t(345));return r.finishedWork=r.current.alternate,r.finishedLanes=s,js(r,pn,Xr),mn(r,et()),null}function Df(r,s){var a=$e;$e|=1;try{return r(s)}finally{$e=a,$e===0&&(ra=et()+500,lc&&xi())}}function Fs(r){Li!==null&&Li.tag===0&&!($e&6)&&ia();var s=$e;$e|=1;var a=jn.transition,h=Me;try{if(jn.transition=null,Me=1,r)return r()}finally{Me=h,jn.transition=a,$e=s,!($e&6)&&xi()}}function Lf(){kn=na.current,rt(na)}function Us(r,s){r.finishedWork=null,r.finishedLanes=0;var a=r.timeoutHandle;if(a!==-1&&(r.timeoutHandle=-1,s1(a)),vt!==null)for(a=vt.return;a!==null;){var h=a;switch($d(h),h.tag){case 1:h=h.type.childContextTypes,h!=null&&oc();break;case 3:Zo(),rt(hn),rt(Ht),nf();break;case 5:ef(h);break;case 4:Zo();break;case 13:rt(lt);break;case 19:rt(lt);break;case 10:Gd(h.type._context);break;case 22:case 23:Lf()}a=a.return}if(Dt=r,vt=r=Fi(r.current,null),zt=kn=s,Ct=0,Ll=null,Pf=kc=Ms=0,pn=Vl=null,Ds!==null){for(s=0;s<Ds.length;s++)if(a=Ds[s],h=a.interleaved,h!==null){a.interleaved=null;var f=h.next,g=a.pending;if(g!==null){var w=g.next;g.next=f,h.next=w}a.pending=h}Ds=null}return r}function sv(r,s){do{var a=vt;try{if(Qd(),vc.current=Tc,_c){for(var h=ut.memoizedState;h!==null;){var f=h.queue;f!==null&&(f.pending=null),h=h.next}_c=!1}if(Vs=0,Ot=At=ut=null,kl=!1,xl=0,Cf.current=null,a===null||a.return===null){Ct=1,Ll=s,vt=null;break}e:{var g=r,w=a.return,A=a,D=s;if(s=zt,A.flags|=32768,D!==null&&typeof D=="object"&&typeof D.then=="function"){var q=D,ee=A,ne=ee.tag;if(!(ee.mode&1)&&(ne===0||ne===11||ne===15)){var Z=ee.alternate;Z?(ee.updateQueue=Z.updateQueue,ee.memoizedState=Z.memoizedState,ee.lanes=Z.lanes):(ee.updateQueue=null,ee.memoizedState=null)}var ue=xy(w);if(ue!==null){ue.flags&=-257,by(ue,w,A,g,s),ue.mode&1&&ky(g,q,s),s=ue,D=q;var me=s.updateQueue;if(me===null){var ge=new Set;ge.add(D),s.updateQueue=ge}else me.add(D);break e}else{if(!(s&1)){ky(g,q,s),Vf();break e}D=Error(t(426))}}else if(ot&&A.mode&1){var pt=xy(w);if(pt!==null){!(pt.flags&65536)&&(pt.flags|=256),by(pt,w,A,g,s),Wd(ea(D,A));break e}}g=D=ea(D,A),Ct!==4&&(Ct=2),Vl===null?Vl=[g]:Vl.push(g),g=w;do{switch(g.tag){case 3:g.flags|=65536,s&=-s,g.lanes|=s;var B=Cy(g,D,s);ey(g,B);break e;case 1:A=D;var M=g.type,$=g.stateNode;if(!(g.flags&128)&&(typeof M.getDerivedStateFromError=="function"||$!==null&&typeof $.componentDidCatch=="function"&&(Di===null||!Di.has($)))){g.flags|=65536,s&=-s,g.lanes|=s;var re=Py(g,A,s);ey(g,re);break e}}g=g.return}while(g!==null)}lv(a)}catch(ye){s=ye,vt===a&&a!==null&&(vt=a=a.return);continue}break}while(!0)}function ov(){var r=Pc.current;return Pc.current=Tc,r===null?Tc:r}function Vf(){(Ct===0||Ct===3||Ct===2)&&(Ct=4),Dt===null||!(Ms&268435455)&&!(kc&268435455)||Mi(Dt,zt)}function Lc(r,s){var a=$e;$e|=2;var h=ov();(Dt!==r||zt!==s)&&(Xr=null,Us(r,s));do try{x1();break}catch(f){sv(r,f)}while(!0);if(Qd(),$e=a,Pc.current=h,vt!==null)throw Error(t(261));return Dt=null,zt=0,Ct}function x1(){for(;vt!==null;)av(vt)}function b1(){for(;vt!==null&&!Nu();)av(vt)}function av(r){var s=hv(r.alternate,r,kn);r.memoizedProps=r.pendingProps,s===null?lv(r):vt=s,Cf.current=null}function lv(r){var s=r;do{var a=s.alternate;if(r=s.return,s.flags&32768){if(a=S1(a,s),a!==null){a.flags&=32767,vt=a;return}if(r!==null)r.flags|=32768,r.subtreeFlags=0,r.deletions=null;else{Ct=6,vt=null;return}}else if(a=I1(a,s,kn),a!==null){vt=a;return}if(s=s.sibling,s!==null){vt=s;return}vt=s=r}while(s!==null);Ct===0&&(Ct=5)}function js(r,s,a){var h=Me,f=jn.transition;try{jn.transition=null,Me=1,N1(r,s,a,h)}finally{jn.transition=f,Me=h}return null}function N1(r,s,a,h){do ia();while(Li!==null);if($e&6)throw Error(t(327));a=r.finishedWork;var f=r.finishedLanes;if(a===null)return null;if(r.finishedWork=null,r.finishedLanes=0,a===r.current)throw Error(t(177));r.callbackNode=null,r.callbackPriority=0;var g=a.lanes|a.childLanes;if(Ye(r,g),r===Dt&&(vt=Dt=null,zt=0),!(a.subtreeFlags&2064)&&!(a.flags&2064)||bc||(bc=!0,dv(On,function(){return ia(),null})),g=(a.flags&15990)!==0,a.subtreeFlags&15990||g){g=jn.transition,jn.transition=null;var w=Me;Me=1;var A=$e;$e|=4,Cf.current=null,A1(r,a),Yy(a,r),YT(Ld),Si=!!Dd,Ld=Dd=null,r.current=a,C1(a),vd(),$e=A,Me=w,jn.transition=g}else r.current=a;if(bc&&(bc=!1,Li=r,Nc=f),g=r.pendingLanes,g===0&&(Di=null),Lu(a.stateNode),mn(r,et()),s!==null)for(h=r.onRecoverableError,a=0;a<s.length;a++)f=s[a],h(f.value,{componentStack:f.stack,digest:f.digest});if(xc)throw xc=!1,r=xf,xf=null,r;return Nc&1&&r.tag!==0&&ia(),g=r.pendingLanes,g&1?r===bf?Ml++:(Ml=0,bf=r):Ml=0,xi(),null}function ia(){if(Li!==null){var r=Ti(Nc),s=jn.transition,a=Me;try{if(jn.transition=null,Me=16>r?16:r,Li===null)var h=!1;else{if(r=Li,Li=null,Nc=0,$e&6)throw Error(t(331));var f=$e;for($e|=4,pe=r.current;pe!==null;){var g=pe,w=g.child;if(pe.flags&16){var A=g.deletions;if(A!==null){for(var D=0;D<A.length;D++){var q=A[D];for(pe=q;pe!==null;){var ee=pe;switch(ee.tag){case 0:case 11:case 15:Dl(8,ee,g)}var ne=ee.child;if(ne!==null)ne.return=ee,pe=ne;else for(;pe!==null;){ee=pe;var Z=ee.sibling,ue=ee.return;if(Ky(ee),ee===q){pe=null;break}if(Z!==null){Z.return=ue,pe=Z;break}pe=ue}}}var me=g.alternate;if(me!==null){var ge=me.child;if(ge!==null){me.child=null;do{var pt=ge.sibling;ge.sibling=null,ge=pt}while(ge!==null)}}pe=g}}if(g.subtreeFlags&2064&&w!==null)w.return=g,pe=w;else e:for(;pe!==null;){if(g=pe,g.flags&2048)switch(g.tag){case 0:case 11:case 15:Dl(9,g,g.return)}var B=g.sibling;if(B!==null){B.return=g.return,pe=B;break e}pe=g.return}}var M=r.current;for(pe=M;pe!==null;){w=pe;var $=w.child;if(w.subtreeFlags&2064&&$!==null)$.return=w,pe=$;else e:for(w=M;pe!==null;){if(A=pe,A.flags&2048)try{switch(A.tag){case 0:case 11:case 15:Cc(9,A)}}catch(ye){ht(A,A.return,ye)}if(A===w){pe=null;break e}var re=A.sibling;if(re!==null){re.return=A.return,pe=re;break e}pe=A.return}}if($e=f,xi(),In&&typeof In.onPostCommitFiberRoot=="function")try{In.onPostCommitFiberRoot(Is,r)}catch{}h=!0}return h}finally{Me=a,jn.transition=s}}return!1}function uv(r,s,a){s=ea(a,s),s=Cy(r,s,1),r=Ni(r,s,1),s=sn(),r!==null&&(wi(r,1,s),mn(r,s))}function ht(r,s,a){if(r.tag===3)uv(r,r,a);else for(;s!==null;){if(s.tag===3){uv(s,r,a);break}else if(s.tag===1){var h=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(Di===null||!Di.has(h))){r=ea(a,r),r=Py(s,r,1),s=Ni(s,r,1),r=sn(),s!==null&&(wi(s,1,r),mn(s,r));break}}s=s.return}}function O1(r,s,a){var h=r.pingCache;h!==null&&h.delete(s),s=sn(),r.pingedLanes|=r.suspendedLanes&a,Dt===r&&(zt&a)===a&&(Ct===4||Ct===3&&(zt&130023424)===zt&&500>et()-kf?Us(r,0):Pf|=a),mn(r,s)}function cv(r,s){s===0&&(r.mode&1?(s=Co,Co<<=1,!(Co&130023424)&&(Co=4194304)):s=1);var a=sn();r=Kr(r,s),r!==null&&(wi(r,s,a),mn(r,a))}function D1(r){var s=r.memoizedState,a=0;s!==null&&(a=s.retryLane),cv(r,a)}function L1(r,s){var a=0;switch(r.tag){case 13:var h=r.stateNode,f=r.memoizedState;f!==null&&(a=f.retryLane);break;case 19:h=r.stateNode;break;default:throw Error(t(314))}h!==null&&h.delete(s),cv(r,a)}var hv;hv=function(r,s,a){if(r!==null)if(r.memoizedProps!==s.pendingProps||hn.current)fn=!0;else{if(!(r.lanes&a)&&!(s.flags&128))return fn=!1,T1(r,s,a);fn=!!(r.flags&131072)}else fn=!1,ot&&s.flags&1048576&&qg(s,cc,s.index);switch(s.lanes=0,s.tag){case 2:var h=s.type;Rc(r,s),r=s.pendingProps;var f=Wo(s,Ht.current);Yo(s,a),f=of(null,s,h,r,f,a);var g=af();return s.flags|=1,typeof f=="object"&&f!==null&&typeof f.render=="function"&&f.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,dn(h)?(g=!0,ac(s)):g=!1,s.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,Yd(s),f.updater=Ic,s.stateNode=f,f._reactInternals=s,ff(s,h,r,a),s=yf(null,s,h,!0,g,a)):(s.tag=0,ot&&g&&Bd(s),rn(null,s,f,a),s=s.child),s;case 16:h=s.elementType;e:{switch(Rc(r,s),r=s.pendingProps,f=h._init,h=f(h._payload),s.type=h,f=s.tag=M1(h),r=nr(h,r),f){case 0:s=gf(null,s,h,r,a);break e;case 1:s=My(null,s,h,r,a);break e;case 11:s=Ny(null,s,h,r,a);break e;case 14:s=Oy(null,s,h,nr(h.type,r),a);break e}throw Error(t(306,h,""))}return s;case 0:return h=s.type,f=s.pendingProps,f=s.elementType===h?f:nr(h,f),gf(r,s,h,f,a);case 1:return h=s.type,f=s.pendingProps,f=s.elementType===h?f:nr(h,f),My(r,s,h,f,a);case 3:e:{if(Fy(s),r===null)throw Error(t(387));h=s.pendingProps,g=s.memoizedState,f=g.element,Zg(r,s),gc(s,h,null,a);var w=s.memoizedState;if(h=w.element,g.isDehydrated)if(g={element:h,isDehydrated:!1,cache:w.cache,pendingSuspenseBoundaries:w.pendingSuspenseBoundaries,transitions:w.transitions},s.updateQueue.baseState=g,s.memoizedState=g,s.flags&256){f=ea(Error(t(423)),s),s=Uy(r,s,h,a,f);break e}else if(h!==f){f=ea(Error(t(424)),s),s=Uy(r,s,h,a,f);break e}else for(Pn=Ci(s.stateNode.containerInfo.firstChild),Cn=s,ot=!0,tr=null,a=Jg(s,null,h,a),s.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(Go(),h===f){s=Gr(r,s,a);break e}rn(r,s,h,a)}s=s.child}return s;case 5:return ny(s),r===null&&Hd(s),h=s.type,f=s.pendingProps,g=r!==null?r.memoizedProps:null,w=f.children,Vd(h,f)?w=null:g!==null&&Vd(h,g)&&(s.flags|=32),Vy(r,s),rn(r,s,w,a),s.child;case 6:return r===null&&Hd(s),null;case 13:return jy(r,s,a);case 4:return Zd(s,s.stateNode.containerInfo),h=s.pendingProps,r===null?s.child=Xo(s,null,h,a):rn(r,s,h,a),s.child;case 11:return h=s.type,f=s.pendingProps,f=s.elementType===h?f:nr(h,f),Ny(r,s,h,f,a);case 7:return rn(r,s,s.pendingProps,a),s.child;case 8:return rn(r,s,s.pendingProps.children,a),s.child;case 12:return rn(r,s,s.pendingProps.children,a),s.child;case 10:e:{if(h=s.type._context,f=s.pendingProps,g=s.memoizedProps,w=f.value,tt(fc,h._currentValue),h._currentValue=w,g!==null)if(er(g.value,w)){if(g.children===f.children&&!hn.current){s=Gr(r,s,a);break e}}else for(g=s.child,g!==null&&(g.return=s);g!==null;){var A=g.dependencies;if(A!==null){w=g.child;for(var D=A.firstContext;D!==null;){if(D.context===h){if(g.tag===1){D=Qr(-1,a&-a),D.tag=2;var q=g.updateQueue;if(q!==null){q=q.shared;var ee=q.pending;ee===null?D.next=D:(D.next=ee.next,ee.next=D),q.pending=D}}g.lanes|=a,D=g.alternate,D!==null&&(D.lanes|=a),Xd(g.return,a,s),A.lanes|=a;break}D=D.next}}else if(g.tag===10)w=g.type===s.type?null:g.child;else if(g.tag===18){if(w=g.return,w===null)throw Error(t(341));w.lanes|=a,A=w.alternate,A!==null&&(A.lanes|=a),Xd(w,a,s),w=g.sibling}else w=g.child;if(w!==null)w.return=g;else for(w=g;w!==null;){if(w===s){w=null;break}if(g=w.sibling,g!==null){g.return=w.return,w=g;break}w=w.return}g=w}rn(r,s,f.children,a),s=s.child}return s;case 9:return f=s.type,h=s.pendingProps.children,Yo(s,a),f=Fn(f),h=h(f),s.flags|=1,rn(r,s,h,a),s.child;case 14:return h=s.type,f=nr(h,s.pendingProps),f=nr(h.type,f),Oy(r,s,h,f,a);case 15:return Dy(r,s,s.type,s.pendingProps,a);case 17:return h=s.type,f=s.pendingProps,f=s.elementType===h?f:nr(h,f),Rc(r,s),s.tag=1,dn(h)?(r=!0,ac(s)):r=!1,Yo(s,a),Ry(s,h,f),ff(s,h,f,a),yf(null,s,h,!0,r,a);case 19:return By(r,s,a);case 22:return Ly(r,s,a)}throw Error(t(156,s.tag))};function dv(r,s){return Ro(r,s)}function V1(r,s,a,h){this.tag=r,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function zn(r,s,a,h){return new V1(r,s,a,h)}function Mf(r){return r=r.prototype,!(!r||!r.isReactComponent)}function M1(r){if(typeof r=="function")return Mf(r)?1:0;if(r!=null){if(r=r.$$typeof,r===F)return 11;if(r===Et)return 14}return 2}function Fi(r,s){var a=r.alternate;return a===null?(a=zn(r.tag,s,r.key,r.mode),a.elementType=r.elementType,a.type=r.type,a.stateNode=r.stateNode,a.alternate=r,r.alternate=a):(a.pendingProps=s,a.type=r.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=r.flags&14680064,a.childLanes=r.childLanes,a.lanes=r.lanes,a.child=r.child,a.memoizedProps=r.memoizedProps,a.memoizedState=r.memoizedState,a.updateQueue=r.updateQueue,s=r.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},a.sibling=r.sibling,a.index=r.index,a.ref=r.ref,a}function Vc(r,s,a,h,f,g){var w=2;if(h=r,typeof r=="function")Mf(r)&&(w=1);else if(typeof r=="string")w=5;else e:switch(r){case C:return zs(a.children,f,g,s);case I:w=8,f|=8;break;case R:return r=zn(12,a,s,f|2),r.elementType=R,r.lanes=g,r;case k:return r=zn(13,a,s,f),r.elementType=k,r.lanes=g,r;case at:return r=zn(19,a,s,f),r.elementType=at,r.lanes=g,r;case He:return Mc(a,f,g,s);default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case O:w=10;break e;case L:w=9;break e;case F:w=11;break e;case Et:w=14;break e;case Tt:w=16,h=null;break e}throw Error(t(130,r==null?r:typeof r,""))}return s=zn(w,a,s,f),s.elementType=r,s.type=h,s.lanes=g,s}function zs(r,s,a,h){return r=zn(7,r,h,s),r.lanes=a,r}function Mc(r,s,a,h){return r=zn(22,r,h,s),r.elementType=He,r.lanes=a,r.stateNode={isHidden:!1},r}function Ff(r,s,a){return r=zn(6,r,null,s),r.lanes=a,r}function Uf(r,s,a){return s=zn(4,r.children!==null?r.children:[],r.key,s),s.lanes=a,s.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},s}function F1(r,s,a,h,f){this.tag=s,this.containerInfo=r,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=_i(0),this.expirationTimes=_i(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=_i(0),this.identifierPrefix=h,this.onRecoverableError=f,this.mutableSourceEagerHydrationData=null}function jf(r,s,a,h,f,g,w,A,D){return r=new F1(r,s,a,A,D),s===1?(s=1,g===!0&&(s|=8)):s=0,g=zn(3,null,null,s),r.current=g,g.stateNode=r,g.memoizedState={element:h,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},Yd(g),r}function U1(r,s,a){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ae,key:h==null?null:""+h,children:r,containerInfo:s,implementation:a}}function fv(r){if(!r)return ki;r=r._reactInternals;e:{if(Kn(r)!==r||r.tag!==1)throw Error(t(170));var s=r;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(dn(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(t(171))}if(r.tag===1){var a=r.type;if(dn(a))return zg(r,a,s)}return s}function pv(r,s,a,h,f,g,w,A,D){return r=jf(a,h,!0,r,f,g,w,A,D),r.context=fv(null),a=r.current,h=sn(),f=Vi(a),g=Qr(h,f),g.callback=s??null,Ni(a,g,f),r.current.lanes=f,wi(r,f,h),mn(r,h),r}function Fc(r,s,a,h){var f=s.current,g=sn(),w=Vi(f);return a=fv(a),s.context===null?s.context=a:s.pendingContext=a,s=Qr(g,w),s.payload={element:r},h=h===void 0?null:h,h!==null&&(s.callback=h),r=Ni(f,s,w),r!==null&&(sr(r,f,w,g),mc(r,f,w)),w}function Uc(r){if(r=r.current,!r.child)return null;switch(r.child.tag){case 5:return r.child.stateNode;default:return r.child.stateNode}}function mv(r,s){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var a=r.retryLane;r.retryLane=a!==0&&a<s?a:s}}function zf(r,s){mv(r,s),(r=r.alternate)&&mv(r,s)}function j1(){return null}var gv=typeof reportError=="function"?reportError:function(r){console.error(r)};function Bf(r){this._internalRoot=r}jc.prototype.render=Bf.prototype.render=function(r){var s=this._internalRoot;if(s===null)throw Error(t(409));Fc(r,s,null,null)},jc.prototype.unmount=Bf.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var s=r.containerInfo;Fs(function(){Fc(null,r,null,null)}),s[$r]=null}};function jc(r){this._internalRoot=r}jc.prototype.unstable_scheduleHydration=function(r){if(r){var s=ju();r={blockedOn:null,target:r,priority:s};for(var a=0;a<mr.length&&s!==0&&s<mr[a].priority;a++);mr.splice(a,0,r),a===0&&$u(r)}};function $f(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function zc(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11&&(r.nodeType!==8||r.nodeValue!==" react-mount-point-unstable "))}function yv(){}function z1(r,s,a,h,f){if(f){if(typeof h=="function"){var g=h;h=function(){var q=Uc(w);g.call(q)}}var w=pv(s,h,r,0,null,!1,!1,"",yv);return r._reactRootContainer=w,r[$r]=w.current,El(r.nodeType===8?r.parentNode:r),Fs(),w}for(;f=r.lastChild;)r.removeChild(f);if(typeof h=="function"){var A=h;h=function(){var q=Uc(D);A.call(q)}}var D=jf(r,0,!1,null,null,!1,!1,"",yv);return r._reactRootContainer=D,r[$r]=D.current,El(r.nodeType===8?r.parentNode:r),Fs(function(){Fc(s,D,a,h)}),D}function Bc(r,s,a,h,f){var g=a._reactRootContainer;if(g){var w=g;if(typeof f=="function"){var A=f;f=function(){var D=Uc(w);A.call(D)}}Fc(s,w,r,f)}else w=z1(a,s,r,f,h);return Uc(w)}Fu=function(r){switch(r.tag){case 3:var s=r.stateNode;if(s.current.memoizedState.isDehydrated){var a=vi(s.pendingLanes);a!==0&&(Ei(s,a|1),mn(s,et()),!($e&6)&&(ra=et()+500,xi()))}break;case 13:Fs(function(){var h=Kr(r,1);if(h!==null){var f=sn();sr(h,r,1,f)}}),zf(r,1)}},Po=function(r){if(r.tag===13){var s=Kr(r,134217728);if(s!==null){var a=sn();sr(s,r,134217728,a)}zf(r,134217728)}},Uu=function(r){if(r.tag===13){var s=Vi(r),a=Kr(r,s);if(a!==null){var h=sn();sr(a,r,s,h)}zf(r,s)}},ju=function(){return Me},zu=function(r,s){var a=Me;try{return Me=r,s()}finally{Me=a}},_o=function(r,s,a){switch(s){case"input":if(Wa(r,a),s=a.name,a.type==="radio"&&s!=null){for(a=r;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<a.length;s++){var h=a[s];if(h!==r&&h.form===r.form){var f=sc(h);if(!f)throw Error(t(90));fo(h),Wa(h,f)}}}break;case"textarea":yo(r,a);break;case"select":s=a.value,s!=null&&Lr(r,!!a.multiple,s,!1)}},vs=Df,nl=Fs;var B1={usingClientEntryPoint:!1,Events:[Sl,qo,sc,fr,tl,Df]},Fl={findFiberByHostInstance:xs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},$1={bundleType:Fl.bundleType,version:Fl.version,rendererPackageName:Fl.rendererPackageName,rendererConfig:Fl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:te.ReactCurrentDispatcher,findHostInstanceByFiber:function(r){return r=sl(r),r===null?null:r.stateNode},findFiberByHostInstance:Fl.findFiberByHostInstance||j1,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var $c=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!$c.isDisabled&&$c.supportsFiber)try{Is=$c.inject($1),In=$c}catch{}}return gn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=B1,gn.createPortal=function(r,s){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!$f(s))throw Error(t(200));return U1(r,s,null,a)},gn.createRoot=function(r,s){if(!$f(r))throw Error(t(299));var a=!1,h="",f=gv;return s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(h=s.identifierPrefix),s.onRecoverableError!==void 0&&(f=s.onRecoverableError)),s=jf(r,1,!1,null,null,a,!1,h,f),r[$r]=s.current,El(r.nodeType===8?r.parentNode:r),new Bf(s)},gn.findDOMNode=function(r){if(r==null)return null;if(r.nodeType===1)return r;var s=r._reactInternals;if(s===void 0)throw typeof r.render=="function"?Error(t(188)):(r=Object.keys(r).join(","),Error(t(268,r)));return r=sl(s),r=r===null?null:r.stateNode,r},gn.flushSync=function(r){return Fs(r)},gn.hydrate=function(r,s,a){if(!zc(s))throw Error(t(200));return Bc(null,r,s,!0,a)},gn.hydrateRoot=function(r,s,a){if(!$f(r))throw Error(t(405));var h=a!=null&&a.hydratedSources||null,f=!1,g="",w=gv;if(a!=null&&(a.unstable_strictMode===!0&&(f=!0),a.identifierPrefix!==void 0&&(g=a.identifierPrefix),a.onRecoverableError!==void 0&&(w=a.onRecoverableError)),s=pv(s,null,r,1,a??null,f,!1,g,w),r[$r]=s.current,El(r),h)for(r=0;r<h.length;r++)a=h[r],f=a._getVersion,f=f(a._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[a,f]:s.mutableSourceEagerHydrationData.push(a,f);return new jc(s)},gn.render=function(r,s,a){if(!zc(s))throw Error(t(200));return Bc(null,r,s,!1,a)},gn.unmountComponentAtNode=function(r){if(!zc(r))throw Error(t(40));return r._reactRootContainer?(Fs(function(){Bc(null,null,r,!1,function(){r._reactRootContainer=null,r[$r]=null})}),!0):!1},gn.unstable_batchedUpdates=Df,gn.unstable_renderSubtreeIntoContainer=function(r,s,a,h){if(!zc(a))throw Error(t(200));if(r==null||r._reactInternals===void 0)throw Error(t(38));return Bc(r,s,a,!1,h)},gn.version="18.3.1-next-f1338f8080-20240426",gn}var Av;function J1(){if(Av)return Kf.exports;Av=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Kf.exports=X1(),Kf.exports}var Cv;function Y1(){if(Cv)return Hc;Cv=1;var n=J1();return Hc.createRoot=n.createRoot,Hc.hydrateRoot=n.hydrateRoot,Hc}var Z1=Y1();const eI=P0(Z1);function k0(n){var e,t,i="";if(typeof n=="string"||typeof n=="number")i+=n;else if(typeof n=="object")if(Array.isArray(n)){var o=n.length;for(e=0;e<o;e++)n[e]&&(t=k0(n[e]))&&(i&&(i+=" "),i+=t)}else for(t in n)n[t]&&(i&&(i+=" "),i+=t);return i}function Zs(){for(var n,e,t=0,i="",o=arguments.length;t<o;t++)(n=arguments[t])&&(e=k0(n))&&(i&&(i+=" "),i+=e);return i}function tI(n){if(typeof document>"u")return;let e=document.head||document.getElementsByTagName("head")[0],t=document.createElement("style");t.type="text/css",e.firstChild?e.insertBefore(t,e.firstChild):e.appendChild(t),t.styleSheet?t.styleSheet.cssText=n:t.appendChild(document.createTextNode(n))}tI(`:root{--toastify-color-light: #fff;--toastify-color-dark: #121212;--toastify-color-info: #3498db;--toastify-color-success: #07bc0c;--toastify-color-warning: #f1c40f;--toastify-color-error: hsl(6, 78%, 57%);--toastify-color-transparent: rgba(255, 255, 255, .7);--toastify-icon-color-info: var(--toastify-color-info);--toastify-icon-color-success: var(--toastify-color-success);--toastify-icon-color-warning: var(--toastify-color-warning);--toastify-icon-color-error: var(--toastify-color-error);--toastify-container-width: fit-content;--toastify-toast-width: 320px;--toastify-toast-offset: 16px;--toastify-toast-top: max(var(--toastify-toast-offset), env(safe-area-inset-top));--toastify-toast-right: max(var(--toastify-toast-offset), env(safe-area-inset-right));--toastify-toast-left: max(var(--toastify-toast-offset), env(safe-area-inset-left));--toastify-toast-bottom: max(var(--toastify-toast-offset), env(safe-area-inset-bottom));--toastify-toast-background: #fff;--toastify-toast-padding: 14px;--toastify-toast-min-height: 64px;--toastify-toast-max-height: 800px;--toastify-toast-bd-radius: 6px;--toastify-toast-shadow: 0px 4px 12px rgba(0, 0, 0, .1);--toastify-font-family: sans-serif;--toastify-z-index: 9999;--toastify-text-color-light: #757575;--toastify-text-color-dark: #fff;--toastify-text-color-info: #fff;--toastify-text-color-success: #fff;--toastify-text-color-warning: #fff;--toastify-text-color-error: #fff;--toastify-spinner-color: #616161;--toastify-spinner-color-empty-area: #e0e0e0;--toastify-color-progress-light: linear-gradient(to right, #4cd964, #5ac8fa, #007aff, #34aadc, #5856d6, #ff2d55);--toastify-color-progress-dark: #bb86fc;--toastify-color-progress-info: var(--toastify-color-info);--toastify-color-progress-success: var(--toastify-color-success);--toastify-color-progress-warning: var(--toastify-color-warning);--toastify-color-progress-error: var(--toastify-color-error);--toastify-color-progress-bgo: .2}.Toastify__toast-container{z-index:var(--toastify-z-index);-webkit-transform:translate3d(0,0,var(--toastify-z-index));position:fixed;width:var(--toastify-container-width);box-sizing:border-box;color:#fff;display:flex;flex-direction:column}.Toastify__toast-container--top-left{top:var(--toastify-toast-top);left:var(--toastify-toast-left)}.Toastify__toast-container--top-center{top:var(--toastify-toast-top);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--top-right{top:var(--toastify-toast-top);right:var(--toastify-toast-right);align-items:end}.Toastify__toast-container--bottom-left{bottom:var(--toastify-toast-bottom);left:var(--toastify-toast-left)}.Toastify__toast-container--bottom-center{bottom:var(--toastify-toast-bottom);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--bottom-right{bottom:var(--toastify-toast-bottom);right:var(--toastify-toast-right);align-items:end}@media only screen and (max-width: 480px){.Toastify__toast-container{width:100vw;left:env(safe-area-inset-left);margin:0}.Toastify__toast-container--top-left,.Toastify__toast-container--top-center,.Toastify__toast-container--top-right{top:env(safe-area-inset-top);transform:translate(0)}.Toastify__toast-container--bottom-left,.Toastify__toast-container--bottom-center,.Toastify__toast-container--bottom-right{bottom:env(safe-area-inset-bottom);transform:translate(0)}.Toastify__toast-container--rtl{right:env(safe-area-inset-right);left:initial}.Toastify__toast{--toastify-toast-width: 100%;margin-bottom:0;border-radius:0}}.Toastify__toast{--y: 0;position:relative;touch-action:none;width:var(--toastify-toast-width);min-height:var(--toastify-toast-min-height);box-sizing:border-box;margin-bottom:1rem;padding:var(--toastify-toast-padding);border-radius:var(--toastify-toast-bd-radius);box-shadow:var(--toastify-toast-shadow);max-height:var(--toastify-toast-max-height);font-family:var(--toastify-font-family);z-index:0;display:flex;flex:1 auto;align-items:center;word-break:break-word}.Toastify__toast-container[data-stacked=true]{width:var(--toastify-toast-width)}.Toastify__toast--stacked{position:absolute;width:100%;transform:translate3d(0,var(--y),0) scale(var(--s));transition:transform .3s}.Toastify__toast--stacked[data-collapsed] .Toastify__toast-body,.Toastify__toast--stacked[data-collapsed] .Toastify__close-button{transition:opacity .1s}.Toastify__toast--stacked[data-collapsed=false]{overflow:visible}.Toastify__toast--stacked[data-collapsed=true]:not(:last-child)>*{opacity:0}.Toastify__toast--stacked:after{content:"";position:absolute;left:0;right:0;height:calc(var(--g) * 1px);bottom:100%}.Toastify__toast--stacked[data-pos=top]{top:0}.Toastify__toast--stacked[data-pos=bot]{bottom:0}.Toastify__toast--stacked[data-pos=bot].Toastify__toast--stacked:before{transform-origin:top}.Toastify__toast--stacked[data-pos=top].Toastify__toast--stacked:before{transform-origin:bottom}.Toastify__toast--stacked:before{content:"";position:absolute;left:0;right:0;bottom:0;height:100%;transform:scaleY(3);z-index:-1}.Toastify__toast--rtl{direction:rtl}.Toastify__toast--close-on-click{cursor:pointer}.Toastify__toast-icon{margin-inline-end:10px;width:22px;flex-shrink:0;display:flex}.Toastify--animate{animation-fill-mode:both;animation-duration:.5s}.Toastify--animate-icon{animation-fill-mode:both;animation-duration:.3s}.Toastify__toast-theme--dark{background:var(--toastify-color-dark);color:var(--toastify-text-color-dark)}.Toastify__toast-theme--light,.Toastify__toast-theme--colored.Toastify__toast--default{background:var(--toastify-color-light);color:var(--toastify-text-color-light)}.Toastify__toast-theme--colored.Toastify__toast--info{color:var(--toastify-text-color-info);background:var(--toastify-color-info)}.Toastify__toast-theme--colored.Toastify__toast--success{color:var(--toastify-text-color-success);background:var(--toastify-color-success)}.Toastify__toast-theme--colored.Toastify__toast--warning{color:var(--toastify-text-color-warning);background:var(--toastify-color-warning)}.Toastify__toast-theme--colored.Toastify__toast--error{color:var(--toastify-text-color-error);background:var(--toastify-color-error)}.Toastify__progress-bar-theme--light{background:var(--toastify-color-progress-light)}.Toastify__progress-bar-theme--dark{background:var(--toastify-color-progress-dark)}.Toastify__progress-bar--info{background:var(--toastify-color-progress-info)}.Toastify__progress-bar--success{background:var(--toastify-color-progress-success)}.Toastify__progress-bar--warning{background:var(--toastify-color-progress-warning)}.Toastify__progress-bar--error{background:var(--toastify-color-progress-error)}.Toastify__progress-bar-theme--colored.Toastify__progress-bar--info,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--success,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--warning,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--error{background:var(--toastify-color-transparent)}.Toastify__close-button{color:#fff;position:absolute;top:6px;right:6px;background:transparent;outline:none;border:none;padding:0;cursor:pointer;opacity:.7;transition:.3s ease;z-index:1}.Toastify__toast--rtl .Toastify__close-button{left:6px;right:unset}.Toastify__close-button--light{color:#000;opacity:.3}.Toastify__close-button>svg{fill:currentColor;height:16px;width:14px}.Toastify__close-button:hover,.Toastify__close-button:focus{opacity:1}@keyframes Toastify__trackProgress{0%{transform:scaleX(1)}to{transform:scaleX(0)}}.Toastify__progress-bar{position:absolute;bottom:0;left:0;width:100%;height:100%;z-index:1;opacity:.7;transform-origin:left}.Toastify__progress-bar--animated{animation:Toastify__trackProgress linear 1 forwards}.Toastify__progress-bar--controlled{transition:transform .2s}.Toastify__progress-bar--rtl{right:0;left:initial;transform-origin:right;border-bottom-left-radius:initial}.Toastify__progress-bar--wrp{position:absolute;overflow:hidden;bottom:0;left:0;width:100%;height:5px;border-bottom-left-radius:var(--toastify-toast-bd-radius);border-bottom-right-radius:var(--toastify-toast-bd-radius)}.Toastify__progress-bar--wrp[data-hidden=true]{opacity:0}.Toastify__progress-bar--bg{opacity:var(--toastify-color-progress-bgo);width:100%;height:100%}.Toastify__spinner{width:20px;height:20px;box-sizing:border-box;border:2px solid;border-radius:100%;border-color:var(--toastify-spinner-color-empty-area);border-right-color:var(--toastify-spinner-color);animation:Toastify__spin .65s linear infinite}@keyframes Toastify__bounceInRight{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(3000px,0,0)}60%{opacity:1;transform:translate3d(-25px,0,0)}75%{transform:translate3d(10px,0,0)}90%{transform:translate3d(-5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutRight{20%{opacity:1;transform:translate3d(-20px,var(--y),0)}to{opacity:0;transform:translate3d(2000px,var(--y),0)}}@keyframes Toastify__bounceInLeft{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(-3000px,0,0)}60%{opacity:1;transform:translate3d(25px,0,0)}75%{transform:translate3d(-10px,0,0)}90%{transform:translate3d(5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutLeft{20%{opacity:1;transform:translate3d(20px,var(--y),0)}to{opacity:0;transform:translate3d(-2000px,var(--y),0)}}@keyframes Toastify__bounceInUp{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,3000px,0)}60%{opacity:1;transform:translate3d(0,-20px,0)}75%{transform:translate3d(0,10px,0)}90%{transform:translate3d(0,-5px,0)}to{transform:translateZ(0)}}@keyframes Toastify__bounceOutUp{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,-2000px,0)}}@keyframes Toastify__bounceInDown{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,-3000px,0)}60%{opacity:1;transform:translate3d(0,25px,0)}75%{transform:translate3d(0,-10px,0)}90%{transform:translate3d(0,5px,0)}to{transform:none}}@keyframes Toastify__bounceOutDown{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,2000px,0)}}.Toastify__bounce-enter--top-left,.Toastify__bounce-enter--bottom-left{animation-name:Toastify__bounceInLeft}.Toastify__bounce-enter--top-right,.Toastify__bounce-enter--bottom-right{animation-name:Toastify__bounceInRight}.Toastify__bounce-enter--top-center{animation-name:Toastify__bounceInDown}.Toastify__bounce-enter--bottom-center{animation-name:Toastify__bounceInUp}.Toastify__bounce-exit--top-left,.Toastify__bounce-exit--bottom-left{animation-name:Toastify__bounceOutLeft}.Toastify__bounce-exit--top-right,.Toastify__bounce-exit--bottom-right{animation-name:Toastify__bounceOutRight}.Toastify__bounce-exit--top-center{animation-name:Toastify__bounceOutUp}.Toastify__bounce-exit--bottom-center{animation-name:Toastify__bounceOutDown}@keyframes Toastify__zoomIn{0%{opacity:0;transform:scale3d(.3,.3,.3)}50%{opacity:1}}@keyframes Toastify__zoomOut{0%{opacity:1}50%{opacity:0;transform:translate3d(0,var(--y),0) scale3d(.3,.3,.3)}to{opacity:0}}.Toastify__zoom-enter{animation-name:Toastify__zoomIn}.Toastify__zoom-exit{animation-name:Toastify__zoomOut}@keyframes Toastify__flipIn{0%{transform:perspective(400px) rotateX(90deg);animation-timing-function:ease-in;opacity:0}40%{transform:perspective(400px) rotateX(-20deg);animation-timing-function:ease-in}60%{transform:perspective(400px) rotateX(10deg);opacity:1}80%{transform:perspective(400px) rotateX(-5deg)}to{transform:perspective(400px)}}@keyframes Toastify__flipOut{0%{transform:translate3d(0,var(--y),0) perspective(400px)}30%{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(-20deg);opacity:1}to{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(90deg);opacity:0}}.Toastify__flip-enter{animation-name:Toastify__flipIn}.Toastify__flip-exit{animation-name:Toastify__flipOut}@keyframes Toastify__slideInRight{0%{transform:translate3d(110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInLeft{0%{transform:translate3d(-110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInUp{0%{transform:translate3d(0,110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInDown{0%{transform:translate3d(0,-110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideOutRight{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(110%,var(--y),0)}}@keyframes Toastify__slideOutLeft{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(-110%,var(--y),0)}}@keyframes Toastify__slideOutDown{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,500px,0)}}@keyframes Toastify__slideOutUp{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,-500px,0)}}.Toastify__slide-enter--top-left,.Toastify__slide-enter--bottom-left{animation-name:Toastify__slideInLeft}.Toastify__slide-enter--top-right,.Toastify__slide-enter--bottom-right{animation-name:Toastify__slideInRight}.Toastify__slide-enter--top-center{animation-name:Toastify__slideInDown}.Toastify__slide-enter--bottom-center{animation-name:Toastify__slideInUp}.Toastify__slide-exit--top-left,.Toastify__slide-exit--bottom-left{animation-name:Toastify__slideOutLeft;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-right,.Toastify__slide-exit--bottom-right{animation-name:Toastify__slideOutRight;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-center{animation-name:Toastify__slideOutUp;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--bottom-center{animation-name:Toastify__slideOutDown;animation-timing-function:ease-in;animation-duration:.3s}@keyframes Toastify__spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}
`);var du=n=>typeof n=="number"&&!isNaN(n),ro=n=>typeof n=="string",li=n=>typeof n=="function",nI=n=>ro(n)||du(n),fp=n=>ro(n)||li(n)?n:null,rI=(n,e)=>n===!1||du(n)&&n>0?n:e,pp=n=>le.isValidElement(n)||ro(n)||li(n)||du(n);function iI(n,e,t=300){let{scrollHeight:i,style:o}=n;requestAnimationFrame(()=>{o.minHeight="initial",o.height=i+"px",o.transition=`all ${t}ms`,requestAnimationFrame(()=>{o.height="0",o.padding="0",o.margin="0",setTimeout(e,t)})})}function sI({enter:n,exit:e,appendPosition:t=!1,collapse:i=!0,collapseDuration:o=300}){return function({children:l,position:c,preventExitTransition:d,done:p,nodeRef:y,isIn:_,playToast:E}){let S=t?`${n}--${c}`:n,P=t?`${e}--${c}`:e,x=le.useRef(0);return le.useLayoutEffect(()=>{let V=y.current,b=S.split(" "),G=Q=>{Q.target===y.current&&(E(),V.removeEventListener("animationend",G),V.removeEventListener("animationcancel",G),x.current===0&&Q.type!=="animationcancel"&&V.classList.remove(...b))};V.classList.add(...b),V.addEventListener("animationend",G),V.addEventListener("animationcancel",G)},[]),le.useEffect(()=>{let V=y.current,b=()=>{V.removeEventListener("animationend",b),i?iI(V,p,o):p()};_||(d?b():(x.current=1,V.className+=` ${P}`,V.addEventListener("animationend",b)))},[_]),qe.createElement(qe.Fragment,null,l)}}function Pv(n,e){return{content:x0(n.content,n.props),containerId:n.props.containerId,id:n.props.toastId,theme:n.props.theme,type:n.props.type,data:n.props.data||{},isLoading:n.props.isLoading,icon:n.props.icon,reason:n.removalReason,status:e}}function x0(n,e,t=!1){return le.isValidElement(n)&&!ro(n.type)?le.cloneElement(n,{closeToast:e.closeToast,toastProps:e,data:e.data,isPaused:t}):li(n)?n({closeToast:e.closeToast,toastProps:e,data:e.data,isPaused:t}):n}function oI({closeToast:n,theme:e,ariaLabel:t="close"}){return qe.createElement("button",{className:`Toastify__close-button Toastify__close-button--${e}`,type:"button",onClick:i=>{i.stopPropagation(),n(!0)},"aria-label":t},qe.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},qe.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}function aI({delay:n,isRunning:e,closeToast:t,type:i="default",hide:o,className:l,controlledProgress:c,progress:d,rtl:p,isIn:y,theme:_}){let E=o||c&&d===0,S={animationDuration:`${n}ms`,animationPlayState:e?"running":"paused"};c&&(S.transform=`scaleX(${d})`);let P=Zs("Toastify__progress-bar",c?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated",`Toastify__progress-bar-theme--${_}`,`Toastify__progress-bar--${i}`,{"Toastify__progress-bar--rtl":p}),x=li(l)?l({rtl:p,type:i,defaultClassName:P}):Zs(P,l),V={[c&&d>=1?"onTransitionEnd":"onAnimationEnd"]:c&&d<1?null:()=>{y&&t()}};return qe.createElement("div",{className:"Toastify__progress-bar--wrp","data-hidden":E},qe.createElement("div",{className:`Toastify__progress-bar--bg Toastify__progress-bar-theme--${_} Toastify__progress-bar--${i}`}),qe.createElement("div",{role:"progressbar","aria-hidden":E?"true":"false","aria-label":"notification timer",className:x,style:S,...V}))}var lI=1,b0=()=>`${lI++}`;function uI(n,e,t){let i=1,o=0,l=[],c=[],d=e,p=new Map,y=new Set,_=Q=>(y.add(Q),()=>y.delete(Q)),E=()=>{c=Array.from(p.values()),y.forEach(Q=>Q())},S=({containerId:Q,toastId:K,updateId:te})=>{let oe=Q?Q!==n:n!==1,ae=p.has(K)&&te==null;return oe||ae},P=(Q,K)=>{p.forEach(te=>{var oe;(K==null||K===te.props.toastId)&&((oe=te.toggle)==null||oe.call(te,Q))})},x=Q=>{var K,te;(te=(K=Q.props)==null?void 0:K.onClose)==null||te.call(K,Q.removalReason),Q.isActive=!1},V=Q=>{if(Q==null)p.forEach(x);else{let K=p.get(Q);K&&x(K)}E()},b=()=>{o-=l.length,l=[]},G=Q=>{var K,te;let{toastId:oe,updateId:ae}=Q.props,C=ae==null;Q.staleId&&p.delete(Q.staleId),Q.isActive=!0,p.set(oe,Q),E(),t(Pv(Q,C?"added":"updated")),C&&((te=(K=Q.props).onOpen)==null||te.call(K))};return{id:n,props:d,observe:_,toggle:P,removeToast:V,toasts:p,clearQueue:b,buildToast:(Q,K)=>{if(S(K))return;let{toastId:te,updateId:oe,data:ae,staleId:C,delay:I}=K,R=oe==null;R&&o++;let O={...d,style:d.toastStyle,key:i++,...Object.fromEntries(Object.entries(K).filter(([F,k])=>k!=null)),toastId:te,updateId:oe,data:ae,isIn:!1,className:fp(K.className||d.toastClassName),progressClassName:fp(K.progressClassName||d.progressClassName),autoClose:K.isLoading?!1:rI(K.autoClose,d.autoClose),closeToast(F){p.get(te).removalReason=F,V(te)},deleteToast(){let F=p.get(te);if(F!=null){if(t(Pv(F,"removed")),p.delete(te),o--,o<0&&(o=0),l.length>0){G(l.shift());return}E()}}};O.closeButton=d.closeButton,K.closeButton===!1||pp(K.closeButton)?O.closeButton=K.closeButton:K.closeButton===!0&&(O.closeButton=pp(d.closeButton)?d.closeButton:!0);let L={content:Q,props:O,staleId:C};d.limit&&d.limit>0&&o>d.limit&&R?l.push(L):du(I)?setTimeout(()=>{G(L)},I):G(L)},setProps(Q){d=Q},setToggle:(Q,K)=>{let te=p.get(Q);te&&(te.toggle=K)},isToastActive:Q=>{var K;return(K=p.get(Q))==null?void 0:K.isActive},getSnapshot:()=>c}}var ln=new Map,Jl=[],mp=new Set,cI=n=>mp.forEach(e=>e(n)),N0=()=>ln.size>0;function hI(){Jl.forEach(n=>D0(n.content,n.options)),Jl=[]}var dI=(n,{containerId:e})=>{var t;return(t=ln.get(e||1))==null?void 0:t.toasts.get(n)};function O0(n,e){var t;if(e)return!!((t=ln.get(e))!=null&&t.isToastActive(n));let i=!1;return ln.forEach(o=>{o.isToastActive(n)&&(i=!0)}),i}function fI(n){if(!N0()){Jl=Jl.filter(e=>n!=null&&e.options.toastId!==n);return}if(n==null||nI(n))ln.forEach(e=>{e.removeToast(n)});else if(n&&("containerId"in n||"id"in n)){let e=ln.get(n.containerId);e?e.removeToast(n.id):ln.forEach(t=>{t.removeToast(n.id)})}}var pI=(n={})=>{ln.forEach(e=>{e.props.limit&&(!n.containerId||e.id===n.containerId)&&e.clearQueue()})};function D0(n,e){pp(n)&&(N0()||Jl.push({content:n,options:e}),ln.forEach(t=>{t.buildToast(n,e)}))}function mI(n){var e;(e=ln.get(n.containerId||1))==null||e.setToggle(n.id,n.fn)}function L0(n,e){ln.forEach(t=>{(e==null||!(e!=null&&e.containerId)||(e==null?void 0:e.containerId)===t.id)&&t.toggle(n,e==null?void 0:e.id)})}function gI(n){let e=n.containerId||1;return{subscribe(t){let i=uI(e,n,cI);ln.set(e,i);let o=i.observe(t);return hI(),()=>{o(),ln.delete(e)}},setProps(t){var i;(i=ln.get(e))==null||i.setProps(t)},getSnapshot(){var t;return(t=ln.get(e))==null?void 0:t.getSnapshot()}}}function yI(n){return mp.add(n),()=>{mp.delete(n)}}function vI(n){return n&&(ro(n.toastId)||du(n.toastId))?n.toastId:b0()}function fu(n,e){return D0(n,e),e.toastId}function Fh(n,e){return{...e,type:e&&e.type||n,toastId:vI(e)}}function Uh(n){return(e,t)=>fu(e,Fh(n,t))}function ke(n,e){return fu(n,Fh("default",e))}ke.loading=(n,e)=>fu(n,Fh("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...e}));function _I(n,{pending:e,error:t,success:i},o){let l;e&&(l=ro(e)?ke.loading(e,o):ke.loading(e.render,{...o,...e}));let c={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},d=(y,_,E)=>{if(_==null){ke.dismiss(l);return}let S={type:y,...c,...o,data:E},P=ro(_)?{render:_}:_;return l?ke.update(l,{...S,...P}):ke(P.render,{...S,...P}),E},p=li(n)?n():n;return p.then(y=>d("success",i,y)).catch(y=>d("error",t,y)),p}ke.promise=_I;ke.success=Uh("success");ke.info=Uh("info");ke.error=Uh("error");ke.warning=Uh("warning");ke.warn=ke.warning;ke.dark=(n,e)=>fu(n,Fh("default",{theme:"dark",...e}));function wI(n){fI(n)}ke.dismiss=wI;ke.clearWaitingQueue=pI;ke.isActive=O0;ke.update=(n,e={})=>{let t=dI(n,e);if(t){let{props:i,content:o}=t,l={delay:100,...i,...e,toastId:e.toastId||n,updateId:b0()};l.toastId!==n&&(l.staleId=n);let c=l.render||o;delete l.render,fu(c,l)}};ke.done=n=>{ke.update(n,{progress:1})};ke.onChange=yI;ke.play=n=>L0(!0,n);ke.pause=n=>L0(!1,n);function EI(n){var e;let{subscribe:t,getSnapshot:i,setProps:o}=le.useRef(gI(n)).current;o(n);let l=(e=le.useSyncExternalStore(t,i,i))==null?void 0:e.slice();function c(d){if(!l)return[];let p=new Map;return n.newestOnTop&&l.reverse(),l.forEach(y=>{let{position:_}=y.props;p.has(_)||p.set(_,[]),p.get(_).push(y)}),Array.from(p,y=>d(y[0],y[1]))}return{getToastToRender:c,isToastActive:O0,count:l==null?void 0:l.length}}function TI(n){let[e,t]=le.useState(!1),[i,o]=le.useState(!1),l=le.useRef(null),c=le.useRef({start:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,didMove:!1}).current,{autoClose:d,pauseOnHover:p,closeToast:y,onClick:_,closeOnClick:E}=n;mI({id:n.toastId,containerId:n.containerId,fn:t}),le.useEffect(()=>{if(n.pauseOnFocusLoss)return S(),()=>{P()}},[n.pauseOnFocusLoss]);function S(){document.hasFocus()||G(),window.addEventListener("focus",b),window.addEventListener("blur",G)}function P(){window.removeEventListener("focus",b),window.removeEventListener("blur",G)}function x(C){if(n.draggable===!0||n.draggable===C.pointerType){Q();let I=l.current;c.canCloseOnClick=!0,c.canDrag=!0,I.style.transition="none",n.draggableDirection==="x"?(c.start=C.clientX,c.removalDistance=I.offsetWidth*(n.draggablePercent/100)):(c.start=C.clientY,c.removalDistance=I.offsetHeight*(n.draggablePercent===80?n.draggablePercent*1.5:n.draggablePercent)/100)}}function V(C){let{top:I,bottom:R,left:O,right:L}=l.current.getBoundingClientRect();C.nativeEvent.type!=="touchend"&&n.pauseOnHover&&C.clientX>=O&&C.clientX<=L&&C.clientY>=I&&C.clientY<=R?G():b()}function b(){t(!0)}function G(){t(!1)}function Q(){c.didMove=!1,document.addEventListener("pointermove",te),document.addEventListener("pointerup",oe)}function K(){document.removeEventListener("pointermove",te),document.removeEventListener("pointerup",oe)}function te(C){let I=l.current;if(c.canDrag&&I){c.didMove=!0,e&&G(),n.draggableDirection==="x"?c.delta=C.clientX-c.start:c.delta=C.clientY-c.start,c.start!==C.clientX&&(c.canCloseOnClick=!1);let R=n.draggableDirection==="x"?`${c.delta}px, var(--y)`:`0, calc(${c.delta}px + var(--y))`;I.style.transform=`translate3d(${R},0)`,I.style.opacity=`${1-Math.abs(c.delta/c.removalDistance)}`}}function oe(){K();let C=l.current;if(c.canDrag&&c.didMove&&C){if(c.canDrag=!1,Math.abs(c.delta)>c.removalDistance){o(!0),n.closeToast(!0),n.collapseAll();return}C.style.transition="transform 0.2s, opacity 0.2s",C.style.removeProperty("transform"),C.style.removeProperty("opacity")}}let ae={onPointerDown:x,onPointerUp:V};return d&&p&&(ae.onMouseEnter=G,n.stacked||(ae.onMouseLeave=b)),E&&(ae.onClick=C=>{_&&_(C),c.canCloseOnClick&&y(!0)}),{playToast:b,pauseToast:G,isRunning:e,preventExitTransition:i,toastRef:l,eventHandlers:ae}}var II=typeof window<"u"?le.useLayoutEffect:le.useEffect,jh=({theme:n,type:e,isLoading:t,...i})=>qe.createElement("svg",{viewBox:"0 0 24 24",width:"100%",height:"100%",fill:n==="colored"?"currentColor":`var(--toastify-icon-color-${e})`,...i});function SI(n){return qe.createElement(jh,{...n},qe.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))}function RI(n){return qe.createElement(jh,{...n},qe.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))}function AI(n){return qe.createElement(jh,{...n},qe.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))}function CI(n){return qe.createElement(jh,{...n},qe.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))}function PI(){return qe.createElement("div",{className:"Toastify__spinner"})}var gp={info:RI,warning:SI,success:AI,error:CI,spinner:PI},kI=n=>n in gp;function xI({theme:n,type:e,isLoading:t,icon:i}){let o=null,l={theme:n,type:e};return i===!1||(li(i)?o=i({...l,isLoading:t}):le.isValidElement(i)?o=le.cloneElement(i,l):t?o=gp.spinner():kI(e)&&(o=gp[e](l))),o}var bI=n=>{let{isRunning:e,preventExitTransition:t,toastRef:i,eventHandlers:o,playToast:l}=TI(n),{closeButton:c,children:d,autoClose:p,onClick:y,type:_,hideProgressBar:E,closeToast:S,transition:P,position:x,className:V,style:b,progressClassName:G,updateId:Q,role:K,progress:te,rtl:oe,toastId:ae,deleteToast:C,isIn:I,isLoading:R,closeOnClick:O,theme:L,ariaLabel:F}=n,k=Zs("Toastify__toast",`Toastify__toast-theme--${L}`,`Toastify__toast--${_}`,{"Toastify__toast--rtl":oe},{"Toastify__toast--close-on-click":O}),at=li(V)?V({rtl:oe,position:x,type:_,defaultClassName:k}):Zs(k,V),Et=xI(n),Tt=!!te||!p,He={closeToast:S,type:_,theme:L},ie=null;return c===!1||(li(c)?ie=c(He):le.isValidElement(c)?ie=le.cloneElement(c,He):ie=oI(He)),qe.createElement(P,{isIn:I,done:C,position:x,preventExitTransition:t,nodeRef:i,playToast:l},qe.createElement("div",{id:ae,tabIndex:0,onClick:y,"data-in":I,className:at,...o,style:b,ref:i,...I&&{role:K,"aria-label":F}},Et!=null&&qe.createElement("div",{className:Zs("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!R})},Et),x0(d,n,!e),ie,!n.customProgressBar&&qe.createElement(aI,{...Q&&!Tt?{key:`p-${Q}`}:{},rtl:oe,theme:L,delay:p,isRunning:e,isIn:I,closeToast:S,hide:E,type:_,className:G,controlledProgress:Tt,progress:te||0})))},NI=(n,e=!1)=>({enter:`Toastify--animate Toastify__${n}-enter`,exit:`Toastify--animate Toastify__${n}-exit`,appendPosition:e}),OI=sI(NI("bounce",!0)),DI={position:"top-right",transition:OI,autoClose:5e3,closeButton:!0,pauseOnHover:!0,pauseOnFocusLoss:!0,draggable:"touch",draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light","aria-label":"Notifications Alt+T",hotKeys:n=>n.altKey&&n.code==="KeyT"};function LI(n){let e={...DI,...n},t=n.stacked,[i,o]=le.useState(!0),l=le.useRef(null),{getToastToRender:c,isToastActive:d,count:p}=EI(e),{className:y,style:_,rtl:E,containerId:S,hotKeys:P}=e;function x(b){let G=Zs("Toastify__toast-container",`Toastify__toast-container--${b}`,{"Toastify__toast-container--rtl":E});return li(y)?y({position:b,rtl:E,defaultClassName:G}):Zs(G,fp(y))}function V(){t&&(o(!0),ke.play())}return II(()=>{var b;if(t){let G=l.current.querySelectorAll('[data-in="true"]'),Q=12,K=(b=e.position)==null?void 0:b.includes("top"),te=0,oe=0;Array.from(G).reverse().forEach((ae,C)=>{let I=ae;I.classList.add("Toastify__toast--stacked"),C>0&&(I.dataset.collapsed=`${i}`),I.dataset.pos||(I.dataset.pos=K?"top":"bot");let R=te*(i?.2:1)+(i?0:Q*C);I.style.setProperty("--y",`${K?R:R*-1}px`),I.style.setProperty("--g",`${Q}`),I.style.setProperty("--s",`${1-(i?oe:0)}`),te+=I.offsetHeight,oe+=.025})}},[i,p,t]),le.useEffect(()=>{function b(G){var Q;let K=l.current;P(G)&&((Q=K.querySelector('[tabIndex="0"]'))==null||Q.focus(),o(!1),ke.pause()),G.key==="Escape"&&(document.activeElement===K||K!=null&&K.contains(document.activeElement))&&(o(!0),ke.play())}return document.addEventListener("keydown",b),()=>{document.removeEventListener("keydown",b)}},[P]),qe.createElement("section",{ref:l,className:"Toastify",id:S,onMouseEnter:()=>{t&&(o(!1),ke.pause())},onMouseLeave:V,"aria-live":"polite","aria-atomic":"false","aria-relevant":"additions text","aria-label":e["aria-label"]},c((b,G)=>{let Q=G.length?{..._}:{..._,pointerEvents:"none"};return qe.createElement("div",{tabIndex:-1,className:x(b),"data-stacked":t,style:Q,key:`c-${b}`},G.map(({content:K,props:te})=>qe.createElement(bI,{...te,stacked:t,collapseAll:V,isIn:d(te.toastId,te.containerId),key:`t-${te.key}`},K)))}))}var kv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V0=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let o=n.charCodeAt(i);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(o=65536+((o&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},VI=function(n){const e=[];let t=0,i=0;for(;t<n.length;){const o=n[t++];if(o<128)e[i++]=String.fromCharCode(o);else if(o>191&&o<224){const l=n[t++];e[i++]=String.fromCharCode((o&31)<<6|l&63)}else if(o>239&&o<365){const l=n[t++],c=n[t++],d=n[t++],p=((o&7)<<18|(l&63)<<12|(c&63)<<6|d&63)-65536;e[i++]=String.fromCharCode(55296+(p>>10)),e[i++]=String.fromCharCode(56320+(p&1023))}else{const l=n[t++],c=n[t++];e[i++]=String.fromCharCode((o&15)<<12|(l&63)<<6|c&63)}}return e.join("")},M0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let o=0;o<n.length;o+=3){const l=n[o],c=o+1<n.length,d=c?n[o+1]:0,p=o+2<n.length,y=p?n[o+2]:0,_=l>>2,E=(l&3)<<4|d>>4;let S=(d&15)<<2|y>>6,P=y&63;p||(P=64,c||(S=64)),i.push(t[_],t[E],t[S],t[P])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(V0(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):VI(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let o=0;o<n.length;){const l=t[n.charAt(o++)],d=o<n.length?t[n.charAt(o)]:0;++o;const y=o<n.length?t[n.charAt(o)]:64;++o;const E=o<n.length?t[n.charAt(o)]:64;if(++o,l==null||d==null||y==null||E==null)throw new MI;const S=l<<2|d>>4;if(i.push(S),y!==64){const P=d<<4&240|y>>2;if(i.push(P),E!==64){const x=y<<6&192|E;i.push(x)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class MI extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const FI=function(n){const e=V0(n);return M0.encodeByteArray(e,!0)},fh=function(n){return FI(n).replace(/\./g,"")},F0=function(n){try{return M0.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UI(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jI=()=>UI().__FIREBASE_DEFAULTS__,zI=()=>{if(typeof process>"u"||typeof kv>"u")return;const n=kv.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},BI=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&F0(n[1]);return e&&JSON.parse(e)},zh=()=>{try{return jI()||zI()||BI()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},U0=n=>{var e,t;return(t=(e=zh())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},$I=n=>{const e=U0(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},j0=()=>{var n;return(n=zh())===null||n===void 0?void 0:n.config},z0=n=>{var e;return(e=zh())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qI{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HI(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",o=n.iat||0,l=n.sub||n.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:o,exp:o+3600,auth_time:o,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}}},n);return[fh(JSON.stringify(t)),fh(JSON.stringify(c)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function en(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function WI(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(en())}function KI(){var n;const e=(n=zh())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function QI(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function GI(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function XI(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function JI(){const n=en();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function YI(){return!KI()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ZI(){try{return typeof indexedDB=="object"}catch{return!1}}function eS(){return new Promise((n,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(i);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var l;e(((l=o.error)===null||l===void 0?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tS="FirebaseError";class fi extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=tS,Object.setPrototypeOf(this,fi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,pu.prototype.create)}}class pu{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},o=`${this.service}/${e}`,l=this.errors[e],c=l?nS(l,i):"Error",d=`${this.serviceName}: ${c} (${o}).`;return new fi(o,d,i)}}function nS(n,e){return n.replace(rS,(t,i)=>{const o=e[i];return o!=null?String(o):`<${i}?>`})}const rS=/\{\$([^}]+)}/g;function iS(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function ph(n,e){if(n===e)return!0;const t=Object.keys(n),i=Object.keys(e);for(const o of t){if(!i.includes(o))return!1;const l=n[o],c=e[o];if(xv(l)&&xv(c)){if(!ph(l,c))return!1}else if(l!==c)return!1}for(const o of i)if(!t.includes(o))return!1;return!0}function xv(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mu(n){const e=[];for(const[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function sS(n,e){const t=new oS(n,e);return t.subscribe.bind(t)}class oS{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let o;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");aS(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:i},o.next===void 0&&(o.next=Xf),o.error===void 0&&(o.error=Xf),o.complete===void 0&&(o.complete=Xf);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function aS(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Xf(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mt(n){return n&&n._delegate?n._delegate:n}class io{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lS{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new qI;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&i.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(l){if(o)return null;throw l}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(cS(e))try{this.getOrInitializeService({instanceIdentifier:Bs})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:o});i.resolve(l)}catch{}}}}clearInstance(e=Bs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Bs){return this.instances.has(e)}getOptions(e=Bs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[l,c]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(l);i===d&&c.resolve(o)}return o}onInit(e,t){var i;const o=this.normalizeInstanceIdentifier(t),l=(i=this.onInitCallbacks.get(o))!==null&&i!==void 0?i:new Set;l.add(e),this.onInitCallbacks.set(o,l);const c=this.instances.get(o);return c&&e(c,o),()=>{l.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const o of i)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:uS(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Bs){return this.component?this.component.multipleInstances?e:Bs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function uS(n){return n===Bs?void 0:n}function cS(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hS{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new lS(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Le;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Le||(Le={}));const dS={debug:Le.DEBUG,verbose:Le.VERBOSE,info:Le.INFO,warn:Le.WARN,error:Le.ERROR,silent:Le.SILENT},fS=Le.INFO,pS={[Le.DEBUG]:"log",[Le.VERBOSE]:"log",[Le.INFO]:"info",[Le.WARN]:"warn",[Le.ERROR]:"error"},mS=(n,e,...t)=>{if(e<n.logLevel)return;const i=new Date().toISOString(),o=pS[e];if(o)console[o](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class lm{constructor(e){this.name=e,this._logLevel=fS,this._logHandler=mS,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Le))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?dS[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Le.DEBUG,...e),this._logHandler(this,Le.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Le.VERBOSE,...e),this._logHandler(this,Le.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Le.INFO,...e),this._logHandler(this,Le.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Le.WARN,...e),this._logHandler(this,Le.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Le.ERROR,...e),this._logHandler(this,Le.ERROR,...e)}}const gS=(n,e)=>e.some(t=>n instanceof t);let bv,Nv;function yS(){return bv||(bv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function vS(){return Nv||(Nv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const B0=new WeakMap,yp=new WeakMap,$0=new WeakMap,Jf=new WeakMap,um=new WeakMap;function _S(n){const e=new Promise((t,i)=>{const o=()=>{n.removeEventListener("success",l),n.removeEventListener("error",c)},l=()=>{t(ts(n.result)),o()},c=()=>{i(n.error),o()};n.addEventListener("success",l),n.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&B0.set(t,n)}).catch(()=>{}),um.set(e,n),e}function wS(n){if(yp.has(n))return;const e=new Promise((t,i)=>{const o=()=>{n.removeEventListener("complete",l),n.removeEventListener("error",c),n.removeEventListener("abort",c)},l=()=>{t(),o()},c=()=>{i(n.error||new DOMException("AbortError","AbortError")),o()};n.addEventListener("complete",l),n.addEventListener("error",c),n.addEventListener("abort",c)});yp.set(n,e)}let vp={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return yp.get(n);if(e==="objectStoreNames")return n.objectStoreNames||$0.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return ts(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function ES(n){vp=n(vp)}function TS(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=n.call(Yf(this),e,...t);return $0.set(i,e.sort?e.sort():[e]),ts(i)}:vS().includes(n)?function(...e){return n.apply(Yf(this),e),ts(B0.get(this))}:function(...e){return ts(n.apply(Yf(this),e))}}function IS(n){return typeof n=="function"?TS(n):(n instanceof IDBTransaction&&wS(n),gS(n,yS())?new Proxy(n,vp):n)}function ts(n){if(n instanceof IDBRequest)return _S(n);if(Jf.has(n))return Jf.get(n);const e=IS(n);return e!==n&&(Jf.set(n,e),um.set(e,n)),e}const Yf=n=>um.get(n);function SS(n,e,{blocked:t,upgrade:i,blocking:o,terminated:l}={}){const c=indexedDB.open(n,e),d=ts(c);return i&&c.addEventListener("upgradeneeded",p=>{i(ts(c.result),p.oldVersion,p.newVersion,ts(c.transaction),p)}),t&&c.addEventListener("blocked",p=>t(p.oldVersion,p.newVersion,p)),d.then(p=>{l&&p.addEventListener("close",()=>l()),o&&p.addEventListener("versionchange",y=>o(y.oldVersion,y.newVersion,y))}).catch(()=>{}),d}const RS=["get","getKey","getAll","getAllKeys","count"],AS=["put","add","delete","clear"],Zf=new Map;function Ov(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Zf.get(e))return Zf.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,o=AS.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(o||RS.includes(t)))return;const l=async function(c,...d){const p=this.transaction(c,o?"readwrite":"readonly");let y=p.store;return i&&(y=y.index(d.shift())),(await Promise.all([y[t](...d),o&&p.done]))[0]};return Zf.set(e,l),l}ES(n=>({...n,get:(e,t,i)=>Ov(e,t)||n.get(e,t,i),has:(e,t)=>!!Ov(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CS{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(PS(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function PS(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const _p="@firebase/app",Dv="0.10.17";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ui=new lm("@firebase/app"),kS="@firebase/app-compat",xS="@firebase/analytics-compat",bS="@firebase/analytics",NS="@firebase/app-check-compat",OS="@firebase/app-check",DS="@firebase/auth",LS="@firebase/auth-compat",VS="@firebase/database",MS="@firebase/data-connect",FS="@firebase/database-compat",US="@firebase/functions",jS="@firebase/functions-compat",zS="@firebase/installations",BS="@firebase/installations-compat",$S="@firebase/messaging",qS="@firebase/messaging-compat",HS="@firebase/performance",WS="@firebase/performance-compat",KS="@firebase/remote-config",QS="@firebase/remote-config-compat",GS="@firebase/storage",XS="@firebase/storage-compat",JS="@firebase/firestore",YS="@firebase/vertexai",ZS="@firebase/firestore-compat",eR="firebase",tR="11.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wp="[DEFAULT]",nR={[_p]:"fire-core",[kS]:"fire-core-compat",[bS]:"fire-analytics",[xS]:"fire-analytics-compat",[OS]:"fire-app-check",[NS]:"fire-app-check-compat",[DS]:"fire-auth",[LS]:"fire-auth-compat",[VS]:"fire-rtdb",[MS]:"fire-data-connect",[FS]:"fire-rtdb-compat",[US]:"fire-fn",[jS]:"fire-fn-compat",[zS]:"fire-iid",[BS]:"fire-iid-compat",[$S]:"fire-fcm",[qS]:"fire-fcm-compat",[HS]:"fire-perf",[WS]:"fire-perf-compat",[KS]:"fire-rc",[QS]:"fire-rc-compat",[GS]:"fire-gcs",[XS]:"fire-gcs-compat",[JS]:"fire-fst",[ZS]:"fire-fst-compat",[YS]:"fire-vertex","fire-js":"fire-js",[eR]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mh=new Map,rR=new Map,Ep=new Map;function Lv(n,e){try{n.container.addComponent(e)}catch(t){ui.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Ca(n){const e=n.name;if(Ep.has(e))return ui.debug(`There were multiple attempts to register component ${e}.`),!1;Ep.set(e,n);for(const t of mh.values())Lv(t,n);for(const t of rR.values())Lv(t,n);return!0}function cm(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function ti(n){return n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iR={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ns=new pu("app","Firebase",iR);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sR{constructor(e,t,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new io("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ns.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Va=tR;function q0(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const i=Object.assign({name:wp,automaticDataCollectionEnabled:!1},e),o=i.name;if(typeof o!="string"||!o)throw ns.create("bad-app-name",{appName:String(o)});if(t||(t=j0()),!t)throw ns.create("no-options");const l=mh.get(o);if(l){if(ph(t,l.options)&&ph(i,l.config))return l;throw ns.create("duplicate-app",{appName:o})}const c=new hS(o);for(const p of Ep.values())c.addComponent(p);const d=new sR(t,i,c);return mh.set(o,d),d}function H0(n=wp){const e=mh.get(n);if(!e&&n===wp&&j0())return q0();if(!e)throw ns.create("no-app",{appName:n});return e}function rs(n,e,t){var i;let o=(i=nR[n])!==null&&i!==void 0?i:n;t&&(o+=`-${t}`);const l=o.match(/\s|\//),c=e.match(/\s|\//);if(l||c){const d=[`Unable to register library "${o}" with version "${e}":`];l&&d.push(`library name "${o}" contains illegal characters (whitespace or "/")`),l&&c&&d.push("and"),c&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ui.warn(d.join(" "));return}Ca(new io(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oR="firebase-heartbeat-database",aR=1,Yl="firebase-heartbeat-store";let ep=null;function W0(){return ep||(ep=SS(oR,aR,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Yl)}catch(t){console.warn(t)}}}}).catch(n=>{throw ns.create("idb-open",{originalErrorMessage:n.message})})),ep}async function lR(n){try{const t=(await W0()).transaction(Yl),i=await t.objectStore(Yl).get(K0(n));return await t.done,i}catch(e){if(e instanceof fi)ui.warn(e.message);else{const t=ns.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ui.warn(t.message)}}}async function Vv(n,e){try{const i=(await W0()).transaction(Yl,"readwrite");await i.objectStore(Yl).put(e,K0(n)),await i.done}catch(t){if(t instanceof fi)ui.warn(t.message);else{const i=ns.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});ui.warn(i.message)}}}function K0(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uR=1024,cR=30*24*60*60*1e3;class hR{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new fR(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=Mv();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(c=>c.date===l)?void 0:(this._heartbeatsCache.heartbeats.push({date:l,agent:o}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(c=>{const d=new Date(c.date).valueOf();return Date.now()-d<=cR}),this._storage.overwrite(this._heartbeatsCache))}catch(i){ui.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Mv(),{heartbeatsToSend:i,unsentEntries:o}=dR(this._heartbeatsCache.heartbeats),l=fh(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return ui.warn(t),""}}}function Mv(){return new Date().toISOString().substring(0,10)}function dR(n,e=uR){const t=[];let i=n.slice();for(const o of n){const l=t.find(c=>c.agent===o.agent);if(l){if(l.dates.push(o.date),Fv(t)>e){l.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),Fv(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class fR{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return ZI()?eS().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await lR(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return Vv(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return Vv(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function Fv(n){return fh(JSON.stringify({version:2,heartbeats:n})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pR(n){Ca(new io("platform-logger",e=>new CS(e),"PRIVATE")),Ca(new io("heartbeat",e=>new hR(e),"PRIVATE")),rs(_p,Dv,n),rs(_p,Dv,"esm2017"),rs("fire-js","")}pR("");function hm(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(t[i[o]]=n[i[o]]);return t}function Q0(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const mR=Q0,G0=new pu("auth","Firebase",Q0());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gh=new lm("@firebase/auth");function gR(n,...e){gh.logLevel<=Le.WARN&&gh.warn(`Auth (${Va}): ${n}`,...e)}function Zc(n,...e){gh.logLevel<=Le.ERROR&&gh.error(`Auth (${Va}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function br(n,...e){throw fm(n,...e)}function ur(n,...e){return fm(n,...e)}function dm(n,e,t){const i=Object.assign(Object.assign({},mR()),{[e]:t});return new pu("auth","Firebase",i).create(e,{appName:n.name})}function eo(n){return dm(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function yR(n,e,t){const i=t;if(!(e instanceof i))throw i.name!==e.constructor.name&&br(n,"argument-error"),dm(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function fm(n,...e){if(typeof n!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return G0.create(n,...e)}function Ae(n,e,...t){if(!n)throw fm(e,...t)}function ni(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Zc(e),new Error(e)}function ci(n,e){n||ni(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tp(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function vR(){return Uv()==="http:"||Uv()==="https:"}function Uv(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _R(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(vR()||GI()||"connection"in navigator)?navigator.onLine:!0}function wR(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gu{constructor(e,t){this.shortDelay=e,this.longDelay=t,ci(t>e,"Short delay should be less than long delay!"),this.isMobile=WI()||XI()}get(){return _R()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pm(n,e){ci(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X0{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ni("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ni("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ni("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ER={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TR=new gu(3e4,6e4);function mm(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function Ma(n,e,t,i,o={}){return J0(n,o,async()=>{let l={},c={};i&&(e==="GET"?c=i:l={body:JSON.stringify(i)});const d=mu(Object.assign({key:n.config.apiKey},c)).slice(1),p=await n._getAdditionalHeaders();p["Content-Type"]="application/json",n.languageCode&&(p["X-Firebase-Locale"]=n.languageCode);const y=Object.assign({method:e,headers:p},l);return QI()||(y.referrerPolicy="no-referrer"),X0.fetch()(Y0(n,n.config.apiHost,t,d),y)})}async function J0(n,e,t){n._canInitEmulator=!1;const i=Object.assign(Object.assign({},ER),e);try{const o=new SR(n),l=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const c=await l.json();if("needConfirmation"in c)throw Wc(n,"account-exists-with-different-credential",c);if(l.ok&&!("errorMessage"in c))return c;{const d=l.ok?c.errorMessage:c.error.message,[p,y]=d.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw Wc(n,"credential-already-in-use",c);if(p==="EMAIL_EXISTS")throw Wc(n,"email-already-in-use",c);if(p==="USER_DISABLED")throw Wc(n,"user-disabled",c);const _=i[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw dm(n,_,y);br(n,_)}}catch(o){if(o instanceof fi)throw o;br(n,"network-request-failed",{message:String(o)})}}async function IR(n,e,t,i,o={}){const l=await Ma(n,e,t,i,o);return"mfaPendingCredential"in l&&br(n,"multi-factor-auth-required",{_serverResponse:l}),l}function Y0(n,e,t,i){const o=`${e}${t}?${i}`;return n.config.emulator?pm(n.config,o):`${n.config.apiScheme}://${o}`}class SR{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(ur(this.auth,"network-request-failed")),TR.get())})}}function Wc(n,e,t){const i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const o=ur(n,e,i);return o.customData._tokenResponse=t,o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RR(n,e){return Ma(n,"POST","/v1/accounts:delete",e)}async function Z0(n,e){return Ma(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wl(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function AR(n,e=!1){const t=Mt(n),i=await t.getIdToken(e),o=gm(i);Ae(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const l=typeof o.firebase=="object"?o.firebase:void 0,c=l==null?void 0:l.sign_in_provider;return{claims:o,token:i,authTime:Wl(tp(o.auth_time)),issuedAtTime:Wl(tp(o.iat)),expirationTime:Wl(tp(o.exp)),signInProvider:c||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function tp(n){return Number(n)*1e3}function gm(n){const[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return Zc("JWT malformed, contained fewer than 3 sections"),null;try{const o=F0(t);return o?JSON.parse(o):(Zc("Failed to decode base64 JWT payload"),null)}catch(o){return Zc("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function jv(n){const e=gm(n);return Ae(e,"internal-error"),Ae(typeof e.exp<"u","internal-error"),Ae(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zl(n,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof fi&&CR(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function CR({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PR{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const o=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ip{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Wl(this.lastLoginAt),this.creationTime=Wl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yh(n){var e;const t=n.auth,i=await n.getIdToken(),o=await Zl(n,Z0(t,{idToken:i}));Ae(o==null?void 0:o.users.length,t,"internal-error");const l=o.users[0];n._notifyReloadListener(l);const c=!((e=l.providerUserInfo)===null||e===void 0)&&e.length?ew(l.providerUserInfo):[],d=xR(n.providerData,c),p=n.isAnonymous,y=!(n.email&&l.passwordHash)&&!(d!=null&&d.length),_=p?y:!1,E={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:d,metadata:new Ip(l.createdAt,l.lastLoginAt),isAnonymous:_};Object.assign(n,E)}async function kR(n){const e=Mt(n);await yh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function xR(n,e){return[...n.filter(i=>!e.some(o=>o.providerId===i.providerId)),...e]}function ew(n){return n.map(e=>{var{providerId:t}=e,i=hm(e,["providerId"]);return{providerId:t,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bR(n,e){const t=await J0(n,{},async()=>{const i=mu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:l}=n.config,c=Y0(n,o,"/v1/token",`key=${l}`),d=await n._getAdditionalHeaders();return d["Content-Type"]="application/x-www-form-urlencoded",X0.fetch()(c,{method:"POST",headers:d,body:i})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function NR(n,e){return Ma(n,"POST","/v2/accounts:revokeToken",mm(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ua{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ae(e.idToken,"internal-error"),Ae(typeof e.idToken<"u","internal-error"),Ae(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):jv(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ae(e.length!==0,"internal-error");const t=jv(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ae(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:o,expiresIn:l}=await bR(e,t);this.updateTokensAndExpiration(i,o,Number(l))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:o,expirationTime:l}=t,c=new ua;return i&&(Ae(typeof i=="string","internal-error",{appName:e}),c.refreshToken=i),o&&(Ae(typeof o=="string","internal-error",{appName:e}),c.accessToken=o),l&&(Ae(typeof l=="number","internal-error",{appName:e}),c.expirationTime=l),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ua,this.toJSON())}_performRefresh(){return ni("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ji(n,e){Ae(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class ri{constructor(e){var{uid:t,auth:i,stsTokenManager:o}=e,l=hm(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new PR(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=i,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new Ip(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const t=await Zl(this,this.stsTokenManager.getToken(this.auth,e));return Ae(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return AR(this,e)}reload(){return kR(this)}_assign(e){this!==e&&(Ae(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new ri(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Ae(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await yh(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ti(this.auth.app))return Promise.reject(eo(this.auth));const e=await this.getIdToken();return await Zl(this,RR(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var i,o,l,c,d,p,y,_;const E=(i=t.displayName)!==null&&i!==void 0?i:void 0,S=(o=t.email)!==null&&o!==void 0?o:void 0,P=(l=t.phoneNumber)!==null&&l!==void 0?l:void 0,x=(c=t.photoURL)!==null&&c!==void 0?c:void 0,V=(d=t.tenantId)!==null&&d!==void 0?d:void 0,b=(p=t._redirectEventId)!==null&&p!==void 0?p:void 0,G=(y=t.createdAt)!==null&&y!==void 0?y:void 0,Q=(_=t.lastLoginAt)!==null&&_!==void 0?_:void 0,{uid:K,emailVerified:te,isAnonymous:oe,providerData:ae,stsTokenManager:C}=t;Ae(K&&C,e,"internal-error");const I=ua.fromJSON(this.name,C);Ae(typeof K=="string",e,"internal-error"),ji(E,e.name),ji(S,e.name),Ae(typeof te=="boolean",e,"internal-error"),Ae(typeof oe=="boolean",e,"internal-error"),ji(P,e.name),ji(x,e.name),ji(V,e.name),ji(b,e.name),ji(G,e.name),ji(Q,e.name);const R=new ri({uid:K,auth:e,email:S,emailVerified:te,displayName:E,isAnonymous:oe,photoURL:x,phoneNumber:P,tenantId:V,stsTokenManager:I,createdAt:G,lastLoginAt:Q});return ae&&Array.isArray(ae)&&(R.providerData=ae.map(O=>Object.assign({},O))),b&&(R._redirectEventId=b),R}static async _fromIdTokenResponse(e,t,i=!1){const o=new ua;o.updateFromServerResponse(t);const l=new ri({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:i});return await yh(l),l}static async _fromGetAccountInfoResponse(e,t,i){const o=t.users[0];Ae(o.localId!==void 0,"internal-error");const l=o.providerUserInfo!==void 0?ew(o.providerUserInfo):[],c=!(o.email&&o.passwordHash)&&!(l!=null&&l.length),d=new ua;d.updateFromIdToken(i);const p=new ri({uid:o.localId,auth:e,stsTokenManager:d,isAnonymous:c}),y={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:l,metadata:new Ip(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(l!=null&&l.length)};return Object.assign(p,y),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zv=new Map;function ii(n){ci(n instanceof Function,"Expected a class definition");let e=zv.get(n);return e?(ci(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,zv.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tw{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}tw.type="NONE";const Bv=tw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eh(n,e,t){return`firebase:${n}:${e}:${t}`}class ca{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:o,name:l}=this.auth;this.fullUserKey=eh(this.userKey,o.apiKey,l),this.fullPersistenceKey=eh("persistence",o.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?ri._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new ca(ii(Bv),e,i);const o=(await Promise.all(t.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let l=o[0]||ii(Bv);const c=eh(i,e.config.apiKey,e.name);let d=null;for(const y of t)try{const _=await y._get(c);if(_){const E=ri._fromJSON(e,_);y!==l&&(d=E),l=y;break}}catch{}const p=o.filter(y=>y._shouldAllowMigration);return!l._shouldAllowMigration||!p.length?new ca(l,e,i):(l=p[0],d&&await l._set(c,d.toJSON()),await Promise.all(t.map(async y=>{if(y!==l)try{await y._remove(c)}catch{}})),new ca(l,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $v(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(sw(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(nw(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(aw(e))return"Blackberry";if(lw(e))return"Webos";if(rw(e))return"Safari";if((e.includes("chrome/")||iw(e))&&!e.includes("edge/"))return"Chrome";if(ow(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function nw(n=en()){return/firefox\//i.test(n)}function rw(n=en()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function iw(n=en()){return/crios\//i.test(n)}function sw(n=en()){return/iemobile/i.test(n)}function ow(n=en()){return/android/i.test(n)}function aw(n=en()){return/blackberry/i.test(n)}function lw(n=en()){return/webos/i.test(n)}function ym(n=en()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function OR(n=en()){var e;return ym(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function DR(){return JI()&&document.documentMode===10}function uw(n=en()){return ym(n)||ow(n)||lw(n)||aw(n)||/windows phone/i.test(n)||sw(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cw(n,e=[]){let t;switch(n){case"Browser":t=$v(en());break;case"Worker":t=`${$v(en())}-${n}`;break;default:t=n}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Va}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LR{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=l=>new Promise((c,d)=>{try{const p=e(l);c(p)}catch(p){d(p)}});i.onAbort=t,this.queue.push(i);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VR(n,e={}){return Ma(n,"GET","/v2/passwordPolicy",mm(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MR=6;class FR{constructor(e){var t,i,o,l;const c=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=c.minPasswordLength)!==null&&t!==void 0?t:MR,c.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=c.maxPasswordLength),c.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=c.containsLowercaseCharacter),c.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=c.containsUppercaseCharacter),c.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=c.containsNumericCharacter),c.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=c.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(o=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&o!==void 0?o:"",this.forceUpgradeOnSignin=(l=e.forceUpgradeOnSignin)!==null&&l!==void 0?l:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,i,o,l,c,d;const p={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,p),this.validatePasswordCharacterOptions(e,p),p.isValid&&(p.isValid=(t=p.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),p.isValid&&(p.isValid=(i=p.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),p.isValid&&(p.isValid=(o=p.containsLowercaseLetter)!==null&&o!==void 0?o:!0),p.isValid&&(p.isValid=(l=p.containsUppercaseLetter)!==null&&l!==void 0?l:!0),p.isValid&&(p.isValid=(c=p.containsNumericCharacter)!==null&&c!==void 0?c:!0),p.isValid&&(p.isValid=(d=p.containsNonAlphanumericCharacter)!==null&&d!==void 0?d:!0),p}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let o=0;o<e.length;o++)i=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,o,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UR{constructor(e,t,i,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new qv(this),this.idTokenSubscription=new qv(this),this.beforeStateQueue=new LR(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=G0,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ii(t)),this._initializationPromise=this.queue(async()=>{var i,o;if(!this._deleted&&(this.persistenceManager=await ca.create(this,e),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Z0(this,{idToken:e}),i=await ri._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(ti(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(d,d))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let o=i,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,d=o==null?void 0:o._redirectEventId,p=await this.tryRedirectSignIn(e);(!c||c===d)&&(p!=null&&p.user)&&(o=p.user,l=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(o)}catch(c){o=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return Ae(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await yh(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=wR()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ti(this.app))return Promise.reject(eo(this));const t=e?Mt(e):null;return t&&Ae(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ae(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ti(this.app)?Promise.reject(eo(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ti(this.app)?Promise.reject(eo(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ii(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await VR(this),t=new FR(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new pu("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await NR(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&ii(e)||this._popupRedirectResolver;Ae(t,this,"argument-error"),this.redirectPersistenceManager=await ca.create(this,[ii(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,i;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,o){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let c=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ae(d,this,"internal-error"),d.then(()=>{c||l(this.currentUser)}),typeof t=="function"){const p=e.addObserver(t,i,o);return()=>{c=!0,p()}}else{const p=e.addObserver(t);return()=>{c=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ae(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=cw(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(t["X-Firebase-Client"]=i);const o=await this._getAppCheckToken();return o&&(t["X-Firebase-AppCheck"]=o),t}async _getAppCheckToken(){var e;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&gR(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function Bh(n){return Mt(n)}class qv{constructor(e){this.auth=e,this.observer=null,this.addObserver=sS(t=>this.observer=t)}get next(){return Ae(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vm={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function jR(n){vm=n}function zR(n){return vm.loadJS(n)}function BR(){return vm.gapiScript}function $R(n){return`__${n}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qR(n,e){const t=cm(n,"auth");if(t.isInitialized()){const o=t.getImmediate(),l=t.getOptions();if(ph(l,e??{}))return o;br(o,"already-initialized")}return t.initialize({options:e})}function HR(n,e){const t=(e==null?void 0:e.persistence)||[],i=(Array.isArray(t)?t:[t]).map(ii);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function WR(n,e,t){const i=Bh(n);Ae(i._canInitEmulator,i,"emulator-config-failed"),Ae(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const o=!1,l=hw(e),{host:c,port:d}=KR(e),p=d===null?"":`:${d}`;i.config.emulator={url:`${l}//${c}${p}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:c,port:d,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:o})}),QR()}function hw(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function KR(n){const e=hw(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(i);if(o){const l=o[1];return{host:l,port:Hv(i.substr(l.length+1))}}else{const[l,c]=i.split(":");return{host:l,port:Hv(c)}}}function Hv(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function QR(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dw{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return ni("not implemented")}_getIdTokenResponse(e){return ni("not implemented")}_linkToIdToken(e,t){return ni("not implemented")}_getReauthenticationResolver(e){return ni("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ha(n,e){return IR(n,"POST","/v1/accounts:signInWithIdp",mm(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GR="http://localhost";class so extends dw{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new so(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):br("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:o}=t,l=hm(t,["providerId","signInMethod"]);if(!i||!o)return null;const c=new so(i,o);return c.idToken=l.idToken||void 0,c.accessToken=l.accessToken||void 0,c.secret=l.secret,c.nonce=l.nonce,c.pendingToken=l.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return ha(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,ha(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,ha(e,t)}buildRequest(){const e={requestUri:GR,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=mu(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _m{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yu extends _m{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bi extends yu{constructor(){super("facebook.com")}static credential(e){return so._fromParams({providerId:Bi.PROVIDER_ID,signInMethod:Bi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Bi.credentialFromTaggedObject(e)}static credentialFromError(e){return Bi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Bi.credential(e.oauthAccessToken)}catch{return null}}}Bi.FACEBOOK_SIGN_IN_METHOD="facebook.com";Bi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ei extends yu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return so._fromParams({providerId:ei.PROVIDER_ID,signInMethod:ei.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return ei.credentialFromTaggedObject(e)}static credentialFromError(e){return ei.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return ei.credential(t,i)}catch{return null}}}ei.GOOGLE_SIGN_IN_METHOD="google.com";ei.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $i extends yu{constructor(){super("github.com")}static credential(e){return so._fromParams({providerId:$i.PROVIDER_ID,signInMethod:$i.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return $i.credentialFromTaggedObject(e)}static credentialFromError(e){return $i.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return $i.credential(e.oauthAccessToken)}catch{return null}}}$i.GITHUB_SIGN_IN_METHOD="github.com";$i.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qi extends yu{constructor(){super("twitter.com")}static credential(e,t){return so._fromParams({providerId:qi.PROVIDER_ID,signInMethod:qi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return qi.credentialFromTaggedObject(e)}static credentialFromError(e){return qi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return qi.credential(t,i)}catch{return null}}}qi.TWITTER_SIGN_IN_METHOD="twitter.com";qi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pa{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,o=!1){const l=await ri._fromIdTokenResponse(e,i,o),c=Wv(i);return new Pa({user:l,providerId:c,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const o=Wv(i);return new Pa({user:e,providerId:o,_tokenResponse:i,operationType:t})}}function Wv(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vh extends fi{constructor(e,t,i,o){var l;super(t.code,t.message),this.operationType=i,this.user=o,Object.setPrototypeOf(this,vh.prototype),this.customData={appName:e.name,tenantId:(l=e.tenantId)!==null&&l!==void 0?l:void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,o){return new vh(e,t,i,o)}}function fw(n,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?vh._fromErrorAndOperation(n,l,e,i):l})}async function XR(n,e,t=!1){const i=await Zl(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Pa._forOperation(n,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JR(n,e,t=!1){const{auth:i}=n;if(ti(i.app))return Promise.reject(eo(i));const o="reauthenticate";try{const l=await Zl(n,fw(i,o,e,n),t);Ae(l.idToken,i,"internal-error");const c=gm(l.idToken);Ae(c,i,"internal-error");const{sub:d}=c;return Ae(n.uid===d,i,"user-mismatch"),Pa._forOperation(n,o,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&br(i,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YR(n,e,t=!1){if(ti(n.app))return Promise.reject(eo(n));const i="signIn",o=await fw(n,i,e),l=await Pa._fromIdTokenResponse(n,i,o);return t||await n._updateCurrentUser(l.user),l}function ZR(n,e,t,i){return Mt(n).onIdTokenChanged(e,t,i)}function eA(n,e,t){return Mt(n).beforeAuthStateChanged(e,t)}function tA(n,e,t,i){return Mt(n).onAuthStateChanged(e,t,i)}function nA(n){return Mt(n).signOut()}const _h="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pw{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(_h,"1"),this.storage.removeItem(_h),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rA=1e3,iA=10;class mw extends pw{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=uw(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),o=this.localCache[t];i!==o&&e(t,o,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,d,p)=>{this.notifyListeners(c,p)});return}const i=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const c=this.storage.getItem(i);!t&&this.localCache[i]===c||this.notifyListeners(i,c)},l=this.storage.getItem(i);DR()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,iA):o()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},rA)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}mw.type="LOCAL";const sA=mw;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gw extends pw{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}gw.type="SESSION";const yw=gw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oA(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $h{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const i=new $h(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:o,data:l}=t.data,c=this.handlersMap[o];if(!(c!=null&&c.size))return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:o});const d=Array.from(c).map(async y=>y(t.origin,l)),p=await oA(d);t.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:p})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}$h.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wm(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aA{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let l,c;return new Promise((d,p)=>{const y=wm("",20);o.port1.start();const _=setTimeout(()=>{p(new Error("unsupported_event"))},i);c={messageChannel:o,onMessage(E){const S=E;if(S.data.eventId===y)switch(S.data.status){case"ack":clearTimeout(_),l=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),d(S.data.response);break;default:clearTimeout(_),clearTimeout(l),p(new Error("invalid_response"));break}}},this.handlers.add(c),o.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:y,data:t},[o.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pr(){return window}function lA(n){Pr().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vw(){return typeof Pr().WorkerGlobalScope<"u"&&typeof Pr().importScripts=="function"}async function uA(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function cA(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function hA(){return vw()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _w="firebaseLocalStorageDb",dA=1,wh="firebaseLocalStorage",ww="fbase_key";class vu{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function qh(n,e){return n.transaction([wh],e?"readwrite":"readonly").objectStore(wh)}function fA(){const n=indexedDB.deleteDatabase(_w);return new vu(n).toPromise()}function Sp(){const n=indexedDB.open(_w,dA);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(wh,{keyPath:ww})}catch(o){t(o)}}),n.addEventListener("success",async()=>{const i=n.result;i.objectStoreNames.contains(wh)?e(i):(i.close(),await fA(),e(await Sp()))})})}async function Kv(n,e,t){const i=qh(n,!0).put({[ww]:e,value:t});return new vu(i).toPromise()}async function pA(n,e){const t=qh(n,!1).get(e),i=await new vu(t).toPromise();return i===void 0?null:i.value}function Qv(n,e){const t=qh(n,!0).delete(e);return new vu(t).toPromise()}const mA=800,gA=3;class Ew{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Sp(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>gA)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return vw()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=$h._getInstance(hA()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await uA(),!this.activeServiceWorker)return;this.sender=new aA(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((t=i[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||cA()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Sp();return await Kv(e,_h,"1"),await Qv(e,_h),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>Kv(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>pA(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Qv(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const l=qh(o,!1).getAll();return new vu(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:o,value:l}of e)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(l)&&(this.notifyListeners(o,l),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),mA)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Ew.type="LOCAL";const yA=Ew;new gu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tw(n,e){return e?ii(e):(Ae(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Em extends dw{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ha(e,this._buildIdpRequest())}_linkToIdToken(e,t){return ha(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return ha(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function vA(n){return YR(n.auth,new Em(n),n.bypassAuthState)}function _A(n){const{auth:e,user:t}=n;return Ae(t,e,"internal-error"),JR(t,new Em(n),n.bypassAuthState)}async function wA(n){const{auth:e,user:t}=n;return Ae(t,e,"internal-error"),XR(t,new Em(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iw{constructor(e,t,i,o,l=!1){this.auth=e,this.resolver=i,this.user=o,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:o,tenantId:l,error:c,type:d}=e;if(c){this.reject(c);return}const p={auth:this.auth,requestUri:t,sessionId:i,tenantId:l||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(p))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return vA;case"linkViaPopup":case"linkViaRedirect":return wA;case"reauthViaPopup":case"reauthViaRedirect":return _A;default:br(this.auth,"internal-error")}}resolve(e){ci(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ci(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EA=new gu(2e3,1e4);async function TA(n,e,t){if(ti(n.app))return Promise.reject(ur(n,"operation-not-supported-in-this-environment"));const i=Bh(n);yR(n,e,_m);const o=Tw(i,t);return new $s(i,"signInViaPopup",e,o).executeNotNull()}class $s extends Iw{constructor(e,t,i,o,l){super(e,t,o,l),this.provider=i,this.authWindow=null,this.pollId=null,$s.currentPopupAction&&$s.currentPopupAction.cancel(),$s.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ae(e,this.auth,"internal-error"),e}async onExecution(){ci(this.filter.length===1,"Popup operations only handle one event");const e=wm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(ur(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(ur(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,$s.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,i;if(!((i=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ur(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,EA.get())};e()}}$s.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IA="pendingRedirect",th=new Map;class SA extends Iw{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=th.get(this.auth._key());if(!e){try{const i=await RA(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}th.set(this.auth._key(),e)}return this.bypassAuthState||th.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function RA(n,e){const t=PA(e),i=CA(n);if(!await i._isAvailable())return!1;const o=await i._get(t)==="true";return await i._remove(t),o}function AA(n,e){th.set(n._key(),e)}function CA(n){return ii(n._redirectPersistence)}function PA(n){return eh(IA,n.config.apiKey,n.name)}async function kA(n,e,t=!1){if(ti(n.app))return Promise.reject(eo(n));const i=Bh(n),o=Tw(i,e),c=await new SA(i,o,t).execute();return c&&!t&&(delete c.user._redirectEventId,await i._persistUserIfCurrent(c.user),await i._setRedirectUser(null,e)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xA=10*60*1e3;class bA{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!NA(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!Sw(e)){const o=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";t.onError(ur(this.auth,o))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=xA&&this.cachedEventUids.clear(),this.cachedEventUids.has(Gv(e))}saveEventToCache(e){this.cachedEventUids.add(Gv(e)),this.lastProcessedEventTime=Date.now()}}function Gv(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function Sw({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function NA(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Sw(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OA(n,e={}){return Ma(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DA=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,LA=/^https?/;async function VA(n){if(n.config.emulator)return;const{authorizedDomains:e}=await OA(n);for(const t of e)try{if(MA(t))return}catch{}br(n,"unauthorized-domain")}function MA(n){const e=Tp(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){const c=new URL(n);return c.hostname===""&&i===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===i}if(!LA.test(t))return!1;if(DA.test(n))return i===n;const o=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FA=new gu(3e4,6e4);function Xv(){const n=Pr().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function UA(n){return new Promise((e,t)=>{var i,o,l;function c(){Xv(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Xv(),t(ur(n,"network-request-failed"))},timeout:FA.get()})}if(!((o=(i=Pr().gapi)===null||i===void 0?void 0:i.iframes)===null||o===void 0)&&o.Iframe)e(gapi.iframes.getContext());else if(!((l=Pr().gapi)===null||l===void 0)&&l.load)c();else{const d=$R("iframefcb");return Pr()[d]=()=>{gapi.load?c():t(ur(n,"network-request-failed"))},zR(`${BR()}?onload=${d}`).catch(p=>t(p))}}).catch(e=>{throw nh=null,e})}let nh=null;function jA(n){return nh=nh||UA(n),nh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zA=new gu(5e3,15e3),BA="__/auth/iframe",$A="emulator/auth/iframe",qA={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},HA=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function WA(n){const e=n.config;Ae(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?pm(e,$A):`https://${n.config.authDomain}/${BA}`,i={apiKey:e.apiKey,appName:n.name,v:Va},o=HA.get(n.config.apiHost);o&&(i.eid=o);const l=n._getFrameworks();return l.length&&(i.fw=l.join(",")),`${t}?${mu(i).slice(1)}`}async function KA(n){const e=await jA(n),t=Pr().gapi;return Ae(t,n,"internal-error"),e.open({where:document.body,url:WA(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:qA,dontclear:!0},i=>new Promise(async(o,l)=>{await i.restyle({setHideOnLeave:!1});const c=ur(n,"network-request-failed"),d=Pr().setTimeout(()=>{l(c)},zA.get());function p(){Pr().clearTimeout(d),o(i)}i.ping(p).then(p,()=>{l(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QA={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},GA=500,XA=600,JA="_blank",YA="http://localhost";class Jv{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function ZA(n,e,t,i=GA,o=XA){const l=Math.max((window.screen.availHeight-o)/2,0).toString(),c=Math.max((window.screen.availWidth-i)/2,0).toString();let d="";const p=Object.assign(Object.assign({},QA),{width:i.toString(),height:o.toString(),top:l,left:c}),y=en().toLowerCase();t&&(d=iw(y)?JA:t),nw(y)&&(e=e||YA,p.scrollbars="yes");const _=Object.entries(p).reduce((S,[P,x])=>`${S}${P}=${x},`,"");if(OR(y)&&d!=="_self")return eC(e||"",d),new Jv(null);const E=window.open(e||"",d,_);Ae(E,n,"popup-blocked");try{E.focus()}catch{}return new Jv(E)}function eC(n,e){const t=document.createElement("a");t.href=n,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tC="__/auth/handler",nC="emulator/auth/handler",rC=encodeURIComponent("fac");async function Yv(n,e,t,i,o,l){Ae(n.config.authDomain,n,"auth-domain-config-required"),Ae(n.config.apiKey,n,"invalid-api-key");const c={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:Va,eventId:o};if(e instanceof _m){e.setDefaultLanguage(n.languageCode),c.providerId=e.providerId||"",iS(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[_,E]of Object.entries({}))c[_]=E}if(e instanceof yu){const _=e.getScopes().filter(E=>E!=="");_.length>0&&(c.scopes=_.join(","))}n.tenantId&&(c.tid=n.tenantId);const d=c;for(const _ of Object.keys(d))d[_]===void 0&&delete d[_];const p=await n._getAppCheckToken(),y=p?`#${rC}=${encodeURIComponent(p)}`:"";return`${iC(n)}?${mu(d).slice(1)}${y}`}function iC({config:n}){return n.emulator?pm(n,nC):`https://${n.authDomain}/${tC}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const np="webStorageSupport";class sC{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=yw,this._completeRedirectFn=kA,this._overrideRedirectResult=AA}async _openPopup(e,t,i,o){var l;ci((l=this.eventManagers[e._key()])===null||l===void 0?void 0:l.manager,"_initialize() not called before _openPopup()");const c=await Yv(e,t,i,Tp(),o);return ZA(e,c,wm())}async _openRedirect(e,t,i,o){await this._originValidation(e);const l=await Yv(e,t,i,Tp(),o);return lA(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:l}=this.eventManagers[t];return o?Promise.resolve(o):(ci(l,"If manager is not set, promise should be"),l)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await KA(e),i=new bA(e);return t.register("authEvent",o=>(Ae(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:i.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(np,{type:np},o=>{var l;const c=(l=o==null?void 0:o[0])===null||l===void 0?void 0:l[np];c!==void 0&&t(!!c),br(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=VA(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return uw()||rw()||ym()}}const oC=sC;var Zv="@firebase/auth",e_="1.8.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aC{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ae(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lC(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function uC(n){Ca(new io("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:c,authDomain:d}=i.options;Ae(c&&!c.includes(":"),"invalid-api-key",{appName:i.name});const p={apiKey:c,authDomain:d,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:cw(n)},y=new UR(i,o,l,p);return HR(y,t),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),Ca(new io("auth-internal",e=>{const t=Bh(e.getProvider("auth").getImmediate());return(i=>new aC(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),rs(Zv,e_,lC(n)),rs(Zv,e_,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cC=5*60,hC=z0("authIdTokenMaxAge")||cC;let t_=null;const dC=n=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>hC)return;const o=t==null?void 0:t.token;t_!==o&&(t_=o,await fetch(n,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function fC(n=H0()){const e=cm(n,"auth");if(e.isInitialized())return e.getImmediate();const t=qR(n,{popupRedirectResolver:oC,persistence:[yA,sA,yw]}),i=z0("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(i,location.origin);if(location.origin===l.origin){const c=dC(l.toString());eA(t,c,()=>c(t.currentUser)),ZR(t,d=>c(d))}}const o=U0("auth");return o&&WR(t,`http://${o}`),t}function pC(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}jR({loadJS(n){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=o=>{const l=ur("internal-error");l.customData=o,t(l)},i.type="text/javascript",i.charset="UTF-8",pC().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});uC("Browser");var mC="firebase",gC="11.1.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */rs(mC,gC,"app");const yC={apiKey:"AIzaSyAjfZnO1H_9Bz7bBbvE0KmSWOegJ3M44Fc",authDomain:"watchlist-duo.firebaseapp.com",projectId:"watchlist-duo",storageBucket:"watchlist-duo.appspot.com",messagingSenderId:"219023485324",appId:"1:219023485324:web:30dbfff2ade1cfbc9d0ea9"},vC=q0(yC),Tm=fC(vC),_C=new ei,wC=()=>{const[n,e]=le.useState(null),t=async()=>{try{const i=await TA(Tm,_C);console.log("Logged in as:",i.user.displayName),e(null)}catch(i){i instanceof Error?e(i.message):e("An unexpected error occurred. Please try again.")}};return U.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gray-100",children:[U.jsx("h1",{className:"text-3xl font-bold mb-6 text-gray-800",children:"Login"}),U.jsx("button",{onClick:t,className:"px-6 py-3 bg-blue-600 text-white rounded-lg shadow-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:ring-offset-2 transition duration-200",children:"Login with Google"}),n&&U.jsx("p",{className:"text-red-600 mt-4",children:n})]})};var Rw={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},n_=qe.createContext&&qe.createContext(Rw),EC=["attr","size","title"];function TC(n,e){if(n==null)return{};var t=IC(n,e),i,o;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(n);for(o=0;o<l.length;o++)i=l[o],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(n,i)&&(t[i]=n[i])}return t}function IC(n,e){if(n==null)return{};var t={};for(var i in n)if(Object.prototype.hasOwnProperty.call(n,i)){if(e.indexOf(i)>=0)continue;t[i]=n[i]}return t}function Eh(){return Eh=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Eh.apply(this,arguments)}function r_(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable})),t.push.apply(t,i)}return t}function Th(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?r_(Object(t),!0).forEach(function(i){SC(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):r_(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function SC(n,e,t){return e=RC(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function RC(n){var e=AC(n,"string");return typeof e=="symbol"?e:e+""}function AC(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Aw(n){return n&&n.map((e,t)=>qe.createElement(e.tag,Th({key:t},e.attr),Aw(e.child)))}function Im(n){return e=>qe.createElement(CC,Eh({attr:Th({},n.attr)},e),Aw(n.child))}function CC(n){var e=t=>{var{attr:i,size:o,title:l}=n,c=TC(n,EC),d=o||t.size||"1em",p;return t.className&&(p=t.className),n.className&&(p=(p?p+" ":"")+n.className),qe.createElement("svg",Eh({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,i,c,{className:p,style:Th(Th({color:n.color||t.color},t.style),n.style),height:d,width:d,xmlns:"http://www.w3.org/2000/svg"}),l&&qe.createElement("title",null,l),n.children)};return n_!==void 0?qe.createElement(n_.Consumer,null,t=>e(t)):e(Rw)}function PC(n){return Im({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M16 132h416c8.837 0 16-7.163 16-16V76c0-8.837-7.163-16-16-16H16C7.163 60 0 67.163 0 76v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16z"},child:[]}]})(n)}function kC(n){return Im({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M488 64h-8v20c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12V64H96v20c0 6.6-5.4 12-12 12H44c-6.6 0-12-5.4-12-12V64h-8C10.7 64 0 74.7 0 88v336c0 13.3 10.7 24 24 24h8v-20c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v20h320v-20c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v20h8c13.3 0 24-10.7 24-24V88c0-13.3-10.7-24-24-24zM96 372c0 6.6-5.4 12-12 12H44c-6.6 0-12-5.4-12-12v-40c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40zm0-96c0 6.6-5.4 12-12 12H44c-6.6 0-12-5.4-12-12v-40c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40zm0-96c0 6.6-5.4 12-12 12H44c-6.6 0-12-5.4-12-12v-40c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40zm272 208c0 6.6-5.4 12-12 12H156c-6.6 0-12-5.4-12-12v-96c0-6.6 5.4-12 12-12h200c6.6 0 12 5.4 12 12v96zm0-168c0 6.6-5.4 12-12 12H156c-6.6 0-12-5.4-12-12v-96c0-6.6 5.4-12 12-12h200c6.6 0 12 5.4 12 12v96zm112 152c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40zm0-96c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40zm0-96c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40z"},child:[]}]})(n)}function xC(n){return Im({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M592 0H48A48 48 0 0 0 0 48v320a48 48 0 0 0 48 48h240v32H112a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16H352v-32h240a48 48 0 0 0 48-48V48a48 48 0 0 0-48-48zm-16 352H64V64h512z"},child:[]}]})(n)}const bC="https://image.tmdb.org/t/p/w200",si=({media:n,type:e,actionLabel:t="Add to List",actionBtnColor:i="bg-green-600",actionBtnHoverColor:o="hover:bg-green-700",onActionClick:l})=>{var c,d;return console.log(n),U.jsxs("div",{className:"relative border rounded-lg shadow-md overflow-hidden mb-6 p-4",children:[U.jsxs("div",{className:"flex",children:[U.jsx("img",{src:n.poster_path?`${bC}${n.poster_path}`:"https://via.placeholder.com/200x300?text=No+Image",alt:e==="movie"?n.title:n.name,className:"w-32 h-48 object-cover border rounded-md flex-shrink-0 mr-4"}),U.jsxs("div",{className:"flex flex-col flex-1",children:[U.jsx("h3",{className:"text-lg font-bold",children:e==="movie"?n.title:n.name}),U.jsx("p",{className:"text-gray-600 font-semibold",children:((c=e==="movie"?n.release_date:n.first_air_date)==null?void 0:c.slice(0,4))||"Unknown"}),U.jsxs("p",{children:[U.jsx("span",{className:"text-yellow-500",children:"★"})," ",U.jsx("span",{className:"text-sm",children:(d=n.vote_average)==null?void 0:d.toFixed(1)})]})]})]}),U.jsxs("span",{className:`absolute bottom-16 right-4 flex gap-1 min-w-20 text-xs font-medium px-2 py-1 items-center justify-center rounded-full ${e==="movie"?"bg-red-400":"bg-blue-400"}`,children:[e==="movie"&&U.jsxs(U.Fragment,{children:[U.jsx(kC,{size:16}),"Movie"]}),e==="tv"&&U.jsxs(U.Fragment,{children:[U.jsx(xC,{size:16}),"TV"]})]}),(!n.owner||n.owner=="self")&&U.jsx("button",{onClick:l,className:`w-full mt-4 px-4 py-2 ${i} text-white rounded-lg ${o} focus:outline-none`,children:t})]})},Cw=le.createContext(void 0),NC=()=>{const n=le.useContext(Cw);if(!n)throw new Error("useSearchResults must be used within a SearchResultsProvider");return n},Pw=le.createContext({currentUser:null,isAuthorizing:!0}),pi=()=>{const n=le.useContext(Pw);if(!n)throw new Error("useAuthContext must be used within an AuthProvider");return n},kw=le.createContext(void 0),Sm=()=>{const n=le.useContext(kw);if(!n)throw new Error("useMyList must be used within a MyListProvider");return n},_u=()=>U.jsx("div",{className:"flex items-center justify-center h-screen",children:U.jsx("div",{className:"w-8 h-8 border-4 border-blue-500 border-t-transparent border-solid rounded-full animate-spin"})}),OC=()=>{const{currentUser:n}=pi(),{addToMyList:e,isAddingToList:t}=Sm(),{searchOptions:i,setSearchOptions:o,refetchSearchResults:l,isLoadingSearchResults:c,results:d}=NC(),[p,y]=le.useState(!1);le.useEffect(()=>{p&&(l(),y(!1))},[i.page,p]);const _=P=>{o({page:P}),y(!0)},E=async(P,x)=>{if(!n){ke.error("You must be logged in to add items to your list.");return}try{await e(P,x)}catch(V){console.error("Error adding media to list:",V)}};console.log(i.page);const S=P=>P.map(x=>{if(x.media_type){if(x.media_type==="movie")return U.jsx(si,{media:x,type:"movie",actionLabel:t?"Adding...":"Add to My List",onActionClick:()=>E(x,"movie")},x.id);if(x.media_type==="tv")return U.jsx(si,{media:x,type:"tv",actionLabel:t?"Adding...":"Add to My List",onActionClick:()=>E(x,"tv")},x.id);if(x.media_type==="person")return null}return"title"in x?U.jsx(si,{media:x,type:"movie",actionLabel:t?"Adding...":"Add to My List",onActionClick:()=>E(x,"movie")},x.id):"name"in x&&"first_air_date"in x?U.jsx(si,{media:x,type:"tv",actionLabel:t?"Adding...":"Add to My List",onActionClick:()=>E(x,"tv")},x.id):null});return U.jsxs("div",{className:"max-w-full md:max-w-3xl lg:max-w-4xl mx-auto p-6",children:[U.jsx("h1",{className:"text-2xl font-bold mb-6 text-gray-800",children:"Search"}),U.jsx("div",{className:"mb-6 w-full",children:U.jsx("input",{type:"text",value:i.query,onChange:P=>o({query:P.target.value}),placeholder:"Search for movies, TV shows, or people...",className:"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring focus:ring-blue-300",onKeyDown:P=>{P.key==="Enter"&&i.query&&l()}})}),U.jsxs("div",{className:"mb-6",children:[U.jsx("h2",{className:"text-lg font-semibold text-gray-700 mb-4",children:"Filters"}),U.jsxs("div",{className:"flex items-center text-gray-600",children:[U.jsx("div",{className:"mb-4",children:U.jsxs("label",{className:"flex items-center space-x-3",children:[U.jsx("span",{children:"Include Adult Content:"}),U.jsx("input",{type:"checkbox",checked:i.includeAdult,onChange:P=>o({includeAdult:P.target.checked}),className:"w-4 h-4"})]})}),U.jsx("div",{className:"mb-4",children:U.jsxs("label",{className:"flex items-center space-x-3",children:[U.jsx("span",{children:"Exclude Incomplete Results:"}),U.jsx("input",{type:"checkbox",checked:i.excludeIncomplete,onChange:P=>o({excludeIncomplete:P.target.checked}),className:"w-4 h-4"})]})})]}),U.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[U.jsxs("div",{children:[U.jsx("label",{className:"block text-sm font-medium text-gray-600",children:"Search Type"}),U.jsxs("select",{value:i.searchType,onChange:P=>o({searchType:P.target.value}),className:"w-full p-2 border border-gray-300 rounded-lg focus:outline-none focus:ring focus:ring-blue-300",children:[U.jsx("option",{value:"movie",children:"Movies"}),U.jsx("option",{value:"tv",children:"TV Shows"}),U.jsx("option",{value:"person",children:"People"}),U.jsx("option",{value:"multi",children:"All"})]})]}),U.jsxs("div",{children:[U.jsx("label",{className:"block text-sm font-medium text-gray-600",children:"Language"}),U.jsx("input",{type:"text",value:i.language,onChange:P=>o({language:P.target.value}),placeholder:"e.g., en-US",className:"w-full p-2 border border-gray-300 rounded-lg focus:outline-none focus:ring focus:ring-blue-300"})]}),U.jsxs("div",{children:[U.jsx("label",{className:"block text-sm font-medium text-gray-600",children:"Primary Release Year"}),U.jsx("input",{type:"text",value:i.primaryReleaseYear,onChange:P=>o({primaryReleaseYear:P.target.value}),placeholder:"e.g., 2023",className:"w-full p-2 border border-gray-300 rounded-lg focus:outline-none focus:ring focus:ring-blue-300"})]}),U.jsxs("div",{children:[U.jsx("label",{className:"block text-sm font-medium text-gray-600",children:"Year"}),U.jsx("input",{type:"text",value:i.year,onChange:P=>o({year:P.target.value}),placeholder:"e.g., 2023",className:"w-full p-2 border border-gray-300 rounded-lg focus:outline-none focus:ring focus:ring-blue-300"})]}),U.jsxs("div",{children:[U.jsx("label",{className:"block text-sm font-medium text-gray-600",children:"Region"}),U.jsx("input",{type:"text",value:i.region,onChange:P=>o({region:P.target.value}),placeholder:"e.g., US",className:"w-full p-2 border border-gray-300 rounded-lg focus:outline-none focus:ring focus:ring-blue-300"})]}),U.jsxs("div",{children:[U.jsx("label",{className:"block text-sm font-medium text-gray-600",children:"Page"}),U.jsx("input",{type:"number",value:i.page,onChange:P=>_(Number(P.target.value)),min:"1",className:"w-full p-2 border border-gray-300 rounded-lg focus:outline-none focus:ring focus:ring-blue-300"})]})]})]}),U.jsx("button",{onClick:l,className:"px-4 py-2 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:ring-offset-2 transition",children:"Search"}),U.jsx("div",{className:"mt-6",children:c?U.jsx(_u,{}):d.length>0?S(d):U.jsx("p",{className:"text-gray-600",children:"No results found. Try searching with different filters!"})})]})},xw=le.createContext(null),DC=()=>{const n=le.useContext(xw);if(!n)throw new Error("useMyList must be used within a MyListProvider");return n},LC=()=>{const{currentUser:n}=pi(),{myList:e,refreshMyList:t,deleteFromMyList:i,isLoadingMyList:o,isDeletingFromList:l}=Sm(),{duoPartnerList:c,refreshDuoPartnerList:d,isLoadingDuoPartnerList:p}=DC(),[y,_]=le.useState("myList"),[E,S]=le.useState([]);le.useEffect(()=>{t(),d()},[]),le.useEffect(()=>{if(y==="myList")S(e);else if(y==="partnerList")S(c);else if(y==="ourList"){const x=e.filter(V=>c.some(b=>b.id===V.id&&b.media_type===V.media_type));S(x)}},[y,e,c]);const P=async(x,V)=>{if(!n){ke.error("You must be logged in to remove items from your list.");return}try{await i(x.toString(),V)}catch(b){console.error("Error adding media to list:",b)}};return o||p?U.jsx(_u,{}):U.jsxs("div",{children:[U.jsxs("div",{className:"flex justify-center mb-4",children:[U.jsx("button",{className:`px-4 py-2 mx-2 rounded ${y==="myList"?"bg-blue-500 text-white":"bg-gray-200"}`,onClick:()=>_("myList"),children:"My List"}),(n==null?void 0:n.partnerUid)&&U.jsxs(U.Fragment,{children:[U.jsx("button",{className:`px-4 py-2 mx-2 rounded ${y==="partnerList"?"bg-blue-500 text-white":"bg-gray-200"}`,onClick:()=>_("partnerList"),children:"Duo Partner's List"}),U.jsx("button",{className:`px-4 py-2 mx-2 rounded ${y==="ourList"?"bg-blue-500 text-white":"bg-gray-200"}`,onClick:()=>_("ourList"),children:"Our List"})]})]}),E.length===0?U.jsx("p",{children:"No items to display in this list."}):U.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4",children:E.map(x=>U.jsx(si,{media:x,type:x.media_type,actionLabel:l?"Removing...":"Remove from My List",actionBtnColor:"bg-red-500",actionBtnHoverColor:"hover:bg-red-700",onActionClick:()=>P(x.id,x.media_type)},x.id))})]})},bw=le.createContext({isLoadingDiscoverResults:!1,results:[],discoverOptions:{language:"en-US",mediaType:"movie",discoverType:"popular",timeWindow:"week",excludeIncomplete:!1,page:1},setDiscoverOptions:()=>{},refreshDiscoverResults:()=>{}}),VC=()=>{const n=le.useContext(bw);if(!n)throw new Error("useDiscoverResults must be used within a DiscoverResultsProvider");return n},MC=()=>{const{currentUser:n}=pi(),{addToMyList:e,isAddingToList:t}=Sm(),{discoverOptions:i,setDiscoverOptions:o,refreshDiscoverResults:l,isLoadingDiscoverResults:c,results:d}=VC(),[p,y]=le.useState(!1);le.useEffect(()=>{p&&(l(),y(!1))},[i.page,p]);const _=P=>{o({page:P}),y(!0)},E=async(P,x)=>{if(!n){ke.error("You must be logged in to add items to your list.");return}try{await e(P,x)}catch(V){console.error("Error adding media to list:",V)}};console.log(i.page);const S=P=>P.map(x=>x.media_type?x.media_type==="movie"?U.jsx(si,{media:x,type:"movie",actionLabel:t?"Adding...":"Add to My List",onActionClick:()=>E(x,"movie")},x.id):x.media_type==="tv"?U.jsx(si,{media:x,type:"tv",actionLabel:t?"Adding...":"Add to My List",onActionClick:()=>E(x,"tv")},x.id):null:"title"in x?U.jsx(si,{media:x,type:"movie",actionLabel:t?"Adding...":"Add to My List",onActionClick:()=>E(x,"movie")},x.id):"name"in x&&"first_air_date"in x?U.jsx(si,{media:x,type:"tv",actionLabel:t?"Adding...":"Add to My List",onActionClick:()=>E(x,"tv")},x.id):null);return U.jsxs("div",{className:"max-w-full md:max-w-3xl lg:max-w-4xl mx-auto p-6",children:[U.jsx("h1",{className:"text-2xl font-bold mb-6 text-gray-800",children:"Discover"}),U.jsxs("div",{className:"mb-6",children:[U.jsx("h2",{className:"text-lg font-semibold text-gray-700 mb-4",children:"Filters"}),U.jsx("div",{className:"flex items-center text-gray-600",children:U.jsx("div",{className:"mb-4",children:U.jsxs("label",{className:"flex items-center space-x-3",children:[U.jsx("span",{children:"Exclude Incomplete Results:"}),U.jsx("input",{type:"checkbox",checked:i.excludeIncomplete,onChange:P=>o({excludeIncomplete:P.target.checked}),className:"w-4 h-4"})]})})}),U.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[U.jsxs("div",{children:[U.jsx("label",{className:"block text-sm font-medium text-gray-600",children:"Search Type"}),U.jsxs("select",{value:i.mediaType,onChange:P=>o({mediaType:P.target.value}),className:"w-full p-2 border border-gray-300 rounded-lg focus:outline-none focus:ring focus:ring-blue-300",children:[U.jsx("option",{value:"movie",children:"Movies"}),U.jsx("option",{value:"tv",children:"TV Shows"})]})]}),U.jsxs("div",{children:[U.jsx("label",{className:"block text-sm font-medium text-gray-600",children:"Discover Type"}),U.jsxs("select",{value:i.discoverType,onChange:P=>o({discoverType:P.target.value}),className:"w-full p-2 border border-gray-300 rounded-lg focus:outline-none focus:ring focus:ring-blue-300",children:[U.jsx("option",{value:"popular",children:"Popular"}),U.jsx("option",{value:"trending",children:"Trending"})]})]}),i.discoverType=="trending"&&U.jsxs("div",{children:[U.jsx("label",{className:"block text-sm font-medium text-gray-600",children:"Trending Time Window"}),U.jsxs("select",{value:i.timeWindow,onChange:P=>o({timeWindow:P.target.value}),className:"w-full p-2 border border-gray-300 rounded-lg focus:outline-none focus:ring focus:ring-blue-300",children:[U.jsx("option",{value:"day",children:"Day"}),U.jsx("option",{value:"week",children:"Week"})]})]}),U.jsxs("div",{children:[U.jsx("label",{className:"block text-sm font-medium text-gray-600",children:"Language"}),U.jsx("input",{type:"text",value:i.language,onChange:P=>o({language:P.target.value}),placeholder:"e.g., en-US",className:"w-full p-2 border border-gray-300 rounded-lg focus:outline-none focus:ring focus:ring-blue-300"})]}),U.jsxs("div",{children:[U.jsx("label",{className:"block text-sm font-medium text-gray-600",children:"Page"}),U.jsx("input",{type:"number",value:i.page,onChange:P=>_(Number(P.target.value)),min:"1",className:"w-full p-2 border border-gray-300 rounded-lg focus:outline-none focus:ring focus:ring-blue-300"})]})]})]}),U.jsx("button",{onClick:l,className:"px-4 py-2 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:ring-offset-2 transition",children:`Get ${i.discoverType} ${i.mediaType}s`}),U.jsx("div",{className:"mt-6",children:c?U.jsx(_u,{}):d.length>0?S(d):U.jsx("p",{className:"text-gray-600",children:"No results found. Somethign went wrong!"})})]})};var i_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var to,Nw;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(C,I){function R(){}R.prototype=I.prototype,C.D=I.prototype,C.prototype=new R,C.prototype.constructor=C,C.C=function(O,L,F){for(var k=Array(arguments.length-2),at=2;at<arguments.length;at++)k[at-2]=arguments[at];return I.prototype[L].apply(O,k)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,t),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(C,I,R){R||(R=0);var O=Array(16);if(typeof I=="string")for(var L=0;16>L;++L)O[L]=I.charCodeAt(R++)|I.charCodeAt(R++)<<8|I.charCodeAt(R++)<<16|I.charCodeAt(R++)<<24;else for(L=0;16>L;++L)O[L]=I[R++]|I[R++]<<8|I[R++]<<16|I[R++]<<24;I=C.g[0],R=C.g[1],L=C.g[2];var F=C.g[3],k=I+(F^R&(L^F))+O[0]+3614090360&4294967295;I=R+(k<<7&4294967295|k>>>25),k=F+(L^I&(R^L))+O[1]+3905402710&4294967295,F=I+(k<<12&4294967295|k>>>20),k=L+(R^F&(I^R))+O[2]+606105819&4294967295,L=F+(k<<17&4294967295|k>>>15),k=R+(I^L&(F^I))+O[3]+3250441966&4294967295,R=L+(k<<22&4294967295|k>>>10),k=I+(F^R&(L^F))+O[4]+4118548399&4294967295,I=R+(k<<7&4294967295|k>>>25),k=F+(L^I&(R^L))+O[5]+1200080426&4294967295,F=I+(k<<12&4294967295|k>>>20),k=L+(R^F&(I^R))+O[6]+2821735955&4294967295,L=F+(k<<17&4294967295|k>>>15),k=R+(I^L&(F^I))+O[7]+4249261313&4294967295,R=L+(k<<22&4294967295|k>>>10),k=I+(F^R&(L^F))+O[8]+1770035416&4294967295,I=R+(k<<7&4294967295|k>>>25),k=F+(L^I&(R^L))+O[9]+2336552879&4294967295,F=I+(k<<12&4294967295|k>>>20),k=L+(R^F&(I^R))+O[10]+4294925233&4294967295,L=F+(k<<17&4294967295|k>>>15),k=R+(I^L&(F^I))+O[11]+2304563134&4294967295,R=L+(k<<22&4294967295|k>>>10),k=I+(F^R&(L^F))+O[12]+1804603682&4294967295,I=R+(k<<7&4294967295|k>>>25),k=F+(L^I&(R^L))+O[13]+4254626195&4294967295,F=I+(k<<12&4294967295|k>>>20),k=L+(R^F&(I^R))+O[14]+2792965006&4294967295,L=F+(k<<17&4294967295|k>>>15),k=R+(I^L&(F^I))+O[15]+1236535329&4294967295,R=L+(k<<22&4294967295|k>>>10),k=I+(L^F&(R^L))+O[1]+4129170786&4294967295,I=R+(k<<5&4294967295|k>>>27),k=F+(R^L&(I^R))+O[6]+3225465664&4294967295,F=I+(k<<9&4294967295|k>>>23),k=L+(I^R&(F^I))+O[11]+643717713&4294967295,L=F+(k<<14&4294967295|k>>>18),k=R+(F^I&(L^F))+O[0]+3921069994&4294967295,R=L+(k<<20&4294967295|k>>>12),k=I+(L^F&(R^L))+O[5]+3593408605&4294967295,I=R+(k<<5&4294967295|k>>>27),k=F+(R^L&(I^R))+O[10]+38016083&4294967295,F=I+(k<<9&4294967295|k>>>23),k=L+(I^R&(F^I))+O[15]+3634488961&4294967295,L=F+(k<<14&4294967295|k>>>18),k=R+(F^I&(L^F))+O[4]+3889429448&4294967295,R=L+(k<<20&4294967295|k>>>12),k=I+(L^F&(R^L))+O[9]+568446438&4294967295,I=R+(k<<5&4294967295|k>>>27),k=F+(R^L&(I^R))+O[14]+3275163606&4294967295,F=I+(k<<9&4294967295|k>>>23),k=L+(I^R&(F^I))+O[3]+4107603335&4294967295,L=F+(k<<14&4294967295|k>>>18),k=R+(F^I&(L^F))+O[8]+1163531501&4294967295,R=L+(k<<20&4294967295|k>>>12),k=I+(L^F&(R^L))+O[13]+2850285829&4294967295,I=R+(k<<5&4294967295|k>>>27),k=F+(R^L&(I^R))+O[2]+4243563512&4294967295,F=I+(k<<9&4294967295|k>>>23),k=L+(I^R&(F^I))+O[7]+1735328473&4294967295,L=F+(k<<14&4294967295|k>>>18),k=R+(F^I&(L^F))+O[12]+2368359562&4294967295,R=L+(k<<20&4294967295|k>>>12),k=I+(R^L^F)+O[5]+4294588738&4294967295,I=R+(k<<4&4294967295|k>>>28),k=F+(I^R^L)+O[8]+2272392833&4294967295,F=I+(k<<11&4294967295|k>>>21),k=L+(F^I^R)+O[11]+1839030562&4294967295,L=F+(k<<16&4294967295|k>>>16),k=R+(L^F^I)+O[14]+4259657740&4294967295,R=L+(k<<23&4294967295|k>>>9),k=I+(R^L^F)+O[1]+2763975236&4294967295,I=R+(k<<4&4294967295|k>>>28),k=F+(I^R^L)+O[4]+1272893353&4294967295,F=I+(k<<11&4294967295|k>>>21),k=L+(F^I^R)+O[7]+4139469664&4294967295,L=F+(k<<16&4294967295|k>>>16),k=R+(L^F^I)+O[10]+3200236656&4294967295,R=L+(k<<23&4294967295|k>>>9),k=I+(R^L^F)+O[13]+681279174&4294967295,I=R+(k<<4&4294967295|k>>>28),k=F+(I^R^L)+O[0]+3936430074&4294967295,F=I+(k<<11&4294967295|k>>>21),k=L+(F^I^R)+O[3]+3572445317&4294967295,L=F+(k<<16&4294967295|k>>>16),k=R+(L^F^I)+O[6]+76029189&4294967295,R=L+(k<<23&4294967295|k>>>9),k=I+(R^L^F)+O[9]+3654602809&4294967295,I=R+(k<<4&4294967295|k>>>28),k=F+(I^R^L)+O[12]+3873151461&4294967295,F=I+(k<<11&4294967295|k>>>21),k=L+(F^I^R)+O[15]+530742520&4294967295,L=F+(k<<16&4294967295|k>>>16),k=R+(L^F^I)+O[2]+3299628645&4294967295,R=L+(k<<23&4294967295|k>>>9),k=I+(L^(R|~F))+O[0]+4096336452&4294967295,I=R+(k<<6&4294967295|k>>>26),k=F+(R^(I|~L))+O[7]+1126891415&4294967295,F=I+(k<<10&4294967295|k>>>22),k=L+(I^(F|~R))+O[14]+2878612391&4294967295,L=F+(k<<15&4294967295|k>>>17),k=R+(F^(L|~I))+O[5]+4237533241&4294967295,R=L+(k<<21&4294967295|k>>>11),k=I+(L^(R|~F))+O[12]+1700485571&4294967295,I=R+(k<<6&4294967295|k>>>26),k=F+(R^(I|~L))+O[3]+2399980690&4294967295,F=I+(k<<10&4294967295|k>>>22),k=L+(I^(F|~R))+O[10]+4293915773&4294967295,L=F+(k<<15&4294967295|k>>>17),k=R+(F^(L|~I))+O[1]+2240044497&4294967295,R=L+(k<<21&4294967295|k>>>11),k=I+(L^(R|~F))+O[8]+1873313359&4294967295,I=R+(k<<6&4294967295|k>>>26),k=F+(R^(I|~L))+O[15]+4264355552&4294967295,F=I+(k<<10&4294967295|k>>>22),k=L+(I^(F|~R))+O[6]+2734768916&4294967295,L=F+(k<<15&4294967295|k>>>17),k=R+(F^(L|~I))+O[13]+1309151649&4294967295,R=L+(k<<21&4294967295|k>>>11),k=I+(L^(R|~F))+O[4]+4149444226&4294967295,I=R+(k<<6&4294967295|k>>>26),k=F+(R^(I|~L))+O[11]+3174756917&4294967295,F=I+(k<<10&4294967295|k>>>22),k=L+(I^(F|~R))+O[2]+718787259&4294967295,L=F+(k<<15&4294967295|k>>>17),k=R+(F^(L|~I))+O[9]+3951481745&4294967295,C.g[0]=C.g[0]+I&4294967295,C.g[1]=C.g[1]+(L+(k<<21&4294967295|k>>>11))&4294967295,C.g[2]=C.g[2]+L&4294967295,C.g[3]=C.g[3]+F&4294967295}i.prototype.u=function(C,I){I===void 0&&(I=C.length);for(var R=I-this.blockSize,O=this.B,L=this.h,F=0;F<I;){if(L==0)for(;F<=R;)o(this,C,F),F+=this.blockSize;if(typeof C=="string"){for(;F<I;)if(O[L++]=C.charCodeAt(F++),L==this.blockSize){o(this,O),L=0;break}}else for(;F<I;)if(O[L++]=C[F++],L==this.blockSize){o(this,O),L=0;break}}this.h=L,this.o+=I},i.prototype.v=function(){var C=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);C[0]=128;for(var I=1;I<C.length-8;++I)C[I]=0;var R=8*this.o;for(I=C.length-8;I<C.length;++I)C[I]=R&255,R/=256;for(this.u(C),C=Array(16),I=R=0;4>I;++I)for(var O=0;32>O;O+=8)C[R++]=this.g[I]>>>O&255;return C};function l(C,I){var R=d;return Object.prototype.hasOwnProperty.call(R,C)?R[C]:R[C]=I(C)}function c(C,I){this.h=I;for(var R=[],O=!0,L=C.length-1;0<=L;L--){var F=C[L]|0;O&&F==I||(R[L]=F,O=!1)}this.g=R}var d={};function p(C){return-128<=C&&128>C?l(C,function(I){return new c([I|0],0>I?-1:0)}):new c([C|0],0>C?-1:0)}function y(C){if(isNaN(C)||!isFinite(C))return E;if(0>C)return b(y(-C));for(var I=[],R=1,O=0;C>=R;O++)I[O]=C/R|0,R*=4294967296;return new c(I,0)}function _(C,I){if(C.length==0)throw Error("number format error: empty string");if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(C.charAt(0)=="-")return b(_(C.substring(1),I));if(0<=C.indexOf("-"))throw Error('number format error: interior "-" character');for(var R=y(Math.pow(I,8)),O=E,L=0;L<C.length;L+=8){var F=Math.min(8,C.length-L),k=parseInt(C.substring(L,L+F),I);8>F?(F=y(Math.pow(I,F)),O=O.j(F).add(y(k))):(O=O.j(R),O=O.add(y(k)))}return O}var E=p(0),S=p(1),P=p(16777216);n=c.prototype,n.m=function(){if(V(this))return-b(this).m();for(var C=0,I=1,R=0;R<this.g.length;R++){var O=this.i(R);C+=(0<=O?O:4294967296+O)*I,I*=4294967296}return C},n.toString=function(C){if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(x(this))return"0";if(V(this))return"-"+b(this).toString(C);for(var I=y(Math.pow(C,6)),R=this,O="";;){var L=te(R,I).g;R=G(R,L.j(I));var F=((0<R.g.length?R.g[0]:R.h)>>>0).toString(C);if(R=L,x(R))return F+O;for(;6>F.length;)F="0"+F;O=F+O}},n.i=function(C){return 0>C?0:C<this.g.length?this.g[C]:this.h};function x(C){if(C.h!=0)return!1;for(var I=0;I<C.g.length;I++)if(C.g[I]!=0)return!1;return!0}function V(C){return C.h==-1}n.l=function(C){return C=G(this,C),V(C)?-1:x(C)?0:1};function b(C){for(var I=C.g.length,R=[],O=0;O<I;O++)R[O]=~C.g[O];return new c(R,~C.h).add(S)}n.abs=function(){return V(this)?b(this):this},n.add=function(C){for(var I=Math.max(this.g.length,C.g.length),R=[],O=0,L=0;L<=I;L++){var F=O+(this.i(L)&65535)+(C.i(L)&65535),k=(F>>>16)+(this.i(L)>>>16)+(C.i(L)>>>16);O=k>>>16,F&=65535,k&=65535,R[L]=k<<16|F}return new c(R,R[R.length-1]&-2147483648?-1:0)};function G(C,I){return C.add(b(I))}n.j=function(C){if(x(this)||x(C))return E;if(V(this))return V(C)?b(this).j(b(C)):b(b(this).j(C));if(V(C))return b(this.j(b(C)));if(0>this.l(P)&&0>C.l(P))return y(this.m()*C.m());for(var I=this.g.length+C.g.length,R=[],O=0;O<2*I;O++)R[O]=0;for(O=0;O<this.g.length;O++)for(var L=0;L<C.g.length;L++){var F=this.i(O)>>>16,k=this.i(O)&65535,at=C.i(L)>>>16,Et=C.i(L)&65535;R[2*O+2*L]+=k*Et,Q(R,2*O+2*L),R[2*O+2*L+1]+=F*Et,Q(R,2*O+2*L+1),R[2*O+2*L+1]+=k*at,Q(R,2*O+2*L+1),R[2*O+2*L+2]+=F*at,Q(R,2*O+2*L+2)}for(O=0;O<I;O++)R[O]=R[2*O+1]<<16|R[2*O];for(O=I;O<2*I;O++)R[O]=0;return new c(R,0)};function Q(C,I){for(;(C[I]&65535)!=C[I];)C[I+1]+=C[I]>>>16,C[I]&=65535,I++}function K(C,I){this.g=C,this.h=I}function te(C,I){if(x(I))throw Error("division by zero");if(x(C))return new K(E,E);if(V(C))return I=te(b(C),I),new K(b(I.g),b(I.h));if(V(I))return I=te(C,b(I)),new K(b(I.g),I.h);if(30<C.g.length){if(V(C)||V(I))throw Error("slowDivide_ only works with positive integers.");for(var R=S,O=I;0>=O.l(C);)R=oe(R),O=oe(O);var L=ae(R,1),F=ae(O,1);for(O=ae(O,2),R=ae(R,2);!x(O);){var k=F.add(O);0>=k.l(C)&&(L=L.add(R),F=k),O=ae(O,1),R=ae(R,1)}return I=G(C,L.j(I)),new K(L,I)}for(L=E;0<=C.l(I);){for(R=Math.max(1,Math.floor(C.m()/I.m())),O=Math.ceil(Math.log(R)/Math.LN2),O=48>=O?1:Math.pow(2,O-48),F=y(R),k=F.j(I);V(k)||0<k.l(C);)R-=O,F=y(R),k=F.j(I);x(F)&&(F=S),L=L.add(F),C=G(C,k)}return new K(L,C)}n.A=function(C){return te(this,C).h},n.and=function(C){for(var I=Math.max(this.g.length,C.g.length),R=[],O=0;O<I;O++)R[O]=this.i(O)&C.i(O);return new c(R,this.h&C.h)},n.or=function(C){for(var I=Math.max(this.g.length,C.g.length),R=[],O=0;O<I;O++)R[O]=this.i(O)|C.i(O);return new c(R,this.h|C.h)},n.xor=function(C){for(var I=Math.max(this.g.length,C.g.length),R=[],O=0;O<I;O++)R[O]=this.i(O)^C.i(O);return new c(R,this.h^C.h)};function oe(C){for(var I=C.g.length+1,R=[],O=0;O<I;O++)R[O]=C.i(O)<<1|C.i(O-1)>>>31;return new c(R,C.h)}function ae(C,I){var R=I>>5;I%=32;for(var O=C.g.length-R,L=[],F=0;F<O;F++)L[F]=0<I?C.i(F+R)>>>I|C.i(F+R+1)<<32-I:C.i(F+R);return new c(L,C.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,Nw=i,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.A,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=y,c.fromString=_,to=c}).apply(typeof i_<"u"?i_:typeof self<"u"?self:typeof window<"u"?window:{});var Kc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ow,zl,Dw,rh,Rp,Lw,Vw,Mw;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,m,v){return u==Array.prototype||u==Object.prototype||(u[m]=v.value),u};function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Kc=="object"&&Kc];for(var m=0;m<u.length;++m){var v=u[m];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var i=t(this);function o(u,m){if(m)e:{var v=i;u=u.split(".");for(var T=0;T<u.length-1;T++){var z=u[T];if(!(z in v))break e;v=v[z]}u=u[u.length-1],T=v[u],m=m(T),m!=T&&m!=null&&e(v,u,{configurable:!0,writable:!0,value:m})}}function l(u,m){u instanceof String&&(u+="");var v=0,T=!1,z={next:function(){if(!T&&v<u.length){var H=v++;return{value:m(H,u[H]),done:!1}}return T=!0,{done:!0,value:void 0}}};return z[Symbol.iterator]=function(){return z},z}o("Array.prototype.values",function(u){return u||function(){return l(this,function(m,v){return v})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},d=this||self;function p(u){var m=typeof u;return m=m!="object"?m:u?Array.isArray(u)?"array":m:"null",m=="array"||m=="object"&&typeof u.length=="number"}function y(u){var m=typeof u;return m=="object"&&u!=null||m=="function"}function _(u,m,v){return u.call.apply(u.bind,arguments)}function E(u,m,v){if(!u)throw Error();if(2<arguments.length){var T=Array.prototype.slice.call(arguments,2);return function(){var z=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(z,T),u.apply(m,z)}}return function(){return u.apply(m,arguments)}}function S(u,m,v){return S=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?_:E,S.apply(null,arguments)}function P(u,m){var v=Array.prototype.slice.call(arguments,1);return function(){var T=v.slice();return T.push.apply(T,arguments),u.apply(this,T)}}function x(u,m){function v(){}v.prototype=m.prototype,u.aa=m.prototype,u.prototype=new v,u.prototype.constructor=u,u.Qb=function(T,z,H){for(var se=Array(arguments.length-2),Je=2;Je<arguments.length;Je++)se[Je-2]=arguments[Je];return m.prototype[z].apply(T,se)}}function V(u){const m=u.length;if(0<m){const v=Array(m);for(let T=0;T<m;T++)v[T]=u[T];return v}return[]}function b(u,m){for(let v=1;v<arguments.length;v++){const T=arguments[v];if(p(T)){const z=u.length||0,H=T.length||0;u.length=z+H;for(let se=0;se<H;se++)u[z+se]=T[se]}else u.push(T)}}class G{constructor(m,v){this.i=m,this.j=v,this.h=0,this.g=null}get(){let m;return 0<this.h?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function Q(u){return/^[\s\xa0]*$/.test(u)}function K(){var u=d.navigator;return u&&(u=u.userAgent)?u:""}function te(u){return te[" "](u),u}te[" "]=function(){};var oe=K().indexOf("Gecko")!=-1&&!(K().toLowerCase().indexOf("webkit")!=-1&&K().indexOf("Edge")==-1)&&!(K().indexOf("Trident")!=-1||K().indexOf("MSIE")!=-1)&&K().indexOf("Edge")==-1;function ae(u,m,v){for(const T in u)m.call(v,u[T],T,u)}function C(u,m){for(const v in u)m.call(void 0,u[v],v,u)}function I(u){const m={};for(const v in u)m[v]=u[v];return m}const R="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function O(u,m){let v,T;for(let z=1;z<arguments.length;z++){T=arguments[z];for(v in T)u[v]=T[v];for(let H=0;H<R.length;H++)v=R[H],Object.prototype.hasOwnProperty.call(T,v)&&(u[v]=T[v])}}function L(u){var m=1;u=u.split(":");const v=[];for(;0<m&&u.length;)v.push(u.shift()),m--;return u.length&&v.push(u.join(":")),v}function F(u){d.setTimeout(()=>{throw u},0)}function k(){var u=we;let m=null;return u.g&&(m=u.g,u.g=u.g.next,u.g||(u.h=null),m.next=null),m}class at{constructor(){this.h=this.g=null}add(m,v){const T=Et.get();T.set(m,v),this.h?this.h.next=T:this.g=T,this.h=T}}var Et=new G(()=>new Tt,u=>u.reset());class Tt{constructor(){this.next=this.g=this.h=null}set(m,v){this.h=m,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let He,ie=!1,we=new at,he=()=>{const u=d.Promise.resolve(void 0);He=()=>{u.then(j)}};var j=()=>{for(var u;u=k();){try{u.h.call(u.g)}catch(v){F(v)}var m=Et;m.j(u),100>m.h&&(m.h++,u.next=m.g,m.g=u)}ie=!1};function Y(){this.s=this.s,this.C=this.C}Y.prototype.s=!1,Y.prototype.ma=function(){this.s||(this.s=!0,this.N())},Y.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ve(u,m){this.type=u,this.g=this.target=m,this.defaultPrevented=!1}ve.prototype.h=function(){this.defaultPrevented=!0};var Ne=function(){if(!d.addEventListener||!Object.defineProperty)return!1;var u=!1,m=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const v=()=>{};d.addEventListener("test",v,m),d.removeEventListener("test",v,m)}catch{}return u}();function Oe(u,m){if(ve.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var v=this.type=u.type,T=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=m,m=u.relatedTarget){if(oe){e:{try{te(m.nodeName);var z=!0;break e}catch{}z=!1}z||(m=null)}}else v=="mouseover"?m=u.fromElement:v=="mouseout"&&(m=u.toElement);this.relatedTarget=m,T?(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:je[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&Oe.aa.h.call(this)}}x(Oe,ve);var je={2:"touch",3:"pen",4:"mouse"};Oe.prototype.h=function(){Oe.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Ke="closure_listenable_"+(1e6*Math.random()|0),Qe=0;function Ze(u,m,v,T,z){this.listener=u,this.proxy=null,this.src=m,this.type=v,this.capture=!!T,this.ha=z,this.key=++Qe,this.da=this.fa=!1}function bt(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Or(u){this.src=u,this.g={},this.h=0}Or.prototype.add=function(u,m,v,T,z){var H=u.toString();u=this.g[H],u||(u=this.g[H]=[],this.h++);var se=mi(u,m,T,z);return-1<se?(m=u[se],v||(m.fa=!1)):(m=new Ze(m,this.src,H,!!T,z),m.fa=v,u.push(m)),m};function fo(u,m){var v=m.type;if(v in u.g){var T=u.g[v],z=Array.prototype.indexOf.call(T,m,void 0),H;(H=0<=z)&&Array.prototype.splice.call(T,z,1),H&&(bt(m),u.g[v].length==0&&(delete u.g[v],u.h--))}}function mi(u,m,v,T){for(var z=0;z<u.length;++z){var H=u[z];if(!H.da&&H.listener==m&&H.capture==!!v&&H.ha==T)return z}return-1}var ps="closure_lm_"+(1e6*Math.random()|0),po={};function Ha(u,m,v,T,z){if(Array.isArray(m)){for(var H=0;H<m.length;H++)Ha(u,m[H],v,T,z);return null}return v=Qa(v),u&&u[Ke]?u.K(m,v,y(T)?!!T.capture:!!T,z):Wa(u,m,v,!1,T,z)}function Wa(u,m,v,T,z,H){if(!m)throw Error("Invalid event type");var se=y(z)?!!z.capture:!!z,Je=go(u);if(Je||(u[ps]=Je=new Or(u)),v=Je.add(m,v,T,se,H),v.proxy)return v;if(T=ku(),v.proxy=T,T.src=u,T.listener=v,u.addEventListener)Ne||(z=se),z===void 0&&(z=!1),u.addEventListener(m.toString(),T,z);else if(u.attachEvent)u.attachEvent(Lr(m.toString()),T);else if(u.addListener&&u.removeListener)u.addListener(T);else throw Error("addEventListener and attachEvent are unavailable.");return v}function ku(){function u(v){return m.call(u.src,u.listener,v)}const m=Ka;return u}function mo(u,m,v,T,z){if(Array.isArray(m))for(var H=0;H<m.length;H++)mo(u,m[H],v,T,z);else T=y(T)?!!T.capture:!!T,v=Qa(v),u&&u[Ke]?(u=u.i,m=String(m).toString(),m in u.g&&(H=u.g[m],v=mi(H,v,T,z),-1<v&&(bt(H[v]),Array.prototype.splice.call(H,v,1),H.length==0&&(delete u.g[m],u.h--)))):u&&(u=go(u))&&(m=u.g[m.toString()],u=-1,m&&(u=mi(m,v,T,z)),(v=-1<u?m[u]:null)&&Dr(v))}function Dr(u){if(typeof u!="number"&&u&&!u.da){var m=u.src;if(m&&m[Ke])fo(m.i,u);else{var v=u.type,T=u.proxy;m.removeEventListener?m.removeEventListener(v,T,u.capture):m.detachEvent?m.detachEvent(Lr(v),T):m.addListener&&m.removeListener&&m.removeListener(T),(v=go(m))?(fo(v,u),v.h==0&&(v.src=null,m[ps]=null)):bt(u)}}}function Lr(u){return u in po?po[u]:po[u]="on"+u}function Ka(u,m){if(u.da)u=!0;else{m=new Oe(m,this);var v=u.listener,T=u.ha||u.src;u.fa&&Dr(u),u=v.call(T,m)}return u}function go(u){return u=u[ps],u instanceof Or?u:null}var yo="__closure_events_fn_"+(1e9*Math.random()>>>0);function Qa(u){return typeof u=="function"?u:(u[yo]||(u[yo]=function(m){return u.handleEvent(m)}),u[yo])}function It(){Y.call(this),this.i=new Or(this),this.M=this,this.F=null}x(It,Y),It.prototype[Ke]=!0,It.prototype.removeEventListener=function(u,m,v,T){mo(this,u,m,v,T)};function St(u,m){var v,T=u.F;if(T)for(v=[];T;T=T.F)v.push(T);if(u=u.M,T=m.type||m,typeof m=="string")m=new ve(m,u);else if(m instanceof ve)m.target=m.target||u;else{var z=m;m=new ve(T,u),O(m,z)}if(z=!0,v)for(var H=v.length-1;0<=H;H--){var se=m.g=v[H];z=Vr(se,T,!0,m)&&z}if(se=m.g=u,z=Vr(se,T,!0,m)&&z,z=Vr(se,T,!1,m)&&z,v)for(H=0;H<v.length;H++)se=m.g=v[H],z=Vr(se,T,!1,m)&&z}It.prototype.N=function(){if(It.aa.N.call(this),this.i){var u=this.i,m;for(m in u.g){for(var v=u.g[m],T=0;T<v.length;T++)bt(v[T]);delete u.g[m],u.h--}}this.F=null},It.prototype.K=function(u,m,v,T){return this.i.add(String(u),m,!1,v,T)},It.prototype.L=function(u,m,v,T){return this.i.add(String(u),m,!0,v,T)};function Vr(u,m,v,T){if(m=u.i.g[String(m)],!m)return!0;m=m.concat();for(var z=!0,H=0;H<m.length;++H){var se=m[H];if(se&&!se.da&&se.capture==v){var Je=se.listener,Rt=se.ha||se.src;se.fa&&fo(u.i,se),z=Je.call(Rt,T)!==!1&&z}}return z&&!T.defaultPrevented}function Ga(u,m,v){if(typeof u=="function")v&&(u=S(u,v));else if(u&&typeof u.handleEvent=="function")u=S(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(m)?-1:d.setTimeout(u,m||0)}function gi(u){u.g=Ga(()=>{u.g=null,u.i&&(u.i=!1,gi(u))},u.l);const m=u.h;u.h=null,u.m.apply(null,m)}class ms extends Y{constructor(m,v){super(),this.m=m,this.l=v,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:gi(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function gs(u){Y.call(this),this.h=u,this.g={}}x(gs,Y);var Xa=[];function Ja(u){ae(u.g,function(m,v){this.g.hasOwnProperty(v)&&Dr(m)},u),u.g={}}gs.prototype.N=function(){gs.aa.N.call(this),Ja(this)},gs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ya=d.JSON.stringify,Za=d.JSON.parse,el=class{stringify(u){return d.JSON.stringify(u,void 0)}parse(u){return d.JSON.parse(u,void 0)}};function ys(){}ys.prototype.h=null;function vo(u){return u.h||(u.h=u.i())}function _o(){}var Nn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function dr(){ve.call(this,"d")}x(dr,ve);function wo(){ve.call(this,"c")}x(wo,ve);var fr={},tl=null;function vs(){return tl=tl||new It}fr.La="serverreachability";function nl(u){ve.call(this,fr.La,u)}x(nl,ve);function Mr(u){const m=vs();St(m,new nl(m))}fr.STAT_EVENT="statevent";function rl(u,m){ve.call(this,fr.STAT_EVENT,u),this.stat=m}x(rl,ve);function ft(u){const m=vs();St(m,new rl(m,u))}fr.Ma="timingevent";function Eo(u,m){ve.call(this,fr.Ma,u),this.size=m}x(Eo,ve);function Hn(u,m){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){u()},m)}function _s(){this.g=!0}_s.prototype.xa=function(){this.g=!1};function ws(u,m,v,T,z,H){u.info(function(){if(u.g)if(H)for(var se="",Je=H.split("&"),Rt=0;Rt<Je.length;Rt++){var ze=Je[Rt].split("=");if(1<ze.length){var Nt=ze[0];ze=ze[1];var yt=Nt.split("_");se=2<=yt.length&&yt[1]=="type"?se+(Nt+"="+ze+"&"):se+(Nt+"=redacted&")}}else se=null;else se=H;return"XMLHTTP REQ ("+T+") [attempt "+z+"]: "+m+`
`+v+`
`+se})}function To(u,m,v,T,z,H,se){u.info(function(){return"XMLHTTP RESP ("+T+") [ attempt "+z+"]: "+m+`
`+v+`
`+H+" "+se})}function Wn(u,m,v,T){u.info(function(){return"XMLHTTP TEXT ("+m+"): "+yd(u,v)+(T?" "+T:"")})}function il(u,m){u.info(function(){return"TIMEOUT: "+m})}_s.prototype.info=function(){};function yd(u,m){if(!u.g)return m;if(!m)return null;try{var v=JSON.parse(m);if(v){for(u=0;u<v.length;u++)if(Array.isArray(v[u])){var T=v[u];if(!(2>T.length)){var z=T[1];if(Array.isArray(z)&&!(1>z.length)){var H=z[0];if(H!="noop"&&H!="stop"&&H!="close")for(var se=1;se<z.length;se++)z[se]=""}}}}return Ya(v)}catch{return m}}var Io={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},xu={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Kn;function Es(){}x(Es,ys),Es.prototype.g=function(){return new XMLHttpRequest},Es.prototype.i=function(){return{}},Kn=new Es;function Qn(u,m,v,T){this.j=u,this.i=m,this.l=v,this.R=T||1,this.U=new gs(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new bu}function bu(){this.i=null,this.g="",this.h=!1}var sl={},So={};function Ro(u,m,v){u.L=1,u.v=Ei(Sn(m)),u.m=v,u.P=!0,ol(u,null)}function ol(u,m){u.F=Date.now(),et(u),u.A=Sn(u.v);var v=u.A,T=u.R;Array.isArray(T)||(T=[String(T)]),Ii(v.i,"t",T),u.C=0,v=u.j.J,u.h=new bu,u.g=Gu(u.j,v?m:null,!u.m),0<u.O&&(u.M=new ms(S(u.Y,u,u.g),u.O)),m=u.U,v=u.g,T=u.ca;var z="readystatechange";Array.isArray(z)||(z&&(Xa[0]=z.toString()),z=Xa);for(var H=0;H<z.length;H++){var se=Ha(v,z[H],T||m.handleEvent,!1,m.h||m);if(!se)break;m.g[se.key]=se}m=u.H?I(u.H):{},u.m?(u.u||(u.u="POST"),m["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,m)):(u.u="GET",u.g.ea(u.A,u.u,null,m)),Mr(),ws(u.i,u.u,u.A,u.l,u.R,u.m)}Qn.prototype.ca=function(u){u=u.target;const m=this.M;m&&cn(u)==3?m.j():this.Y(u)},Qn.prototype.Y=function(u){try{if(u==this.g)e:{const yt=cn(this.g);var m=this.g.Ba();const Ln=this.g.Z();if(!(3>yt)&&(yt!=3||this.g&&(this.h.h||this.g.oa()||dl(this.g)))){this.J||yt!=4||m==7||(m==8||0>=Ln?Mr(3):Mr(2)),Ts(this);var v=this.g.Z();this.X=v;t:if(Nu(this)){var T=dl(this.g);u="";var z=T.length,H=cn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){On(this),yi(this);var se="";break t}this.h.i=new d.TextDecoder}for(m=0;m<z;m++)this.h.h=!0,u+=this.h.i.decode(T[m],{stream:!(H&&m==z-1)});T.length=0,this.h.g+=u,this.C=0,se=this.h.g}else se=this.g.oa();if(this.o=v==200,To(this.i,this.u,this.A,this.l,this.R,yt,v),this.o){if(this.T&&!this.K){t:{if(this.g){var Je,Rt=this.g;if((Je=Rt.g?Rt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Q(Je)){var ze=Je;break t}}ze=null}if(v=ze)Wn(this.i,this.l,v,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,al(this,v);else{this.o=!1,this.s=3,ft(12),On(this),yi(this);break e}}if(this.P){v=!0;let An;for(;!this.J&&this.C<se.length;)if(An=vd(this,se),An==So){yt==4&&(this.s=4,ft(14),v=!1),Wn(this.i,this.l,null,"[Incomplete Response]");break}else if(An==sl){this.s=4,ft(15),Wn(this.i,this.l,se,"[Invalid Chunk]"),v=!1;break}else Wn(this.i,this.l,An,null),al(this,An);if(Nu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),yt!=4||se.length!=0||this.h.h||(this.s=1,ft(16),v=!1),this.o=this.o&&v,!v)Wn(this.i,this.l,se,"[Invalid Chunked Response]"),On(this),yi(this);else if(0<se.length&&!this.W){this.W=!0;var Nt=this.j;Nt.g==this&&Nt.ba&&!Nt.M&&(Nt.j.info("Great, no buffering proxy detected. Bytes received: "+se.length),pl(Nt),Nt.M=!0,ft(11))}}else Wn(this.i,this.l,se,null),al(this,se);yt==4&&On(this),this.o&&!this.J&&(yt==4?Vo(this.j,this):(this.o=!1,et(this)))}else bo(this.g),v==400&&0<se.indexOf("Unknown SID")?(this.s=3,ft(12)):(this.s=0,ft(13)),On(this),yi(this)}}}catch{}finally{}};function Nu(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function vd(u,m){var v=u.C,T=m.indexOf(`
`,v);return T==-1?So:(v=Number(m.substring(v,T)),isNaN(v)?sl:(T+=1,T+v>m.length?So:(m=m.slice(T,T+v),u.C=T+v,m)))}Qn.prototype.cancel=function(){this.J=!0,On(this)};function et(u){u.S=Date.now()+u.I,Ou(u,u.I)}function Ou(u,m){if(u.B!=null)throw Error("WatchDog timer not null");u.B=Hn(S(u.ba,u),m)}function Ts(u){u.B&&(d.clearTimeout(u.B),u.B=null)}Qn.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(il(this.i,this.A),this.L!=2&&(Mr(),ft(17)),On(this),this.s=2,yi(this)):Ou(this,this.S-u)};function yi(u){u.j.G==0||u.J||Vo(u.j,u)}function On(u){Ts(u);var m=u.M;m&&typeof m.ma=="function"&&m.ma(),u.M=null,Ja(u.U),u.g&&(m=u.g,u.g=null,m.abort(),m.ma())}function al(u,m){try{var v=u.j;if(v.G!=0&&(v.g==u||tn(v.h,u))){if(!u.K&&tn(v.h,u)&&v.G==3){try{var T=v.Da.g.parse(m)}catch{T=null}if(Array.isArray(T)&&T.length==3){var z=T;if(z[0]==0){e:if(!v.u){if(v.g)if(v.g.F+3e3<u.F)Lo(v),Zn(v);else break e;Do(v),ft(18)}}else v.za=z[1],0<v.za-v.T&&37500>z[2]&&v.F&&v.v==0&&!v.C&&(v.C=Hn(S(v.Za,v),6e3));if(1>=Lu(v.h)&&v.ca){try{v.ca()}catch{}v.ca=void 0}}else Br(v,11)}else if((u.K||v.g==u)&&Lo(v),!Q(m))for(z=v.Da.g.parse(m),m=0;m<z.length;m++){let ze=z[m];if(v.T=ze[0],ze=ze[1],v.G==2)if(ze[0]=="c"){v.K=ze[1],v.ia=ze[2];const Nt=ze[3];Nt!=null&&(v.la=Nt,v.j.info("VER="+v.la));const yt=ze[4];yt!=null&&(v.Aa=yt,v.j.info("SVER="+v.Aa));const Ln=ze[5];Ln!=null&&typeof Ln=="number"&&0<Ln&&(T=1.5*Ln,v.L=T,v.j.info("backChannelRequestTimeoutMs_="+T)),T=v;const An=u.g;if(An){const ks=An.g?An.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ks){var H=T.h;H.g||ks.indexOf("spdy")==-1&&ks.indexOf("quic")==-1&&ks.indexOf("h2")==-1||(H.j=H.l,H.g=new Set,H.h&&(ll(H,H.h),H.h=null))}if(T.D){const Fo=An.g?An.g.getResponseHeader("X-HTTP-Session-Id"):null;Fo&&(T.ya=Fo,Ye(T.I,T.D,Fo))}}v.G=3,v.l&&v.l.ua(),v.ba&&(v.R=Date.now()-u.F,v.j.info("Handshake RTT: "+v.R+"ms")),T=v;var se=u;if(T.qa=Qu(T,T.J?T.ia:null,T.W),se.K){Vu(T.h,se);var Je=se,Rt=T.L;Rt&&(Je.I=Rt),Je.B&&(Ts(Je),et(Je)),T.g=se}else Ps(T);0<v.i.length&&yr(v)}else ze[0]!="stop"&&ze[0]!="close"||Br(v,7);else v.G==3&&(ze[0]=="stop"||ze[0]=="close"?ze[0]=="stop"?Br(v,7):Ut(v):ze[0]!="noop"&&v.l&&v.l.ta(ze),v.v=0)}}Mr(4)}catch{}}var Du=class{constructor(u,m){this.g=u,this.map=m}};function Is(u){this.l=u||10,d.PerformanceNavigationTiming?(u=d.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function In(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Lu(u){return u.h?1:u.g?u.g.size:0}function tn(u,m){return u.h?u.h==m:u.g?u.g.has(m):!1}function ll(u,m){u.g?u.g.add(m):u.h=m}function Vu(u,m){u.h&&u.h==m?u.h=null:u.g&&u.g.has(m)&&u.g.delete(m)}Is.prototype.cancel=function(){if(this.i=Mu(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function Mu(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let m=u.i;for(const v of u.g.values())m=m.concat(v.D);return m}return V(u.i)}function Ao(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(p(u)){for(var m=[],v=u.length,T=0;T<v;T++)m.push(u[T]);return m}m=[],v=0;for(T in u)m[v++]=u[T];return m}function Co(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(p(u)||typeof u=="string"){var m=[];u=u.length;for(var v=0;v<u;v++)m.push(v);return m}m=[],v=0;for(const T in u)m[v++]=T;return m}}}function vi(u,m){if(u.forEach&&typeof u.forEach=="function")u.forEach(m,void 0);else if(p(u)||typeof u=="string")Array.prototype.forEach.call(u,m,void 0);else for(var v=Co(u),T=Ao(u),z=T.length,H=0;H<z;H++)m.call(void 0,T[H],v&&v[H],u)}var Ss=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function _d(u,m){if(u){u=u.split("&");for(var v=0;v<u.length;v++){var T=u[v].indexOf("="),z=null;if(0<=T){var H=u[v].substring(0,T);z=u[v].substring(T+1)}else H=u[v];m(H,z?decodeURIComponent(z.replace(/\+/g," ")):"")}}}function Fr(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof Fr){this.h=u.h,Rs(this,u.j),this.o=u.o,this.g=u.g,_i(this,u.s),this.l=u.l;var m=u.i,v=new pr;v.i=m.i,m.g&&(v.g=new Map(m.g),v.h=m.h),wi(this,v),this.m=u.m}else u&&(m=String(u).match(Ss))?(this.h=!1,Rs(this,m[1]||"",!0),this.o=Me(m[2]||""),this.g=Me(m[3]||"",!0),_i(this,m[4]),this.l=Me(m[5]||"",!0),wi(this,m[6]||"",!0),this.m=Me(m[7]||"")):(this.h=!1,this.i=new pr(null,this.h))}Fr.prototype.toString=function(){var u=[],m=this.j;m&&u.push(Ti(m,Po,!0),":");var v=this.g;return(v||m=="file")&&(u.push("//"),(m=this.o)&&u.push(Ti(m,Po,!0),"@"),u.push(encodeURIComponent(String(v)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.s,v!=null&&u.push(":",String(v))),(v=this.l)&&(this.g&&v.charAt(0)!="/"&&u.push("/"),u.push(Ti(v,v.charAt(0)=="/"?ju:Uu,!0))),(v=this.i.toString())&&u.push("?",v),(v=this.m)&&u.push("#",Ti(v,ul)),u.join("")};function Sn(u){return new Fr(u)}function Rs(u,m,v){u.j=v?Me(m,!0):m,u.j&&(u.j=u.j.replace(/:$/,""))}function _i(u,m){if(m){if(m=Number(m),isNaN(m)||0>m)throw Error("Bad port number "+m);u.s=m}else u.s=null}function wi(u,m,v){m instanceof pr?(u.i=m,mr(u.i,u.h)):(v||(m=Ti(m,zu)),u.i=new pr(m,u.h))}function Ye(u,m,v){u.i.set(m,v)}function Ei(u){return Ye(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function Me(u,m){return u?m?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Ti(u,m,v){return typeof u=="string"?(u=encodeURI(u).replace(m,Fu),v&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function Fu(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Po=/[#\/\?@]/g,Uu=/[#\?:]/g,ju=/[#\?]/g,zu=/[#\?@]/g,ul=/#/g;function pr(u,m){this.h=this.g=null,this.i=u||null,this.j=!!m}function Ft(u){u.g||(u.g=new Map,u.h=0,u.i&&_d(u.i,function(m,v){u.add(decodeURIComponent(m.replace(/\+/g," ")),v)}))}n=pr.prototype,n.add=function(u,m){Ft(this),this.i=null,u=Dn(this,u);var v=this.g.get(u);return v||this.g.set(u,v=[]),v.push(m),this.h+=1,this};function Gn(u,m){Ft(u),m=Dn(u,m),u.g.has(m)&&(u.i=null,u.h-=u.g.get(m).length,u.g.delete(m))}function Xn(u,m){return Ft(u),m=Dn(u,m),u.g.has(m)}n.forEach=function(u,m){Ft(this),this.g.forEach(function(v,T){v.forEach(function(z){u.call(m,z,T,this)},this)},this)},n.na=function(){Ft(this);const u=Array.from(this.g.values()),m=Array.from(this.g.keys()),v=[];for(let T=0;T<m.length;T++){const z=u[T];for(let H=0;H<z.length;H++)v.push(m[T])}return v},n.V=function(u){Ft(this);let m=[];if(typeof u=="string")Xn(this,u)&&(m=m.concat(this.g.get(Dn(this,u))));else{u=Array.from(this.g.values());for(let v=0;v<u.length;v++)m=m.concat(u[v])}return m},n.set=function(u,m){return Ft(this),this.i=null,u=Dn(this,u),Xn(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[m]),this.h+=1,this},n.get=function(u,m){return u?(u=this.V(u),0<u.length?String(u[0]):m):m};function Ii(u,m,v){Gn(u,m),0<v.length&&(u.i=null,u.g.set(Dn(u,m),V(v)),u.h+=v.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],m=Array.from(this.g.keys());for(var v=0;v<m.length;v++){var T=m[v];const H=encodeURIComponent(String(T)),se=this.V(T);for(T=0;T<se.length;T++){var z=H;se[T]!==""&&(z+="="+encodeURIComponent(String(se[T]))),u.push(z)}}return this.i=u.join("&")};function Dn(u,m){return m=String(m),u.j&&(m=m.toLowerCase()),m}function mr(u,m){m&&!u.j&&(Ft(u),u.i=null,u.g.forEach(function(v,T){var z=T.toLowerCase();T!=z&&(Gn(this,T),Ii(this,z,v))},u)),u.j=m}function wd(u,m){const v=new _s;if(d.Image){const T=new Image;T.onload=P(un,v,"TestLoadImage: loaded",!0,m,T),T.onerror=P(un,v,"TestLoadImage: error",!1,m,T),T.onabort=P(un,v,"TestLoadImage: abort",!1,m,T),T.ontimeout=P(un,v,"TestLoadImage: timeout",!1,m,T),d.setTimeout(function(){T.ontimeout&&T.ontimeout()},1e4),T.src=u}else m(!1)}function Bu(u,m){const v=new _s,T=new AbortController,z=setTimeout(()=>{T.abort(),un(v,"TestPingServer: timeout",!1,m)},1e4);fetch(u,{signal:T.signal}).then(H=>{clearTimeout(z),H.ok?un(v,"TestPingServer: ok",!0,m):un(v,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(z),un(v,"TestPingServer: error",!1,m)})}function un(u,m,v,T,z){try{z&&(z.onload=null,z.onerror=null,z.onabort=null,z.ontimeout=null),T(v)}catch{}}function Ed(){this.g=new el}function $u(u,m,v){const T=v||"";try{vi(u,function(z,H){let se=z;y(z)&&(se=Ya(z)),m.push(T+H+"="+encodeURIComponent(se))})}catch(z){throw m.push(T+"type="+encodeURIComponent("_badmap")),z}}function Ur(u){this.l=u.Ub||null,this.j=u.eb||!1}x(Ur,ys),Ur.prototype.g=function(){return new As(this.l,this.j)},Ur.prototype.i=function(u){return function(){return u}}({});function As(u,m){It.call(this),this.D=u,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}x(As,It),n=As.prototype,n.open=function(u,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=m,this.readyState=1,Yn(this)},n.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const m={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(m.body=u),(this.D||d).fetch(new Request(this.A,m)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Jn(this)),this.readyState=0},n.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Yn(this)),this.g&&(this.readyState=3,Yn(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;qu(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function qu(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}n.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var m=u.value?u.value:new Uint8Array(0);(m=this.v.decode(m,{stream:!u.done}))&&(this.response=this.responseText+=m)}u.done?Jn(this):Yn(this),this.readyState==3&&qu(this)}},n.Ra=function(u){this.g&&(this.response=this.responseText=u,Jn(this))},n.Qa=function(u){this.g&&(this.response=u,Jn(this))},n.ga=function(){this.g&&Jn(this)};function Jn(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Yn(u)}n.setRequestHeader=function(u,m){this.u.append(u,m)},n.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],m=this.h.entries();for(var v=m.next();!v.done;)v=v.value,u.push(v[0]+": "+v[1]),v=m.next();return u.join(`\r
`)};function Yn(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(As.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function jr(u){let m="";return ae(u,function(v,T){m+=T,m+=":",m+=v,m+=`\r
`}),m}function Si(u,m,v){e:{for(T in v){var T=!1;break e}T=!0}T||(v=jr(v),typeof u=="string"?v!=null&&encodeURIComponent(String(v)):Ye(u,m,v))}function st(u){It.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}x(st,It);var Td=/^https?$/i,cl=["POST","PUT"];n=st.prototype,n.Ha=function(u){this.J=u},n.ea=function(u,m,v,T){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);m=m?m.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Kn.g(),this.v=this.o?vo(this.o):vo(Kn),this.g.onreadystatechange=S(this.Ea,this);try{this.B=!0,this.g.open(m,String(u),!0),this.B=!1}catch(H){Cs(this,H);return}if(u=v||"",v=new Map(this.headers),T)if(Object.getPrototypeOf(T)===Object.prototype)for(var z in T)v.set(z,T[z]);else if(typeof T.keys=="function"&&typeof T.get=="function")for(const H of T.keys())v.set(H,T.get(H));else throw Error("Unknown input type for opt_headers: "+String(T));T=Array.from(v.keys()).find(H=>H.toLowerCase()=="content-type"),z=d.FormData&&u instanceof d.FormData,!(0<=Array.prototype.indexOf.call(cl,m,void 0))||T||z||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[H,se]of v)this.g.setRequestHeader(H,se);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{xo(this),this.u=!0,this.g.send(u),this.u=!1}catch(H){Cs(this,H)}};function Cs(u,m){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=m,u.m=5,ko(u),Rn(u)}function ko(u){u.A||(u.A=!0,St(u,"complete"),St(u,"error"))}n.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,St(this,"complete"),St(this,"abort"),Rn(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Rn(this,!0)),st.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?hl(this):this.bb())},n.bb=function(){hl(this)};function hl(u){if(u.h&&typeof c<"u"&&(!u.v[1]||cn(u)!=4||u.Z()!=2)){if(u.u&&cn(u)==4)Ga(u.Ea,0,u);else if(St(u,"readystatechange"),cn(u)==4){u.h=!1;try{const se=u.Z();e:switch(se){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var v;if(!(v=m)){var T;if(T=se===0){var z=String(u.D).match(Ss)[1]||null;!z&&d.self&&d.self.location&&(z=d.self.location.protocol.slice(0,-1)),T=!Td.test(z?z.toLowerCase():"")}v=T}if(v)St(u,"complete"),St(u,"success");else{u.m=6;try{var H=2<cn(u)?u.g.statusText:""}catch{H=""}u.l=H+" ["+u.Z()+"]",ko(u)}}finally{Rn(u)}}}}function Rn(u,m){if(u.g){xo(u);const v=u.g,T=u.v[0]?()=>{}:null;u.g=null,u.v=null,m||St(u,"ready");try{v.onreadystatechange=T}catch{}}}function xo(u){u.I&&(d.clearTimeout(u.I),u.I=null)}n.isActive=function(){return!!this.g};function cn(u){return u.g?u.g.readyState:0}n.Z=function(){try{return 2<cn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(u){if(this.g){var m=this.g.responseText;return u&&m.indexOf(u)==0&&(m=m.substring(u.length)),Za(m)}};function dl(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function bo(u){const m={};u=(u.g&&2<=cn(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let T=0;T<u.length;T++){if(Q(u[T]))continue;var v=L(u[T]);const z=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const H=m[z]||[];m[z]=H,H.push(v)}C(m,function(T){return T.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function gr(u,m,v){return v&&v.internalChannelParams&&v.internalChannelParams[u]||m}function fl(u){this.Aa=0,this.i=[],this.j=new _s,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=gr("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=gr("baseRetryDelayMs",5e3,u),this.cb=gr("retryDelaySeedMs",1e4,u),this.Wa=gr("forwardChannelMaxRetries",2,u),this.wa=gr("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new Is(u&&u.concurrentRequestLimit),this.Da=new Ed,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=fl.prototype,n.la=8,n.G=1,n.connect=function(u,m,v,T){ft(0),this.W=u,this.H=m||{},v&&T!==void 0&&(this.H.OSID=v,this.H.OAID=T),this.F=this.X,this.I=Qu(this,null,this.W),yr(this)};function Ut(u){if(No(u),u.G==3){var m=u.U++,v=Sn(u.I);if(Ye(v,"SID",u.K),Ye(v,"RID",m),Ye(v,"TYPE","terminate"),zr(u,v),m=new Qn(u,u.j,m),m.L=2,m.v=Ei(Sn(v)),v=!1,d.navigator&&d.navigator.sendBeacon)try{v=d.navigator.sendBeacon(m.v.toString(),"")}catch{}!v&&d.Image&&(new Image().src=m.v,v=!0),v||(m.g=Gu(m.j,null),m.g.ea(m.v)),m.F=Date.now(),et(m)}Ku(u)}function Zn(u){u.g&&(pl(u),u.g.cancel(),u.g=null)}function No(u){Zn(u),u.u&&(d.clearTimeout(u.u),u.u=null),Lo(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&d.clearTimeout(u.s),u.s=null)}function yr(u){if(!In(u.h)&&!u.s){u.s=!0;var m=u.Ga;He||he(),ie||(He(),ie=!0),we.add(m,u),u.B=0}}function Id(u,m){return Lu(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=m.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=Hn(S(u.Ga,u,m),Wu(u,u.B)),u.B++,!0)}n.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const z=new Qn(this,this.j,u);let H=this.o;if(this.S&&(H?(H=I(H),O(H,this.S)):H=this.S),this.m!==null||this.O||(z.H=H,H=null),this.P)e:{for(var m=0,v=0;v<this.i.length;v++){t:{var T=this.i[v];if("__data__"in T.map&&(T=T.map.__data__,typeof T=="string")){T=T.length;break t}T=void 0}if(T===void 0)break;if(m+=T,4096<m){m=v;break e}if(m===4096||v===this.i.length-1){m=v+1;break e}}m=1e3}else m=1e3;m=Ri(this,z,m),v=Sn(this.I),Ye(v,"RID",u),Ye(v,"CVER",22),this.D&&Ye(v,"X-HTTP-Session-Id",this.D),zr(this,v),H&&(this.O?m="headers="+encodeURIComponent(String(jr(H)))+"&"+m:this.m&&Si(v,this.m,H)),ll(this.h,z),this.Ua&&Ye(v,"TYPE","init"),this.P?(Ye(v,"$req",m),Ye(v,"SID","null"),z.T=!0,Ro(z,v,null)):Ro(z,v,m),this.G=2}}else this.G==3&&(u?Oo(this,u):this.i.length==0||In(this.h)||Oo(this))};function Oo(u,m){var v;m?v=m.l:v=u.U++;const T=Sn(u.I);Ye(T,"SID",u.K),Ye(T,"RID",v),Ye(T,"AID",u.T),zr(u,T),u.m&&u.o&&Si(T,u.m,u.o),v=new Qn(u,u.j,v,u.B+1),u.m===null&&(v.H=u.o),m&&(u.i=m.D.concat(u.i)),m=Ri(u,v,1e3),v.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),ll(u.h,v),Ro(v,T,m)}function zr(u,m){u.H&&ae(u.H,function(v,T){Ye(m,T,v)}),u.l&&vi({},function(v,T){Ye(m,T,v)})}function Ri(u,m,v){v=Math.min(u.i.length,v);var T=u.l?S(u.l.Na,u.l,u):null;e:{var z=u.i;let H=-1;for(;;){const se=["count="+v];H==-1?0<v?(H=z[0].g,se.push("ofs="+H)):H=0:se.push("ofs="+H);let Je=!0;for(let Rt=0;Rt<v;Rt++){let ze=z[Rt].g;const Nt=z[Rt].map;if(ze-=H,0>ze)H=Math.max(0,z[Rt].g-100),Je=!1;else try{$u(Nt,se,"req"+ze+"_")}catch{T&&T(Nt)}}if(Je){T=se.join("&");break e}}}return u=u.i.splice(0,v),m.D=u,T}function Ps(u){if(!u.g&&!u.u){u.Y=1;var m=u.Fa;He||he(),ie||(He(),ie=!0),we.add(m,u),u.v=0}}function Do(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=Hn(S(u.Fa,u),Wu(u,u.v)),u.v++,!0)}n.Fa=function(){if(this.u=null,Hu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=Hn(S(this.ab,this),u)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ft(10),Zn(this),Hu(this))};function pl(u){u.A!=null&&(d.clearTimeout(u.A),u.A=null)}function Hu(u){u.g=new Qn(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var m=Sn(u.qa);Ye(m,"RID","rpc"),Ye(m,"SID",u.K),Ye(m,"AID",u.T),Ye(m,"CI",u.F?"0":"1"),!u.F&&u.ja&&Ye(m,"TO",u.ja),Ye(m,"TYPE","xmlhttp"),zr(u,m),u.m&&u.o&&Si(m,u.m,u.o),u.L&&(u.g.I=u.L);var v=u.g;u=u.ia,v.L=1,v.v=Ei(Sn(m)),v.m=null,v.P=!0,ol(v,u)}n.Za=function(){this.C!=null&&(this.C=null,Zn(this),Do(this),ft(19))};function Lo(u){u.C!=null&&(d.clearTimeout(u.C),u.C=null)}function Vo(u,m){var v=null;if(u.g==m){Lo(u),pl(u),u.g=null;var T=2}else if(tn(u.h,m))v=m.D,Vu(u.h,m),T=1;else return;if(u.G!=0){if(m.o)if(T==1){v=m.m?m.m.length:0,m=Date.now()-m.F;var z=u.B;T=vs(),St(T,new Eo(T,v)),yr(u)}else Ps(u);else if(z=m.s,z==3||z==0&&0<m.X||!(T==1&&Id(u,m)||T==2&&Do(u)))switch(v&&0<v.length&&(m=u.h,m.i=m.i.concat(v)),z){case 1:Br(u,5);break;case 4:Br(u,10);break;case 3:Br(u,6);break;default:Br(u,2)}}}function Wu(u,m){let v=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(v*=2),v*m}function Br(u,m){if(u.j.info("Error code "+m),m==2){var v=S(u.fb,u),T=u.Xa;const z=!T;T=new Fr(T||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||Rs(T,"https"),Ei(T),z?wd(T.toString(),v):Bu(T.toString(),v)}else ft(2);u.G=0,u.l&&u.l.sa(m),Ku(u),No(u)}n.fb=function(u){u?(this.j.info("Successfully pinged google.com"),ft(2)):(this.j.info("Failed to ping google.com"),ft(1))};function Ku(u){if(u.G=0,u.ka=[],u.l){const m=Mu(u.h);(m.length!=0||u.i.length!=0)&&(b(u.ka,m),b(u.ka,u.i),u.h.i.length=0,V(u.i),u.i.length=0),u.l.ra()}}function Qu(u,m,v){var T=v instanceof Fr?Sn(v):new Fr(v);if(T.g!="")m&&(T.g=m+"."+T.g),_i(T,T.s);else{var z=d.location;T=z.protocol,m=m?m+"."+z.hostname:z.hostname,z=+z.port;var H=new Fr(null);T&&Rs(H,T),m&&(H.g=m),z&&_i(H,z),v&&(H.l=v),T=H}return v=u.D,m=u.ya,v&&m&&Ye(T,v,m),Ye(T,"VER",u.la),zr(u,T),T}function Gu(u,m,v){if(m&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return m=u.Ca&&!u.pa?new st(new Ur({eb:v})):new st(u.pa),m.Ha(u.J),m}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function ml(){}n=ml.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Mo(){}Mo.prototype.g=function(u,m){return new nn(u,m)};function nn(u,m){It.call(this),this.g=new fl(m),this.l=u,this.h=m&&m.messageUrlParams||null,u=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(u?u["X-WebChannel-Content-Type"]=m.messageContentType:u={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.va&&(u?u["X-WebChannel-Client-Profile"]=m.va:u={"X-WebChannel-Client-Profile":m.va}),this.g.S=u,(u=m&&m.Sb)&&!Q(u)&&(this.g.m=u),this.v=m&&m.supportsCrossDomainXhr||!1,this.u=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!Q(m)&&(this.g.D=m,u=this.h,u!==null&&m in u&&(u=this.h,m in u&&delete u[m])),this.j=new vr(this)}x(nn,It),nn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},nn.prototype.close=function(){Ut(this.g)},nn.prototype.o=function(u){var m=this.g;if(typeof u=="string"){var v={};v.__data__=u,u=v}else this.u&&(v={},v.__data__=Ya(u),u=v);m.i.push(new Du(m.Ya++,u)),m.G==3&&yr(m)},nn.prototype.N=function(){this.g.l=null,delete this.j,Ut(this.g),delete this.g,nn.aa.N.call(this)};function Xu(u){dr.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var m=u.__sm__;if(m){e:{for(const v in m){u=v;break e}u=void 0}(this.i=u)&&(u=this.i,m=m!==null&&u in m?m[u]:void 0),this.data=m}else this.data=u}x(Xu,dr);function Ju(){wo.call(this),this.status=1}x(Ju,wo);function vr(u){this.g=u}x(vr,ml),vr.prototype.ua=function(){St(this.g,"a")},vr.prototype.ta=function(u){St(this.g,new Xu(u))},vr.prototype.sa=function(u){St(this.g,new Ju)},vr.prototype.ra=function(){St(this.g,"b")},Mo.prototype.createWebChannel=Mo.prototype.g,nn.prototype.send=nn.prototype.o,nn.prototype.open=nn.prototype.m,nn.prototype.close=nn.prototype.close,Mw=function(){return new Mo},Vw=function(){return vs()},Lw=fr,Rp={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Io.NO_ERROR=0,Io.TIMEOUT=8,Io.HTTP_ERROR=6,rh=Io,xu.COMPLETE="complete",Dw=xu,_o.EventType=Nn,Nn.OPEN="a",Nn.CLOSE="b",Nn.ERROR="c",Nn.MESSAGE="d",It.prototype.listen=It.prototype.K,zl=_o,st.prototype.listenOnce=st.prototype.L,st.prototype.getLastError=st.prototype.Ka,st.prototype.getLastErrorCode=st.prototype.Ba,st.prototype.getStatus=st.prototype.Z,st.prototype.getResponseJson=st.prototype.Oa,st.prototype.getResponseText=st.prototype.oa,st.prototype.send=st.prototype.ea,st.prototype.setWithCredentials=st.prototype.Ha,Ow=st}).apply(typeof Kc<"u"?Kc:typeof self<"u"?self:typeof window<"u"?window:{});const s_="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Jt.UNAUTHENTICATED=new Jt(null),Jt.GOOGLE_CREDENTIALS=new Jt("google-credentials-uid"),Jt.FIRST_PARTY=new Jt("first-party-uid"),Jt.MOCK_USER=new Jt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Fa="11.0.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oo=new lm("@firebase/firestore");function sa(){return oo.logLevel}function de(n,...e){if(oo.logLevel<=Le.DEBUG){const t=e.map(Rm);oo.debug(`Firestore (${Fa}): ${n}`,...t)}}function hi(n,...e){if(oo.logLevel<=Le.ERROR){const t=e.map(Rm);oo.error(`Firestore (${Fa}): ${n}`,...t)}}function ka(n,...e){if(oo.logLevel<=Le.WARN){const t=e.map(Rm);oo.warn(`Firestore (${Fa}): ${n}`,...t)}}function Rm(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Re(n="Unexpected state"){const e=`FIRESTORE (${Fa}) INTERNAL ASSERTION FAILED: `+n;throw hi(e),new Error(e)}function Xe(n,e){n||Re()}function Pe(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class fe extends fi{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oi{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fw{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class FC{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Jt.UNAUTHENTICATED))}shutdown(){}}class UC{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class jC{constructor(e){this.t=e,this.currentUser=Jt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Xe(this.o===void 0);let i=this.i;const o=p=>this.i!==i?(i=this.i,t(p)):Promise.resolve();let l=new oi;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new oi,e.enqueueRetryable(()=>o(this.currentUser))};const c=()=>{const p=l;e.enqueueRetryable(async()=>{await p.promise,await o(this.currentUser)})},d=p=>{de("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit(p=>d(p)),setTimeout(()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?d(p):(de("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new oi)}},0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(i=>this.i!==e?(de("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Xe(typeof i.accessToken=="string"),new Fw(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Xe(e===null||typeof e=="string"),new Jt(e)}}class zC{constructor(e,t,i){this.l=e,this.h=t,this.P=i,this.type="FirstParty",this.user=Jt.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class BC{constructor(e,t,i){this.l=e,this.h=t,this.P=i}getToken(){return Promise.resolve(new zC(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(Jt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class $C{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class qC{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){Xe(this.o===void 0);const i=l=>{l.error!=null&&de("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.R;return this.R=l.token,de("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable(()=>i(l))};const o=l=>{de("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(l=>o(l)),setTimeout(()=>{if(!this.appCheck){const l=this.A.getImmediate({optional:!0});l?o(l):de("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Xe(typeof t.token=="string"),this.R=t.token,new $C(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HC(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uw{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let i="";for(;i.length<20;){const o=HC(40);for(let l=0;l<o.length;++l)i.length<20&&o[l]<t&&(i+=e.charAt(o[l]%e.length))}return i}}function Ue(n,e){return n<e?-1:n>e?1:0}function xa(n,e,t){return n.length===e.length&&n.every((i,o)=>t(i,e[o]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kt{static now(){return kt.fromMillis(Date.now())}static fromDate(e){return kt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*t));return new kt(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new fe(X.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new fe(X.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new fe(X.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new fe(X.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ue(this.nanoseconds,e.nanoseconds):Ue(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ce{static fromTimestamp(e){return new Ce(e)}static min(){return new Ce(new kt(0,0))}static max(){return new Ce(new kt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eu{constructor(e,t,i){t===void 0?t=0:t>e.length&&Re(),i===void 0?i=e.length-t:i>e.length-t&&Re(),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return eu.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof eu?e.forEach(i=>{t.push(i)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let o=0;o<i;o++){const l=e.get(o),c=t.get(o);if(l<c)return-1;if(l>c)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class it extends eu{construct(e,t,i){return new it(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new fe(X.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter(o=>o.length>0))}return new it(t)}static emptyPath(){return new it([])}}const WC=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class $t extends eu{construct(e,t,i){return new $t(e,t,i)}static isValidIdentifier(e){return WC.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),$t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new $t(["__name__"])}static fromServerFormat(e){const t=[];let i="",o=0;const l=()=>{if(i.length===0)throw new fe(X.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let c=!1;for(;o<e.length;){const d=e[o];if(d==="\\"){if(o+1===e.length)throw new fe(X.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[o+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new fe(X.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=p,o+=2}else d==="`"?(c=!c,o++):d!=="."||c?(i+=d,o++):(l(),o++)}if(l(),c)throw new fe(X.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new $t(t)}static emptyPath(){return new $t([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _e{constructor(e){this.path=e}static fromPath(e){return new _e(it.fromString(e))}static fromName(e){return new _e(it.fromString(e).popFirst(5))}static empty(){return new _e(it.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&it.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return it.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new _e(new it(e.slice()))}}function KC(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,o=Ce.fromTimestamp(i===1e9?new kt(t+1,0):new kt(t,i));return new os(o,_e.empty(),e)}function QC(n){return new os(n.readTime,n.key,-1)}class os{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new os(Ce.min(),_e.empty(),-1)}static max(){return new os(Ce.max(),_e.empty(),-1)}}function GC(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=_e.comparator(n.documentKey,e.documentKey),t!==0?t:Ue(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XC="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class JC{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ua(n){if(n.code!==X.FAILED_PRECONDITION||n.message!==XC)throw n;de("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Re(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new J((i,o)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(i,o)},this.catchCallback=l=>{this.wrapFailure(t,l).next(i,o)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof J?t:J.resolve(t)}catch(t){return J.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):J.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):J.reject(t)}static resolve(e){return new J((t,i)=>{t(e)})}static reject(e){return new J((t,i)=>{i(e)})}static waitFor(e){return new J((t,i)=>{let o=0,l=0,c=!1;e.forEach(d=>{++o,d.next(()=>{++l,c&&l===o&&t()},p=>i(p))}),c=!0,l===o&&t()})}static or(e){let t=J.resolve(!1);for(const i of e)t=t.next(o=>o?J.resolve(o):i());return t}static forEach(e,t){const i=[];return e.forEach((o,l)=>{i.push(t.call(this,o,l))}),this.waitFor(i)}static mapArray(e,t){return new J((i,o)=>{const l=e.length,c=new Array(l);let d=0;for(let p=0;p<l;p++){const y=p;t(e[y]).next(_=>{c[y]=_,++d,d===l&&i(c)},_=>o(_))}})}static doWhile(e,t){return new J((i,o)=>{const l=()=>{e()===!0?t().next(()=>{l()},o):i()};l()})}}function YC(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function ja(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hh{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ie(i),this.se=i=>t.writeSequenceNumber(i))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Hh.oe=-1;function Wh(n){return n==null}function Ih(n){return n===0&&1/n==-1/0}function ZC(n){return typeof n=="number"&&Number.isInteger(n)&&!Ih(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eP(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=o_(e)),e=tP(n.get(t),e);return o_(e)}function tP(n,e){let t=e;const i=n.length;for(let o=0;o<i;o++){const l=n.charAt(o);switch(l){case"\0":t+="";break;case"":t+="";break;default:t+=l}}return t}function o_(n){return n+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a_(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function ds(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function jw(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ct{constructor(e,t){this.comparator=e,this.root=t||Bt.EMPTY}insert(e,t){return new ct(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Bt.BLACK,null,null))}remove(e){return new ct(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Bt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const o=this.comparator(e,i.key);if(o===0)return t+i.left.size;o<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,i)=>(e(t,i),!1))}toString(){const e=[];return this.inorderTraversal((t,i)=>(e.push(`${t}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Qc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Qc(this.root,e,this.comparator,!1)}getReverseIterator(){return new Qc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Qc(this.root,e,this.comparator,!0)}}class Qc{constructor(e,t,i,o){this.isReverse=o,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?i(e.key,t):1,t&&o&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Bt{constructor(e,t,i,o,l){this.key=e,this.value=t,this.color=i??Bt.RED,this.left=o??Bt.EMPTY,this.right=l??Bt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,o,l){return new Bt(e??this.key,t??this.value,i??this.color,o??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let o=this;const l=i(e,o.key);return o=l<0?o.copy(null,null,null,o.left.insert(e,t,i),null):l===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,i)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Bt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return Bt.EMPTY;i=o.right.min(),o=o.copy(i.key,i.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Bt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Bt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Re();const e=this.left.check();if(e!==this.right.check())throw Re();return e+(this.isRed()?0:1)}}Bt.EMPTY=null,Bt.RED=!0,Bt.BLACK=!1;Bt.EMPTY=new class{constructor(){this.size=0}get key(){throw Re()}get value(){throw Re()}get color(){throw Re()}get left(){throw Re()}get right(){throw Re()}copy(e,t,i,o,l){return this}insert(e,t,i){return new Bt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xt{constructor(e){this.comparator=e,this.data=new ct(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,i)=>(e(t),!1))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const o=i.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new l_(this.data.getIterator())}getIteratorFrom(e){return new l_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(i=>{t=t.add(i)}),t}isEqual(e){if(!(e instanceof xt)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=i.getNext().key;if(this.comparator(o,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new xt(this.comparator);return t.data=e,t}}class l_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xn{constructor(e){this.fields=e,e.sort($t.comparator)}static empty(){return new xn([])}unionWith(e){let t=new xt($t.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new xn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return xa(this.fields,e.fields,(t,i)=>t.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zw extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(o){try{return atob(o)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new zw("Invalid base64 string: "+l):l}}(e);return new qt(t)}static fromUint8Array(e){const t=function(o){let l="";for(let c=0;c<o.length;++c)l+=String.fromCharCode(o[c]);return l}(e);return new qt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const i=new Uint8Array(t.length);for(let o=0;o<t.length;o++)i[o]=t.charCodeAt(o);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ue(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}qt.EMPTY_BYTE_STRING=new qt("");const nP=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function as(n){if(Xe(!!n),typeof n=="string"){let e=0;const t=nP.exec(n);if(Xe(!!t),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:mt(n.seconds),nanos:mt(n.nanos)}}function mt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function ls(n){return typeof n=="string"?qt.fromBase64String(n):qt.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Am(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function Kh(n){const e=n.mapValue.fields.__previous_value__;return Am(e)?Kh(e):e}function tu(n){const e=as(n.mapValue.fields.__local_write_time__.timestampValue);return new kt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rP{constructor(e,t,i,o,l,c,d,p,y){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=o,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=d,this.longPollingOptions=p,this.useFetchStreams=y}}class nu{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new nu("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof nu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gc={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function us(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Am(n)?4:sP(n)?9007199254740991:iP(n)?10:11:Re()}function Nr(n,e){if(n===e)return!0;const t=us(n);if(t!==us(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return tu(n).isEqual(tu(e));case 3:return function(o,l){if(typeof o.timestampValue=="string"&&typeof l.timestampValue=="string"&&o.timestampValue.length===l.timestampValue.length)return o.timestampValue===l.timestampValue;const c=as(o.timestampValue),d=as(l.timestampValue);return c.seconds===d.seconds&&c.nanos===d.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(o,l){return ls(o.bytesValue).isEqual(ls(l.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(o,l){return mt(o.geoPointValue.latitude)===mt(l.geoPointValue.latitude)&&mt(o.geoPointValue.longitude)===mt(l.geoPointValue.longitude)}(n,e);case 2:return function(o,l){if("integerValue"in o&&"integerValue"in l)return mt(o.integerValue)===mt(l.integerValue);if("doubleValue"in o&&"doubleValue"in l){const c=mt(o.doubleValue),d=mt(l.doubleValue);return c===d?Ih(c)===Ih(d):isNaN(c)&&isNaN(d)}return!1}(n,e);case 9:return xa(n.arrayValue.values||[],e.arrayValue.values||[],Nr);case 10:case 11:return function(o,l){const c=o.mapValue.fields||{},d=l.mapValue.fields||{};if(a_(c)!==a_(d))return!1;for(const p in c)if(c.hasOwnProperty(p)&&(d[p]===void 0||!Nr(c[p],d[p])))return!1;return!0}(n,e);default:return Re()}}function ru(n,e){return(n.values||[]).find(t=>Nr(t,e))!==void 0}function ba(n,e){if(n===e)return 0;const t=us(n),i=us(e);if(t!==i)return Ue(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ue(n.booleanValue,e.booleanValue);case 2:return function(l,c){const d=mt(l.integerValue||l.doubleValue),p=mt(c.integerValue||c.doubleValue);return d<p?-1:d>p?1:d===p?0:isNaN(d)?isNaN(p)?0:-1:1}(n,e);case 3:return u_(n.timestampValue,e.timestampValue);case 4:return u_(tu(n),tu(e));case 5:return Ue(n.stringValue,e.stringValue);case 6:return function(l,c){const d=ls(l),p=ls(c);return d.compareTo(p)}(n.bytesValue,e.bytesValue);case 7:return function(l,c){const d=l.split("/"),p=c.split("/");for(let y=0;y<d.length&&y<p.length;y++){const _=Ue(d[y],p[y]);if(_!==0)return _}return Ue(d.length,p.length)}(n.referenceValue,e.referenceValue);case 8:return function(l,c){const d=Ue(mt(l.latitude),mt(c.latitude));return d!==0?d:Ue(mt(l.longitude),mt(c.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return c_(n.arrayValue,e.arrayValue);case 10:return function(l,c){var d,p,y,_;const E=l.fields||{},S=c.fields||{},P=(d=E.value)===null||d===void 0?void 0:d.arrayValue,x=(p=S.value)===null||p===void 0?void 0:p.arrayValue,V=Ue(((y=P==null?void 0:P.values)===null||y===void 0?void 0:y.length)||0,((_=x==null?void 0:x.values)===null||_===void 0?void 0:_.length)||0);return V!==0?V:c_(P,x)}(n.mapValue,e.mapValue);case 11:return function(l,c){if(l===Gc.mapValue&&c===Gc.mapValue)return 0;if(l===Gc.mapValue)return 1;if(c===Gc.mapValue)return-1;const d=l.fields||{},p=Object.keys(d),y=c.fields||{},_=Object.keys(y);p.sort(),_.sort();for(let E=0;E<p.length&&E<_.length;++E){const S=Ue(p[E],_[E]);if(S!==0)return S;const P=ba(d[p[E]],y[_[E]]);if(P!==0)return P}return Ue(p.length,_.length)}(n.mapValue,e.mapValue);default:throw Re()}}function u_(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Ue(n,e);const t=as(n),i=as(e),o=Ue(t.seconds,i.seconds);return o!==0?o:Ue(t.nanos,i.nanos)}function c_(n,e){const t=n.values||[],i=e.values||[];for(let o=0;o<t.length&&o<i.length;++o){const l=ba(t[o],i[o]);if(l)return l}return Ue(t.length,i.length)}function Na(n){return Ap(n)}function Ap(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const i=as(t);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return ls(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return _e.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let i="[",o=!0;for(const l of t.values||[])o?o=!1:i+=",",i+=Ap(l);return i+"]"}(n.arrayValue):"mapValue"in n?function(t){const i=Object.keys(t.fields||{}).sort();let o="{",l=!0;for(const c of i)l?l=!1:o+=",",o+=`${c}:${Ap(t.fields[c])}`;return o+"}"}(n.mapValue):Re()}function ih(n){switch(us(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Kh(n);return e?16+ih(e):16;case 5:return 2*n.stringValue.length;case 6:return ls(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((o,l)=>o+ih(l),0)}(n.arrayValue);case 10:case 11:return function(i){let o=0;return ds(i.fields,(l,c)=>{o+=l.length+ih(c)}),o}(n.mapValue);default:throw Re()}}function h_(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Cp(n){return!!n&&"integerValue"in n}function Cm(n){return!!n&&"arrayValue"in n}function d_(n){return!!n&&"nullValue"in n}function f_(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function sh(n){return!!n&&"mapValue"in n}function iP(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function Kl(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return ds(n.mapValue.fields,(t,i)=>e.mapValue.fields[t]=Kl(i)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Kl(n.arrayValue.values[t]);return e}return Object.assign({},n)}function sP(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wn{constructor(e){this.value=e}static empty(){return new wn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!sh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Kl(t)}setAll(e){let t=$t.emptyPath(),i={},o=[];e.forEach((c,d)=>{if(!t.isImmediateParentOf(d)){const p=this.getFieldsMap(t);this.applyChanges(p,i,o),i={},o=[],t=d.popLast()}c?i[d.lastSegment()]=Kl(c):o.push(d.lastSegment())});const l=this.getFieldsMap(t);this.applyChanges(l,i,o)}delete(e){const t=this.field(e.popLast());sh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Nr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let o=t.mapValue.fields[e.get(i)];sh(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,i){ds(t,(o,l)=>e[o]=l);for(const o of i)delete e[o]}clone(){return new wn(Kl(this.value))}}function Bw(n){const e=[];return ds(n.fields,(t,i)=>{const o=new $t([t]);if(sh(i)){const l=Bw(i.mapValue).fields;if(l.length===0)e.push(o);else for(const c of l)e.push(o.child(c))}else e.push(o)}),new xn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yt{constructor(e,t,i,o,l,c,d){this.key=e,this.documentType=t,this.version=i,this.readTime=o,this.createTime=l,this.data=c,this.documentState=d}static newInvalidDocument(e){return new Yt(e,0,Ce.min(),Ce.min(),Ce.min(),wn.empty(),0)}static newFoundDocument(e,t,i,o){return new Yt(e,1,t,Ce.min(),i,o,0)}static newNoDocument(e,t){return new Yt(e,2,t,Ce.min(),Ce.min(),wn.empty(),0)}static newUnknownDocument(e,t){return new Yt(e,3,t,Ce.min(),Ce.min(),wn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ce.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=wn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=wn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ce.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Yt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Yt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sh{constructor(e,t){this.position=e,this.inclusive=t}}function p_(n,e,t){let i=0;for(let o=0;o<n.position.length;o++){const l=e[o],c=n.position[o];if(l.field.isKeyField()?i=_e.comparator(_e.fromName(c.referenceValue),t.key):i=ba(c,t.data.field(l.field)),l.dir==="desc"&&(i*=-1),i!==0)break}return i}function m_(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Nr(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rh{constructor(e,t="asc"){this.field=e,this.dir=t}}function oP(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $w{}class wt extends $w{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new lP(e,t,i):t==="array-contains"?new hP(e,i):t==="in"?new dP(e,i):t==="not-in"?new fP(e,i):t==="array-contains-any"?new pP(e,i):new wt(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new uP(e,i):new cP(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(ba(t,this.value)):t!==null&&us(this.value)===us(t)&&this.matchesComparison(ba(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Re()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class cr extends $w{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new cr(e,t)}matches(e){return qw(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function qw(n){return n.op==="and"}function Hw(n){return aP(n)&&qw(n)}function aP(n){for(const e of n.filters)if(e instanceof cr)return!1;return!0}function Pp(n){if(n instanceof wt)return n.field.canonicalString()+n.op.toString()+Na(n.value);if(Hw(n))return n.filters.map(e=>Pp(e)).join(",");{const e=n.filters.map(t=>Pp(t)).join(",");return`${n.op}(${e})`}}function Ww(n,e){return n instanceof wt?function(i,o){return o instanceof wt&&i.op===o.op&&i.field.isEqual(o.field)&&Nr(i.value,o.value)}(n,e):n instanceof cr?function(i,o){return o instanceof cr&&i.op===o.op&&i.filters.length===o.filters.length?i.filters.reduce((l,c,d)=>l&&Ww(c,o.filters[d]),!0):!1}(n,e):void Re()}function Kw(n){return n instanceof wt?function(t){return`${t.field.canonicalString()} ${t.op} ${Na(t.value)}`}(n):n instanceof cr?function(t){return t.op.toString()+" {"+t.getFilters().map(Kw).join(" ,")+"}"}(n):"Filter"}class lP extends wt{constructor(e,t,i){super(e,t,i),this.key=_e.fromName(i.referenceValue)}matches(e){const t=_e.comparator(e.key,this.key);return this.matchesComparison(t)}}class uP extends wt{constructor(e,t){super(e,"in",t),this.keys=Qw("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class cP extends wt{constructor(e,t){super(e,"not-in",t),this.keys=Qw("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Qw(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(i=>_e.fromName(i.referenceValue))}class hP extends wt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Cm(t)&&ru(t.arrayValue,this.value)}}class dP extends wt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&ru(this.value.arrayValue,t)}}class fP extends wt{constructor(e,t){super(e,"not-in",t)}matches(e){if(ru(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!ru(this.value.arrayValue,t)}}class pP extends wt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Cm(t)||!t.arrayValue.values)&&t.arrayValue.values.some(i=>ru(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mP{constructor(e,t=null,i=[],o=[],l=null,c=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=o,this.limit=l,this.startAt=c,this.endAt=d,this.ue=null}}function g_(n,e=null,t=[],i=[],o=null,l=null,c=null){return new mP(n,e,t,i,o,l,c)}function Pm(n){const e=Pe(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(i=>Pp(i)).join(","),t+="|ob:",t+=e.orderBy.map(i=>function(l){return l.field.canonicalString()+l.dir}(i)).join(","),Wh(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(i=>Na(i)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(i=>Na(i)).join(",")),e.ue=t}return e.ue}function km(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!oP(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!Ww(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!m_(n.startAt,e.startAt)&&m_(n.endAt,e.endAt)}function kp(n){return _e.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wu{constructor(e,t=null,i=[],o=[],l=null,c="F",d=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=o,this.limit=l,this.limitType=c,this.startAt=d,this.endAt=p,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function gP(n,e,t,i,o,l,c,d){return new wu(n,e,t,i,o,l,c,d)}function xm(n){return new wu(n)}function y_(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function Gw(n){return n.collectionGroup!==null}function Ql(n){const e=Pe(n);if(e.ce===null){e.ce=[];const t=new Set;for(const l of e.explicitOrderBy)e.ce.push(l),t.add(l.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let d=new xt($t.comparator);return c.filters.forEach(p=>{p.getFlattenedFilters().forEach(y=>{y.isInequality()&&(d=d.add(y.field))})}),d})(e).forEach(l=>{t.has(l.canonicalString())||l.isKeyField()||e.ce.push(new Rh(l,i))}),t.has($t.keyField().canonicalString())||e.ce.push(new Rh($t.keyField(),i))}return e.ce}function kr(n){const e=Pe(n);return e.le||(e.le=yP(e,Ql(n))),e.le}function yP(n,e){if(n.limitType==="F")return g_(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(o=>{const l=o.dir==="desc"?"asc":"desc";return new Rh(o.field,l)});const t=n.endAt?new Sh(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new Sh(n.startAt.position,n.startAt.inclusive):null;return g_(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}function xp(n,e){const t=n.filters.concat([e]);return new wu(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function bp(n,e,t){return new wu(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Qh(n,e){return km(kr(n),kr(e))&&n.limitType===e.limitType}function Xw(n){return`${Pm(kr(n))}|lt:${n.limitType}`}function oa(n){return`Query(target=${function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map(o=>Kw(o)).join(", ")}]`),Wh(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map(o=>function(c){return`${c.field.canonicalString()} (${c.dir})`}(o)).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map(o=>Na(o)).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map(o=>Na(o)).join(",")),`Target(${i})`}(kr(n))}; limitType=${n.limitType})`}function Gh(n,e){return e.isFoundDocument()&&function(i,o){const l=o.key.path;return i.collectionGroup!==null?o.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(l):_e.isDocumentKey(i.path)?i.path.isEqual(l):i.path.isImmediateParentOf(l)}(n,e)&&function(i,o){for(const l of Ql(i))if(!l.field.isKeyField()&&o.data.field(l.field)===null)return!1;return!0}(n,e)&&function(i,o){for(const l of i.filters)if(!l.matches(o))return!1;return!0}(n,e)&&function(i,o){return!(i.startAt&&!function(c,d,p){const y=p_(c,d,p);return c.inclusive?y<=0:y<0}(i.startAt,Ql(i),o)||i.endAt&&!function(c,d,p){const y=p_(c,d,p);return c.inclusive?y>=0:y>0}(i.endAt,Ql(i),o))}(n,e)}function vP(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Jw(n){return(e,t)=>{let i=!1;for(const o of Ql(n)){const l=_P(o,e,t);if(l!==0)return l;i=i||o.field.isKeyField()}return 0}}function _P(n,e,t){const i=n.field.isKeyField()?_e.comparator(e.key,t.key):function(l,c,d){const p=c.data.field(l),y=d.data.field(l);return p!==null&&y!==null?ba(p,y):Re()}(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return Re()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class co{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[o,l]of i)if(this.equalsFn(o,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),o=this.inner[i];if(o===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let l=0;l<o.length;l++)if(this.equalsFn(o[l][0],e))return void(o[l]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return i.length===1?delete this.inner[t]:i.splice(o,1),this.innerSize--,!0;return!1}forEach(e){ds(this.inner,(t,i)=>{for(const[o,l]of i)e(o,l)})}isEmpty(){return jw(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wP=new ct(_e.comparator);function di(){return wP}const Yw=new ct(_e.comparator);function Bl(...n){let e=Yw;for(const t of n)e=e.insert(t.key,t);return e}function Zw(n){let e=Yw;return n.forEach((t,i)=>e=e.insert(t,i.overlayedDocument)),e}function qs(){return Gl()}function eE(){return Gl()}function Gl(){return new co(n=>n.toString(),(n,e)=>n.isEqual(e))}const EP=new ct(_e.comparator),TP=new xt(_e.comparator);function Ve(...n){let e=TP;for(const t of n)e=e.add(t);return e}const IP=new xt(Ue);function SP(){return IP}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bm(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ih(e)?"-0":e}}function tE(n){return{integerValue:""+n}}function RP(n,e){return ZC(e)?tE(e):bm(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xh{constructor(){this._=void 0}}function AP(n,e,t){return n instanceof Ah?function(o,l){const c={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return l&&Am(l)&&(l=Kh(l)),l&&(c.fields.__previous_value__=l),{mapValue:c}}(t,e):n instanceof iu?rE(n,e):n instanceof su?iE(n,e):function(o,l){const c=nE(o,l),d=v_(c)+v_(o.Pe);return Cp(c)&&Cp(o.Pe)?tE(d):bm(o.serializer,d)}(n,e)}function CP(n,e,t){return n instanceof iu?rE(n,e):n instanceof su?iE(n,e):t}function nE(n,e){return n instanceof Ch?function(i){return Cp(i)||function(l){return!!l&&"doubleValue"in l}(i)}(e)?e:{integerValue:0}:null}class Ah extends Xh{}class iu extends Xh{constructor(e){super(),this.elements=e}}function rE(n,e){const t=sE(e);for(const i of n.elements)t.some(o=>Nr(o,i))||t.push(i);return{arrayValue:{values:t}}}class su extends Xh{constructor(e){super(),this.elements=e}}function iE(n,e){let t=sE(e);for(const i of n.elements)t=t.filter(o=>!Nr(o,i));return{arrayValue:{values:t}}}class Ch extends Xh{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function v_(n){return mt(n.integerValue||n.doubleValue)}function sE(n){return Cm(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function PP(n,e){return n.field.isEqual(e.field)&&function(i,o){return i instanceof iu&&o instanceof iu||i instanceof su&&o instanceof su?xa(i.elements,o.elements,Nr):i instanceof Ch&&o instanceof Ch?Nr(i.Pe,o.Pe):i instanceof Ah&&o instanceof Ah}(n.transform,e.transform)}class kP{constructor(e,t){this.version=e,this.transformResults=t}}class qn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new qn}static exists(e){return new qn(void 0,e)}static updateTime(e){return new qn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function oh(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}let Jh=class{};function oE(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Nm(n.key,qn.none()):new Eu(n.key,n.data,qn.none());{const t=n.data,i=wn.empty();let o=new xt($t.comparator);for(let l of e.fields)if(!o.has(l)){let c=t.field(l);c===null&&l.length>1&&(l=l.popLast(),c=t.field(l)),c===null?i.delete(l):i.set(l,c),o=o.add(l)}return new fs(n.key,i,new xn(o.toArray()),qn.none())}}function xP(n,e,t){n instanceof Eu?function(o,l,c){const d=o.value.clone(),p=w_(o.fieldTransforms,l,c.transformResults);d.setAll(p),l.convertToFoundDocument(c.version,d).setHasCommittedMutations()}(n,e,t):n instanceof fs?function(o,l,c){if(!oh(o.precondition,l))return void l.convertToUnknownDocument(c.version);const d=w_(o.fieldTransforms,l,c.transformResults),p=l.data;p.setAll(aE(o)),p.setAll(d),l.convertToFoundDocument(c.version,p).setHasCommittedMutations()}(n,e,t):function(o,l,c){l.convertToNoDocument(c.version).setHasCommittedMutations()}(0,e,t)}function Xl(n,e,t,i){return n instanceof Eu?function(l,c,d,p){if(!oh(l.precondition,c))return d;const y=l.value.clone(),_=E_(l.fieldTransforms,p,c);return y.setAll(_),c.convertToFoundDocument(c.version,y).setHasLocalMutations(),null}(n,e,t,i):n instanceof fs?function(l,c,d,p){if(!oh(l.precondition,c))return d;const y=E_(l.fieldTransforms,p,c),_=c.data;return _.setAll(aE(l)),_.setAll(y),c.convertToFoundDocument(c.version,_).setHasLocalMutations(),d===null?null:d.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map(E=>E.field))}(n,e,t,i):function(l,c,d){return oh(l.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):d}(n,e,t)}function bP(n,e){let t=null;for(const i of n.fieldTransforms){const o=e.data.field(i.field),l=nE(i.transform,o||null);l!=null&&(t===null&&(t=wn.empty()),t.set(i.field,l))}return t||null}function __(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(i,o){return i===void 0&&o===void 0||!(!i||!o)&&xa(i,o,(l,c)=>PP(l,c))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Eu extends Jh{constructor(e,t,i,o=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class fs extends Jh{constructor(e,t,i,o,l=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=o,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function aE(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}}),e}function w_(n,e,t){const i=new Map;Xe(n.length===t.length);for(let o=0;o<t.length;o++){const l=n[o],c=l.transform,d=e.data.field(l.field);i.set(l.field,CP(c,d,t[o]))}return i}function E_(n,e,t){const i=new Map;for(const o of n){const l=o.transform,c=t.data.field(o.field);i.set(o.field,AP(l,c,e))}return i}class Nm extends Jh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class NP extends Jh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OP{constructor(e,t,i,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=o}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const l=this.mutations[o];l.key.isEqual(e.key)&&xP(l,e,i[o])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=Xl(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=Xl(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=eE();return this.mutations.forEach(o=>{const l=e.get(o.key),c=l.overlayedDocument;let d=this.applyToLocalView(c,l.mutatedFields);d=t.has(o.key)?null:d;const p=oE(c,d);p!==null&&i.set(o.key,p),c.isValidDocument()||c.convertToNoDocument(Ce.min())}),i}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Ve())}isEqual(e){return this.batchId===e.batchId&&xa(this.mutations,e.mutations,(t,i)=>__(t,i))&&xa(this.baseMutations,e.baseMutations,(t,i)=>__(t,i))}}class Om{constructor(e,t,i,o){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=o}static from(e,t,i){Xe(e.mutations.length===i.length);let o=function(){return EP}();const l=e.mutations;for(let c=0;c<l.length;c++)o=o.insert(l[c].key,i[c].version);return new Om(e,t,i,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DP{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LP{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _t,Be;function VP(n){switch(n){default:return Re();case X.CANCELLED:case X.UNKNOWN:case X.DEADLINE_EXCEEDED:case X.RESOURCE_EXHAUSTED:case X.INTERNAL:case X.UNAVAILABLE:case X.UNAUTHENTICATED:return!1;case X.INVALID_ARGUMENT:case X.NOT_FOUND:case X.ALREADY_EXISTS:case X.PERMISSION_DENIED:case X.FAILED_PRECONDITION:case X.ABORTED:case X.OUT_OF_RANGE:case X.UNIMPLEMENTED:case X.DATA_LOSS:return!0}}function lE(n){if(n===void 0)return hi("GRPC error has no .code"),X.UNKNOWN;switch(n){case _t.OK:return X.OK;case _t.CANCELLED:return X.CANCELLED;case _t.UNKNOWN:return X.UNKNOWN;case _t.DEADLINE_EXCEEDED:return X.DEADLINE_EXCEEDED;case _t.RESOURCE_EXHAUSTED:return X.RESOURCE_EXHAUSTED;case _t.INTERNAL:return X.INTERNAL;case _t.UNAVAILABLE:return X.UNAVAILABLE;case _t.UNAUTHENTICATED:return X.UNAUTHENTICATED;case _t.INVALID_ARGUMENT:return X.INVALID_ARGUMENT;case _t.NOT_FOUND:return X.NOT_FOUND;case _t.ALREADY_EXISTS:return X.ALREADY_EXISTS;case _t.PERMISSION_DENIED:return X.PERMISSION_DENIED;case _t.FAILED_PRECONDITION:return X.FAILED_PRECONDITION;case _t.ABORTED:return X.ABORTED;case _t.OUT_OF_RANGE:return X.OUT_OF_RANGE;case _t.UNIMPLEMENTED:return X.UNIMPLEMENTED;case _t.DATA_LOSS:return X.DATA_LOSS;default:return Re()}}(Be=_t||(_t={}))[Be.OK=0]="OK",Be[Be.CANCELLED=1]="CANCELLED",Be[Be.UNKNOWN=2]="UNKNOWN",Be[Be.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Be[Be.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Be[Be.NOT_FOUND=5]="NOT_FOUND",Be[Be.ALREADY_EXISTS=6]="ALREADY_EXISTS",Be[Be.PERMISSION_DENIED=7]="PERMISSION_DENIED",Be[Be.UNAUTHENTICATED=16]="UNAUTHENTICATED",Be[Be.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Be[Be.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Be[Be.ABORTED=10]="ABORTED",Be[Be.OUT_OF_RANGE=11]="OUT_OF_RANGE",Be[Be.UNIMPLEMENTED=12]="UNIMPLEMENTED",Be[Be.INTERNAL=13]="INTERNAL",Be[Be.UNAVAILABLE=14]="UNAVAILABLE",Be[Be.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MP(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FP=new to([4294967295,4294967295],0);function T_(n){const e=MP().encode(n),t=new Nw;return t.update(e),new Uint8Array(t.digest())}function I_(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),o=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new to([t,i],0),new to([o,l],0)]}class Dm{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new $l(`Invalid padding: ${t}`);if(i<0)throw new $l(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new $l(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new $l(`Invalid padding when bitmap length is 0: ${t}`);this.Te=8*e.length-t,this.Ie=to.fromNumber(this.Te)}Ee(e,t,i){let o=e.add(t.multiply(to.fromNumber(i)));return o.compare(FP)===1&&(o=new to([o.getBits(0),o.getBits(1)],0)),o.modulo(this.Ie).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Te===0)return!1;const t=T_(e),[i,o]=I_(t);for(let l=0;l<this.hashCount;l++){const c=this.Ee(i,o,l);if(!this.de(c))return!1}return!0}static create(e,t,i){const o=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),c=new Dm(l,o,t);return i.forEach(d=>c.insert(d)),c}insert(e){if(this.Te===0)return;const t=T_(e),[i,o]=I_(t);for(let l=0;l<this.hashCount;l++){const c=this.Ee(i,o,l);this.Ae(c)}}Ae(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class $l extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yh{constructor(e,t,i,o,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=o,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const o=new Map;return o.set(e,Tu.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new Yh(Ce.min(),o,new ct(Ue),di(),Ve())}}class Tu{constructor(e,t,i,o,l){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=o,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new Tu(i,t,Ve(),Ve(),Ve())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ah{constructor(e,t,i,o){this.Re=e,this.removedTargetIds=t,this.key=i,this.Ve=o}}class uE{constructor(e,t){this.targetId=e,this.me=t}}class cE{constructor(e,t,i=qt.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=o}}class S_{constructor(){this.fe=0,this.ge=R_(),this.pe=qt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Ve(),t=Ve(),i=Ve();return this.ge.forEach((o,l)=>{switch(l){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:i=i.add(o);break;default:Re()}}),new Tu(this.pe,this.ye,e,t,i)}Ce(){this.we=!1,this.ge=R_()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Xe(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class UP{constructor(e){this.Le=e,this.Be=new Map,this.ke=di(),this.qe=Xc(),this.Qe=Xc(),this.Ke=new ct(Ue)}$e(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.Ue(t,e.Ve):this.We(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.We(t,e.key,e.Ve)}Ge(e){this.forEachTarget(e,t=>{const i=this.ze(t);switch(e.state){case 0:this.je(t)&&i.De(e.resumeToken);break;case 1:i.Oe(),i.Se||i.Ce(),i.De(e.resumeToken);break;case 2:i.Oe(),i.Se||this.removeTarget(t);break;case 3:this.je(t)&&(i.Ne(),i.De(e.resumeToken));break;case 4:this.je(t)&&(this.He(t),i.De(e.resumeToken));break;default:Re()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((i,o)=>{this.je(o)&&t(o)})}Je(e){const t=e.targetId,i=e.me.count,o=this.Ye(t);if(o){const l=o.target;if(kp(l))if(i===0){const c=new _e(l.path);this.We(t,c,Yt.newNoDocument(c,Ce.min()))}else Xe(i===1);else{const c=this.Ze(t);if(c!==i){const d=this.Xe(e),p=d?this.et(d,e,c):1;if(p!==0){this.He(t);const y=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(t,y)}}}}}Xe(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:o=0},hashCount:l=0}=t;let c,d;try{c=ls(i).toUint8Array()}catch(p){if(p instanceof zw)return ka("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{d=new Dm(c,o,l)}catch(p){return ka(p instanceof $l?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return d.Te===0?null:d}et(e,t,i){return t.me.count===i-this.rt(e,t.targetId)?0:2}rt(e,t){const i=this.Le.getRemoteKeysForTarget(t);let o=0;return i.forEach(l=>{const c=this.Le.nt(),d=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;e.mightContain(d)||(this.We(t,l,null),o++)}),o}it(e){const t=new Map;this.Be.forEach((l,c)=>{const d=this.Ye(c);if(d){if(l.current&&kp(d.target)){const p=new _e(d.target.path);this.st(p).has(c)||this.ot(c,p)||this.We(c,p,Yt.newNoDocument(p,e))}l.be&&(t.set(c,l.ve()),l.Ce())}});let i=Ve();this.Qe.forEach((l,c)=>{let d=!0;c.forEachWhile(p=>{const y=this.Ye(p);return!y||y.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)}),d&&(i=i.add(l))}),this.ke.forEach((l,c)=>c.setReadTime(e));const o=new Yh(e,t,this.Ke,this.ke,i);return this.ke=di(),this.qe=Xc(),this.Qe=Xc(),this.Ke=new ct(Ue),o}Ue(e,t){if(!this.je(e))return;const i=this.ot(e,t.key)?2:0;this.ze(e).Fe(t.key,i),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e)),this.Qe=this.Qe.insert(t.key,this._t(t.key).add(e))}We(e,t,i){if(!this.je(e))return;const o=this.ze(e);this.ot(e,t)?o.Fe(t,1):o.Me(t),this.Qe=this.Qe.insert(t,this._t(t).delete(e)),this.Qe=this.Qe.insert(t,this._t(t).add(e)),i&&(this.ke=this.ke.insert(t,i))}removeTarget(e){this.Be.delete(e)}Ze(e){const t=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.ze(e).xe()}ze(e){let t=this.Be.get(e);return t||(t=new S_,this.Be.set(e,t)),t}_t(e){let t=this.Qe.get(e);return t||(t=new xt(Ue),this.Qe=this.Qe.insert(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new xt(Ue),this.qe=this.qe.insert(e,t)),t}je(e){const t=this.Ye(e)!==null;return t||de("WatchChangeAggregator","Detected inactive target",e),t}Ye(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ut(e)}He(e){this.Be.set(e,new S_),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.We(e,t,null)})}ot(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function Xc(){return new ct(_e.comparator)}function R_(){return new ct(_e.comparator)}const jP={asc:"ASCENDING",desc:"DESCENDING"},zP={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},BP={and:"AND",or:"OR"};class $P{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Np(n,e){return n.useProto3Json||Wh(e)?e:{value:e}}function Ph(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function hE(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function qP(n,e){return Ph(n,e.toTimestamp())}function xr(n){return Xe(!!n),Ce.fromTimestamp(function(t){const i=as(t);return new kt(i.seconds,i.nanos)}(n))}function Lm(n,e){return Op(n,e).canonicalString()}function Op(n,e){const t=function(o){return new it(["projects",o.projectId,"databases",o.database])}(n).child("documents");return e===void 0?t:t.child(e)}function dE(n){const e=it.fromString(n);return Xe(yE(e)),e}function Dp(n,e){return Lm(n.databaseId,e.path)}function rp(n,e){const t=dE(e);if(t.get(1)!==n.databaseId.projectId)throw new fe(X.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new fe(X.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new _e(pE(t))}function fE(n,e){return Lm(n.databaseId,e)}function HP(n){const e=dE(n);return e.length===4?it.emptyPath():pE(e)}function Lp(n){return new it(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function pE(n){return Xe(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function A_(n,e,t){return{name:Dp(n,e),fields:t.value.mapValue.fields}}function WP(n,e){let t;if("targetChange"in e){e.targetChange;const i=function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:Re()}(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],l=function(y,_){return y.useProto3Json?(Xe(_===void 0||typeof _=="string"),qt.fromBase64String(_||"")):(Xe(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array),qt.fromUint8Array(_||new Uint8Array))}(n,e.targetChange.resumeToken),c=e.targetChange.cause,d=c&&function(y){const _=y.code===void 0?X.UNKNOWN:lE(y.code);return new fe(_,y.message||"")}(c);t=new cE(i,o,l,d||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const o=rp(n,i.document.name),l=xr(i.document.updateTime),c=i.document.createTime?xr(i.document.createTime):Ce.min(),d=new wn({mapValue:{fields:i.document.fields}}),p=Yt.newFoundDocument(o,l,c,d),y=i.targetIds||[],_=i.removedTargetIds||[];t=new ah(y,_,p.key,p)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const o=rp(n,i.document),l=i.readTime?xr(i.readTime):Ce.min(),c=Yt.newNoDocument(o,l),d=i.removedTargetIds||[];t=new ah([],d,c.key,c)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const o=rp(n,i.document),l=i.removedTargetIds||[];t=new ah([],l,o,null)}else{if(!("filter"in e))return Re();{e.filter;const i=e.filter;i.targetId;const{count:o=0,unchangedNames:l}=i,c=new LP(o,l),d=i.targetId;t=new uE(d,c)}}return t}function KP(n,e){let t;if(e instanceof Eu)t={update:A_(n,e.key,e.value)};else if(e instanceof Nm)t={delete:Dp(n,e.key)};else if(e instanceof fs)t={update:A_(n,e.key,e.data),updateMask:nk(e.fieldMask)};else{if(!(e instanceof NP))return Re();t={verify:Dp(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(i=>function(l,c){const d=c.transform;if(d instanceof Ah)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof iu)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof su)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof Ch)return{fieldPath:c.field.canonicalString(),increment:d.Pe};throw Re()}(0,i))),e.precondition.isNone||(t.currentDocument=function(o,l){return l.updateTime!==void 0?{updateTime:qP(o,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Re()}(n,e.precondition)),t}function QP(n,e){return n&&n.length>0?(Xe(e!==void 0),n.map(t=>function(o,l){let c=o.updateTime?xr(o.updateTime):xr(l);return c.isEqual(Ce.min())&&(c=xr(l)),new kP(c,o.transformResults||[])}(t,e))):[]}function GP(n,e){return{documents:[fE(n,e.path)]}}function XP(n,e){const t={structuredQuery:{}},i=e.path;let o;e.collectionGroup!==null?(o=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=fE(n,o);const l=function(y){if(y.length!==0)return gE(cr.create(y,"and"))}(e.filters);l&&(t.structuredQuery.where=l);const c=function(y){if(y.length!==0)return y.map(_=>function(S){return{field:aa(S.field),direction:ZP(S.dir)}}(_))}(e.orderBy);c&&(t.structuredQuery.orderBy=c);const d=Np(n,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=function(y){return{before:y.inclusive,values:y.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(y){return{before:!y.inclusive,values:y.position}}(e.endAt)),{ct:t,parent:o}}function JP(n){let e=HP(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let o=null;if(i>0){Xe(i===1);const _=t.from[0];_.allDescendants?o=_.collectionId:e=e.child(_.collectionId)}let l=[];t.where&&(l=function(E){const S=mE(E);return S instanceof cr&&Hw(S)?S.getFilters():[S]}(t.where));let c=[];t.orderBy&&(c=function(E){return E.map(S=>function(x){return new Rh(la(x.field),function(b){switch(b){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(x.direction))}(S))}(t.orderBy));let d=null;t.limit&&(d=function(E){let S;return S=typeof E=="object"?E.value:E,Wh(S)?null:S}(t.limit));let p=null;t.startAt&&(p=function(E){const S=!!E.before,P=E.values||[];return new Sh(P,S)}(t.startAt));let y=null;return t.endAt&&(y=function(E){const S=!E.before,P=E.values||[];return new Sh(P,S)}(t.endAt)),gP(e,o,c,l,d,"F",p,y)}function YP(n,e){const t=function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Re()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function mE(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=la(t.unaryFilter.field);return wt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const o=la(t.unaryFilter.field);return wt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=la(t.unaryFilter.field);return wt.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=la(t.unaryFilter.field);return wt.create(c,"!=",{nullValue:"NULL_VALUE"});default:return Re()}}(n):n.fieldFilter!==void 0?function(t){return wt.create(la(t.fieldFilter.field),function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Re()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return cr.create(t.compositeFilter.filters.map(i=>mE(i)),function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Re()}}(t.compositeFilter.op))}(n):Re()}function ZP(n){return jP[n]}function ek(n){return zP[n]}function tk(n){return BP[n]}function aa(n){return{fieldPath:n.canonicalString()}}function la(n){return $t.fromServerFormat(n.fieldPath)}function gE(n){return n instanceof wt?function(t){if(t.op==="=="){if(f_(t.value))return{unaryFilter:{field:aa(t.field),op:"IS_NAN"}};if(d_(t.value))return{unaryFilter:{field:aa(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(f_(t.value))return{unaryFilter:{field:aa(t.field),op:"IS_NOT_NAN"}};if(d_(t.value))return{unaryFilter:{field:aa(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:aa(t.field),op:ek(t.op),value:t.value}}}(n):n instanceof cr?function(t){const i=t.getFilters().map(o=>gE(o));return i.length===1?i[0]:{compositeFilter:{op:tk(t.op),filters:i}}}(n):Re()}function nk(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function yE(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class es{constructor(e,t,i,o,l=Ce.min(),c=Ce.min(),d=qt.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=o,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=d,this.expectedCount=p}withSequenceNumber(e){return new es(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new es(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new es(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new es(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rk{constructor(e){this.ht=e}}function ik(n){const e=JP({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?bp(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sk{constructor(){this.ln=new ok}addToCollectionParentIndex(e,t){return this.ln.add(t),J.resolve()}getCollectionParents(e,t){return J.resolve(this.ln.getEntries(t))}addFieldIndex(e,t){return J.resolve()}deleteFieldIndex(e,t){return J.resolve()}deleteAllFieldIndexes(e){return J.resolve()}createTargetIndexes(e,t){return J.resolve()}getDocumentsMatchingTarget(e,t){return J.resolve(null)}getIndexType(e,t){return J.resolve(0)}getFieldIndexes(e,t){return J.resolve([])}getNextCollectionGroupToUpdate(e){return J.resolve(null)}getMinOffset(e,t){return J.resolve(os.min())}getMinOffsetFromCollectionGroup(e,t){return J.resolve(os.min())}updateCollectionGroup(e,t,i){return J.resolve()}updateIndexEntries(e,t){return J.resolve()}}class ok{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t]||new xt(it.comparator),l=!o.has(i);return this.index[t]=o.add(i),l}has(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t];return o&&o.has(i)}getEntries(e){return(this.index[e]||new xt(it.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class _n{static withCacheSize(e){return new _n(e,_n.DEFAULT_COLLECTION_PERCENTILE,_n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */_n.DEFAULT_COLLECTION_PERCENTILE=10,_n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,_n.DEFAULT=new _n(41943040,_n.DEFAULT_COLLECTION_PERCENTILE,_n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),_n.DISABLED=new _n(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oa{constructor(e){this.kn=e}next(){return this.kn+=2,this.kn}static qn(){return new Oa(0)}static Qn(){return new Oa(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P_([n,e],[t,i]){const o=Ue(n,t);return o===0?Ue(e,i):o}class ak{constructor(e){this.Gn=e,this.buffer=new xt(P_),this.zn=0}jn(){return++this.zn}Hn(e){const t=[e,this.jn()];if(this.buffer.size<this.Gn)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();P_(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class lk{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Yn(6e4)}stop(){this.Jn&&(this.Jn.cancel(),this.Jn=null)}get started(){return this.Jn!==null}Yn(e){de("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){ja(t)?de("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",t):await Ua(t)}await this.Yn(3e5)})}}class uk{constructor(e,t){this.Zn=e,this.params=t}calculateTargetCount(e,t){return this.Zn.Xn(e).next(i=>Math.floor(t/100*i))}nthSequenceNumber(e,t){if(t===0)return J.resolve(Hh.oe);const i=new ak(t);return this.Zn.forEachTarget(e,o=>i.Hn(o.sequenceNumber)).next(()=>this.Zn.er(e,o=>i.Hn(o))).next(()=>i.maxValue)}removeTargets(e,t,i){return this.Zn.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.Zn.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(de("LruGarbageCollector","Garbage collection skipped; disabled"),J.resolve(C_)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(de("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),C_):this.tr(e,t))}getCacheSize(e){return this.Zn.getCacheSize(e)}tr(e,t){let i,o,l,c,d,p,y;const _=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(E=>(E>this.params.maximumSequenceNumbersToCollect?(de("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),o=this.params.maximumSequenceNumbersToCollect):o=E,c=Date.now(),this.nthSequenceNumber(e,o))).next(E=>(i=E,d=Date.now(),this.removeTargets(e,i,t))).next(E=>(l=E,p=Date.now(),this.removeOrphanedDocuments(e,i))).next(E=>(y=Date.now(),sa()<=Le.DEBUG&&de("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-_}ms
	Determined least recently used ${o} in `+(d-c)+`ms
	Removed ${l} targets in `+(p-d)+`ms
	Removed ${E} documents in `+(y-p)+`ms
Total Duration: ${y-_}ms`),J.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:l,documentsRemoved:E})))}}function ck(n,e){return new uk(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hk{constructor(){this.changes=new co(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Yt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?J.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dk{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fk{constructor(e,t,i,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=o}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next(o=>(i=o,this.remoteDocumentCache.getEntry(e,t))).next(o=>(i!==null&&Xl(i.mutation,o,xn.empty(),kt.now()),o))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.getLocalViewOfDocuments(e,i,Ve()).next(()=>i))}getLocalViewOfDocuments(e,t,i=Ve()){const o=qs();return this.populateOverlays(e,o,t).next(()=>this.computeViews(e,t,o,i).next(l=>{let c=Bl();return l.forEach((d,p)=>{c=c.insert(d,p.overlayedDocument)}),c}))}getOverlayedDocuments(e,t){const i=qs();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,Ve()))}populateOverlays(e,t,i){const o=[];return i.forEach(l=>{t.has(l)||o.push(l)}),this.documentOverlayCache.getOverlays(e,o).next(l=>{l.forEach((c,d)=>{t.set(c,d)})})}computeViews(e,t,i,o){let l=di();const c=Gl(),d=function(){return Gl()}();return t.forEach((p,y)=>{const _=i.get(y.key);o.has(y.key)&&(_===void 0||_.mutation instanceof fs)?l=l.insert(y.key,y):_!==void 0?(c.set(y.key,_.mutation.getFieldMask()),Xl(_.mutation,y,_.mutation.getFieldMask(),kt.now())):c.set(y.key,xn.empty())}),this.recalculateAndSaveOverlays(e,l).next(p=>(p.forEach((y,_)=>c.set(y,_)),t.forEach((y,_)=>{var E;return d.set(y,new dk(_,(E=c.get(y))!==null&&E!==void 0?E:null))}),d))}recalculateAndSaveOverlays(e,t){const i=Gl();let o=new ct((c,d)=>c-d),l=Ve();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(c=>{for(const d of c)d.keys().forEach(p=>{const y=t.get(p);if(y===null)return;let _=i.get(p)||xn.empty();_=d.applyToLocalView(y,_),i.set(p,_);const E=(o.get(d.batchId)||Ve()).add(p);o=o.insert(d.batchId,E)})}).next(()=>{const c=[],d=o.getReverseIterator();for(;d.hasNext();){const p=d.getNext(),y=p.key,_=p.value,E=eE();_.forEach(S=>{if(!l.has(S)){const P=oE(t.get(S),i.get(S));P!==null&&E.set(S,P),l=l.add(S)}}),c.push(this.documentOverlayCache.saveOverlays(e,y,E))}return J.waitFor(c)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,t,i,o){return function(c){return _e.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Gw(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,o):this.getDocumentsMatchingCollectionQuery(e,t,i,o)}getNextDocuments(e,t,i,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,o).next(l=>{const c=o-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,o-l.size):J.resolve(qs());let d=-1,p=l;return c.next(y=>J.forEach(y,(_,E)=>(d<E.largestBatchId&&(d=E.largestBatchId),l.get(_)?J.resolve():this.remoteDocumentCache.getEntry(e,_).next(S=>{p=p.insert(_,S)}))).next(()=>this.populateOverlays(e,y,l)).next(()=>this.computeViews(e,p,y,Ve())).next(_=>({batchId:d,changes:Zw(_)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new _e(t)).next(i=>{let o=Bl();return i.isFoundDocument()&&(o=o.insert(i.key,i)),o})}getDocumentsMatchingCollectionGroupQuery(e,t,i,o){const l=t.collectionGroup;let c=Bl();return this.indexManager.getCollectionParents(e,l).next(d=>J.forEach(d,p=>{const y=function(E,S){return new wu(S,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)}(t,p.child(l));return this.getDocumentsMatchingCollectionQuery(e,y,i,o).next(_=>{_.forEach((E,S)=>{c=c.insert(E,S)})})}).next(()=>c))}getDocumentsMatchingCollectionQuery(e,t,i,o){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next(c=>(l=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,l,o))).next(c=>{l.forEach((p,y)=>{const _=y.getKey();c.get(_)===null&&(c=c.insert(_,Yt.newInvalidDocument(_)))});let d=Bl();return c.forEach((p,y)=>{const _=l.get(p);_!==void 0&&Xl(_.mutation,y,xn.empty(),kt.now()),Gh(t,y)&&(d=d.insert(p,y))}),d})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pk{constructor(e){this.serializer=e,this.Tr=new Map,this.Ir=new Map}getBundleMetadata(e,t){return J.resolve(this.Tr.get(t))}saveBundleMetadata(e,t){return this.Tr.set(t.id,function(o){return{id:o.id,version:o.version,createTime:xr(o.createTime)}}(t)),J.resolve()}getNamedQuery(e,t){return J.resolve(this.Ir.get(t))}saveNamedQuery(e,t){return this.Ir.set(t.name,function(o){return{name:o.name,query:ik(o.bundledQuery),readTime:xr(o.readTime)}}(t)),J.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mk{constructor(){this.overlays=new ct(_e.comparator),this.Er=new Map}getOverlay(e,t){return J.resolve(this.overlays.get(t))}getOverlays(e,t){const i=qs();return J.forEach(t,o=>this.getOverlay(e,o).next(l=>{l!==null&&i.set(o,l)})).next(()=>i)}saveOverlays(e,t,i){return i.forEach((o,l)=>{this.Tt(e,t,l)}),J.resolve()}removeOverlaysForBatchId(e,t,i){const o=this.Er.get(i);return o!==void 0&&(o.forEach(l=>this.overlays=this.overlays.remove(l)),this.Er.delete(i)),J.resolve()}getOverlaysForCollection(e,t,i){const o=qs(),l=t.length+1,c=new _e(t.child("")),d=this.overlays.getIteratorFrom(c);for(;d.hasNext();){const p=d.getNext().value,y=p.getKey();if(!t.isPrefixOf(y.path))break;y.path.length===l&&p.largestBatchId>i&&o.set(p.getKey(),p)}return J.resolve(o)}getOverlaysForCollectionGroup(e,t,i,o){let l=new ct((y,_)=>y-_);const c=this.overlays.getIterator();for(;c.hasNext();){const y=c.getNext().value;if(y.getKey().getCollectionGroup()===t&&y.largestBatchId>i){let _=l.get(y.largestBatchId);_===null&&(_=qs(),l=l.insert(y.largestBatchId,_)),_.set(y.getKey(),y)}}const d=qs(),p=l.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach((y,_)=>d.set(y,_)),!(d.size()>=o)););return J.resolve(d)}Tt(e,t,i){const o=this.overlays.get(i.key);if(o!==null){const c=this.Er.get(o.largestBatchId).delete(i.key);this.Er.set(o.largestBatchId,c)}this.overlays=this.overlays.insert(i.key,new DP(t,i));let l=this.Er.get(t);l===void 0&&(l=Ve(),this.Er.set(t,l)),this.Er.set(t,l.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gk{constructor(){this.sessionToken=qt.EMPTY_BYTE_STRING}getSessionToken(e){return J.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,J.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vm{constructor(){this.dr=new xt(Vt.Ar),this.Rr=new xt(Vt.Vr)}isEmpty(){return this.dr.isEmpty()}addReference(e,t){const i=new Vt(e,t);this.dr=this.dr.add(i),this.Rr=this.Rr.add(i)}mr(e,t){e.forEach(i=>this.addReference(i,t))}removeReference(e,t){this.gr(new Vt(e,t))}pr(e,t){e.forEach(i=>this.removeReference(i,t))}yr(e){const t=new _e(new it([])),i=new Vt(t,e),o=new Vt(t,e+1),l=[];return this.Rr.forEachInRange([i,o],c=>{this.gr(c),l.push(c.key)}),l}wr(){this.dr.forEach(e=>this.gr(e))}gr(e){this.dr=this.dr.delete(e),this.Rr=this.Rr.delete(e)}Sr(e){const t=new _e(new it([])),i=new Vt(t,e),o=new Vt(t,e+1);let l=Ve();return this.Rr.forEachInRange([i,o],c=>{l=l.add(c.key)}),l}containsKey(e){const t=new Vt(e,0),i=this.dr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class Vt{constructor(e,t){this.key=e,this.br=t}static Ar(e,t){return _e.comparator(e.key,t.key)||Ue(e.br,t.br)}static Vr(e,t){return Ue(e.br,t.br)||_e.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yk{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Dr=1,this.vr=new xt(Vt.Ar)}checkEmpty(e){return J.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,o){const l=this.Dr;this.Dr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new OP(l,t,i,o);this.mutationQueue.push(c);for(const d of o)this.vr=this.vr.add(new Vt(d.key,l)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return J.resolve(c)}lookupMutationBatch(e,t){return J.resolve(this.Cr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,o=this.Fr(i),l=o<0?0:o;return J.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return J.resolve(this.mutationQueue.length===0?-1:this.Dr-1)}getAllMutationBatches(e){return J.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new Vt(t,0),o=new Vt(t,Number.POSITIVE_INFINITY),l=[];return this.vr.forEachInRange([i,o],c=>{const d=this.Cr(c.br);l.push(d)}),J.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new xt(Ue);return t.forEach(o=>{const l=new Vt(o,0),c=new Vt(o,Number.POSITIVE_INFINITY);this.vr.forEachInRange([l,c],d=>{i=i.add(d.br)})}),J.resolve(this.Mr(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,o=i.length+1;let l=i;_e.isDocumentKey(l)||(l=l.child(""));const c=new Vt(new _e(l),0);let d=new xt(Ue);return this.vr.forEachWhile(p=>{const y=p.key.path;return!!i.isPrefixOf(y)&&(y.length===o&&(d=d.add(p.br)),!0)},c),J.resolve(this.Mr(d))}Mr(e){const t=[];return e.forEach(i=>{const o=this.Cr(i);o!==null&&t.push(o)}),t}removeMutationBatch(e,t){Xe(this.Or(t.batchId,"removed")===0),this.mutationQueue.shift();let i=this.vr;return J.forEach(t.mutations,o=>{const l=new Vt(o.key,t.batchId);return i=i.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.vr=i})}Ln(e){}containsKey(e,t){const i=new Vt(t,0),o=this.vr.firstAfterOrEqual(i);return J.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,J.resolve()}Or(e,t){return this.Fr(e)}Fr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Cr(e){const t=this.Fr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vk{constructor(e){this.Nr=e,this.docs=function(){return new ct(_e.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,o=this.docs.get(i),l=o?o.size:0,c=this.Nr(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return J.resolve(i?i.document.mutableCopy():Yt.newInvalidDocument(t))}getEntries(e,t){let i=di();return t.forEach(o=>{const l=this.docs.get(o);i=i.insert(o,l?l.document.mutableCopy():Yt.newInvalidDocument(o))}),J.resolve(i)}getDocumentsMatchingQuery(e,t,i,o){let l=di();const c=t.path,d=new _e(c.child("")),p=this.docs.getIteratorFrom(d);for(;p.hasNext();){const{key:y,value:{document:_}}=p.getNext();if(!c.isPrefixOf(y.path))break;y.path.length>c.length+1||GC(QC(_),i)<=0||(o.has(_.key)||Gh(t,_))&&(l=l.insert(_.key,_.mutableCopy()))}return J.resolve(l)}getAllFromCollectionGroup(e,t,i,o){Re()}Lr(e,t){return J.forEach(this.docs,i=>t(i))}newChangeBuffer(e){return new _k(this)}getSize(e){return J.resolve(this.size)}}class _k extends hk{constructor(e){super(),this.hr=e}applyChanges(e){const t=[];return this.changes.forEach((i,o)=>{o.isValidDocument()?t.push(this.hr.addEntry(e,o)):this.hr.removeEntry(i)}),J.waitFor(t)}getFromCache(e,t){return this.hr.getEntry(e,t)}getAllFromCache(e,t){return this.hr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wk{constructor(e){this.persistence=e,this.Br=new co(t=>Pm(t),km),this.lastRemoteSnapshotVersion=Ce.min(),this.highestTargetId=0,this.kr=0,this.qr=new Vm,this.targetCount=0,this.Qr=Oa.qn()}forEachTarget(e,t){return this.Br.forEach((i,o)=>t(o)),J.resolve()}getLastRemoteSnapshotVersion(e){return J.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return J.resolve(this.kr)}allocateTargetId(e){return this.highestTargetId=this.Qr.next(),J.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.kr&&(this.kr=t),J.resolve()}Un(e){this.Br.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Qr=new Oa(t),this.highestTargetId=t),e.sequenceNumber>this.kr&&(this.kr=e.sequenceNumber)}addTargetData(e,t){return this.Un(t),this.targetCount+=1,J.resolve()}updateTargetData(e,t){return this.Un(t),J.resolve()}removeTargetData(e,t){return this.Br.delete(t.target),this.qr.yr(t.targetId),this.targetCount-=1,J.resolve()}removeTargets(e,t,i){let o=0;const l=[];return this.Br.forEach((c,d)=>{d.sequenceNumber<=t&&i.get(d.targetId)===null&&(this.Br.delete(c),l.push(this.removeMatchingKeysForTargetId(e,d.targetId)),o++)}),J.waitFor(l).next(()=>o)}getTargetCount(e){return J.resolve(this.targetCount)}getTargetData(e,t){const i=this.Br.get(t)||null;return J.resolve(i)}addMatchingKeys(e,t,i){return this.qr.mr(t,i),J.resolve()}removeMatchingKeys(e,t,i){this.qr.pr(t,i);const o=this.persistence.referenceDelegate,l=[];return o&&t.forEach(c=>{l.push(o.markPotentiallyOrphaned(e,c))}),J.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.qr.yr(t),J.resolve()}getMatchingKeysForTargetId(e,t){const i=this.qr.Sr(t);return J.resolve(i)}containsKey(e,t){return J.resolve(this.qr.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vE{constructor(e,t){this.Kr={},this.overlays={},this.$r=new Hh(0),this.Ur=!1,this.Ur=!0,this.Wr=new gk,this.referenceDelegate=e(this),this.Gr=new wk(this),this.indexManager=new sk,this.remoteDocumentCache=function(o){return new vk(o)}(i=>this.referenceDelegate.zr(i)),this.serializer=new rk(t),this.jr=new pk(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Ur=!1,Promise.resolve()}get started(){return this.Ur}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new mk,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.Kr[e.toKey()];return i||(i=new yk(t,this.referenceDelegate),this.Kr[e.toKey()]=i),i}getGlobalsCache(){return this.Wr}getTargetCache(){return this.Gr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.jr}runTransaction(e,t,i){de("MemoryPersistence","Starting transaction:",e);const o=new Ek(this.$r.next());return this.referenceDelegate.Hr(),i(o).next(l=>this.referenceDelegate.Jr(o).next(()=>l)).toPromise().then(l=>(o.raiseOnCommittedEvent(),l))}Yr(e,t){return J.or(Object.values(this.Kr).map(i=>()=>i.containsKey(e,t)))}}class Ek extends JC{constructor(e){super(),this.currentSequenceNumber=e}}class Mm{constructor(e){this.persistence=e,this.Zr=new Vm,this.Xr=null}static ei(e){return new Mm(e)}get ti(){if(this.Xr)return this.Xr;throw Re()}addReference(e,t,i){return this.Zr.addReference(i,t),this.ti.delete(i.toString()),J.resolve()}removeReference(e,t,i){return this.Zr.removeReference(i,t),this.ti.add(i.toString()),J.resolve()}markPotentiallyOrphaned(e,t){return this.ti.add(t.toString()),J.resolve()}removeTarget(e,t){this.Zr.yr(t.targetId).forEach(o=>this.ti.add(o.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next(o=>{o.forEach(l=>this.ti.add(l.toString()))}).next(()=>i.removeTargetData(e,t))}Hr(){this.Xr=new Set}Jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return J.forEach(this.ti,i=>{const o=_e.fromPath(i);return this.ni(e,o).next(l=>{l||t.removeEntry(o,Ce.min())})}).next(()=>(this.Xr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ni(e,t).next(i=>{i?this.ti.delete(t.toString()):this.ti.add(t.toString())})}zr(e){return 0}ni(e,t){return J.or([()=>J.resolve(this.Zr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Yr(e,t)])}}class kh{constructor(e,t){this.persistence=e,this.ri=new co(i=>eP(i.path),(i,o)=>i.isEqual(o)),this.garbageCollector=ck(this,t)}static ei(e,t){return new kh(e,t)}Hr(){}Jr(e){return J.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}Xn(e){const t=this.nr(e);return this.persistence.getTargetCache().getTargetCount(e).next(i=>t.next(o=>i+o))}nr(e){let t=0;return this.er(e,i=>{t++}).next(()=>t)}er(e,t){return J.forEach(this.ri,(i,o)=>this.ir(e,i,o).next(l=>l?J.resolve():t(o)))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const o=this.persistence.getRemoteDocumentCache(),l=o.newChangeBuffer();return o.Lr(e,c=>this.ir(e,c,t).next(d=>{d||(i++,l.removeEntry(c,Ce.min()))})).next(()=>l.apply(e)).next(()=>i)}markPotentiallyOrphaned(e,t){return this.ri.set(t,e.currentSequenceNumber),J.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.ri.set(i,e.currentSequenceNumber),J.resolve()}removeReference(e,t,i){return this.ri.set(i,e.currentSequenceNumber),J.resolve()}updateLimboDocument(e,t){return this.ri.set(t,e.currentSequenceNumber),J.resolve()}zr(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=ih(e.data.value)),t}ir(e,t,i){return J.or([()=>this.persistence.Yr(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.ri.get(t);return J.resolve(o!==void 0&&o>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fm{constructor(e,t,i,o){this.targetId=e,this.fromCache=t,this.Wi=i,this.Gi=o}static zi(e,t){let i=Ve(),o=Ve();for(const l of t.docChanges)switch(l.type){case 0:i=i.add(l.doc.key);break;case 1:o=o.add(l.doc.key)}return new Fm(e,t.fromCache,i,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tk{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ik{constructor(){this.ji=!1,this.Hi=!1,this.Ji=100,this.Yi=function(){return YI()?8:YC(en())>0?6:4}()}initialize(e,t){this.Zi=e,this.indexManager=t,this.ji=!0}getDocumentsMatchingQuery(e,t,i,o){const l={result:null};return this.Xi(e,t).next(c=>{l.result=c}).next(()=>{if(!l.result)return this.es(e,t,o,i).next(c=>{l.result=c})}).next(()=>{if(l.result)return;const c=new Tk;return this.ts(e,t,c).next(d=>{if(l.result=d,this.Hi)return this.ns(e,t,c,d.size)})}).next(()=>l.result)}ns(e,t,i,o){return i.documentReadCount<this.Ji?(sa()<=Le.DEBUG&&de("QueryEngine","SDK will not create cache indexes for query:",oa(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Ji,"documents"),J.resolve()):(sa()<=Le.DEBUG&&de("QueryEngine","Query:",oa(t),"scans",i.documentReadCount,"local documents and returns",o,"documents as results."),i.documentReadCount>this.Yi*o?(sa()<=Le.DEBUG&&de("QueryEngine","The SDK decides to create cache indexes for query:",oa(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,kr(t))):J.resolve())}Xi(e,t){if(y_(t))return J.resolve(null);let i=kr(t);return this.indexManager.getIndexType(e,i).next(o=>o===0?null:(t.limit!==null&&o===1&&(t=bp(t,null,"F"),i=kr(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next(l=>{const c=Ve(...l);return this.Zi.getDocuments(e,c).next(d=>this.indexManager.getMinOffset(e,i).next(p=>{const y=this.rs(t,d);return this.ss(t,y,c,p.readTime)?this.Xi(e,bp(t,null,"F")):this.os(e,y,t,p)}))})))}es(e,t,i,o){return y_(t)||o.isEqual(Ce.min())?J.resolve(null):this.Zi.getDocuments(e,i).next(l=>{const c=this.rs(t,l);return this.ss(t,c,i,o)?J.resolve(null):(sa()<=Le.DEBUG&&de("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),oa(t)),this.os(e,c,t,KC(o,-1)).next(d=>d))})}rs(e,t){let i=new xt(Jw(e));return t.forEach((o,l)=>{Gh(e,l)&&(i=i.add(l))}),i}ss(e,t,i,o){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(o)>0)}ts(e,t,i){return sa()<=Le.DEBUG&&de("QueryEngine","Using full collection scan to execute query:",oa(t)),this.Zi.getDocumentsMatchingQuery(e,t,os.min(),i)}os(e,t,i,o){return this.Zi.getDocumentsMatchingQuery(e,i,o).next(l=>(t.forEach(c=>{l=l.insert(c.key,c)}),l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sk{constructor(e,t,i,o){this.persistence=e,this._s=t,this.serializer=o,this.us=new ct(Ue),this.cs=new co(l=>Pm(l),km),this.ls=new Map,this.hs=e.getRemoteDocumentCache(),this.Gr=e.getTargetCache(),this.jr=e.getBundleCache(),this.Ps(i)}Ps(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new fk(this.hs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.hs.setIndexManager(this.indexManager),this._s.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.us))}}function Rk(n,e,t,i){return new Sk(n,e,t,i)}async function _E(n,e){const t=Pe(n);return await t.persistence.runTransaction("Handle user change","readonly",i=>{let o;return t.mutationQueue.getAllMutationBatches(i).next(l=>(o=l,t.Ps(e),t.mutationQueue.getAllMutationBatches(i))).next(l=>{const c=[],d=[];let p=Ve();for(const y of o){c.push(y.batchId);for(const _ of y.mutations)p=p.add(_.key)}for(const y of l){d.push(y.batchId);for(const _ of y.mutations)p=p.add(_.key)}return t.localDocuments.getDocuments(i,p).next(y=>({Ts:y,removedBatchIds:c,addedBatchIds:d}))})})}function Ak(n,e){const t=Pe(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const o=e.batch.keys(),l=t.hs.newChangeBuffer({trackRemovals:!0});return function(d,p,y,_){const E=y.batch,S=E.keys();let P=J.resolve();return S.forEach(x=>{P=P.next(()=>_.getEntry(p,x)).next(V=>{const b=y.docVersions.get(x);Xe(b!==null),V.version.compareTo(b)<0&&(E.applyToRemoteDocument(V,y),V.isValidDocument()&&(V.setReadTime(y.commitVersion),_.addEntry(V)))})}),P.next(()=>d.mutationQueue.removeMutationBatch(p,E))}(t,i,e,l).next(()=>l.apply(i)).next(()=>t.mutationQueue.performConsistencyCheck(i)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(i,o,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(d){let p=Ve();for(let y=0;y<d.mutationResults.length;++y)d.mutationResults[y].transformResults.length>0&&(p=p.add(d.batch.mutations[y].key));return p}(e))).next(()=>t.localDocuments.getDocuments(i,o))})}function wE(n){const e=Pe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Gr.getLastRemoteSnapshotVersion(t))}function Ck(n,e){const t=Pe(n),i=e.snapshotVersion;let o=t.us;return t.persistence.runTransaction("Apply remote event","readwrite-primary",l=>{const c=t.hs.newChangeBuffer({trackRemovals:!0});o=t.us;const d=[];e.targetChanges.forEach((_,E)=>{const S=o.get(E);if(!S)return;d.push(t.Gr.removeMatchingKeys(l,_.removedDocuments,E).next(()=>t.Gr.addMatchingKeys(l,_.addedDocuments,E)));let P=S.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(E)!==null?P=P.withResumeToken(qt.EMPTY_BYTE_STRING,Ce.min()).withLastLimboFreeSnapshotVersion(Ce.min()):_.resumeToken.approximateByteSize()>0&&(P=P.withResumeToken(_.resumeToken,i)),o=o.insert(E,P),function(V,b,G){return V.resumeToken.approximateByteSize()===0||b.snapshotVersion.toMicroseconds()-V.snapshotVersion.toMicroseconds()>=3e8?!0:G.addedDocuments.size+G.modifiedDocuments.size+G.removedDocuments.size>0}(S,P,_)&&d.push(t.Gr.updateTargetData(l,P))});let p=di(),y=Ve();if(e.documentUpdates.forEach(_=>{e.resolvedLimboDocuments.has(_)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(l,_))}),d.push(Pk(l,c,e.documentUpdates).next(_=>{p=_.Is,y=_.Es})),!i.isEqual(Ce.min())){const _=t.Gr.getLastRemoteSnapshotVersion(l).next(E=>t.Gr.setTargetsMetadata(l,l.currentSequenceNumber,i));d.push(_)}return J.waitFor(d).next(()=>c.apply(l)).next(()=>t.localDocuments.getLocalViewOfDocuments(l,p,y)).next(()=>p)}).then(l=>(t.us=o,l))}function Pk(n,e,t){let i=Ve(),o=Ve();return t.forEach(l=>i=i.add(l)),e.getEntries(n,i).next(l=>{let c=di();return t.forEach((d,p)=>{const y=l.get(d);p.isFoundDocument()!==y.isFoundDocument()&&(o=o.add(d)),p.isNoDocument()&&p.version.isEqual(Ce.min())?(e.removeEntry(d,p.readTime),c=c.insert(d,p)):!y.isValidDocument()||p.version.compareTo(y.version)>0||p.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(p),c=c.insert(d,p)):de("LocalStore","Ignoring outdated watch update for ",d,". Current version:",y.version," Watch version:",p.version)}),{Is:c,Es:o}})}function kk(n,e){const t=Pe(n);return t.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function xk(n,e){const t=Pe(n);return t.persistence.runTransaction("Allocate target","readwrite",i=>{let o;return t.Gr.getTargetData(i,e).next(l=>l?(o=l,J.resolve(o)):t.Gr.allocateTargetId(i).next(c=>(o=new es(e,c,"TargetPurposeListen",i.currentSequenceNumber),t.Gr.addTargetData(i,o).next(()=>o))))}).then(i=>{const o=t.us.get(i.targetId);return(o===null||i.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.us=t.us.insert(i.targetId,i),t.cs.set(e,i.targetId)),i})}async function Vp(n,e,t){const i=Pe(n),o=i.us.get(e),l=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",l,c=>i.persistence.referenceDelegate.removeTarget(c,o))}catch(c){if(!ja(c))throw c;de("LocalStore",`Failed to update sequence numbers for target ${e}: ${c}`)}i.us=i.us.remove(e),i.cs.delete(o.target)}function k_(n,e,t){const i=Pe(n);let o=Ce.min(),l=Ve();return i.persistence.runTransaction("Execute query","readwrite",c=>function(p,y,_){const E=Pe(p),S=E.cs.get(_);return S!==void 0?J.resolve(E.us.get(S)):E.Gr.getTargetData(y,_)}(i,c,kr(e)).next(d=>{if(d)return o=d.lastLimboFreeSnapshotVersion,i.Gr.getMatchingKeysForTargetId(c,d.targetId).next(p=>{l=p})}).next(()=>i._s.getDocumentsMatchingQuery(c,e,t?o:Ce.min(),t?l:Ve())).next(d=>(bk(i,vP(e),d),{documents:d,ds:l})))}function bk(n,e,t){let i=n.ls.get(e)||Ce.min();t.forEach((o,l)=>{l.readTime.compareTo(i)>0&&(i=l.readTime)}),n.ls.set(e,i)}class x_{constructor(){this.activeTargetIds=SP()}ps(e){this.activeTargetIds=this.activeTargetIds.add(e)}ys(e){this.activeTargetIds=this.activeTargetIds.delete(e)}gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Nk{constructor(){this._o=new x_,this.ao={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this._o.ps(e),this.ao[e]||"not-current"}updateQueryState(e,t,i){this.ao[e]=t}removeLocalQueryTarget(e){this._o.ys(e)}isLocalQueryTarget(e){return this._o.activeTargetIds.has(e)}clearQueryState(e){delete this.ao[e]}getAllActiveQueryTargets(){return this._o.activeTargetIds}isActiveQueryTarget(e){return this._o.activeTargetIds.has(e)}start(){return this._o=new x_,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ok{uo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b_{constructor(){this.co=()=>this.lo(),this.ho=()=>this.Po(),this.To=[],this.Io()}uo(e){this.To.push(e)}shutdown(){window.removeEventListener("online",this.co),window.removeEventListener("offline",this.ho)}Io(){window.addEventListener("online",this.co),window.addEventListener("offline",this.ho)}lo(){de("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.To)e(0)}Po(){de("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.To)e(1)}static p(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Jc=null;function ip(){return Jc===null?Jc=function(){return 268435456+Math.round(2147483648*Math.random())}():Jc++,"0x"+Jc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dk={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lk{constructor(e){this.Eo=e.Eo,this.Ao=e.Ao}Ro(e){this.Vo=e}mo(e){this.fo=e}po(e){this.yo=e}onMessage(e){this.wo=e}close(){this.Ao()}send(e){this.Eo(e)}So(){this.Vo()}bo(){this.fo()}Do(e){this.yo(e)}vo(e){this.wo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gt="WebChannelConnection";class Vk extends class{get Co(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const i=t.ssl?"https":"http",o=encodeURIComponent(this.databaseId.projectId),l=encodeURIComponent(this.databaseId.database);this.Fo=i+"://"+t.host,this.Mo=`projects/${o}/databases/${l}`,this.xo=this.databaseId.database==="(default)"?`project_id=${o}`:`project_id=${o}&database_id=${l}`}Oo(t,i,o,l,c){const d=ip(),p=this.No(t,i.toUriEncodedString());de("RestConnection",`Sending RPC '${t}' ${d}:`,p,o);const y={"google-cloud-resource-prefix":this.Mo,"x-goog-request-params":this.xo};return this.Lo(y,l,c),this.Bo(t,p,y,o).then(_=>(de("RestConnection",`Received RPC '${t}' ${d}: `,_),_),_=>{throw ka("RestConnection",`RPC '${t}' ${d} failed with error: `,_,"url: ",p,"request:",o),_})}ko(t,i,o,l,c,d){return this.Oo(t,i,o,l,c)}Lo(t,i,o){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Fa}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((l,c)=>t[c]=l),o&&o.headers.forEach((l,c)=>t[c]=l)}No(t,i){const o=Dk[t];return`${this.Fo}/v1/${i}:${o}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Bo(e,t,i,o){const l=ip();return new Promise((c,d)=>{const p=new Ow;p.setWithCredentials(!0),p.listenOnce(Dw.COMPLETE,()=>{try{switch(p.getLastErrorCode()){case rh.NO_ERROR:const _=p.getResponseJson();de(Gt,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(_)),c(_);break;case rh.TIMEOUT:de(Gt,`RPC '${e}' ${l} timed out`),d(new fe(X.DEADLINE_EXCEEDED,"Request time out"));break;case rh.HTTP_ERROR:const E=p.getStatus();if(de(Gt,`RPC '${e}' ${l} failed with status:`,E,"response text:",p.getResponseText()),E>0){let S=p.getResponseJson();Array.isArray(S)&&(S=S[0]);const P=S==null?void 0:S.error;if(P&&P.status&&P.message){const x=function(b){const G=b.toLowerCase().replace(/_/g,"-");return Object.values(X).indexOf(G)>=0?G:X.UNKNOWN}(P.status);d(new fe(x,P.message))}else d(new fe(X.UNKNOWN,"Server responded with status "+p.getStatus()))}else d(new fe(X.UNAVAILABLE,"Connection failed."));break;default:Re()}}finally{de(Gt,`RPC '${e}' ${l} completed.`)}});const y=JSON.stringify(o);de(Gt,`RPC '${e}' ${l} sending request:`,o),p.send(t,"POST",y,i,15)})}qo(e,t,i){const o=ip(),l=[this.Fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=Mw(),d=Vw(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;y!==void 0&&(p.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(p.useFetchStreams=!0),this.Lo(p.initMessageHeaders,t,i),p.encodeInitMessageHeaders=!0;const _=l.join("");de(Gt,`Creating RPC '${e}' stream ${o}: ${_}`,p);const E=c.createWebChannel(_,p);let S=!1,P=!1;const x=new Lk({Eo:b=>{P?de(Gt,`Not sending because RPC '${e}' stream ${o} is closed:`,b):(S||(de(Gt,`Opening RPC '${e}' stream ${o} transport.`),E.open(),S=!0),de(Gt,`RPC '${e}' stream ${o} sending:`,b),E.send(b))},Ao:()=>E.close()}),V=(b,G,Q)=>{b.listen(G,K=>{try{Q(K)}catch(te){setTimeout(()=>{throw te},0)}})};return V(E,zl.EventType.OPEN,()=>{P||(de(Gt,`RPC '${e}' stream ${o} transport opened.`),x.So())}),V(E,zl.EventType.CLOSE,()=>{P||(P=!0,de(Gt,`RPC '${e}' stream ${o} transport closed`),x.Do())}),V(E,zl.EventType.ERROR,b=>{P||(P=!0,ka(Gt,`RPC '${e}' stream ${o} transport errored:`,b),x.Do(new fe(X.UNAVAILABLE,"The operation could not be completed")))}),V(E,zl.EventType.MESSAGE,b=>{var G;if(!P){const Q=b.data[0];Xe(!!Q);const K=Q,te=(K==null?void 0:K.error)||((G=K[0])===null||G===void 0?void 0:G.error);if(te){de(Gt,`RPC '${e}' stream ${o} received error:`,te);const oe=te.status;let ae=function(R){const O=_t[R];if(O!==void 0)return lE(O)}(oe),C=te.message;ae===void 0&&(ae=X.INTERNAL,C="Unknown error status: "+oe+" with message "+te.message),P=!0,x.Do(new fe(ae,C)),E.close()}else de(Gt,`RPC '${e}' stream ${o} received:`,Q),x.vo(Q)}}),V(d,Lw.STAT_EVENT,b=>{b.stat===Rp.PROXY?de(Gt,`RPC '${e}' stream ${o} detected buffering proxy`):b.stat===Rp.NOPROXY&&de(Gt,`RPC '${e}' stream ${o} detected no buffering proxy`)}),setTimeout(()=>{x.bo()},0),x}}function sp(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zh(n){return new $P(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EE{constructor(e,t,i=1e3,o=1.5,l=6e4){this.li=e,this.timerId=t,this.Qo=i,this.Ko=o,this.$o=l,this.Uo=0,this.Wo=null,this.Go=Date.now(),this.reset()}reset(){this.Uo=0}zo(){this.Uo=this.$o}jo(e){this.cancel();const t=Math.floor(this.Uo+this.Ho()),i=Math.max(0,Date.now()-this.Go),o=Math.max(0,t-i);o>0&&de("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.Uo} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.Wo=this.li.enqueueAfterDelay(this.timerId,o,()=>(this.Go=Date.now(),e())),this.Uo*=this.Ko,this.Uo<this.Qo&&(this.Uo=this.Qo),this.Uo>this.$o&&(this.Uo=this.$o)}Jo(){this.Wo!==null&&(this.Wo.skipDelay(),this.Wo=null)}cancel(){this.Wo!==null&&(this.Wo.cancel(),this.Wo=null)}Ho(){return(Math.random()-.5)*this.Uo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TE{constructor(e,t,i,o,l,c,d,p){this.li=e,this.Yo=i,this.Zo=o,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=d,this.listener=p,this.state=0,this.Xo=0,this.e_=null,this.t_=null,this.stream=null,this.n_=0,this.r_=new EE(e,t)}i_(){return this.state===1||this.state===5||this.s_()}s_(){return this.state===2||this.state===3}start(){this.n_=0,this.state!==4?this.auth():this.o_()}async stop(){this.i_()&&await this.close(0)}__(){this.state=0,this.r_.reset()}a_(){this.s_()&&this.e_===null&&(this.e_=this.li.enqueueAfterDelay(this.Yo,6e4,()=>this.u_()))}c_(e){this.l_(),this.stream.send(e)}async u_(){if(this.s_())return this.close(0)}l_(){this.e_&&(this.e_.cancel(),this.e_=null)}h_(){this.t_&&(this.t_.cancel(),this.t_=null)}async close(e,t){this.l_(),this.h_(),this.r_.cancel(),this.Xo++,e!==4?this.r_.reset():t&&t.code===X.RESOURCE_EXHAUSTED?(hi(t.toString()),hi("Using maximum backoff delay to prevent overloading the backend."),this.r_.zo()):t&&t.code===X.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.P_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.po(t)}P_(){}auth(){this.state=1;const e=this.T_(this.Xo),t=this.Xo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,o])=>{this.Xo===t&&this.I_(i,o)},i=>{e(()=>{const o=new fe(X.UNKNOWN,"Fetching auth token failed: "+i.message);return this.E_(o)})})}I_(e,t){const i=this.T_(this.Xo);this.stream=this.d_(e,t),this.stream.Ro(()=>{i(()=>this.listener.Ro())}),this.stream.mo(()=>{i(()=>(this.state=2,this.t_=this.li.enqueueAfterDelay(this.Zo,1e4,()=>(this.s_()&&(this.state=3),Promise.resolve())),this.listener.mo()))}),this.stream.po(o=>{i(()=>this.E_(o))}),this.stream.onMessage(o=>{i(()=>++this.n_==1?this.A_(o):this.onNext(o))})}o_(){this.state=5,this.r_.jo(async()=>{this.state=0,this.start()})}E_(e){return de("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}T_(e){return t=>{this.li.enqueueAndForget(()=>this.Xo===e?t():(de("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Mk extends TE{constructor(e,t,i,o,l,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,o,c),this.serializer=l}d_(e,t){return this.connection.qo("Listen",e,t)}A_(e){return this.onNext(e)}onNext(e){this.r_.reset();const t=WP(this.serializer,e),i=function(l){if(!("targetChange"in l))return Ce.min();const c=l.targetChange;return c.targetIds&&c.targetIds.length?Ce.min():c.readTime?xr(c.readTime):Ce.min()}(e);return this.listener.R_(t,i)}V_(e){const t={};t.database=Lp(this.serializer),t.addTarget=function(l,c){let d;const p=c.target;if(d=kp(p)?{documents:GP(l,p)}:{query:XP(l,p).ct},d.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){d.resumeToken=hE(l,c.resumeToken);const y=Np(l,c.expectedCount);y!==null&&(d.expectedCount=y)}else if(c.snapshotVersion.compareTo(Ce.min())>0){d.readTime=Ph(l,c.snapshotVersion.toTimestamp());const y=Np(l,c.expectedCount);y!==null&&(d.expectedCount=y)}return d}(this.serializer,e);const i=YP(this.serializer,e);i&&(t.labels=i),this.c_(t)}m_(e){const t={};t.database=Lp(this.serializer),t.removeTarget=e,this.c_(t)}}class Fk extends TE{constructor(e,t,i,o,l,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,o,c),this.serializer=l}get f_(){return this.n_>0}start(){this.lastStreamToken=void 0,super.start()}P_(){this.f_&&this.g_([])}d_(e,t){return this.connection.qo("Write",e,t)}A_(e){return Xe(!!e.streamToken),this.lastStreamToken=e.streamToken,Xe(!e.writeResults||e.writeResults.length===0),this.listener.p_()}onNext(e){Xe(!!e.streamToken),this.lastStreamToken=e.streamToken,this.r_.reset();const t=QP(e.writeResults,e.commitTime),i=xr(e.commitTime);return this.listener.y_(i,t)}w_(){const e={};e.database=Lp(this.serializer),this.c_(e)}g_(e){const t={streamToken:this.lastStreamToken,writes:e.map(i=>KP(this.serializer,i))};this.c_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uk extends class{}{constructor(e,t,i,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=o,this.S_=!1}b_(){if(this.S_)throw new fe(X.FAILED_PRECONDITION,"The client has already been terminated.")}Oo(e,t,i,o){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,c])=>this.connection.Oo(e,Op(t,i),o,l,c)).catch(l=>{throw l.name==="FirebaseError"?(l.code===X.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new fe(X.UNKNOWN,l.toString())})}ko(e,t,i,o,l){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,d])=>this.connection.ko(e,Op(t,i),o,c,d,l)).catch(c=>{throw c.name==="FirebaseError"?(c.code===X.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new fe(X.UNKNOWN,c.toString())})}terminate(){this.S_=!0,this.connection.terminate()}}class jk{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.D_=0,this.v_=null,this.C_=!0}F_(){this.D_===0&&(this.M_("Unknown"),this.v_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.v_=null,this.x_("Backend didn't respond within 10 seconds."),this.M_("Offline"),Promise.resolve())))}O_(e){this.state==="Online"?this.M_("Unknown"):(this.D_++,this.D_>=1&&(this.N_(),this.x_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.M_("Offline")))}set(e){this.N_(),this.D_=0,e==="Online"&&(this.C_=!1),this.M_(e)}M_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}x_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.C_?(hi(t),this.C_=!1):de("OnlineStateTracker",t)}N_(){this.v_!==null&&(this.v_.cancel(),this.v_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zk{constructor(e,t,i,o,l){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.L_=[],this.B_=new Map,this.k_=new Set,this.q_=[],this.Q_=l,this.Q_.uo(c=>{i.enqueueAndForget(async()=>{ho(this)&&(de("RemoteStore","Restarting streams for network reachability change."),await async function(p){const y=Pe(p);y.k_.add(4),await Iu(y),y.K_.set("Unknown"),y.k_.delete(4),await ed(y)}(this))})}),this.K_=new jk(i,o)}}async function ed(n){if(ho(n))for(const e of n.q_)await e(!0)}async function Iu(n){for(const e of n.q_)await e(!1)}function IE(n,e){const t=Pe(n);t.B_.has(e.targetId)||(t.B_.set(e.targetId,e),Bm(t)?zm(t):za(t).s_()&&jm(t,e))}function Um(n,e){const t=Pe(n),i=za(t);t.B_.delete(e),i.s_()&&SE(t,e),t.B_.size===0&&(i.s_()?i.a_():ho(t)&&t.K_.set("Unknown"))}function jm(n,e){if(n.U_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ce.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}za(n).V_(e)}function SE(n,e){n.U_.xe(e),za(n).m_(e)}function zm(n){n.U_=new UP({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ut:e=>n.B_.get(e)||null,nt:()=>n.datastore.serializer.databaseId}),za(n).start(),n.K_.F_()}function Bm(n){return ho(n)&&!za(n).i_()&&n.B_.size>0}function ho(n){return Pe(n).k_.size===0}function RE(n){n.U_=void 0}async function Bk(n){n.K_.set("Online")}async function $k(n){n.B_.forEach((e,t)=>{jm(n,e)})}async function qk(n,e){RE(n),Bm(n)?(n.K_.O_(e),zm(n)):n.K_.set("Unknown")}async function Hk(n,e,t){if(n.K_.set("Online"),e instanceof cE&&e.state===2&&e.cause)try{await async function(o,l){const c=l.cause;for(const d of l.targetIds)o.B_.has(d)&&(await o.remoteSyncer.rejectListen(d,c),o.B_.delete(d),o.U_.removeTarget(d))}(n,e)}catch(i){de("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),await xh(n,i)}else if(e instanceof ah?n.U_.$e(e):e instanceof uE?n.U_.Je(e):n.U_.Ge(e),!t.isEqual(Ce.min()))try{const i=await wE(n.localStore);t.compareTo(i)>=0&&await function(l,c){const d=l.U_.it(c);return d.targetChanges.forEach((p,y)=>{if(p.resumeToken.approximateByteSize()>0){const _=l.B_.get(y);_&&l.B_.set(y,_.withResumeToken(p.resumeToken,c))}}),d.targetMismatches.forEach((p,y)=>{const _=l.B_.get(p);if(!_)return;l.B_.set(p,_.withResumeToken(qt.EMPTY_BYTE_STRING,_.snapshotVersion)),SE(l,p);const E=new es(_.target,p,y,_.sequenceNumber);jm(l,E)}),l.remoteSyncer.applyRemoteEvent(d)}(n,t)}catch(i){de("RemoteStore","Failed to raise snapshot:",i),await xh(n,i)}}async function xh(n,e,t){if(!ja(e))throw e;n.k_.add(1),await Iu(n),n.K_.set("Offline"),t||(t=()=>wE(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{de("RemoteStore","Retrying IndexedDB access"),await t(),n.k_.delete(1),await ed(n)})}function AE(n,e){return e().catch(t=>xh(n,t,e))}async function td(n){const e=Pe(n),t=cs(e);let i=e.L_.length>0?e.L_[e.L_.length-1].batchId:-1;for(;Wk(e);)try{const o=await kk(e.localStore,i);if(o===null){e.L_.length===0&&t.a_();break}i=o.batchId,Kk(e,o)}catch(o){await xh(e,o)}CE(e)&&PE(e)}function Wk(n){return ho(n)&&n.L_.length<10}function Kk(n,e){n.L_.push(e);const t=cs(n);t.s_()&&t.f_&&t.g_(e.mutations)}function CE(n){return ho(n)&&!cs(n).i_()&&n.L_.length>0}function PE(n){cs(n).start()}async function Qk(n){cs(n).w_()}async function Gk(n){const e=cs(n);for(const t of n.L_)e.g_(t.mutations)}async function Xk(n,e,t){const i=n.L_.shift(),o=Om.from(i,e,t);await AE(n,()=>n.remoteSyncer.applySuccessfulWrite(o)),await td(n)}async function Jk(n,e){e&&cs(n).f_&&await async function(i,o){if(function(c){return VP(c)&&c!==X.ABORTED}(o.code)){const l=i.L_.shift();cs(i).__(),await AE(i,()=>i.remoteSyncer.rejectFailedWrite(l.batchId,o)),await td(i)}}(n,e),CE(n)&&PE(n)}async function N_(n,e){const t=Pe(n);t.asyncQueue.verifyOperationInProgress(),de("RemoteStore","RemoteStore received new credentials");const i=ho(t);t.k_.add(3),await Iu(t),i&&t.K_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.k_.delete(3),await ed(t)}async function Yk(n,e){const t=Pe(n);e?(t.k_.delete(2),await ed(t)):e||(t.k_.add(2),await Iu(t),t.K_.set("Unknown"))}function za(n){return n.W_||(n.W_=function(t,i,o){const l=Pe(t);return l.b_(),new Mk(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)}(n.datastore,n.asyncQueue,{Ro:Bk.bind(null,n),mo:$k.bind(null,n),po:qk.bind(null,n),R_:Hk.bind(null,n)}),n.q_.push(async e=>{e?(n.W_.__(),Bm(n)?zm(n):n.K_.set("Unknown")):(await n.W_.stop(),RE(n))})),n.W_}function cs(n){return n.G_||(n.G_=function(t,i,o){const l=Pe(t);return l.b_(),new Fk(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)}(n.datastore,n.asyncQueue,{Ro:()=>Promise.resolve(),mo:Qk.bind(null,n),po:Jk.bind(null,n),p_:Gk.bind(null,n),y_:Xk.bind(null,n)}),n.q_.push(async e=>{e?(n.G_.__(),await td(n)):(await n.G_.stop(),n.L_.length>0&&(de("RemoteStore",`Stopping write stream with ${n.L_.length} pending writes`),n.L_=[]))})),n.G_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $m{constructor(e,t,i,o,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=o,this.removalCallback=l,this.deferred=new oi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,o,l){const c=Date.now()+i,d=new $m(e,t,c,o,l);return d.start(i),d}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new fe(X.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function qm(n,e){if(hi("AsyncQueue",`${e}: ${n}`),ja(n))return new fe(X.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class da{static emptySet(e){return new da(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||_e.comparator(t.key,i.key):(t,i)=>_e.comparator(t.key,i.key),this.keyedMap=Bl(),this.sortedSet=new ct(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,i)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof da)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=i.getNext().key;if(!o.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new da;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O_{constructor(){this.z_=new ct(_e.comparator)}track(e){const t=e.doc.key,i=this.z_.get(t);i?e.type!==0&&i.type===3?this.z_=this.z_.insert(t,e):e.type===3&&i.type!==1?this.z_=this.z_.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.z_=this.z_.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.z_=this.z_.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.z_=this.z_.remove(t):e.type===1&&i.type===2?this.z_=this.z_.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.z_=this.z_.insert(t,{type:2,doc:e.doc}):Re():this.z_=this.z_.insert(t,e)}j_(){const e=[];return this.z_.inorderTraversal((t,i)=>{e.push(i)}),e}}class Da{constructor(e,t,i,o,l,c,d,p,y){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=o,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=d,this.excludesMetadataChanges=p,this.hasCachedResults=y}static fromInitialDocuments(e,t,i,o,l){const c=[];return t.forEach(d=>{c.push({type:0,doc:d})}),new Da(e,t,da.emptySet(t),c,i,o,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Qh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==i[o].type||!t[o].doc.isEqual(i[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zk{constructor(){this.H_=void 0,this.J_=[]}Y_(){return this.J_.some(e=>e.Z_())}}class ex{constructor(){this.queries=D_(),this.onlineState="Unknown",this.X_=new Set}terminate(){(function(t,i){const o=Pe(t),l=o.queries;o.queries=D_(),l.forEach((c,d)=>{for(const p of d.J_)p.onError(i)})})(this,new fe(X.ABORTED,"Firestore shutting down"))}}function D_(){return new co(n=>Xw(n),Qh)}async function kE(n,e){const t=Pe(n);let i=3;const o=e.query;let l=t.queries.get(o);l?!l.Y_()&&e.Z_()&&(i=2):(l=new Zk,i=e.Z_()?0:1);try{switch(i){case 0:l.H_=await t.onListen(o,!0);break;case 1:l.H_=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(c){const d=qm(c,`Initialization of query '${oa(e.query)}' failed`);return void e.onError(d)}t.queries.set(o,l),l.J_.push(e),e.ea(t.onlineState),l.H_&&e.ta(l.H_)&&Hm(t)}async function xE(n,e){const t=Pe(n),i=e.query;let o=3;const l=t.queries.get(i);if(l){const c=l.J_.indexOf(e);c>=0&&(l.J_.splice(c,1),l.J_.length===0?o=e.Z_()?0:1:!l.Y_()&&e.Z_()&&(o=2))}switch(o){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function tx(n,e){const t=Pe(n);let i=!1;for(const o of e){const l=o.query,c=t.queries.get(l);if(c){for(const d of c.J_)d.ta(o)&&(i=!0);c.H_=o}}i&&Hm(t)}function nx(n,e,t){const i=Pe(n),o=i.queries.get(e);if(o)for(const l of o.J_)l.onError(t);i.queries.delete(e)}function Hm(n){n.X_.forEach(e=>{e.next()})}var Mp,L_;(L_=Mp||(Mp={})).na="default",L_.Cache="cache";class bE{constructor(e,t,i){this.query=e,this.ra=t,this.ia=!1,this.sa=null,this.onlineState="Unknown",this.options=i||{}}ta(e){if(!this.options.includeMetadataChanges){const i=[];for(const o of e.docChanges)o.type!==3&&i.push(o);e=new Da(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ia?this.oa(e)&&(this.ra.next(e),t=!0):this._a(e,this.onlineState)&&(this.aa(e),t=!0),this.sa=e,t}onError(e){this.ra.error(e)}ea(e){this.onlineState=e;let t=!1;return this.sa&&!this.ia&&this._a(this.sa,e)&&(this.aa(this.sa),t=!0),t}_a(e,t){if(!e.fromCache||!this.Z_())return!0;const i=t!=="Offline";return(!this.options.ua||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}oa(e){if(e.docChanges.length>0)return!0;const t=this.sa&&this.sa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}aa(e){e=Da.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ia=!0,this.ra.next(e)}Z_(){return this.options.source!==Mp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NE{constructor(e){this.key=e}}class OE{constructor(e){this.key=e}}class rx{constructor(e,t){this.query=e,this.da=t,this.Aa=null,this.hasCachedResults=!1,this.current=!1,this.Ra=Ve(),this.mutatedKeys=Ve(),this.Va=Jw(e),this.ma=new da(this.Va)}get fa(){return this.da}ga(e,t){const i=t?t.pa:new O_,o=t?t.ma:this.ma;let l=t?t.mutatedKeys:this.mutatedKeys,c=o,d=!1;const p=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,y=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((_,E)=>{const S=o.get(_),P=Gh(this.query,E)?E:null,x=!!S&&this.mutatedKeys.has(S.key),V=!!P&&(P.hasLocalMutations||this.mutatedKeys.has(P.key)&&P.hasCommittedMutations);let b=!1;S&&P?S.data.isEqual(P.data)?x!==V&&(i.track({type:3,doc:P}),b=!0):this.ya(S,P)||(i.track({type:2,doc:P}),b=!0,(p&&this.Va(P,p)>0||y&&this.Va(P,y)<0)&&(d=!0)):!S&&P?(i.track({type:0,doc:P}),b=!0):S&&!P&&(i.track({type:1,doc:S}),b=!0,(p||y)&&(d=!0)),b&&(P?(c=c.add(P),l=V?l.add(_):l.delete(_)):(c=c.delete(_),l=l.delete(_)))}),this.query.limit!==null)for(;c.size>this.query.limit;){const _=this.query.limitType==="F"?c.last():c.first();c=c.delete(_.key),l=l.delete(_.key),i.track({type:1,doc:_})}return{ma:c,pa:i,ss:d,mutatedKeys:l}}ya(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,o){const l=this.ma;this.ma=e.ma,this.mutatedKeys=e.mutatedKeys;const c=e.pa.j_();c.sort((_,E)=>function(P,x){const V=b=>{switch(b){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Re()}};return V(P)-V(x)}(_.type,E.type)||this.Va(_.doc,E.doc)),this.wa(i),o=o!=null&&o;const d=t&&!o?this.Sa():[],p=this.Ra.size===0&&this.current&&!o?1:0,y=p!==this.Aa;return this.Aa=p,c.length!==0||y?{snapshot:new Da(this.query,e.ma,l,c,e.mutatedKeys,p===0,y,!1,!!i&&i.resumeToken.approximateByteSize()>0),ba:d}:{ba:d}}ea(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({ma:this.ma,pa:new O_,mutatedKeys:this.mutatedKeys,ss:!1},!1)):{ba:[]}}Da(e){return!this.da.has(e)&&!!this.ma.has(e)&&!this.ma.get(e).hasLocalMutations}wa(e){e&&(e.addedDocuments.forEach(t=>this.da=this.da.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.da=this.da.delete(t)),this.current=e.current)}Sa(){if(!this.current)return[];const e=this.Ra;this.Ra=Ve(),this.ma.forEach(i=>{this.Da(i.key)&&(this.Ra=this.Ra.add(i.key))});const t=[];return e.forEach(i=>{this.Ra.has(i)||t.push(new OE(i))}),this.Ra.forEach(i=>{e.has(i)||t.push(new NE(i))}),t}va(e){this.da=e.ds,this.Ra=Ve();const t=this.ga(e.documents);return this.applyChanges(t,!0)}Ca(){return Da.fromInitialDocuments(this.query,this.ma,this.mutatedKeys,this.Aa===0,this.hasCachedResults)}}class ix{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class sx{constructor(e){this.key=e,this.Fa=!1}}class ox{constructor(e,t,i,o,l,c){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=o,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.Ma={},this.xa=new co(d=>Xw(d),Qh),this.Oa=new Map,this.Na=new Set,this.La=new ct(_e.comparator),this.Ba=new Map,this.ka=new Vm,this.qa={},this.Qa=new Map,this.Ka=Oa.Qn(),this.onlineState="Unknown",this.$a=void 0}get isPrimaryClient(){return this.$a===!0}}async function ax(n,e,t=!0){const i=UE(n);let o;const l=i.xa.get(e);return l?(i.sharedClientState.addLocalQueryTarget(l.targetId),o=l.view.Ca()):o=await DE(i,e,t,!0),o}async function lx(n,e){const t=UE(n);await DE(t,e,!0,!1)}async function DE(n,e,t,i){const o=await xk(n.localStore,kr(e)),l=o.targetId,c=n.sharedClientState.addLocalQueryTarget(l,t);let d;return i&&(d=await ux(n,e,l,c==="current",o.resumeToken)),n.isPrimaryClient&&t&&IE(n.remoteStore,o),d}async function ux(n,e,t,i,o){n.Ua=(E,S,P)=>async function(V,b,G,Q){let K=b.view.ga(G);K.ss&&(K=await k_(V.localStore,b.query,!1).then(({documents:C})=>b.view.ga(C,K)));const te=Q&&Q.targetChanges.get(b.targetId),oe=Q&&Q.targetMismatches.get(b.targetId)!=null,ae=b.view.applyChanges(K,V.isPrimaryClient,te,oe);return M_(V,b.targetId,ae.ba),ae.snapshot}(n,E,S,P);const l=await k_(n.localStore,e,!0),c=new rx(e,l.ds),d=c.ga(l.documents),p=Tu.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",o),y=c.applyChanges(d,n.isPrimaryClient,p);M_(n,t,y.ba);const _=new ix(e,t,c);return n.xa.set(e,_),n.Oa.has(t)?n.Oa.get(t).push(e):n.Oa.set(t,[e]),y.snapshot}async function cx(n,e,t){const i=Pe(n),o=i.xa.get(e),l=i.Oa.get(o.targetId);if(l.length>1)return i.Oa.set(o.targetId,l.filter(c=>!Qh(c,e))),void i.xa.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(o.targetId),i.sharedClientState.isActiveQueryTarget(o.targetId)||await Vp(i.localStore,o.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(o.targetId),t&&Um(i.remoteStore,o.targetId),Fp(i,o.targetId)}).catch(Ua)):(Fp(i,o.targetId),await Vp(i.localStore,o.targetId,!0))}async function hx(n,e){const t=Pe(n),i=t.xa.get(e),o=t.Oa.get(i.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),Um(t.remoteStore,i.targetId))}async function dx(n,e,t){const i=_x(n);try{const o=await function(c,d){const p=Pe(c),y=kt.now(),_=d.reduce((P,x)=>P.add(x.key),Ve());let E,S;return p.persistence.runTransaction("Locally write mutations","readwrite",P=>{let x=di(),V=Ve();return p.hs.getEntries(P,_).next(b=>{x=b,x.forEach((G,Q)=>{Q.isValidDocument()||(V=V.add(G))})}).next(()=>p.localDocuments.getOverlayedDocuments(P,x)).next(b=>{E=b;const G=[];for(const Q of d){const K=bP(Q,E.get(Q.key).overlayedDocument);K!=null&&G.push(new fs(Q.key,K,Bw(K.value.mapValue),qn.exists(!0)))}return p.mutationQueue.addMutationBatch(P,y,G,d)}).next(b=>{S=b;const G=b.applyToLocalDocumentSet(E,V);return p.documentOverlayCache.saveOverlays(P,b.batchId,G)})}).then(()=>({batchId:S.batchId,changes:Zw(E)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(o.batchId),function(c,d,p){let y=c.qa[c.currentUser.toKey()];y||(y=new ct(Ue)),y=y.insert(d,p),c.qa[c.currentUser.toKey()]=y}(i,o.batchId,t),await Su(i,o.changes),await td(i.remoteStore)}catch(o){const l=qm(o,"Failed to persist write");t.reject(l)}}async function LE(n,e){const t=Pe(n);try{const i=await Ck(t.localStore,e);e.targetChanges.forEach((o,l)=>{const c=t.Ba.get(l);c&&(Xe(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?c.Fa=!0:o.modifiedDocuments.size>0?Xe(c.Fa):o.removedDocuments.size>0&&(Xe(c.Fa),c.Fa=!1))}),await Su(t,i,e)}catch(i){await Ua(i)}}function V_(n,e,t){const i=Pe(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const o=[];i.xa.forEach((l,c)=>{const d=c.view.ea(e);d.snapshot&&o.push(d.snapshot)}),function(c,d){const p=Pe(c);p.onlineState=d;let y=!1;p.queries.forEach((_,E)=>{for(const S of E.J_)S.ea(d)&&(y=!0)}),y&&Hm(p)}(i.eventManager,e),o.length&&i.Ma.R_(o),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function fx(n,e,t){const i=Pe(n);i.sharedClientState.updateQueryState(e,"rejected",t);const o=i.Ba.get(e),l=o&&o.key;if(l){let c=new ct(_e.comparator);c=c.insert(l,Yt.newNoDocument(l,Ce.min()));const d=Ve().add(l),p=new Yh(Ce.min(),new Map,new ct(Ue),c,d);await LE(i,p),i.La=i.La.remove(l),i.Ba.delete(e),Wm(i)}else await Vp(i.localStore,e,!1).then(()=>Fp(i,e,t)).catch(Ua)}async function px(n,e){const t=Pe(n),i=e.batch.batchId;try{const o=await Ak(t.localStore,e);ME(t,i,null),VE(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await Su(t,o)}catch(o){await Ua(o)}}async function mx(n,e,t){const i=Pe(n);try{const o=await function(c,d){const p=Pe(c);return p.persistence.runTransaction("Reject batch","readwrite-primary",y=>{let _;return p.mutationQueue.lookupMutationBatch(y,d).next(E=>(Xe(E!==null),_=E.keys(),p.mutationQueue.removeMutationBatch(y,E))).next(()=>p.mutationQueue.performConsistencyCheck(y)).next(()=>p.documentOverlayCache.removeOverlaysForBatchId(y,_,d)).next(()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,_)).next(()=>p.localDocuments.getDocuments(y,_))})}(i.localStore,e);ME(i,e,t),VE(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await Su(i,o)}catch(o){await Ua(o)}}function VE(n,e){(n.Qa.get(e)||[]).forEach(t=>{t.resolve()}),n.Qa.delete(e)}function ME(n,e,t){const i=Pe(n);let o=i.qa[i.currentUser.toKey()];if(o){const l=o.get(e);l&&(t?l.reject(t):l.resolve(),o=o.remove(e)),i.qa[i.currentUser.toKey()]=o}}function Fp(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.Oa.get(e))n.xa.delete(i),t&&n.Ma.Wa(i,t);n.Oa.delete(e),n.isPrimaryClient&&n.ka.yr(e).forEach(i=>{n.ka.containsKey(i)||FE(n,i)})}function FE(n,e){n.Na.delete(e.path.canonicalString());const t=n.La.get(e);t!==null&&(Um(n.remoteStore,t),n.La=n.La.remove(e),n.Ba.delete(t),Wm(n))}function M_(n,e,t){for(const i of t)i instanceof NE?(n.ka.addReference(i.key,e),gx(n,i)):i instanceof OE?(de("SyncEngine","Document no longer in limbo: "+i.key),n.ka.removeReference(i.key,e),n.ka.containsKey(i.key)||FE(n,i.key)):Re()}function gx(n,e){const t=e.key,i=t.path.canonicalString();n.La.get(t)||n.Na.has(i)||(de("SyncEngine","New document in limbo: "+t),n.Na.add(i),Wm(n))}function Wm(n){for(;n.Na.size>0&&n.La.size<n.maxConcurrentLimboResolutions;){const e=n.Na.values().next().value;n.Na.delete(e);const t=new _e(it.fromString(e)),i=n.Ka.next();n.Ba.set(i,new sx(t)),n.La=n.La.insert(t,i),IE(n.remoteStore,new es(kr(xm(t.path)),i,"TargetPurposeLimboResolution",Hh.oe))}}async function Su(n,e,t){const i=Pe(n),o=[],l=[],c=[];i.xa.isEmpty()||(i.xa.forEach((d,p)=>{c.push(i.Ua(p,e,t).then(y=>{var _;if((y||t)&&i.isPrimaryClient){const E=y?!y.fromCache:(_=t==null?void 0:t.targetChanges.get(p.targetId))===null||_===void 0?void 0:_.current;i.sharedClientState.updateQueryState(p.targetId,E?"current":"not-current")}if(y){o.push(y);const E=Fm.zi(p.targetId,y);l.push(E)}}))}),await Promise.all(c),i.Ma.R_(o),await async function(p,y){const _=Pe(p);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",E=>J.forEach(y,S=>J.forEach(S.Wi,P=>_.persistence.referenceDelegate.addReference(E,S.targetId,P)).next(()=>J.forEach(S.Gi,P=>_.persistence.referenceDelegate.removeReference(E,S.targetId,P)))))}catch(E){if(!ja(E))throw E;de("LocalStore","Failed to update sequence numbers: "+E)}for(const E of y){const S=E.targetId;if(!E.fromCache){const P=_.us.get(S),x=P.snapshotVersion,V=P.withLastLimboFreeSnapshotVersion(x);_.us=_.us.insert(S,V)}}}(i.localStore,l))}async function yx(n,e){const t=Pe(n);if(!t.currentUser.isEqual(e)){de("SyncEngine","User change. New user:",e.toKey());const i=await _E(t.localStore,e);t.currentUser=e,function(l,c){l.Qa.forEach(d=>{d.forEach(p=>{p.reject(new fe(X.CANCELLED,c))})}),l.Qa.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Su(t,i.Ts)}}function vx(n,e){const t=Pe(n),i=t.Ba.get(e);if(i&&i.Fa)return Ve().add(i.key);{let o=Ve();const l=t.Oa.get(e);if(!l)return o;for(const c of l){const d=t.xa.get(c);o=o.unionWith(d.view.fa)}return o}}function UE(n){const e=Pe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=LE.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=vx.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=fx.bind(null,e),e.Ma.R_=tx.bind(null,e.eventManager),e.Ma.Wa=nx.bind(null,e.eventManager),e}function _x(n){const e=Pe(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=px.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=mx.bind(null,e),e}class bh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Zh(e.databaseInfo.databaseId),this.sharedClientState=this.za(e),this.persistence=this.ja(e),await this.persistence.start(),this.localStore=this.Ha(e),this.gcScheduler=this.Ja(e,this.localStore),this.indexBackfillerScheduler=this.Ya(e,this.localStore)}Ja(e,t){return null}Ya(e,t){return null}Ha(e){return Rk(this.persistence,new Ik,e.initialUser,this.serializer)}ja(e){return new vE(Mm.ei,this.serializer)}za(e){return new Nk}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}bh.provider={build:()=>new bh};class wx extends bh{constructor(e){super(),this.cacheSizeBytes=e}Ja(e,t){Xe(this.persistence.referenceDelegate instanceof kh);const i=this.persistence.referenceDelegate.garbageCollector;return new lk(i,e.asyncQueue,t)}ja(e){const t=this.cacheSizeBytes!==void 0?_n.withCacheSize(this.cacheSizeBytes):_n.DEFAULT;return new vE(i=>kh.ei(i,t),this.serializer)}}class Up{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>V_(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=yx.bind(null,this.syncEngine),await Yk(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new ex}()}createDatastore(e){const t=Zh(e.databaseInfo.databaseId),i=function(l){return new Vk(l)}(e.databaseInfo);return function(l,c,d,p){return new Uk(l,c,d,p)}(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return function(i,o,l,c,d){return new zk(i,o,l,c,d)}(this.localStore,this.datastore,e.asyncQueue,t=>V_(this.syncEngine,t,0),function(){return b_.p()?new b_:new Ok}())}createSyncEngine(e,t){return function(o,l,c,d,p,y,_){const E=new ox(o,l,c,d,p,y);return _&&(E.$a=!0),E}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(o){const l=Pe(o);de("RemoteStore","RemoteStore shutting down."),l.k_.add(5),await Iu(l),l.Q_.shutdown(),l.K_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}Up.provider={build:()=>new Up};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jE{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Xa(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Xa(this.observer.error,e):hi("Uncaught Error in snapshot listener:",e.toString()))}eu(){this.muted=!0}Xa(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ex{constructor(e,t,i,o,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=o,this.user=Jt.UNAUTHENTICATED,this.clientId=Uw.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(i,async c=>{de("FirestoreClient","Received user=",c.uid),await this.authCredentialListener(c),this.user=c}),this.appCheckCredentials.start(i,c=>(de("FirestoreClient","Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new oi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=qm(t,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function op(n,e){n.asyncQueue.verifyOperationInProgress(),de("FirestoreClient","Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener(async o=>{i.isEqual(o)||(await _E(e.localStore,o),i=o)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function F_(n,e){n.asyncQueue.verifyOperationInProgress();const t=await Tx(n);de("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(i=>N_(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,o)=>N_(e.remoteStore,o)),n._onlineComponents=e}async function Tx(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){de("FirestoreClient","Using user provided OfflineComponentProvider");try{await op(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(o){return o.name==="FirebaseError"?o.code===X.FAILED_PRECONDITION||o.code===X.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11}(t))throw t;ka("Error using user provided cache. Falling back to memory cache: "+t),await op(n,new bh)}}else de("FirestoreClient","Using default OfflineComponentProvider"),await op(n,new wx(void 0));return n._offlineComponents}async function zE(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(de("FirestoreClient","Using user provided OnlineComponentProvider"),await F_(n,n._uninitializedComponentsProvider._online)):(de("FirestoreClient","Using default OnlineComponentProvider"),await F_(n,new Up))),n._onlineComponents}function Ix(n){return zE(n).then(e=>e.syncEngine)}async function BE(n){const e=await zE(n),t=e.eventManager;return t.onListen=ax.bind(null,e.syncEngine),t.onUnlisten=cx.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=lx.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=hx.bind(null,e.syncEngine),t}function Sx(n,e,t={}){const i=new oi;return n.asyncQueue.enqueueAndForget(async()=>function(l,c,d,p,y){const _=new jE({next:S=>{_.eu(),c.enqueueAndForget(()=>xE(l,E));const P=S.docs.has(d);!P&&S.fromCache?y.reject(new fe(X.UNAVAILABLE,"Failed to get document because the client is offline.")):P&&S.fromCache&&p&&p.source==="server"?y.reject(new fe(X.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(S)},error:S=>y.reject(S)}),E=new bE(xm(d.path),_,{includeMetadataChanges:!0,ua:!0});return kE(l,E)}(await BE(n),n.asyncQueue,e,t,i)),i.promise}function Rx(n,e,t={}){const i=new oi;return n.asyncQueue.enqueueAndForget(async()=>function(l,c,d,p,y){const _=new jE({next:S=>{_.eu(),c.enqueueAndForget(()=>xE(l,E)),S.fromCache&&p.source==="server"?y.reject(new fe(X.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(S)},error:S=>y.reject(S)}),E=new bE(d,_,{includeMetadataChanges:!0,ua:!0});return kE(l,E)}(await BE(n),n.asyncQueue,e,t,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $E(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U_=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qE(n,e,t){if(!t)throw new fe(X.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function Ax(n,e,t,i){if(e===!0&&i===!0)throw new fe(X.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function j_(n){if(!_e.isDocumentKey(n))throw new fe(X.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function z_(n){if(_e.isDocumentKey(n))throw new fe(X.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function nd(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Re()}function hs(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new fe(X.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=nd(n);throw new fe(X.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B_{constructor(e){var t,i;if(e.host===void 0){if(e.ssl!==void 0)throw new fe(X.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new fe(X.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Ax("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=$E((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(l){if(l.timeoutSeconds!==void 0){if(isNaN(l.timeoutSeconds))throw new fe(X.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (must not be NaN)`);if(l.timeoutSeconds<5)throw new fe(X.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (minimum allowed value is 5)`);if(l.timeoutSeconds>30)throw new fe(X.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,o){return i.timeoutSeconds===o.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class rd{constructor(e,t,i,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new B_({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new fe(X.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new fe(X.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new B_(e),e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new FC;switch(i.type){case"firstParty":return new BC(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new fe(X.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const i=U_.get(t);i&&(de("ComponentProvider","Removing Datastore"),U_.delete(t),i.terminate())}(this),Promise.resolve()}}function Cx(n,e,t,i={}){var o;const l=(n=hs(n,rd))._getSettings(),c=`${e}:${t}`;if(l.host!=="firestore.googleapis.com"&&l.host!==c&&ka("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},l),{host:c,ssl:!1})),i.mockUserToken){let d,p;if(typeof i.mockUserToken=="string")d=i.mockUserToken,p=Jt.MOCK_USER;else{d=HI(i.mockUserToken,(o=n._app)===null||o===void 0?void 0:o.options.projectId);const y=i.mockUserToken.sub||i.mockUserToken.user_id;if(!y)throw new fe(X.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new Jt(y)}n._authCredentials=new UC(new Fw(d,p))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let id=class HE{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new HE(this.firestore,e,this._query)}};class En{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new is(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new En(this.firestore,e,this._key)}}class is extends id{constructor(e,t,i){super(e,t,xm(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new En(this.firestore,null,new _e(e))}withConverter(e){return new is(this.firestore,e,this._path)}}function Px(n,e,...t){if(n=Mt(n),qE("collection","path",e),n instanceof rd){const i=it.fromString(e,...t);return z_(i),new is(n,null,i)}{if(!(n instanceof En||n instanceof is))throw new fe(X.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(it.fromString(e,...t));return z_(i),new is(n.firestore,null,i)}}function ss(n,e,...t){if(n=Mt(n),arguments.length===1&&(e=Uw.newId()),qE("doc","path",e),n instanceof rd){const i=it.fromString(e,...t);return j_(i),new En(n,null,new _e(i))}{if(!(n instanceof En||n instanceof is))throw new fe(X.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(it.fromString(e,...t));return j_(i),new En(n.firestore,n instanceof is?n.converter:null,new _e(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $_{constructor(e=Promise.resolve()){this.Iu=[],this.Eu=!1,this.du=[],this.Au=null,this.Ru=!1,this.Vu=!1,this.mu=[],this.r_=new EE(this,"async_queue_retry"),this.fu=()=>{const i=sp();i&&de("AsyncQueue","Visibility state changed to "+i.visibilityState),this.r_.Jo()},this.gu=e;const t=sp();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.fu)}get isShuttingDown(){return this.Eu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.pu(),this.yu(e)}enterRestrictedMode(e){if(!this.Eu){this.Eu=!0,this.Vu=e||!1;const t=sp();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.fu)}}enqueue(e){if(this.pu(),this.Eu)return new Promise(()=>{});const t=new oi;return this.yu(()=>this.Eu&&this.Vu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Iu.push(e),this.wu()))}async wu(){if(this.Iu.length!==0){try{await this.Iu[0](),this.Iu.shift(),this.r_.reset()}catch(e){if(!ja(e))throw e;de("AsyncQueue","Operation failed with retryable error: "+e)}this.Iu.length>0&&this.r_.jo(()=>this.wu())}}yu(e){const t=this.gu.then(()=>(this.Ru=!0,e().catch(i=>{this.Au=i,this.Ru=!1;const o=function(c){let d=c.message||"";return c.stack&&(d=c.stack.includes(c.message)?c.stack:c.message+`
`+c.stack),d}(i);throw hi("INTERNAL UNHANDLED ERROR: ",o),i}).then(i=>(this.Ru=!1,i))));return this.gu=t,t}enqueueAfterDelay(e,t,i){this.pu(),this.mu.indexOf(e)>-1&&(t=0);const o=$m.createAndSchedule(this,e,t,i,l=>this.Su(l));return this.du.push(o),o}pu(){this.Au&&Re()}verifyOperationInProgress(){}async bu(){let e;do e=this.gu,await e;while(e!==this.gu)}Du(e){for(const t of this.du)if(t.timerId===e)return!0;return!1}vu(e){return this.bu().then(()=>{this.du.sort((t,i)=>t.targetTimeMs-i.targetTimeMs);for(const t of this.du)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.bu()})}Cu(e){this.mu.push(e)}Su(e){const t=this.du.indexOf(e);this.du.splice(t,1)}}class Ru extends rd{constructor(e,t,i,o){super(e,t,i,o),this.type="firestore",this._queue=new $_,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new $_(e),this._firestoreClient=void 0,await e}}}function sd(n,e){const t=H0(),i="(default)",o=cm(t,"firestore").getImmediate({identifier:i});if(!o._initialized){const l=$I("firestore");l&&Cx(o,...l)}return o}function od(n){if(n._terminated)throw new fe(X.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||kx(n),n._firestoreClient}function kx(n){var e,t,i;const o=n._freezeSettings(),l=function(d,p,y,_){return new rP(d,p,y,_.host,_.ssl,_.experimentalForceLongPolling,_.experimentalAutoDetectLongPolling,$E(_.experimentalLongPollingOptions),_.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,o);n._componentsProvider||!((t=o.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((i=o.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(n._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),n._firestoreClient=new Ex(n._authCredentials,n._appCheckCredentials,n._queue,l,n._componentsProvider&&function(d){const p=d==null?void 0:d._online.build();return{_offline:d==null?void 0:d._offline.build(p),_online:p}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class La{constructor(e){this._byteString=e}static fromBase64String(e){try{return new La(qt.fromBase64String(e))}catch(t){throw new fe(X.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new La(qt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ad{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new fe(X.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new $t(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Km{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qm{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new fe(X.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new fe(X.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ue(this._lat,e._lat)||Ue(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gm{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,o){if(i.length!==o.length)return!1;for(let l=0;l<i.length;++l)if(i[l]!==o[l])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xx=/^__.*__$/;class bx{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new fs(e,this.data,this.fieldMask,t,this.fieldTransforms):new Eu(e,this.data,t,this.fieldTransforms)}}class WE{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new fs(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function KE(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Re()}}class Xm{constructor(e,t,i,o,l,c){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=o,l===void 0&&this.Fu(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Mu(){return this.settings.Mu}xu(e){return new Xm(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ou(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.xu({path:i,Nu:!1});return o.Lu(e),o}Bu(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.xu({path:i,Nu:!1});return o.Fu(),o}ku(e){return this.xu({path:void 0,Nu:!0})}qu(e){return Nh(e,this.settings.methodName,this.settings.Qu||!1,this.path,this.settings.Ku)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Fu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Lu(this.path.get(e))}Lu(e){if(e.length===0)throw this.qu("Document fields must not be empty");if(KE(this.Mu)&&xx.test(e))throw this.qu('Document fields cannot begin and end with "__"')}}class Nx{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||Zh(e)}$u(e,t,i,o=!1){return new Xm({Mu:e,methodName:t,Ku:i,path:$t.emptyPath(),Nu:!1,Qu:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Jm(n){const e=n._freezeSettings(),t=Zh(n._databaseId);return new Nx(n._databaseId,!!e.ignoreUndefinedProperties,t)}function QE(n,e,t,i,o,l={}){const c=n.$u(l.merge||l.mergeFields?2:0,e,t,o);Ym("Data must be an object, but it was:",c,i);const d=GE(i,c);let p,y;if(l.merge)p=new xn(c.fieldMask),y=c.fieldTransforms;else if(l.mergeFields){const _=[];for(const E of l.mergeFields){const S=jp(e,E,t);if(!c.contains(S))throw new fe(X.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);JE(_,S)||_.push(S)}p=new xn(_),y=c.fieldTransforms.filter(E=>p.covers(E.field))}else p=null,y=c.fieldTransforms;return new bx(new wn(d),p,y)}class ld extends Km{_toFieldTransform(e){if(e.Mu!==2)throw e.Mu===1?e.qu(`${this._methodName}() can only appear at the top level of your update data`):e.qu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof ld}}function Ox(n,e,t,i){const o=n.$u(1,e,t);Ym("Data must be an object, but it was:",o,i);const l=[],c=wn.empty();ds(i,(p,y)=>{const _=Zm(e,p,t);y=Mt(y);const E=o.Bu(_);if(y instanceof ld)l.push(_);else{const S=Au(y,E);S!=null&&(l.push(_),c.set(_,S))}});const d=new xn(l);return new WE(c,d,o.fieldTransforms)}function Dx(n,e,t,i,o,l){const c=n.$u(1,e,t),d=[jp(e,i,t)],p=[o];if(l.length%2!=0)throw new fe(X.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let S=0;S<l.length;S+=2)d.push(jp(e,l[S])),p.push(l[S+1]);const y=[],_=wn.empty();for(let S=d.length-1;S>=0;--S)if(!JE(y,d[S])){const P=d[S];let x=p[S];x=Mt(x);const V=c.Bu(P);if(x instanceof ld)y.push(P);else{const b=Au(x,V);b!=null&&(y.push(P),_.set(P,b))}}const E=new xn(y);return new WE(_,E,c.fieldTransforms)}function Lx(n,e,t,i=!1){return Au(t,n.$u(i?4:3,e))}function Au(n,e){if(XE(n=Mt(n)))return Ym("Unsupported field value:",e,n),GE(n,e);if(n instanceof Km)return function(i,o){if(!KE(o.Mu))throw o.qu(`${i._methodName}() can only be used with update() and set()`);if(!o.path)throw o.qu(`${i._methodName}() is not currently supported inside arrays`);const l=i._toFieldTransform(o);l&&o.fieldTransforms.push(l)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Nu&&e.Mu!==4)throw e.qu("Nested arrays are not supported");return function(i,o){const l=[];let c=0;for(const d of i){let p=Au(d,o.ku(c));p==null&&(p={nullValue:"NULL_VALUE"}),l.push(p),c++}return{arrayValue:{values:l}}}(n,e)}return function(i,o){if((i=Mt(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return RP(o.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const l=kt.fromDate(i);return{timestampValue:Ph(o.serializer,l)}}if(i instanceof kt){const l=new kt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Ph(o.serializer,l)}}if(i instanceof Qm)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof La)return{bytesValue:hE(o.serializer,i._byteString)};if(i instanceof En){const l=o.databaseId,c=i.firestore._databaseId;if(!c.isEqual(l))throw o.qu(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:Lm(i.firestore._databaseId||o.databaseId,i._key.path)}}if(i instanceof Gm)return function(c,d){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:c.toArray().map(p=>{if(typeof p!="number")throw d.qu("VectorValues must only contain numeric values.");return bm(d.serializer,p)})}}}}}}(i,o);throw o.qu(`Unsupported field value: ${nd(i)}`)}(n,e)}function GE(n,e){const t={};return jw(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ds(n,(i,o)=>{const l=Au(o,e.Ou(i));l!=null&&(t[i]=l)}),{mapValue:{fields:t}}}function XE(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof kt||n instanceof Qm||n instanceof La||n instanceof En||n instanceof Km||n instanceof Gm)}function Ym(n,e,t){if(!XE(t)||!function(o){return typeof o=="object"&&o!==null&&(Object.getPrototypeOf(o)===Object.prototype||Object.getPrototypeOf(o)===null)}(t)){const i=nd(t);throw i==="an object"?e.qu(n+" a custom object"):e.qu(n+" "+i)}}function jp(n,e,t){if((e=Mt(e))instanceof ad)return e._internalPath;if(typeof e=="string")return Zm(n,e);throw Nh("Field path arguments must be of type string or ",n,!1,void 0,t)}const Vx=new RegExp("[~\\*/\\[\\]]");function Zm(n,e,t){if(e.search(Vx)>=0)throw Nh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new ad(...e.split("."))._internalPath}catch{throw Nh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Nh(n,e,t,i,o){const l=i&&!i.isEmpty(),c=o!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let p="";return(l||c)&&(p+=" (found",l&&(p+=` in field ${i}`),c&&(p+=` in document ${o}`),p+=")"),new fe(X.INVALID_ARGUMENT,d+n+p)}function JE(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YE{constructor(e,t,i,o,l){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=o,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new En(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Mx(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(eg("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class Mx extends YE{data(){return super.data()}}function eg(n,e){return typeof e=="string"?Zm(n,e):e instanceof ad?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fx(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new fe(X.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class tg{}class Ux extends tg{}function jx(n,e,...t){let i=[];e instanceof tg&&i.push(e),i=i.concat(t),function(l){const c=l.filter(p=>p instanceof ng).length,d=l.filter(p=>p instanceof ud).length;if(c>1||c>0&&d>0)throw new fe(X.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const o of i)n=o._apply(n);return n}class ud extends Ux{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new ud(e,t,i)}_apply(e){const t=this._parse(e);return ZE(e._query,t),new id(e.firestore,e.converter,xp(e._query,t))}_parse(e){const t=Jm(e.firestore);return function(l,c,d,p,y,_,E){let S;if(y.isKeyField()){if(_==="array-contains"||_==="array-contains-any")throw new fe(X.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if(_==="in"||_==="not-in"){H_(E,_);const P=[];for(const x of E)P.push(q_(p,l,x));S={arrayValue:{values:P}}}else S=q_(p,l,E)}else _!=="in"&&_!=="not-in"&&_!=="array-contains-any"||H_(E,_),S=Lx(d,c,E,_==="in"||_==="not-in");return wt.create(y,_,S)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function zx(n,e,t){const i=e,o=eg("where",n);return ud._create(o,i,t)}class ng extends tg{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new ng(e,t)}_parse(e){const t=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return t.length===1?t[0]:cr.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(o,l){let c=o;const d=l.getFlattenedFilters();for(const p of d)ZE(c,p),c=xp(c,p)}(e._query,t),new id(e.firestore,e.converter,xp(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function q_(n,e,t){if(typeof(t=Mt(t))=="string"){if(t==="")throw new fe(X.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Gw(e)&&t.indexOf("/")!==-1)throw new fe(X.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(it.fromString(t));if(!_e.isDocumentKey(i))throw new fe(X.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return h_(n,new _e(i))}if(t instanceof En)return h_(n,t._key);throw new fe(X.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${nd(t)}.`)}function H_(n,e){if(!Array.isArray(n)||n.length===0)throw new fe(X.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function ZE(n,e){const t=function(o,l){for(const c of o)for(const d of c.getFlattenedFilters())if(l.indexOf(d.op)>=0)return d.op;return null}(n.filters,function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new fe(X.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new fe(X.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class Bx{convertValue(e,t="none"){switch(us(e)){case 0:return null;case 1:return e.booleanValue;case 2:return mt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ls(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Re()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return ds(e,(o,l)=>{i[o]=this.convertValue(l,t)}),i}convertVectorValue(e){var t,i,o;const l=(o=(i=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||i===void 0?void 0:i.values)===null||o===void 0?void 0:o.map(c=>mt(c.doubleValue));return new Gm(l)}convertGeoPoint(e){return new Qm(mt(e.latitude),mt(e.longitude))}convertArray(e,t){return(e.values||[]).map(i=>this.convertValue(i,t))}convertServerTimestamp(e,t){switch(t){case"previous":const i=Kh(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(tu(e));default:return null}}convertTimestamp(e){const t=as(e);return new kt(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=it.fromString(e);Xe(yE(i));const o=new nu(i.get(1),i.get(3)),l=new _e(i.popFirst(5));return o.isEqual(t)||hi(`Document ${l} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eT(n,e,t){let i;return i=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ql{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class tT extends YE{constructor(e,t,i,o,l,c){super(e,t,i,o,c),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new lh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(eg("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}}class lh extends tT{data(e={}){return super.data(e)}}class $x{constructor(e,t,i,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new ql(o.hasPendingWrites,o.fromCache),this.query=i}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(i=>{e.call(t,new lh(this._firestore,this._userDataWriter,i.key,i,new ql(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new fe(X.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(o,l){if(o._snapshot.oldDocs.isEmpty()){let c=0;return o._snapshot.docChanges.map(d=>{const p=new lh(o._firestore,o._userDataWriter,d.doc.key,d.doc,new ql(o._snapshot.mutatedKeys.has(d.doc.key),o._snapshot.fromCache),o.query.converter);return d.doc,{type:"added",doc:p,oldIndex:-1,newIndex:c++}})}{let c=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(d=>l||d.type!==3).map(d=>{const p=new lh(o._firestore,o._userDataWriter,d.doc.key,d.doc,new ql(o._snapshot.mutatedKeys.has(d.doc.key),o._snapshot.fromCache),o.query.converter);let y=-1,_=-1;return d.type!==0&&(y=c.indexOf(d.doc.key),c=c.delete(d.doc.key)),d.type!==1&&(c=c.add(d.doc),_=c.indexOf(d.doc.key)),{type:qx(d.type),doc:p,oldIndex:y,newIndex:_}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function qx(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Re()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oh(n){n=hs(n,En);const e=hs(n.firestore,Ru);return Sx(od(e),n._key).then(t=>Wx(e,n,t))}class nT extends Bx{constructor(e){super(),this.firestore=e}convertBytes(e){return new La(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new En(this.firestore,null,t)}}function Hx(n){n=hs(n,id);const e=hs(n.firestore,Ru),t=od(e),i=new nT(e);return Fx(n._query),Rx(t,n._query).then(o=>new $x(e,i,n,o))}function W_(n,e,t){n=hs(n,En);const i=hs(n.firestore,Ru),o=eT(n.converter,e,t);return rT(i,[QE(Jm(i),"setDoc",n._key,o,n.converter!==null,t).toMutation(n._key,qn.none())])}function rT(n,e){return function(i,o){const l=new oi;return i.asyncQueue.enqueueAndForget(async()=>dx(await Ix(i),o,l)),l.promise}(od(n),e)}function Wx(n,e,t){const i=t.docs.get(e._key),o=new nT(n);return new tT(n,o,e._key,i,new ql(t.hasPendingWrites,t.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kx{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Jm(e)}set(e,t,i){this._verifyNotCommitted();const o=ap(e,this._firestore),l=eT(o.converter,t,i),c=QE(this._dataReader,"WriteBatch.set",o._key,l,o.converter!==null,i);return this._mutations.push(c.toMutation(o._key,qn.none())),this}update(e,t,i,...o){this._verifyNotCommitted();const l=ap(e,this._firestore);let c;return c=typeof(t=Mt(t))=="string"||t instanceof ad?Dx(this._dataReader,"WriteBatch.update",l._key,t,i,o):Ox(this._dataReader,"WriteBatch.update",l._key,t),this._mutations.push(c.toMutation(l._key,qn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=ap(e,this._firestore);return this._mutations=this._mutations.concat(new Nm(t._key,qn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new fe(X.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function ap(n,e){if((n=Mt(n)).firestore!==e)throw new fe(X.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iT(n){return od(n=hs(n,Ru)),new Kx(n,e=>rT(n,e))}(function(e,t=!0){(function(o){Fa=o})(Va),Ca(new io("firestore",(i,{instanceIdentifier:o,options:l})=>{const c=i.getProvider("app").getImmediate(),d=new Ru(new jC(i.getProvider("auth-internal")),new qC(i.getProvider("app-check-internal")),function(y,_){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new fe(X.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new nu(y.options.projectId,_)}(c,o),c);return l=Object.assign({useFetchStreams:t},l),d._setSettings(l),d},"PUBLIC").setMultipleInstances(!0)),rs(s_,"4.7.5",e),rs(s_,"4.7.5","esm2017")})();const Qx=async(n,e)=>{const t=sd(),i=Px(t,"users"),o=jx(i,zx("partnerCode","==",e)),l=await Hx(o);if(l.empty)throw new Error("Partner code not found.");const c=l.docs[0];if(c.data().partnerUid)throw new Error("This partner is already connected with someone else.");const p=iT(t),y=ss(i,n),_=ss(i,c.id);p.update(y,{partnerUid:c.id}),p.update(_,{partnerUid:n}),await p.commit()},Gx=async n=>{const e=sd(),t=ss(e,"users",n),i=await Oh(t);if(!i.exists())throw new Error("User not found.");const{partnerUid:o}=i.data();if(!o)throw new Error("No partner to disconnect.");const l=ss(e,"users",o),c=iT(e);c.update(t,{partnerUid:null}),c.update(l,{partnerUid:null}),await c.commit()},Xx=()=>{const{currentUser:n}=pi(),[e,t]=le.useState(""),[i,o]=le.useState(!1),l=()=>{n&&navigator.clipboard.writeText(n.partnerCode||"").then(()=>ke.success("Partner code copied to clipboard!")).catch(()=>ke.error("Failed to copy code."))},c=async()=>{if(!e.trim()){ke.error("Please enter a valid partner code.");return}try{o(!0),await Qx((n==null?void 0:n.uid)||"",e),ke.success("Connected with partner successfully!"),t("")}catch(p){ke.error("Failed to connect with partner. Please try again."),console.error("Error connecting with partner:",p)}finally{o(!1)}},d=async()=>{try{await Gx((n==null?void 0:n.uid)||""),ke.success("Disconnected from partner.")}catch(p){ke.error("Failed to disconnect from partner."),console.error("Error disconnecting from partner:",p)}};return U.jsxs("div",{className:"max-w-2xl mx-auto p-6 bg-white shadow-md rounded-md",children:[U.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Settings"}),U.jsxs("div",{className:"mb-6",children:[U.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Partner Management"}),U.jsxs("div",{className:"mb-4",children:[U.jsx("p",{className:"text-gray-700",children:"Share this code with your partner to connect your accounts:"}),U.jsx("div",{className:"flex flex-wrap items-center mt-4 max-w-full",children:U.jsxs("div",{className:"flex flex-wrap sm:flex-nowrap items-center mt-4 max-w-full",children:[U.jsx("input",{type:"text",readOnly:!0,value:(n==null?void 0:n.partnerCode)||"Loading...",className:"w-full sm:flex-grow p-2 border border-gray-300 rounded-t-lg sm:rounded-l-lg sm:rounded-t-none focus:outline-none bg-gray-100"}),U.jsx("button",{onClick:l,className:"w-full sm:w-auto px-4 py-2 bg-blue-600 text-white font-medium rounded-b-lg sm:rounded-r-lg sm:rounded-b-none hover:bg-blue-700 focus:outline-none whitespace-nowrap",children:"Copy Code"})]})})]}),!(n!=null&&n.partnerUid)&&U.jsxs("div",{className:"mb-4 mt-8",children:[U.jsx("p",{className:"text-gray-700",children:"Enter your partner's code to connect:"}),U.jsxs("div",{className:"flex items-center mt-2",children:[U.jsx("input",{type:"text",value:e,onChange:p=>t(p.target.value),placeholder:"Enter partner code",className:"w-full p-2 border border-gray-300 rounded-l-lg focus:outline-none"}),U.jsx("button",{onClick:c,disabled:i,className:`px-4 py-2 ${i?"bg-gray-400 cursor-not-allowed":"bg-green-600 hover:bg-green-700"} text-white font-medium rounded-r-lg focus:outline-none`,children:i?"Connecting...":"Connect"})]})]}),(n==null?void 0:n.partnerUid)&&U.jsxs("div",{className:"mb-4 mt-8",children:[U.jsx("p",{className:"text-gray-700",children:"You are currently connected with a partner."}),U.jsx("button",{onClick:d,className:"px-4 py-2 bg-red-600 text-white font-medium rounded-lg hover:bg-red-700 focus:outline-none mt-2",children:"Disconnect Partner"})]})]})]})},Jx=()=>{var y;const{currentUser:n,isAuthorizing:e}=pi(),[t,i]=le.useState("list"),[o,l]=le.useState(!1),c=le.useRef(null);if(le.useEffect(()=>{const _=E=>{c.current&&!c.current.contains(E.target)&&l(!1)};return o?document.addEventListener("mousedown",_):document.removeEventListener("mousedown",_),()=>{document.removeEventListener("mousedown",_)}},[o]),e)return U.jsx(_u,{});if(!n)return U.jsx(wC,{});const d=((y=n.displayName)==null?void 0:y.split(" ")[0])||"User",p=async()=>{try{await nA(Tm),console.log("User signed out successfully")}catch(_){console.error("Error signing out:",_)}};return U.jsxs("div",{className:"min-h-screen bg-gray-100",children:[U.jsxs("nav",{className:"bg-gray-800 text-white p-4 flex items-center justify-between",children:[U.jsxs("div",{className:"flex gap-4",children:[U.jsx("button",{className:`px-4 py-2 rounded ${t==="list"?"bg-gray-600":"hover:bg-gray-700"}`,onClick:()=>i("list"),children:"Media Lists"}),U.jsx("button",{className:`px-4 py-2 rounded ${t==="search"?"bg-gray-600":"hover:bg-gray-700"}`,onClick:()=>i("search"),children:"Search"}),U.jsx("button",{className:`px-4 py-2 rounded ${t==="discover"?"bg-gray-600":"hover:bg-gray-700"}`,onClick:()=>i("discover"),children:"Discover"})]}),U.jsxs("div",{className:"flex items-center gap-2 relative",ref:c,children:[U.jsxs("div",{className:"flex items-center gap-2",children:[U.jsx("img",{src:n.photoURL||"https://via.placeholder.com/32",alt:d,className:"w-8 h-8 rounded-full",referrerPolicy:"no-referrer",loading:"lazy"}),U.jsx("span",{className:"text-sm",children:d})]}),U.jsx("button",{className:"text-white p-2 hover:bg-gray-700 rounded-full focus:outline-none",onClick:()=>l(_=>!_),children:U.jsx(PC,{size:24})}),o&&U.jsxs("div",{className:"absolute right-0 mt-32 w-48 bg-white text-gray-800 shadow-lg rounded-md",children:[U.jsx("button",{className:"w-full text-left px-4 py-2 hover:bg-gray-100",onClick:()=>{i("settings"),l(!1)},children:"Settings"}),U.jsx("button",{className:"w-full text-left px-4 py-2 hover:bg-gray-100 text-red-600",onClick:p,children:"Logout"})]})]})]}),U.jsx(LI,{}),U.jsxs("div",{className:"p-4",children:[t==="list"&&U.jsx(LC,{}),t==="search"&&U.jsx(OC,{}),t==="settings"&&U.jsx(Xx,{}),t==="discover"&&U.jsx(MC,{})]})]})};var Ba=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(n){return this.listeners.add(n),this.onSubscribe(),()=>{this.listeners.delete(n),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},ao=typeof window>"u"||"Deno"in globalThis;function $n(){}function Yx(n,e){return typeof n=="function"?n(e):n}function zp(n){return typeof n=="number"&&n>=0&&n!==1/0}function sT(n,e){return Math.max(n+(e||0)-Date.now(),0)}function fa(n,e){return typeof n=="function"?n(e):n}function lr(n,e){return typeof n=="function"?n(e):n}function K_(n,e){const{type:t="all",exact:i,fetchStatus:o,predicate:l,queryKey:c,stale:d}=n;if(c){if(i){if(e.queryHash!==rg(c,e.options))return!1}else if(!ou(e.queryKey,c))return!1}if(t!=="all"){const p=e.isActive();if(t==="active"&&!p||t==="inactive"&&p)return!1}return!(typeof d=="boolean"&&e.isStale()!==d||o&&o!==e.state.fetchStatus||l&&!l(e))}function Q_(n,e){const{exact:t,status:i,predicate:o,mutationKey:l}=n;if(l){if(!e.options.mutationKey)return!1;if(t){if(lo(e.options.mutationKey)!==lo(l))return!1}else if(!ou(e.options.mutationKey,l))return!1}return!(i&&e.state.status!==i||o&&!o(e))}function rg(n,e){return((e==null?void 0:e.queryKeyHashFn)||lo)(n)}function lo(n){return JSON.stringify(n,(e,t)=>Bp(t)?Object.keys(t).sort().reduce((i,o)=>(i[o]=t[o],i),{}):t)}function ou(n,e){return n===e?!0:typeof n!=typeof e?!1:n&&e&&typeof n=="object"&&typeof e=="object"?!Object.keys(e).some(t=>!ou(n[t],e[t])):!1}function oT(n,e){if(n===e)return n;const t=G_(n)&&G_(e);if(t||Bp(n)&&Bp(e)){const i=t?n:Object.keys(n),o=i.length,l=t?e:Object.keys(e),c=l.length,d=t?[]:{};let p=0;for(let y=0;y<c;y++){const _=t?y:l[y];(!t&&i.includes(_)||t)&&n[_]===void 0&&e[_]===void 0?(d[_]=void 0,p++):(d[_]=oT(n[_],e[_]),d[_]===n[_]&&n[_]!==void 0&&p++)}return o===c&&p===o?n:d}return e}function Dh(n,e){if(!e||Object.keys(n).length!==Object.keys(e).length)return!1;for(const t in n)if(n[t]!==e[t])return!1;return!0}function G_(n){return Array.isArray(n)&&n.length===Object.keys(n).length}function Bp(n){if(!X_(n))return!1;const e=n.constructor;if(e===void 0)return!0;const t=e.prototype;return!(!X_(t)||!t.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(n)!==Object.prototype)}function X_(n){return Object.prototype.toString.call(n)==="[object Object]"}function Zx(n){return new Promise(e=>{setTimeout(e,n)})}function $p(n,e,t){return typeof t.structuralSharing=="function"?t.structuralSharing(n,e):t.structuralSharing!==!1?oT(n,e):e}function eb(n,e,t=0){const i=[...n,e];return t&&i.length>t?i.slice(1):i}function tb(n,e,t=0){const i=[e,...n];return t&&i.length>t?i.slice(0,-1):i}var ig=Symbol();function aT(n,e){return!n.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!n.queryFn||n.queryFn===ig?()=>Promise.reject(new Error(`Missing queryFn: '${n.queryHash}'`)):n.queryFn}var Ws,Hi,pa,v0,nb=(v0=class extends Ba{constructor(){super();Ie(this,Ws);Ie(this,Hi);Ie(this,pa);ce(this,pa,e=>{if(!ao&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}})}onSubscribe(){N(this,Hi)||this.setEventListener(N(this,pa))}onUnsubscribe(){var e;this.hasListeners()||((e=N(this,Hi))==null||e.call(this),ce(this,Hi,void 0))}setEventListener(e){var t;ce(this,pa,e),(t=N(this,Hi))==null||t.call(this),ce(this,Hi,e(i=>{typeof i=="boolean"?this.setFocused(i):this.onFocus()}))}setFocused(e){N(this,Ws)!==e&&(ce(this,Ws,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(t=>{t(e)})}isFocused(){var e;return typeof N(this,Ws)=="boolean"?N(this,Ws):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},Ws=new WeakMap,Hi=new WeakMap,pa=new WeakMap,v0),sg=new nb,ma,Wi,ga,_0,rb=(_0=class extends Ba{constructor(){super();Ie(this,ma,!0);Ie(this,Wi);Ie(this,ga);ce(this,ga,e=>{if(!ao&&window.addEventListener){const t=()=>e(!0),i=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",i,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",i)}}})}onSubscribe(){N(this,Wi)||this.setEventListener(N(this,ga))}onUnsubscribe(){var e;this.hasListeners()||((e=N(this,Wi))==null||e.call(this),ce(this,Wi,void 0))}setEventListener(e){var t;ce(this,ga,e),(t=N(this,Wi))==null||t.call(this),ce(this,Wi,e(this.setOnline.bind(this)))}setOnline(e){N(this,ma)!==e&&(ce(this,ma,e),this.listeners.forEach(i=>{i(e)}))}isOnline(){return N(this,ma)}},ma=new WeakMap,Wi=new WeakMap,ga=new WeakMap,_0),Lh=new rb;function qp(){let n,e;const t=new Promise((o,l)=>{n=o,e=l});t.status="pending",t.catch(()=>{});function i(o){Object.assign(t,o),delete t.resolve,delete t.reject}return t.resolve=o=>{i({status:"fulfilled",value:o}),n(o)},t.reject=o=>{i({status:"rejected",reason:o}),e(o)},t}function ib(n){return Math.min(1e3*2**n,3e4)}function lT(n){return(n??"online")==="online"?Lh.isOnline():!0}var uT=class extends Error{constructor(n){super("CancelledError"),this.revert=n==null?void 0:n.revert,this.silent=n==null?void 0:n.silent}};function lp(n){return n instanceof uT}function cT(n){let e=!1,t=0,i=!1,o;const l=qp(),c=V=>{var b;i||(S(new uT(V)),(b=n.abort)==null||b.call(n))},d=()=>{e=!0},p=()=>{e=!1},y=()=>sg.isFocused()&&(n.networkMode==="always"||Lh.isOnline())&&n.canRun(),_=()=>lT(n.networkMode)&&n.canRun(),E=V=>{var b;i||(i=!0,(b=n.onSuccess)==null||b.call(n,V),o==null||o(),l.resolve(V))},S=V=>{var b;i||(i=!0,(b=n.onError)==null||b.call(n,V),o==null||o(),l.reject(V))},P=()=>new Promise(V=>{var b;o=G=>{(i||y())&&V(G)},(b=n.onPause)==null||b.call(n)}).then(()=>{var V;o=void 0,i||(V=n.onContinue)==null||V.call(n)}),x=()=>{if(i)return;let V;const b=t===0?n.initialPromise:void 0;try{V=b??n.fn()}catch(G){V=Promise.reject(G)}Promise.resolve(V).then(E).catch(G=>{var ae;if(i)return;const Q=n.retry??(ao?0:3),K=n.retryDelay??ib,te=typeof K=="function"?K(t,G):K,oe=Q===!0||typeof Q=="number"&&t<Q||typeof Q=="function"&&Q(t,G);if(e||!oe){S(G);return}t++,(ae=n.onFail)==null||ae.call(n,t,G),Zx(te).then(()=>y()?void 0:P()).then(()=>{e?S(G):x()})})};return{promise:l,cancel:c,continue:()=>(o==null||o(),l),cancelRetry:d,continueRetry:p,canStart:_,start:()=>(_()?x():P().then(x),l)}}function sb(){let n=[],e=0,t=d=>{d()},i=d=>{d()},o=d=>setTimeout(d,0);const l=d=>{e?n.push(d):o(()=>{t(d)})},c=()=>{const d=n;n=[],d.length&&o(()=>{i(()=>{d.forEach(p=>{t(p)})})})};return{batch:d=>{let p;e++;try{p=d()}finally{e--,e||c()}return p},batchCalls:d=>(...p)=>{l(()=>{d(...p)})},schedule:l,setNotifyFunction:d=>{t=d},setBatchNotifyFunction:d=>{i=d},setScheduler:d=>{o=d}}}var Pt=sb(),Ks,w0,hT=(w0=class{constructor(){Ie(this,Ks)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),zp(this.gcTime)&&ce(this,Ks,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(n){this.gcTime=Math.max(this.gcTime||0,n??(ao?1/0:5*60*1e3))}clearGcTimeout(){N(this,Ks)&&(clearTimeout(N(this,Ks)),ce(this,Ks,void 0))}},Ks=new WeakMap,w0),ya,va,Bn,Xt,lu,Qs,or,Jr,E0,ob=(E0=class extends hT{constructor(e){super();Ie(this,or);Ie(this,ya);Ie(this,va);Ie(this,Bn);Ie(this,Xt);Ie(this,lu);Ie(this,Qs);ce(this,Qs,!1),ce(this,lu,e.defaultOptions),this.setOptions(e.options),this.observers=[],ce(this,Bn,e.cache),this.queryKey=e.queryKey,this.queryHash=e.queryHash,ce(this,ya,ab(this.options)),this.state=e.state??N(this,ya),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=N(this,Xt))==null?void 0:e.promise}setOptions(e){this.options={...N(this,lu),...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&N(this,Bn).remove(this)}setData(e,t){const i=$p(this.state.data,e,this.options);return be(this,or,Jr).call(this,{data:i,type:"success",dataUpdatedAt:t==null?void 0:t.updatedAt,manual:t==null?void 0:t.manual}),i}setState(e,t){be(this,or,Jr).call(this,{type:"setState",state:e,setStateOptions:t})}cancel(e){var i,o;const t=(i=N(this,Xt))==null?void 0:i.promise;return(o=N(this,Xt))==null||o.cancel(e),t?t.then($n).catch($n):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(N(this,ya))}isActive(){return this.observers.some(e=>lr(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===ig||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(e=0){return this.state.isInvalidated||this.state.data===void 0||!sT(this.state.dataUpdatedAt,e)}onFocus(){var t;const e=this.observers.find(i=>i.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(t=N(this,Xt))==null||t.continue()}onOnline(){var t;const e=this.observers.find(i=>i.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(t=N(this,Xt))==null||t.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),N(this,Bn).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(t=>t!==e),this.observers.length||(N(this,Xt)&&(N(this,Qs)?N(this,Xt).cancel({revert:!0}):N(this,Xt).cancelRetry()),this.scheduleGc()),N(this,Bn).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||be(this,or,Jr).call(this,{type:"invalidate"})}fetch(e,t){var p,y,_;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(t!=null&&t.cancelRefetch))this.cancel({silent:!0});else if(N(this,Xt))return N(this,Xt).continueRetry(),N(this,Xt).promise}if(e&&this.setOptions(e),!this.options.queryFn){const E=this.observers.find(S=>S.options.queryFn);E&&this.setOptions(E.options)}const i=new AbortController,o=E=>{Object.defineProperty(E,"signal",{enumerable:!0,get:()=>(ce(this,Qs,!0),i.signal)})},l=()=>{const E=aT(this.options,t),S={queryKey:this.queryKey,meta:this.meta};return o(S),ce(this,Qs,!1),this.options.persister?this.options.persister(E,S,this):E(S)},c={fetchOptions:t,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:l};o(c),(p=this.options.behavior)==null||p.onFetch(c,this),ce(this,va,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((y=c.fetchOptions)==null?void 0:y.meta))&&be(this,or,Jr).call(this,{type:"fetch",meta:(_=c.fetchOptions)==null?void 0:_.meta});const d=E=>{var S,P,x,V;lp(E)&&E.silent||be(this,or,Jr).call(this,{type:"error",error:E}),lp(E)||((P=(S=N(this,Bn).config).onError)==null||P.call(S,E,this),(V=(x=N(this,Bn).config).onSettled)==null||V.call(x,this.state.data,E,this)),this.scheduleGc()};return ce(this,Xt,cT({initialPromise:t==null?void 0:t.initialPromise,fn:c.fetchFn,abort:i.abort.bind(i),onSuccess:E=>{var S,P,x,V;if(E===void 0){d(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(E)}catch(b){d(b);return}(P=(S=N(this,Bn).config).onSuccess)==null||P.call(S,E,this),(V=(x=N(this,Bn).config).onSettled)==null||V.call(x,E,this.state.error,this),this.scheduleGc()},onError:d,onFail:(E,S)=>{be(this,or,Jr).call(this,{type:"failed",failureCount:E,error:S})},onPause:()=>{be(this,or,Jr).call(this,{type:"pause"})},onContinue:()=>{be(this,or,Jr).call(this,{type:"continue"})},retry:c.options.retry,retryDelay:c.options.retryDelay,networkMode:c.options.networkMode,canRun:()=>!0})),N(this,Xt).start()}},ya=new WeakMap,va=new WeakMap,Bn=new WeakMap,Xt=new WeakMap,lu=new WeakMap,Qs=new WeakMap,or=new WeakSet,Jr=function(e){const t=i=>{switch(e.type){case"failed":return{...i,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...i,fetchStatus:"paused"};case"continue":return{...i,fetchStatus:"fetching"};case"fetch":return{...i,...dT(i.data,this.options),fetchMeta:e.meta??null};case"success":return{...i,data:e.data,dataUpdateCount:i.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const o=e.error;return lp(o)&&o.revert&&N(this,va)?{...N(this,va),fetchStatus:"idle"}:{...i,error:o,errorUpdateCount:i.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:i.fetchFailureCount+1,fetchFailureReason:o,fetchStatus:"idle",status:"error"};case"invalidate":return{...i,isInvalidated:!0};case"setState":return{...i,...e.state}}};this.state=t(this.state),Pt.batch(()=>{this.observers.forEach(i=>{i.onQueryUpdate()}),N(this,Bn).notify({query:this,type:"updated",action:e})})},E0);function dT(n,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:lT(e.networkMode)?"fetching":"paused",...n===void 0&&{error:null,status:"pending"}}}function ab(n){const e=typeof n.initialData=="function"?n.initialData():n.initialData,t=e!==void 0,i=t?typeof n.initialDataUpdatedAt=="function"?n.initialDataUpdatedAt():n.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:t?i??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:t?"success":"pending",fetchStatus:"idle"}}var Sr,T0,lb=(T0=class extends Ba{constructor(e={}){super();Ie(this,Sr);this.config=e,ce(this,Sr,new Map)}build(e,t,i){const o=t.queryKey,l=t.queryHash??rg(o,t);let c=this.get(l);return c||(c=new ob({cache:this,queryKey:o,queryHash:l,options:e.defaultQueryOptions(t),state:i,defaultOptions:e.getQueryDefaults(o)}),this.add(c)),c}add(e){N(this,Sr).has(e.queryHash)||(N(this,Sr).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const t=N(this,Sr).get(e.queryHash);t&&(e.destroy(),t===e&&N(this,Sr).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Pt.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return N(this,Sr).get(e)}getAll(){return[...N(this,Sr).values()]}find(e){const t={exact:!0,...e};return this.getAll().find(i=>K_(t,i))}findAll(e={}){const t=this.getAll();return Object.keys(e).length>0?t.filter(i=>K_(e,i)):t}notify(e){Pt.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){Pt.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Pt.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Sr=new WeakMap,T0),Rr,on,Gs,Ar,zi,I0,ub=(I0=class extends hT{constructor(e){super();Ie(this,Ar);Ie(this,Rr);Ie(this,on);Ie(this,Gs);this.mutationId=e.mutationId,ce(this,on,e.mutationCache),ce(this,Rr,[]),this.state=e.state||fT(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){N(this,Rr).includes(e)||(N(this,Rr).push(e),this.clearGcTimeout(),N(this,on).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){ce(this,Rr,N(this,Rr).filter(t=>t!==e)),this.scheduleGc(),N(this,on).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){N(this,Rr).length||(this.state.status==="pending"?this.scheduleGc():N(this,on).remove(this))}continue(){var e;return((e=N(this,Gs))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var o,l,c,d,p,y,_,E,S,P,x,V,b,G,Q,K,te,oe,ae,C;ce(this,Gs,cT({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(I,R)=>{be(this,Ar,zi).call(this,{type:"failed",failureCount:I,error:R})},onPause:()=>{be(this,Ar,zi).call(this,{type:"pause"})},onContinue:()=>{be(this,Ar,zi).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>N(this,on).canRun(this)}));const t=this.state.status==="pending",i=!N(this,Gs).canStart();try{if(!t){be(this,Ar,zi).call(this,{type:"pending",variables:e,isPaused:i}),await((l=(o=N(this,on).config).onMutate)==null?void 0:l.call(o,e,this));const R=await((d=(c=this.options).onMutate)==null?void 0:d.call(c,e));R!==this.state.context&&be(this,Ar,zi).call(this,{type:"pending",context:R,variables:e,isPaused:i})}const I=await N(this,Gs).start();return await((y=(p=N(this,on).config).onSuccess)==null?void 0:y.call(p,I,e,this.state.context,this)),await((E=(_=this.options).onSuccess)==null?void 0:E.call(_,I,e,this.state.context)),await((P=(S=N(this,on).config).onSettled)==null?void 0:P.call(S,I,null,this.state.variables,this.state.context,this)),await((V=(x=this.options).onSettled)==null?void 0:V.call(x,I,null,e,this.state.context)),be(this,Ar,zi).call(this,{type:"success",data:I}),I}catch(I){try{throw await((G=(b=N(this,on).config).onError)==null?void 0:G.call(b,I,e,this.state.context,this)),await((K=(Q=this.options).onError)==null?void 0:K.call(Q,I,e,this.state.context)),await((oe=(te=N(this,on).config).onSettled)==null?void 0:oe.call(te,void 0,I,this.state.variables,this.state.context,this)),await((C=(ae=this.options).onSettled)==null?void 0:C.call(ae,void 0,I,e,this.state.context)),I}finally{be(this,Ar,zi).call(this,{type:"error",error:I})}}finally{N(this,on).runNext(this)}}},Rr=new WeakMap,on=new WeakMap,Gs=new WeakMap,Ar=new WeakSet,zi=function(e){const t=i=>{switch(e.type){case"failed":return{...i,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...i,isPaused:!0};case"continue":return{...i,isPaused:!1};case"pending":return{...i,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...i,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...i,data:void 0,error:e.error,failureCount:i.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=t(this.state),Pt.batch(()=>{N(this,Rr).forEach(i=>{i.onMutationUpdate(e)}),N(this,on).notify({mutation:this,type:"updated",action:e})})},I0);function fT(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Yr,ar,uu,S0,cb=(S0=class extends Ba{constructor(e={}){super();Ie(this,Yr);Ie(this,ar);Ie(this,uu);this.config=e,ce(this,Yr,new Set),ce(this,ar,new Map),ce(this,uu,0)}build(e,t,i){const o=new ub({mutationCache:this,mutationId:++qc(this,uu)._,options:e.defaultMutationOptions(t),state:i});return this.add(o),o}add(e){N(this,Yr).add(e);const t=Yc(e);if(typeof t=="string"){const i=N(this,ar).get(t);i?i.push(e):N(this,ar).set(t,[e])}this.notify({type:"added",mutation:e})}remove(e){if(N(this,Yr).delete(e)){const t=Yc(e);if(typeof t=="string"){const i=N(this,ar).get(t);if(i)if(i.length>1){const o=i.indexOf(e);o!==-1&&i.splice(o,1)}else i[0]===e&&N(this,ar).delete(t)}}this.notify({type:"removed",mutation:e})}canRun(e){const t=Yc(e);if(typeof t=="string"){const i=N(this,ar).get(t),o=i==null?void 0:i.find(l=>l.state.status==="pending");return!o||o===e}else return!0}runNext(e){var i;const t=Yc(e);if(typeof t=="string"){const o=(i=N(this,ar).get(t))==null?void 0:i.find(l=>l!==e&&l.state.isPaused);return(o==null?void 0:o.continue())??Promise.resolve()}else return Promise.resolve()}clear(){Pt.batch(()=>{N(this,Yr).forEach(e=>{this.notify({type:"removed",mutation:e})}),N(this,Yr).clear(),N(this,ar).clear()})}getAll(){return Array.from(N(this,Yr))}find(e){const t={exact:!0,...e};return this.getAll().find(i=>Q_(t,i))}findAll(e={}){return this.getAll().filter(t=>Q_(e,t))}notify(e){Pt.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){const e=this.getAll().filter(t=>t.state.isPaused);return Pt.batch(()=>Promise.all(e.map(t=>t.continue().catch($n))))}},Yr=new WeakMap,ar=new WeakMap,uu=new WeakMap,S0);function Yc(n){var e;return(e=n.options.scope)==null?void 0:e.id}function J_(n){return{onFetch:(e,t)=>{var _,E,S,P,x;const i=e.options,o=(S=(E=(_=e.fetchOptions)==null?void 0:_.meta)==null?void 0:E.fetchMore)==null?void 0:S.direction,l=((P=e.state.data)==null?void 0:P.pages)||[],c=((x=e.state.data)==null?void 0:x.pageParams)||[];let d={pages:[],pageParams:[]},p=0;const y=async()=>{let V=!1;const b=K=>{Object.defineProperty(K,"signal",{enumerable:!0,get:()=>(e.signal.aborted?V=!0:e.signal.addEventListener("abort",()=>{V=!0}),e.signal)})},G=aT(e.options,e.fetchOptions),Q=async(K,te,oe)=>{if(V)return Promise.reject();if(te==null&&K.pages.length)return Promise.resolve(K);const ae={queryKey:e.queryKey,pageParam:te,direction:oe?"backward":"forward",meta:e.options.meta};b(ae);const C=await G(ae),{maxPages:I}=e.options,R=oe?tb:eb;return{pages:R(K.pages,C,I),pageParams:R(K.pageParams,te,I)}};if(o&&l.length){const K=o==="backward",te=K?hb:Y_,oe={pages:l,pageParams:c},ae=te(i,oe);d=await Q(oe,ae,K)}else{const K=n??l.length;do{const te=p===0?c[0]??i.initialPageParam:Y_(i,d);if(p>0&&te==null)break;d=await Q(d,te),p++}while(p<K)}return d};e.options.persister?e.fetchFn=()=>{var V,b;return(b=(V=e.options).persister)==null?void 0:b.call(V,y,{queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},t)}:e.fetchFn=y}}}function Y_(n,{pages:e,pageParams:t}){const i=e.length-1;return e.length>0?n.getNextPageParam(e[i],e,t[i],t):void 0}function hb(n,{pages:e,pageParams:t}){var i;return e.length>0?(i=n.getPreviousPageParam)==null?void 0:i.call(n,e[0],e,t[0],t):void 0}var dt,Ki,Qi,_a,wa,Gi,Ea,Ta,R0,db=(R0=class{constructor(n={}){Ie(this,dt);Ie(this,Ki);Ie(this,Qi);Ie(this,_a);Ie(this,wa);Ie(this,Gi);Ie(this,Ea);Ie(this,Ta);ce(this,dt,n.queryCache||new lb),ce(this,Ki,n.mutationCache||new cb),ce(this,Qi,n.defaultOptions||{}),ce(this,_a,new Map),ce(this,wa,new Map),ce(this,Gi,0)}mount(){qc(this,Gi)._++,N(this,Gi)===1&&(ce(this,Ea,sg.subscribe(async n=>{n&&(await this.resumePausedMutations(),N(this,dt).onFocus())})),ce(this,Ta,Lh.subscribe(async n=>{n&&(await this.resumePausedMutations(),N(this,dt).onOnline())})))}unmount(){var n,e;qc(this,Gi)._--,N(this,Gi)===0&&((n=N(this,Ea))==null||n.call(this),ce(this,Ea,void 0),(e=N(this,Ta))==null||e.call(this),ce(this,Ta,void 0))}isFetching(n){return N(this,dt).findAll({...n,fetchStatus:"fetching"}).length}isMutating(n){return N(this,Ki).findAll({...n,status:"pending"}).length}getQueryData(n){var t;const e=this.defaultQueryOptions({queryKey:n});return(t=N(this,dt).get(e.queryHash))==null?void 0:t.state.data}ensureQueryData(n){const e=this.defaultQueryOptions(n),t=N(this,dt).build(this,e),i=t.state.data;return i===void 0?this.fetchQuery(n):(n.revalidateIfStale&&t.isStaleByTime(fa(e.staleTime,t))&&this.prefetchQuery(e),Promise.resolve(i))}getQueriesData(n){return N(this,dt).findAll(n).map(({queryKey:e,state:t})=>{const i=t.data;return[e,i]})}setQueryData(n,e,t){const i=this.defaultQueryOptions({queryKey:n}),o=N(this,dt).get(i.queryHash),l=o==null?void 0:o.state.data,c=Yx(e,l);if(c!==void 0)return N(this,dt).build(this,i).setData(c,{...t,manual:!0})}setQueriesData(n,e,t){return Pt.batch(()=>N(this,dt).findAll(n).map(({queryKey:i})=>[i,this.setQueryData(i,e,t)]))}getQueryState(n){var t;const e=this.defaultQueryOptions({queryKey:n});return(t=N(this,dt).get(e.queryHash))==null?void 0:t.state}removeQueries(n){const e=N(this,dt);Pt.batch(()=>{e.findAll(n).forEach(t=>{e.remove(t)})})}resetQueries(n,e){const t=N(this,dt),i={type:"active",...n};return Pt.batch(()=>(t.findAll(n).forEach(o=>{o.reset()}),this.refetchQueries(i,e)))}cancelQueries(n,e={}){const t={revert:!0,...e},i=Pt.batch(()=>N(this,dt).findAll(n).map(o=>o.cancel(t)));return Promise.all(i).then($n).catch($n)}invalidateQueries(n,e={}){return Pt.batch(()=>{if(N(this,dt).findAll(n).forEach(i=>{i.invalidate()}),(n==null?void 0:n.refetchType)==="none")return Promise.resolve();const t={...n,type:(n==null?void 0:n.refetchType)??(n==null?void 0:n.type)??"active"};return this.refetchQueries(t,e)})}refetchQueries(n,e={}){const t={...e,cancelRefetch:e.cancelRefetch??!0},i=Pt.batch(()=>N(this,dt).findAll(n).filter(o=>!o.isDisabled()).map(o=>{let l=o.fetch(void 0,t);return t.throwOnError||(l=l.catch($n)),o.state.fetchStatus==="paused"?Promise.resolve():l}));return Promise.all(i).then($n)}fetchQuery(n){const e=this.defaultQueryOptions(n);e.retry===void 0&&(e.retry=!1);const t=N(this,dt).build(this,e);return t.isStaleByTime(fa(e.staleTime,t))?t.fetch(e):Promise.resolve(t.state.data)}prefetchQuery(n){return this.fetchQuery(n).then($n).catch($n)}fetchInfiniteQuery(n){return n.behavior=J_(n.pages),this.fetchQuery(n)}prefetchInfiniteQuery(n){return this.fetchInfiniteQuery(n).then($n).catch($n)}ensureInfiniteQueryData(n){return n.behavior=J_(n.pages),this.ensureQueryData(n)}resumePausedMutations(){return Lh.isOnline()?N(this,Ki).resumePausedMutations():Promise.resolve()}getQueryCache(){return N(this,dt)}getMutationCache(){return N(this,Ki)}getDefaultOptions(){return N(this,Qi)}setDefaultOptions(n){ce(this,Qi,n)}setQueryDefaults(n,e){N(this,_a).set(lo(n),{queryKey:n,defaultOptions:e})}getQueryDefaults(n){const e=[...N(this,_a).values()],t={};return e.forEach(i=>{ou(n,i.queryKey)&&Object.assign(t,i.defaultOptions)}),t}setMutationDefaults(n,e){N(this,wa).set(lo(n),{mutationKey:n,defaultOptions:e})}getMutationDefaults(n){const e=[...N(this,wa).values()];let t={};return e.forEach(i=>{ou(n,i.mutationKey)&&(t={...t,...i.defaultOptions})}),t}defaultQueryOptions(n){if(n._defaulted)return n;const e={...N(this,Qi).queries,...this.getQueryDefaults(n.queryKey),...n,_defaulted:!0};return e.queryHash||(e.queryHash=rg(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===ig&&(e.enabled=!1),e}defaultMutationOptions(n){return n!=null&&n._defaulted?n:{...N(this,Qi).mutations,...(n==null?void 0:n.mutationKey)&&this.getMutationDefaults(n.mutationKey),...n,_defaulted:!0}}clear(){N(this,dt).clear(),N(this,Ki).clear()}},dt=new WeakMap,Ki=new WeakMap,Qi=new WeakMap,_a=new WeakMap,wa=new WeakMap,Gi=new WeakMap,Ea=new WeakMap,Ta=new WeakMap,R0),yn,Fe,cu,an,Xs,Ia,Xi,Cr,hu,Sa,Ra,Js,Ys,Ji,Aa,Ge,Hl,Hp,Wp,Kp,Qp,Gp,Xp,Jp,pT,A0,fb=(A0=class extends Ba{constructor(e,t){super();Ie(this,Ge);Ie(this,yn);Ie(this,Fe);Ie(this,cu);Ie(this,an);Ie(this,Xs);Ie(this,Ia);Ie(this,Xi);Ie(this,Cr);Ie(this,hu);Ie(this,Sa);Ie(this,Ra);Ie(this,Js);Ie(this,Ys);Ie(this,Ji);Ie(this,Aa,new Set);this.options=t,ce(this,yn,e),ce(this,Cr,null),ce(this,Xi,qp()),this.options.experimental_prefetchInRender||N(this,Xi).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(t)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(N(this,Fe).addObserver(this),Z_(N(this,Fe),this.options)?be(this,Ge,Hl).call(this):this.updateResult(),be(this,Ge,Qp).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Yp(N(this,Fe),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Yp(N(this,Fe),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,be(this,Ge,Gp).call(this),be(this,Ge,Xp).call(this),N(this,Fe).removeObserver(this)}setOptions(e,t){const i=this.options,o=N(this,Fe);if(this.options=N(this,yn).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof lr(this.options.enabled,N(this,Fe))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");be(this,Ge,Jp).call(this),N(this,Fe).setOptions(this.options),i._defaulted&&!Dh(this.options,i)&&N(this,yn).getQueryCache().notify({type:"observerOptionsUpdated",query:N(this,Fe),observer:this});const l=this.hasListeners();l&&e0(N(this,Fe),o,this.options,i)&&be(this,Ge,Hl).call(this),this.updateResult(t),l&&(N(this,Fe)!==o||lr(this.options.enabled,N(this,Fe))!==lr(i.enabled,N(this,Fe))||fa(this.options.staleTime,N(this,Fe))!==fa(i.staleTime,N(this,Fe)))&&be(this,Ge,Hp).call(this);const c=be(this,Ge,Wp).call(this);l&&(N(this,Fe)!==o||lr(this.options.enabled,N(this,Fe))!==lr(i.enabled,N(this,Fe))||c!==N(this,Ji))&&be(this,Ge,Kp).call(this,c)}getOptimisticResult(e){const t=N(this,yn).getQueryCache().build(N(this,yn),e),i=this.createResult(t,e);return mb(this,i)&&(ce(this,an,i),ce(this,Ia,this.options),ce(this,Xs,N(this,Fe).state)),i}getCurrentResult(){return N(this,an)}trackResult(e,t){const i={};return Object.keys(e).forEach(o=>{Object.defineProperty(i,o,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(o),t==null||t(o),e[o])})}),i}trackProp(e){N(this,Aa).add(e)}getCurrentQuery(){return N(this,Fe)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const t=N(this,yn).defaultQueryOptions(e),i=N(this,yn).getQueryCache().build(N(this,yn),t);return i.fetch().then(()=>this.createResult(i,t))}fetch(e){return be(this,Ge,Hl).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),N(this,an)))}createResult(e,t){var I;const i=N(this,Fe),o=this.options,l=N(this,an),c=N(this,Xs),d=N(this,Ia),y=e!==i?e.state:N(this,cu),{state:_}=e;let E={..._},S=!1,P;if(t._optimisticResults){const R=this.hasListeners(),O=!R&&Z_(e,t),L=R&&e0(e,i,t,o);(O||L)&&(E={...E,...dT(_.data,e.options)}),t._optimisticResults==="isRestoring"&&(E.fetchStatus="idle")}let{error:x,errorUpdatedAt:V,status:b}=E;if(t.select&&E.data!==void 0)if(l&&E.data===(c==null?void 0:c.data)&&t.select===N(this,hu))P=N(this,Sa);else try{ce(this,hu,t.select),P=t.select(E.data),P=$p(l==null?void 0:l.data,P,t),ce(this,Sa,P),ce(this,Cr,null)}catch(R){ce(this,Cr,R)}else P=E.data;if(t.placeholderData!==void 0&&P===void 0&&b==="pending"){let R;if(l!=null&&l.isPlaceholderData&&t.placeholderData===(d==null?void 0:d.placeholderData))R=l.data;else if(R=typeof t.placeholderData=="function"?t.placeholderData((I=N(this,Ra))==null?void 0:I.state.data,N(this,Ra)):t.placeholderData,t.select&&R!==void 0)try{R=t.select(R),ce(this,Cr,null)}catch(O){ce(this,Cr,O)}R!==void 0&&(b="success",P=$p(l==null?void 0:l.data,R,t),S=!0)}N(this,Cr)&&(x=N(this,Cr),P=N(this,Sa),V=Date.now(),b="error");const G=E.fetchStatus==="fetching",Q=b==="pending",K=b==="error",te=Q&&G,oe=P!==void 0,C={status:b,fetchStatus:E.fetchStatus,isPending:Q,isSuccess:b==="success",isError:K,isInitialLoading:te,isLoading:te,data:P,dataUpdatedAt:E.dataUpdatedAt,error:x,errorUpdatedAt:V,failureCount:E.fetchFailureCount,failureReason:E.fetchFailureReason,errorUpdateCount:E.errorUpdateCount,isFetched:E.dataUpdateCount>0||E.errorUpdateCount>0,isFetchedAfterMount:E.dataUpdateCount>y.dataUpdateCount||E.errorUpdateCount>y.errorUpdateCount,isFetching:G,isRefetching:G&&!Q,isLoadingError:K&&!oe,isPaused:E.fetchStatus==="paused",isPlaceholderData:S,isRefetchError:K&&oe,isStale:og(e,t),refetch:this.refetch,promise:N(this,Xi)};if(this.options.experimental_prefetchInRender){const R=F=>{C.status==="error"?F.reject(C.error):C.data!==void 0&&F.resolve(C.data)},O=()=>{const F=ce(this,Xi,C.promise=qp());R(F)},L=N(this,Xi);switch(L.status){case"pending":e.queryHash===i.queryHash&&R(L);break;case"fulfilled":(C.status==="error"||C.data!==L.value)&&O();break;case"rejected":(C.status!=="error"||C.error!==L.reason)&&O();break}}return C}updateResult(e){const t=N(this,an),i=this.createResult(N(this,Fe),this.options);if(ce(this,Xs,N(this,Fe).state),ce(this,Ia,this.options),N(this,Xs).data!==void 0&&ce(this,Ra,N(this,Fe)),Dh(i,t))return;ce(this,an,i);const o={},l=()=>{if(!t)return!0;const{notifyOnChangeProps:c}=this.options,d=typeof c=="function"?c():c;if(d==="all"||!d&&!N(this,Aa).size)return!0;const p=new Set(d??N(this,Aa));return this.options.throwOnError&&p.add("error"),Object.keys(N(this,an)).some(y=>{const _=y;return N(this,an)[_]!==t[_]&&p.has(_)})};(e==null?void 0:e.listeners)!==!1&&l()&&(o.listeners=!0),be(this,Ge,pT).call(this,{...o,...e})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&be(this,Ge,Qp).call(this)}},yn=new WeakMap,Fe=new WeakMap,cu=new WeakMap,an=new WeakMap,Xs=new WeakMap,Ia=new WeakMap,Xi=new WeakMap,Cr=new WeakMap,hu=new WeakMap,Sa=new WeakMap,Ra=new WeakMap,Js=new WeakMap,Ys=new WeakMap,Ji=new WeakMap,Aa=new WeakMap,Ge=new WeakSet,Hl=function(e){be(this,Ge,Jp).call(this);let t=N(this,Fe).fetch(this.options,e);return e!=null&&e.throwOnError||(t=t.catch($n)),t},Hp=function(){be(this,Ge,Gp).call(this);const e=fa(this.options.staleTime,N(this,Fe));if(ao||N(this,an).isStale||!zp(e))return;const i=sT(N(this,an).dataUpdatedAt,e)+1;ce(this,Js,setTimeout(()=>{N(this,an).isStale||this.updateResult()},i))},Wp=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(N(this,Fe)):this.options.refetchInterval)??!1},Kp=function(e){be(this,Ge,Xp).call(this),ce(this,Ji,e),!(ao||lr(this.options.enabled,N(this,Fe))===!1||!zp(N(this,Ji))||N(this,Ji)===0)&&ce(this,Ys,setInterval(()=>{(this.options.refetchIntervalInBackground||sg.isFocused())&&be(this,Ge,Hl).call(this)},N(this,Ji)))},Qp=function(){be(this,Ge,Hp).call(this),be(this,Ge,Kp).call(this,be(this,Ge,Wp).call(this))},Gp=function(){N(this,Js)&&(clearTimeout(N(this,Js)),ce(this,Js,void 0))},Xp=function(){N(this,Ys)&&(clearInterval(N(this,Ys)),ce(this,Ys,void 0))},Jp=function(){const e=N(this,yn).getQueryCache().build(N(this,yn),this.options);if(e===N(this,Fe))return;const t=N(this,Fe);ce(this,Fe,e),ce(this,cu,e.state),this.hasListeners()&&(t==null||t.removeObserver(this),e.addObserver(this))},pT=function(e){Pt.batch(()=>{e.listeners&&this.listeners.forEach(t=>{t(N(this,an))}),N(this,yn).getQueryCache().notify({query:N(this,Fe),type:"observerResultsUpdated"})})},A0);function pb(n,e){return lr(e.enabled,n)!==!1&&n.state.data===void 0&&!(n.state.status==="error"&&e.retryOnMount===!1)}function Z_(n,e){return pb(n,e)||n.state.data!==void 0&&Yp(n,e,e.refetchOnMount)}function Yp(n,e,t){if(lr(e.enabled,n)!==!1){const i=typeof t=="function"?t(n):t;return i==="always"||i!==!1&&og(n,e)}return!1}function e0(n,e,t,i){return(n!==e||lr(i.enabled,n)===!1)&&(!t.suspense||n.state.status!=="error")&&og(n,t)}function og(n,e){return lr(e.enabled,n)!==!1&&n.isStaleByTime(fa(e.staleTime,n))}function mb(n,e){return!Dh(n.getCurrentResult(),e)}var Yi,Zi,vn,Zr,ai,uh,Zp,C0,gb=(C0=class extends Ba{constructor(t,i){super();Ie(this,ai);Ie(this,Yi);Ie(this,Zi);Ie(this,vn);Ie(this,Zr);ce(this,Yi,t),this.setOptions(i),this.bindMethods(),be(this,ai,uh).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){var o;const i=this.options;this.options=N(this,Yi).defaultMutationOptions(t),Dh(this.options,i)||N(this,Yi).getMutationCache().notify({type:"observerOptionsUpdated",mutation:N(this,vn),observer:this}),i!=null&&i.mutationKey&&this.options.mutationKey&&lo(i.mutationKey)!==lo(this.options.mutationKey)?this.reset():((o=N(this,vn))==null?void 0:o.state.status)==="pending"&&N(this,vn).setOptions(this.options)}onUnsubscribe(){var t;this.hasListeners()||(t=N(this,vn))==null||t.removeObserver(this)}onMutationUpdate(t){be(this,ai,uh).call(this),be(this,ai,Zp).call(this,t)}getCurrentResult(){return N(this,Zi)}reset(){var t;(t=N(this,vn))==null||t.removeObserver(this),ce(this,vn,void 0),be(this,ai,uh).call(this),be(this,ai,Zp).call(this)}mutate(t,i){var o;return ce(this,Zr,i),(o=N(this,vn))==null||o.removeObserver(this),ce(this,vn,N(this,Yi).getMutationCache().build(N(this,Yi),this.options)),N(this,vn).addObserver(this),N(this,vn).execute(t)}},Yi=new WeakMap,Zi=new WeakMap,vn=new WeakMap,Zr=new WeakMap,ai=new WeakSet,uh=function(){var i;const t=((i=N(this,vn))==null?void 0:i.state)??fT();ce(this,Zi,{...t,isPending:t.status==="pending",isSuccess:t.status==="success",isError:t.status==="error",isIdle:t.status==="idle",mutate:this.mutate,reset:this.reset})},Zp=function(t){Pt.batch(()=>{var i,o,l,c,d,p,y,_;if(N(this,Zr)&&this.hasListeners()){const E=N(this,Zi).variables,S=N(this,Zi).context;(t==null?void 0:t.type)==="success"?((o=(i=N(this,Zr)).onSuccess)==null||o.call(i,t.data,E,S),(c=(l=N(this,Zr)).onSettled)==null||c.call(l,t.data,null,E,S)):(t==null?void 0:t.type)==="error"&&((p=(d=N(this,Zr)).onError)==null||p.call(d,t.error,E,S),(_=(y=N(this,Zr)).onSettled)==null||_.call(y,void 0,t.error,E,S))}this.listeners.forEach(E=>{E(N(this,Zi))})})},C0),mT=le.createContext(void 0),ag=n=>{const e=le.useContext(mT);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},yb=({client:n,children:e})=>(le.useEffect(()=>(n.mount(),()=>{n.unmount()}),[n]),U.jsx(mT.Provider,{value:n,children:e})),gT=le.createContext(!1),vb=()=>le.useContext(gT);gT.Provider;function _b(){let n=!1;return{clearReset:()=>{n=!1},reset:()=>{n=!0},isReset:()=>n}}var wb=le.createContext(_b()),Eb=()=>le.useContext(wb);function yT(n,e){return typeof n=="function"?n(...e):!!n}function em(){}var Tb=(n,e)=>{(n.suspense||n.throwOnError||n.experimental_prefetchInRender)&&(e.isReset()||(n.retryOnMount=!1))},Ib=n=>{le.useEffect(()=>{n.clearReset()},[n])},Sb=({result:n,errorResetBoundary:e,throwOnError:t,query:i})=>n.isError&&!e.isReset()&&!n.isFetching&&i&&yT(t,[n.error,i]),Rb=n=>{const e=n.staleTime;n.suspense&&(n.staleTime=typeof e=="function"?(...t)=>Math.max(e(...t),1e3):Math.max(e??1e3,1e3),typeof n.gcTime=="number"&&(n.gcTime=Math.max(n.gcTime,1e3)))},Ab=(n,e)=>n.isLoading&&n.isFetching&&!e,Cb=(n,e)=>(n==null?void 0:n.suspense)&&e.isPending,t0=(n,e,t)=>e.fetchOptimistic(n).catch(()=>{t.clearReset()});function Pb(n,e,t){var E,S,P,x,V;const i=ag(),o=vb(),l=Eb(),c=i.defaultQueryOptions(n);(S=(E=i.getDefaultOptions().queries)==null?void 0:E._experimental_beforeQuery)==null||S.call(E,c),c._optimisticResults=o?"isRestoring":"optimistic",Rb(c),Tb(c,l),Ib(l);const d=!i.getQueryCache().get(c.queryHash),[p]=le.useState(()=>new e(i,c)),y=p.getOptimisticResult(c),_=!o&&n.subscribed!==!1;if(le.useSyncExternalStore(le.useCallback(b=>{const G=_?p.subscribe(Pt.batchCalls(b)):em;return p.updateResult(),G},[p,_]),()=>p.getCurrentResult(),()=>p.getCurrentResult()),le.useEffect(()=>{p.setOptions(c,{listeners:!1})},[c,p]),Cb(c,y))throw t0(c,p,l);if(Sb({result:y,errorResetBoundary:l,throwOnError:c.throwOnError,query:i.getQueryCache().get(c.queryHash)}))throw y.error;if((x=(P=i.getDefaultOptions().queries)==null?void 0:P._experimental_afterQuery)==null||x.call(P,c,y),c.experimental_prefetchInRender&&!ao&&Ab(y,o)){const b=d?t0(c,p,l):(V=i.getQueryCache().get(c.queryHash))==null?void 0:V.promise;b==null||b.catch(em).finally(()=>{p.updateResult()})}return c.notifyOnChangeProps?y:p.trackResult(y)}function cd(n,e){return Pb(n,fb)}function n0(n,e){const t=ag(),[i]=le.useState(()=>new gb(t,n));le.useEffect(()=>{i.setOptions(n)},[i,n]);const o=le.useSyncExternalStore(le.useCallback(c=>i.subscribe(Pt.batchCalls(c)),[i]),()=>i.getCurrentResult(),()=>i.getCurrentResult()),l=le.useCallback((c,d)=>{i.mutate(c,d).catch(em)},[i]);if(o.error&&yT(i.options.throwOnError,[o.error]))throw o.error;return{...o,mutate:l,mutateAsync:o.mutate}}const r0=()=>Math.random().toString(36).substring(2,10),kb=async n=>{const e=sd(),t=ss(e,"users",n.uid);try{if((await Oh(t)).exists())console.log("User already exists in the database.");else{let o=r0(),l=!1;for(;!l;)(await Oh(ss(e,"partnerCodes",o))).exists()?o=r0():l=!0;const c={uid:n.uid,displayName:n.displayName||"Anonymous",email:n.email||"No Email",partnerCode:o,partner:null,createdAt:new Date().toISOString()};await W_(t,c),console.log("User initialized in the database."),await W_(ss(e,"partnerCodes",o),{uid:n.uid})}}catch(i){throw console.error("Error initializing user in database:",i),i}},xb=({children:n})=>{const[e,t]=le.useState(null),[i,o]=le.useState(!0);return le.useEffect(()=>{const l=tA(Tm,async c=>{if(c){console.log(c);try{await kb(c);const d=sd(),p=ss(d,"users",c.uid),y=await Oh(p);if(y.exists()){const _=y.data();t({...c,partnerCode:_.partnerCode||"",partnerUid:_.partnerUid||null,createdAt:_.createdAt||c.metadata.creationTime||""})}else console.warn(`No Firestore document found for user ${c.uid}`),t({...c,partnerCode:"",partnerUid:null,createdAt:c.metadata.creationTime||""})}catch(d){console.error("Error initializing user or fetching data:",d),t(null)}}else t(null);o(!1)});return()=>l()},[]),i?U.jsx(_u,{}):U.jsx(Pw.Provider,{value:{currentUser:e,isAuthorizing:i},children:n})},bb=({children:n})=>{const{currentUser:e}=pi(),t=ag(),i=async()=>{var _;if(!e)throw new Error("User not authenticated");const p=(_=e==null?void 0:e.stsTokenManager)==null?void 0:_.accessToken,y=await fetch("https://watchlist-duo-backend.onrender.com/api/mylist",{method:"GET",headers:{Authorization:`Bearer ${p}`,"Content-Type":"application/json"}});if(!y.ok)throw new Error(`Failed to fetch: ${y.statusText}`);return y.json()},{data:o=[],isLoading:l}=cd({queryKey:["myList",e==null?void 0:e.uid],queryFn:i,enabled:!!e,staleTime:1e3*60*5,gcTime:1e3*60*10}),c=n0({mutationFn:async({media:p,type:y})=>{var S;if(!e)throw new Error("User not authenticated");const _=(S=e==null?void 0:e.stsTokenManager)==null?void 0:S.accessToken,E=await fetch("https://watchlist-duo-backend.onrender.com/api/mylist",{method:"POST",headers:{Authorization:`Bearer ${_}`,"Content-Type":"application/json"},body:JSON.stringify({media:p,type:y})});if(!E.ok)throw new Error(`Failed to add: ${E.statusText}`);ke.success(`${y==="movie"?"Movie":"TV Show"} added to your list!`)},onSuccess:()=>{t.invalidateQueries({queryKey:["myList",e==null?void 0:e.uid]})},onError:()=>{ke.error("Failed to add to your list. Please try again.")}}),d=n0({mutationFn:async({mediaId:p,type:y})=>{var S;if(!e)throw new Error("User not authenticated");const _=(S=e==null?void 0:e.stsTokenManager)==null?void 0:S.accessToken,E=await fetch("https://watchlist-duo-backend.onrender.com/api/mylist",{method:"DELETE",headers:{Authorization:`Bearer ${_}`,"Content-Type":"application/json"},body:JSON.stringify({mediaId:p,type:y})});if(!E.ok)throw new Error(`Failed to delete: ${E.statusText}`);ke.success(`${y==="movie"?"Movie":"TV Show"} removed successfully!`)},onSuccess:()=>{t.invalidateQueries({queryKey:["myList",e==null?void 0:e.uid]})},onError:()=>{ke.error("Failed to remove from your list. Please try again.")}});return U.jsx(kw.Provider,{value:{isLoadingMyList:l,myList:o,refreshMyList:()=>t.invalidateQueries({queryKey:["myList",e==null?void 0:e.uid]}),addToMyList:(p,y)=>c.mutate({media:p,type:y}),deleteFromMyList:(p,y)=>d.mutate({mediaId:p,type:y}),isAddingToList:c.isPending,isDeletingFromList:d.isPending},children:n})};function vT(n,e){return function(){return n.apply(e,arguments)}}const{toString:Nb}=Object.prototype,{getPrototypeOf:lg}=Object,hd=(n=>e=>{const t=Nb.call(e);return n[t]||(n[t]=t.slice(8,-1).toLowerCase())})(Object.create(null)),hr=n=>(n=n.toLowerCase(),e=>hd(e)===n),dd=n=>e=>typeof e===n,{isArray:$a}=Array,au=dd("undefined");function Ob(n){return n!==null&&!au(n)&&n.constructor!==null&&!au(n.constructor)&&bn(n.constructor.isBuffer)&&n.constructor.isBuffer(n)}const _T=hr("ArrayBuffer");function Db(n){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(n):e=n&&n.buffer&&_T(n.buffer),e}const Lb=dd("string"),bn=dd("function"),wT=dd("number"),fd=n=>n!==null&&typeof n=="object",Vb=n=>n===!0||n===!1,ch=n=>{if(hd(n)!=="object")return!1;const e=lg(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)},Mb=hr("Date"),Fb=hr("File"),Ub=hr("Blob"),jb=hr("FileList"),zb=n=>fd(n)&&bn(n.pipe),Bb=n=>{let e;return n&&(typeof FormData=="function"&&n instanceof FormData||bn(n.append)&&((e=hd(n))==="formdata"||e==="object"&&bn(n.toString)&&n.toString()==="[object FormData]"))},$b=hr("URLSearchParams"),[qb,Hb,Wb,Kb]=["ReadableStream","Request","Response","Headers"].map(hr),Qb=n=>n.trim?n.trim():n.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Cu(n,e,{allOwnKeys:t=!1}={}){if(n===null||typeof n>"u")return;let i,o;if(typeof n!="object"&&(n=[n]),$a(n))for(i=0,o=n.length;i<o;i++)e.call(null,n[i],i,n);else{const l=t?Object.getOwnPropertyNames(n):Object.keys(n),c=l.length;let d;for(i=0;i<c;i++)d=l[i],e.call(null,n[d],d,n)}}function ET(n,e){e=e.toLowerCase();const t=Object.keys(n);let i=t.length,o;for(;i-- >0;)if(o=t[i],e===o.toLowerCase())return o;return null}const Hs=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,TT=n=>!au(n)&&n!==Hs;function tm(){const{caseless:n}=TT(this)&&this||{},e={},t=(i,o)=>{const l=n&&ET(e,o)||o;ch(e[l])&&ch(i)?e[l]=tm(e[l],i):ch(i)?e[l]=tm({},i):$a(i)?e[l]=i.slice():e[l]=i};for(let i=0,o=arguments.length;i<o;i++)arguments[i]&&Cu(arguments[i],t);return e}const Gb=(n,e,t,{allOwnKeys:i}={})=>(Cu(e,(o,l)=>{t&&bn(o)?n[l]=vT(o,t):n[l]=o},{allOwnKeys:i}),n),Xb=n=>(n.charCodeAt(0)===65279&&(n=n.slice(1)),n),Jb=(n,e,t,i)=>{n.prototype=Object.create(e.prototype,i),n.prototype.constructor=n,Object.defineProperty(n,"super",{value:e.prototype}),t&&Object.assign(n.prototype,t)},Yb=(n,e,t,i)=>{let o,l,c;const d={};if(e=e||{},n==null)return e;do{for(o=Object.getOwnPropertyNames(n),l=o.length;l-- >0;)c=o[l],(!i||i(c,n,e))&&!d[c]&&(e[c]=n[c],d[c]=!0);n=t!==!1&&lg(n)}while(n&&(!t||t(n,e))&&n!==Object.prototype);return e},Zb=(n,e,t)=>{n=String(n),(t===void 0||t>n.length)&&(t=n.length),t-=e.length;const i=n.indexOf(e,t);return i!==-1&&i===t},e2=n=>{if(!n)return null;if($a(n))return n;let e=n.length;if(!wT(e))return null;const t=new Array(e);for(;e-- >0;)t[e]=n[e];return t},t2=(n=>e=>n&&e instanceof n)(typeof Uint8Array<"u"&&lg(Uint8Array)),n2=(n,e)=>{const i=(n&&n[Symbol.iterator]).call(n);let o;for(;(o=i.next())&&!o.done;){const l=o.value;e.call(n,l[0],l[1])}},r2=(n,e)=>{let t;const i=[];for(;(t=n.exec(e))!==null;)i.push(t);return i},i2=hr("HTMLFormElement"),s2=n=>n.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,i,o){return i.toUpperCase()+o}),i0=(({hasOwnProperty:n})=>(e,t)=>n.call(e,t))(Object.prototype),o2=hr("RegExp"),IT=(n,e)=>{const t=Object.getOwnPropertyDescriptors(n),i={};Cu(t,(o,l)=>{let c;(c=e(o,l,n))!==!1&&(i[l]=c||o)}),Object.defineProperties(n,i)},a2=n=>{IT(n,(e,t)=>{if(bn(n)&&["arguments","caller","callee"].indexOf(t)!==-1)return!1;const i=n[t];if(bn(i)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+t+"'")})}})},l2=(n,e)=>{const t={},i=o=>{o.forEach(l=>{t[l]=!0})};return $a(n)?i(n):i(String(n).split(e)),t},u2=()=>{},c2=(n,e)=>n!=null&&Number.isFinite(n=+n)?n:e,up="abcdefghijklmnopqrstuvwxyz",s0="0123456789",ST={DIGIT:s0,ALPHA:up,ALPHA_DIGIT:up+up.toUpperCase()+s0},h2=(n=16,e=ST.ALPHA_DIGIT)=>{let t="";const{length:i}=e;for(;n--;)t+=e[Math.random()*i|0];return t};function d2(n){return!!(n&&bn(n.append)&&n[Symbol.toStringTag]==="FormData"&&n[Symbol.iterator])}const f2=n=>{const e=new Array(10),t=(i,o)=>{if(fd(i)){if(e.indexOf(i)>=0)return;if(!("toJSON"in i)){e[o]=i;const l=$a(i)?[]:{};return Cu(i,(c,d)=>{const p=t(c,o+1);!au(p)&&(l[d]=p)}),e[o]=void 0,l}}return i};return t(n,0)},p2=hr("AsyncFunction"),m2=n=>n&&(fd(n)||bn(n))&&bn(n.then)&&bn(n.catch),RT=((n,e)=>n?setImmediate:e?((t,i)=>(Hs.addEventListener("message",({source:o,data:l})=>{o===Hs&&l===t&&i.length&&i.shift()()},!1),o=>{i.push(o),Hs.postMessage(t,"*")}))(`axios@${Math.random()}`,[]):t=>setTimeout(t))(typeof setImmediate=="function",bn(Hs.postMessage)),g2=typeof queueMicrotask<"u"?queueMicrotask.bind(Hs):typeof process<"u"&&process.nextTick||RT,W={isArray:$a,isArrayBuffer:_T,isBuffer:Ob,isFormData:Bb,isArrayBufferView:Db,isString:Lb,isNumber:wT,isBoolean:Vb,isObject:fd,isPlainObject:ch,isReadableStream:qb,isRequest:Hb,isResponse:Wb,isHeaders:Kb,isUndefined:au,isDate:Mb,isFile:Fb,isBlob:Ub,isRegExp:o2,isFunction:bn,isStream:zb,isURLSearchParams:$b,isTypedArray:t2,isFileList:jb,forEach:Cu,merge:tm,extend:Gb,trim:Qb,stripBOM:Xb,inherits:Jb,toFlatObject:Yb,kindOf:hd,kindOfTest:hr,endsWith:Zb,toArray:e2,forEachEntry:n2,matchAll:r2,isHTMLForm:i2,hasOwnProperty:i0,hasOwnProp:i0,reduceDescriptors:IT,freezeMethods:a2,toObjectSet:l2,toCamelCase:s2,noop:u2,toFiniteNumber:c2,findKey:ET,global:Hs,isContextDefined:TT,ALPHABET:ST,generateString:h2,isSpecCompliantForm:d2,toJSONObject:f2,isAsyncFn:p2,isThenable:m2,setImmediate:RT,asap:g2};function xe(n,e,t,i,o){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=n,this.name="AxiosError",e&&(this.code=e),t&&(this.config=t),i&&(this.request=i),o&&(this.response=o,this.status=o.status?o.status:null)}W.inherits(xe,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:W.toJSONObject(this.config),code:this.code,status:this.status}}});const AT=xe.prototype,CT={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(n=>{CT[n]={value:n}});Object.defineProperties(xe,CT);Object.defineProperty(AT,"isAxiosError",{value:!0});xe.from=(n,e,t,i,o,l)=>{const c=Object.create(AT);return W.toFlatObject(n,c,function(p){return p!==Error.prototype},d=>d!=="isAxiosError"),xe.call(c,n.message,e,t,i,o),c.cause=n,c.name=n.name,l&&Object.assign(c,l),c};const y2=null;function nm(n){return W.isPlainObject(n)||W.isArray(n)}function PT(n){return W.endsWith(n,"[]")?n.slice(0,-2):n}function o0(n,e,t){return n?n.concat(e).map(function(o,l){return o=PT(o),!t&&l?"["+o+"]":o}).join(t?".":""):e}function v2(n){return W.isArray(n)&&!n.some(nm)}const _2=W.toFlatObject(W,{},null,function(e){return/^is[A-Z]/.test(e)});function pd(n,e,t){if(!W.isObject(n))throw new TypeError("target must be an object");e=e||new FormData,t=W.toFlatObject(t,{metaTokens:!0,dots:!1,indexes:!1},!1,function(V,b){return!W.isUndefined(b[V])});const i=t.metaTokens,o=t.visitor||_,l=t.dots,c=t.indexes,p=(t.Blob||typeof Blob<"u"&&Blob)&&W.isSpecCompliantForm(e);if(!W.isFunction(o))throw new TypeError("visitor must be a function");function y(x){if(x===null)return"";if(W.isDate(x))return x.toISOString();if(!p&&W.isBlob(x))throw new xe("Blob is not supported. Use a Buffer instead.");return W.isArrayBuffer(x)||W.isTypedArray(x)?p&&typeof Blob=="function"?new Blob([x]):Buffer.from(x):x}function _(x,V,b){let G=x;if(x&&!b&&typeof x=="object"){if(W.endsWith(V,"{}"))V=i?V:V.slice(0,-2),x=JSON.stringify(x);else if(W.isArray(x)&&v2(x)||(W.isFileList(x)||W.endsWith(V,"[]"))&&(G=W.toArray(x)))return V=PT(V),G.forEach(function(K,te){!(W.isUndefined(K)||K===null)&&e.append(c===!0?o0([V],te,l):c===null?V:V+"[]",y(K))}),!1}return nm(x)?!0:(e.append(o0(b,V,l),y(x)),!1)}const E=[],S=Object.assign(_2,{defaultVisitor:_,convertValue:y,isVisitable:nm});function P(x,V){if(!W.isUndefined(x)){if(E.indexOf(x)!==-1)throw Error("Circular reference detected in "+V.join("."));E.push(x),W.forEach(x,function(G,Q){(!(W.isUndefined(G)||G===null)&&o.call(e,G,W.isString(Q)?Q.trim():Q,V,S))===!0&&P(G,V?V.concat(Q):[Q])}),E.pop()}}if(!W.isObject(n))throw new TypeError("data must be an object");return P(n),e}function a0(n){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(n).replace(/[!'()~]|%20|%00/g,function(i){return e[i]})}function ug(n,e){this._pairs=[],n&&pd(n,this,e)}const kT=ug.prototype;kT.append=function(e,t){this._pairs.push([e,t])};kT.toString=function(e){const t=e?function(i){return e.call(this,i,a0)}:a0;return this._pairs.map(function(o){return t(o[0])+"="+t(o[1])},"").join("&")};function w2(n){return encodeURIComponent(n).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function xT(n,e,t){if(!e)return n;const i=t&&t.encode||w2;W.isFunction(t)&&(t={serialize:t});const o=t&&t.serialize;let l;if(o?l=o(e,t):l=W.isURLSearchParams(e)?e.toString():new ug(e,t).toString(i),l){const c=n.indexOf("#");c!==-1&&(n=n.slice(0,c)),n+=(n.indexOf("?")===-1?"?":"&")+l}return n}class l0{constructor(){this.handlers=[]}use(e,t,i){return this.handlers.push({fulfilled:e,rejected:t,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){W.forEach(this.handlers,function(i){i!==null&&e(i)})}}const bT={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},E2=typeof URLSearchParams<"u"?URLSearchParams:ug,T2=typeof FormData<"u"?FormData:null,I2=typeof Blob<"u"?Blob:null,S2={isBrowser:!0,classes:{URLSearchParams:E2,FormData:T2,Blob:I2},protocols:["http","https","file","blob","url","data"]},cg=typeof window<"u"&&typeof document<"u",rm=typeof navigator=="object"&&navigator||void 0,R2=cg&&(!rm||["ReactNative","NativeScript","NS"].indexOf(rm.product)<0),A2=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",C2=cg&&window.location.href||"http://localhost",P2=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:cg,hasStandardBrowserEnv:R2,hasStandardBrowserWebWorkerEnv:A2,navigator:rm,origin:C2},Symbol.toStringTag,{value:"Module"})),Zt={...P2,...S2};function k2(n,e){return pd(n,new Zt.classes.URLSearchParams,Object.assign({visitor:function(t,i,o,l){return Zt.isNode&&W.isBuffer(t)?(this.append(i,t.toString("base64")),!1):l.defaultVisitor.apply(this,arguments)}},e))}function x2(n){return W.matchAll(/\w+|\[(\w*)]/g,n).map(e=>e[0]==="[]"?"":e[1]||e[0])}function b2(n){const e={},t=Object.keys(n);let i;const o=t.length;let l;for(i=0;i<o;i++)l=t[i],e[l]=n[l];return e}function NT(n){function e(t,i,o,l){let c=t[l++];if(c==="__proto__")return!0;const d=Number.isFinite(+c),p=l>=t.length;return c=!c&&W.isArray(o)?o.length:c,p?(W.hasOwnProp(o,c)?o[c]=[o[c],i]:o[c]=i,!d):((!o[c]||!W.isObject(o[c]))&&(o[c]=[]),e(t,i,o[c],l)&&W.isArray(o[c])&&(o[c]=b2(o[c])),!d)}if(W.isFormData(n)&&W.isFunction(n.entries)){const t={};return W.forEachEntry(n,(i,o)=>{e(x2(i),o,t,0)}),t}return null}function N2(n,e,t){if(W.isString(n))try{return(e||JSON.parse)(n),W.trim(n)}catch(i){if(i.name!=="SyntaxError")throw i}return(0,JSON.stringify)(n)}const Pu={transitional:bT,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const i=t.getContentType()||"",o=i.indexOf("application/json")>-1,l=W.isObject(e);if(l&&W.isHTMLForm(e)&&(e=new FormData(e)),W.isFormData(e))return o?JSON.stringify(NT(e)):e;if(W.isArrayBuffer(e)||W.isBuffer(e)||W.isStream(e)||W.isFile(e)||W.isBlob(e)||W.isReadableStream(e))return e;if(W.isArrayBufferView(e))return e.buffer;if(W.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let d;if(l){if(i.indexOf("application/x-www-form-urlencoded")>-1)return k2(e,this.formSerializer).toString();if((d=W.isFileList(e))||i.indexOf("multipart/form-data")>-1){const p=this.env&&this.env.FormData;return pd(d?{"files[]":e}:e,p&&new p,this.formSerializer)}}return l||o?(t.setContentType("application/json",!1),N2(e)):e}],transformResponse:[function(e){const t=this.transitional||Pu.transitional,i=t&&t.forcedJSONParsing,o=this.responseType==="json";if(W.isResponse(e)||W.isReadableStream(e))return e;if(e&&W.isString(e)&&(i&&!this.responseType||o)){const c=!(t&&t.silentJSONParsing)&&o;try{return JSON.parse(e)}catch(d){if(c)throw d.name==="SyntaxError"?xe.from(d,xe.ERR_BAD_RESPONSE,this,null,this.response):d}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Zt.classes.FormData,Blob:Zt.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};W.forEach(["delete","get","head","post","put","patch"],n=>{Pu.headers[n]={}});const O2=W.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),D2=n=>{const e={};let t,i,o;return n&&n.split(`
`).forEach(function(c){o=c.indexOf(":"),t=c.substring(0,o).trim().toLowerCase(),i=c.substring(o+1).trim(),!(!t||e[t]&&O2[t])&&(t==="set-cookie"?e[t]?e[t].push(i):e[t]=[i]:e[t]=e[t]?e[t]+", "+i:i)}),e},u0=Symbol("internals");function jl(n){return n&&String(n).trim().toLowerCase()}function hh(n){return n===!1||n==null?n:W.isArray(n)?n.map(hh):String(n)}function L2(n){const e=Object.create(null),t=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let i;for(;i=t.exec(n);)e[i[1]]=i[2];return e}const V2=n=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(n.trim());function cp(n,e,t,i,o){if(W.isFunction(i))return i.call(this,e,t);if(o&&(e=t),!!W.isString(e)){if(W.isString(i))return e.indexOf(i)!==-1;if(W.isRegExp(i))return i.test(e)}}function M2(n){return n.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,i)=>t.toUpperCase()+i)}function F2(n,e){const t=W.toCamelCase(" "+e);["get","set","has"].forEach(i=>{Object.defineProperty(n,i+t,{value:function(o,l,c){return this[i].call(this,e,o,l,c)},configurable:!0})})}class Tn{constructor(e){e&&this.set(e)}set(e,t,i){const o=this;function l(d,p,y){const _=jl(p);if(!_)throw new Error("header name must be a non-empty string");const E=W.findKey(o,_);(!E||o[E]===void 0||y===!0||y===void 0&&o[E]!==!1)&&(o[E||p]=hh(d))}const c=(d,p)=>W.forEach(d,(y,_)=>l(y,_,p));if(W.isPlainObject(e)||e instanceof this.constructor)c(e,t);else if(W.isString(e)&&(e=e.trim())&&!V2(e))c(D2(e),t);else if(W.isHeaders(e))for(const[d,p]of e.entries())l(p,d,i);else e!=null&&l(t,e,i);return this}get(e,t){if(e=jl(e),e){const i=W.findKey(this,e);if(i){const o=this[i];if(!t)return o;if(t===!0)return L2(o);if(W.isFunction(t))return t.call(this,o,i);if(W.isRegExp(t))return t.exec(o);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=jl(e),e){const i=W.findKey(this,e);return!!(i&&this[i]!==void 0&&(!t||cp(this,this[i],i,t)))}return!1}delete(e,t){const i=this;let o=!1;function l(c){if(c=jl(c),c){const d=W.findKey(i,c);d&&(!t||cp(i,i[d],d,t))&&(delete i[d],o=!0)}}return W.isArray(e)?e.forEach(l):l(e),o}clear(e){const t=Object.keys(this);let i=t.length,o=!1;for(;i--;){const l=t[i];(!e||cp(this,this[l],l,e,!0))&&(delete this[l],o=!0)}return o}normalize(e){const t=this,i={};return W.forEach(this,(o,l)=>{const c=W.findKey(i,l);if(c){t[c]=hh(o),delete t[l];return}const d=e?M2(l):String(l).trim();d!==l&&delete t[l],t[d]=hh(o),i[d]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return W.forEach(this,(i,o)=>{i!=null&&i!==!1&&(t[o]=e&&W.isArray(i)?i.join(", "):i)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const i=new this(e);return t.forEach(o=>i.set(o)),i}static accessor(e){const i=(this[u0]=this[u0]={accessors:{}}).accessors,o=this.prototype;function l(c){const d=jl(c);i[d]||(F2(o,c),i[d]=!0)}return W.isArray(e)?e.forEach(l):l(e),this}}Tn.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);W.reduceDescriptors(Tn.prototype,({value:n},e)=>{let t=e[0].toUpperCase()+e.slice(1);return{get:()=>n,set(i){this[t]=i}}});W.freezeMethods(Tn);function hp(n,e){const t=this||Pu,i=e||t,o=Tn.from(i.headers);let l=i.data;return W.forEach(n,function(d){l=d.call(t,l,o.normalize(),e?e.status:void 0)}),o.normalize(),l}function OT(n){return!!(n&&n.__CANCEL__)}function qa(n,e,t){xe.call(this,n??"canceled",xe.ERR_CANCELED,e,t),this.name="CanceledError"}W.inherits(qa,xe,{__CANCEL__:!0});function DT(n,e,t){const i=t.config.validateStatus;!t.status||!i||i(t.status)?n(t):e(new xe("Request failed with status code "+t.status,[xe.ERR_BAD_REQUEST,xe.ERR_BAD_RESPONSE][Math.floor(t.status/100)-4],t.config,t.request,t))}function U2(n){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(n);return e&&e[1]||""}function j2(n,e){n=n||10;const t=new Array(n),i=new Array(n);let o=0,l=0,c;return e=e!==void 0?e:1e3,function(p){const y=Date.now(),_=i[l];c||(c=y),t[o]=p,i[o]=y;let E=l,S=0;for(;E!==o;)S+=t[E++],E=E%n;if(o=(o+1)%n,o===l&&(l=(l+1)%n),y-c<e)return;const P=_&&y-_;return P?Math.round(S*1e3/P):void 0}}function z2(n,e){let t=0,i=1e3/e,o,l;const c=(y,_=Date.now())=>{t=_,o=null,l&&(clearTimeout(l),l=null),n.apply(null,y)};return[(...y)=>{const _=Date.now(),E=_-t;E>=i?c(y,_):(o=y,l||(l=setTimeout(()=>{l=null,c(o)},i-E)))},()=>o&&c(o)]}const Vh=(n,e,t=3)=>{let i=0;const o=j2(50,250);return z2(l=>{const c=l.loaded,d=l.lengthComputable?l.total:void 0,p=c-i,y=o(p),_=c<=d;i=c;const E={loaded:c,total:d,progress:d?c/d:void 0,bytes:p,rate:y||void 0,estimated:y&&d&&_?(d-c)/y:void 0,event:l,lengthComputable:d!=null,[e?"download":"upload"]:!0};n(E)},t)},c0=(n,e)=>{const t=n!=null;return[i=>e[0]({lengthComputable:t,total:n,loaded:i}),e[1]]},h0=n=>(...e)=>W.asap(()=>n(...e)),B2=Zt.hasStandardBrowserEnv?((n,e)=>t=>(t=new URL(t,Zt.origin),n.protocol===t.protocol&&n.host===t.host&&(e||n.port===t.port)))(new URL(Zt.origin),Zt.navigator&&/(msie|trident)/i.test(Zt.navigator.userAgent)):()=>!0,$2=Zt.hasStandardBrowserEnv?{write(n,e,t,i,o,l){const c=[n+"="+encodeURIComponent(e)];W.isNumber(t)&&c.push("expires="+new Date(t).toGMTString()),W.isString(i)&&c.push("path="+i),W.isString(o)&&c.push("domain="+o),l===!0&&c.push("secure"),document.cookie=c.join("; ")},read(n){const e=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(n){this.write(n,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function q2(n){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(n)}function H2(n,e){return e?n.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):n}function LT(n,e){return n&&!q2(e)?H2(n,e):e}const d0=n=>n instanceof Tn?{...n}:n;function uo(n,e){e=e||{};const t={};function i(y,_,E,S){return W.isPlainObject(y)&&W.isPlainObject(_)?W.merge.call({caseless:S},y,_):W.isPlainObject(_)?W.merge({},_):W.isArray(_)?_.slice():_}function o(y,_,E,S){if(W.isUndefined(_)){if(!W.isUndefined(y))return i(void 0,y,E,S)}else return i(y,_,E,S)}function l(y,_){if(!W.isUndefined(_))return i(void 0,_)}function c(y,_){if(W.isUndefined(_)){if(!W.isUndefined(y))return i(void 0,y)}else return i(void 0,_)}function d(y,_,E){if(E in e)return i(y,_);if(E in n)return i(void 0,y)}const p={url:l,method:l,data:l,baseURL:c,transformRequest:c,transformResponse:c,paramsSerializer:c,timeout:c,timeoutMessage:c,withCredentials:c,withXSRFToken:c,adapter:c,responseType:c,xsrfCookieName:c,xsrfHeaderName:c,onUploadProgress:c,onDownloadProgress:c,decompress:c,maxContentLength:c,maxBodyLength:c,beforeRedirect:c,transport:c,httpAgent:c,httpsAgent:c,cancelToken:c,socketPath:c,responseEncoding:c,validateStatus:d,headers:(y,_,E)=>o(d0(y),d0(_),E,!0)};return W.forEach(Object.keys(Object.assign({},n,e)),function(_){const E=p[_]||o,S=E(n[_],e[_],_);W.isUndefined(S)&&E!==d||(t[_]=S)}),t}const VT=n=>{const e=uo({},n);let{data:t,withXSRFToken:i,xsrfHeaderName:o,xsrfCookieName:l,headers:c,auth:d}=e;e.headers=c=Tn.from(c),e.url=xT(LT(e.baseURL,e.url),n.params,n.paramsSerializer),d&&c.set("Authorization","Basic "+btoa((d.username||"")+":"+(d.password?unescape(encodeURIComponent(d.password)):"")));let p;if(W.isFormData(t)){if(Zt.hasStandardBrowserEnv||Zt.hasStandardBrowserWebWorkerEnv)c.setContentType(void 0);else if((p=c.getContentType())!==!1){const[y,..._]=p?p.split(";").map(E=>E.trim()).filter(Boolean):[];c.setContentType([y||"multipart/form-data",..._].join("; "))}}if(Zt.hasStandardBrowserEnv&&(i&&W.isFunction(i)&&(i=i(e)),i||i!==!1&&B2(e.url))){const y=o&&l&&$2.read(l);y&&c.set(o,y)}return e},W2=typeof XMLHttpRequest<"u",K2=W2&&function(n){return new Promise(function(t,i){const o=VT(n);let l=o.data;const c=Tn.from(o.headers).normalize();let{responseType:d,onUploadProgress:p,onDownloadProgress:y}=o,_,E,S,P,x;function V(){P&&P(),x&&x(),o.cancelToken&&o.cancelToken.unsubscribe(_),o.signal&&o.signal.removeEventListener("abort",_)}let b=new XMLHttpRequest;b.open(o.method.toUpperCase(),o.url,!0),b.timeout=o.timeout;function G(){if(!b)return;const K=Tn.from("getAllResponseHeaders"in b&&b.getAllResponseHeaders()),oe={data:!d||d==="text"||d==="json"?b.responseText:b.response,status:b.status,statusText:b.statusText,headers:K,config:n,request:b};DT(function(C){t(C),V()},function(C){i(C),V()},oe),b=null}"onloadend"in b?b.onloadend=G:b.onreadystatechange=function(){!b||b.readyState!==4||b.status===0&&!(b.responseURL&&b.responseURL.indexOf("file:")===0)||setTimeout(G)},b.onabort=function(){b&&(i(new xe("Request aborted",xe.ECONNABORTED,n,b)),b=null)},b.onerror=function(){i(new xe("Network Error",xe.ERR_NETWORK,n,b)),b=null},b.ontimeout=function(){let te=o.timeout?"timeout of "+o.timeout+"ms exceeded":"timeout exceeded";const oe=o.transitional||bT;o.timeoutErrorMessage&&(te=o.timeoutErrorMessage),i(new xe(te,oe.clarifyTimeoutError?xe.ETIMEDOUT:xe.ECONNABORTED,n,b)),b=null},l===void 0&&c.setContentType(null),"setRequestHeader"in b&&W.forEach(c.toJSON(),function(te,oe){b.setRequestHeader(oe,te)}),W.isUndefined(o.withCredentials)||(b.withCredentials=!!o.withCredentials),d&&d!=="json"&&(b.responseType=o.responseType),y&&([S,x]=Vh(y,!0),b.addEventListener("progress",S)),p&&b.upload&&([E,P]=Vh(p),b.upload.addEventListener("progress",E),b.upload.addEventListener("loadend",P)),(o.cancelToken||o.signal)&&(_=K=>{b&&(i(!K||K.type?new qa(null,n,b):K),b.abort(),b=null)},o.cancelToken&&o.cancelToken.subscribe(_),o.signal&&(o.signal.aborted?_():o.signal.addEventListener("abort",_)));const Q=U2(o.url);if(Q&&Zt.protocols.indexOf(Q)===-1){i(new xe("Unsupported protocol "+Q+":",xe.ERR_BAD_REQUEST,n));return}b.send(l||null)})},Q2=(n,e)=>{const{length:t}=n=n?n.filter(Boolean):[];if(e||t){let i=new AbortController,o;const l=function(y){if(!o){o=!0,d();const _=y instanceof Error?y:this.reason;i.abort(_ instanceof xe?_:new qa(_ instanceof Error?_.message:_))}};let c=e&&setTimeout(()=>{c=null,l(new xe(`timeout ${e} of ms exceeded`,xe.ETIMEDOUT))},e);const d=()=>{n&&(c&&clearTimeout(c),c=null,n.forEach(y=>{y.unsubscribe?y.unsubscribe(l):y.removeEventListener("abort",l)}),n=null)};n.forEach(y=>y.addEventListener("abort",l));const{signal:p}=i;return p.unsubscribe=()=>W.asap(d),p}},G2=function*(n,e){let t=n.byteLength;if(t<e){yield n;return}let i=0,o;for(;i<t;)o=i+e,yield n.slice(i,o),i=o},X2=async function*(n,e){for await(const t of J2(n))yield*G2(t,e)},J2=async function*(n){if(n[Symbol.asyncIterator]){yield*n;return}const e=n.getReader();try{for(;;){const{done:t,value:i}=await e.read();if(t)break;yield i}}finally{await e.cancel()}},f0=(n,e,t,i)=>{const o=X2(n,e);let l=0,c,d=p=>{c||(c=!0,i&&i(p))};return new ReadableStream({async pull(p){try{const{done:y,value:_}=await o.next();if(y){d(),p.close();return}let E=_.byteLength;if(t){let S=l+=E;t(S)}p.enqueue(new Uint8Array(_))}catch(y){throw d(y),y}},cancel(p){return d(p),o.return()}},{highWaterMark:2})},md=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",MT=md&&typeof ReadableStream=="function",Y2=md&&(typeof TextEncoder=="function"?(n=>e=>n.encode(e))(new TextEncoder):async n=>new Uint8Array(await new Response(n).arrayBuffer())),FT=(n,...e)=>{try{return!!n(...e)}catch{return!1}},Z2=MT&&FT(()=>{let n=!1;const e=new Request(Zt.origin,{body:new ReadableStream,method:"POST",get duplex(){return n=!0,"half"}}).headers.has("Content-Type");return n&&!e}),p0=64*1024,im=MT&&FT(()=>W.isReadableStream(new Response("").body)),Mh={stream:im&&(n=>n.body)};md&&(n=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!Mh[e]&&(Mh[e]=W.isFunction(n[e])?t=>t[e]():(t,i)=>{throw new xe(`Response type '${e}' is not supported`,xe.ERR_NOT_SUPPORT,i)})})})(new Response);const eN=async n=>{if(n==null)return 0;if(W.isBlob(n))return n.size;if(W.isSpecCompliantForm(n))return(await new Request(Zt.origin,{method:"POST",body:n}).arrayBuffer()).byteLength;if(W.isArrayBufferView(n)||W.isArrayBuffer(n))return n.byteLength;if(W.isURLSearchParams(n)&&(n=n+""),W.isString(n))return(await Y2(n)).byteLength},tN=async(n,e)=>{const t=W.toFiniteNumber(n.getContentLength());return t??eN(e)},nN=md&&(async n=>{let{url:e,method:t,data:i,signal:o,cancelToken:l,timeout:c,onDownloadProgress:d,onUploadProgress:p,responseType:y,headers:_,withCredentials:E="same-origin",fetchOptions:S}=VT(n);y=y?(y+"").toLowerCase():"text";let P=Q2([o,l&&l.toAbortSignal()],c),x;const V=P&&P.unsubscribe&&(()=>{P.unsubscribe()});let b;try{if(p&&Z2&&t!=="get"&&t!=="head"&&(b=await tN(_,i))!==0){let oe=new Request(e,{method:"POST",body:i,duplex:"half"}),ae;if(W.isFormData(i)&&(ae=oe.headers.get("content-type"))&&_.setContentType(ae),oe.body){const[C,I]=c0(b,Vh(h0(p)));i=f0(oe.body,p0,C,I)}}W.isString(E)||(E=E?"include":"omit");const G="credentials"in Request.prototype;x=new Request(e,{...S,signal:P,method:t.toUpperCase(),headers:_.normalize().toJSON(),body:i,duplex:"half",credentials:G?E:void 0});let Q=await fetch(x);const K=im&&(y==="stream"||y==="response");if(im&&(d||K&&V)){const oe={};["status","statusText","headers"].forEach(R=>{oe[R]=Q[R]});const ae=W.toFiniteNumber(Q.headers.get("content-length")),[C,I]=d&&c0(ae,Vh(h0(d),!0))||[];Q=new Response(f0(Q.body,p0,C,()=>{I&&I(),V&&V()}),oe)}y=y||"text";let te=await Mh[W.findKey(Mh,y)||"text"](Q,n);return!K&&V&&V(),await new Promise((oe,ae)=>{DT(oe,ae,{data:te,headers:Tn.from(Q.headers),status:Q.status,statusText:Q.statusText,config:n,request:x})})}catch(G){throw V&&V(),G&&G.name==="TypeError"&&/fetch/i.test(G.message)?Object.assign(new xe("Network Error",xe.ERR_NETWORK,n,x),{cause:G.cause||G}):xe.from(G,G&&G.code,n,x)}}),sm={http:y2,xhr:K2,fetch:nN};W.forEach(sm,(n,e)=>{if(n){try{Object.defineProperty(n,"name",{value:e})}catch{}Object.defineProperty(n,"adapterName",{value:e})}});const m0=n=>`- ${n}`,rN=n=>W.isFunction(n)||n===null||n===!1,UT={getAdapter:n=>{n=W.isArray(n)?n:[n];const{length:e}=n;let t,i;const o={};for(let l=0;l<e;l++){t=n[l];let c;if(i=t,!rN(t)&&(i=sm[(c=String(t)).toLowerCase()],i===void 0))throw new xe(`Unknown adapter '${c}'`);if(i)break;o[c||"#"+l]=i}if(!i){const l=Object.entries(o).map(([d,p])=>`adapter ${d} `+(p===!1?"is not supported by the environment":"is not available in the build"));let c=e?l.length>1?`since :
`+l.map(m0).join(`
`):" "+m0(l[0]):"as no adapter specified";throw new xe("There is no suitable adapter to dispatch the request "+c,"ERR_NOT_SUPPORT")}return i},adapters:sm};function dp(n){if(n.cancelToken&&n.cancelToken.throwIfRequested(),n.signal&&n.signal.aborted)throw new qa(null,n)}function g0(n){return dp(n),n.headers=Tn.from(n.headers),n.data=hp.call(n,n.transformRequest),["post","put","patch"].indexOf(n.method)!==-1&&n.headers.setContentType("application/x-www-form-urlencoded",!1),UT.getAdapter(n.adapter||Pu.adapter)(n).then(function(i){return dp(n),i.data=hp.call(n,n.transformResponse,i),i.headers=Tn.from(i.headers),i},function(i){return OT(i)||(dp(n),i&&i.response&&(i.response.data=hp.call(n,n.transformResponse,i.response),i.response.headers=Tn.from(i.response.headers))),Promise.reject(i)})}const jT="1.7.9",gd={};["object","boolean","number","function","string","symbol"].forEach((n,e)=>{gd[n]=function(i){return typeof i===n||"a"+(e<1?"n ":" ")+n}});const y0={};gd.transitional=function(e,t,i){function o(l,c){return"[Axios v"+jT+"] Transitional option '"+l+"'"+c+(i?". "+i:"")}return(l,c,d)=>{if(e===!1)throw new xe(o(c," has been removed"+(t?" in "+t:"")),xe.ERR_DEPRECATED);return t&&!y0[c]&&(y0[c]=!0,console.warn(o(c," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(l,c,d):!0}};gd.spelling=function(e){return(t,i)=>(console.warn(`${i} is likely a misspelling of ${e}`),!0)};function iN(n,e,t){if(typeof n!="object")throw new xe("options must be an object",xe.ERR_BAD_OPTION_VALUE);const i=Object.keys(n);let o=i.length;for(;o-- >0;){const l=i[o],c=e[l];if(c){const d=n[l],p=d===void 0||c(d,l,n);if(p!==!0)throw new xe("option "+l+" must be "+p,xe.ERR_BAD_OPTION_VALUE);continue}if(t!==!0)throw new xe("Unknown option "+l,xe.ERR_BAD_OPTION)}}const dh={assertOptions:iN,validators:gd},Ir=dh.validators;class no{constructor(e){this.defaults=e,this.interceptors={request:new l0,response:new l0}}async request(e,t){try{return await this._request(e,t)}catch(i){if(i instanceof Error){let o={};Error.captureStackTrace?Error.captureStackTrace(o):o=new Error;const l=o.stack?o.stack.replace(/^.+\n/,""):"";try{i.stack?l&&!String(i.stack).endsWith(l.replace(/^.+\n.+\n/,""))&&(i.stack+=`
`+l):i.stack=l}catch{}}throw i}}_request(e,t){typeof e=="string"?(t=t||{},t.url=e):t=e||{},t=uo(this.defaults,t);const{transitional:i,paramsSerializer:o,headers:l}=t;i!==void 0&&dh.assertOptions(i,{silentJSONParsing:Ir.transitional(Ir.boolean),forcedJSONParsing:Ir.transitional(Ir.boolean),clarifyTimeoutError:Ir.transitional(Ir.boolean)},!1),o!=null&&(W.isFunction(o)?t.paramsSerializer={serialize:o}:dh.assertOptions(o,{encode:Ir.function,serialize:Ir.function},!0)),dh.assertOptions(t,{baseUrl:Ir.spelling("baseURL"),withXsrfToken:Ir.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let c=l&&W.merge(l.common,l[t.method]);l&&W.forEach(["delete","get","head","post","put","patch","common"],x=>{delete l[x]}),t.headers=Tn.concat(c,l);const d=[];let p=!0;this.interceptors.request.forEach(function(V){typeof V.runWhen=="function"&&V.runWhen(t)===!1||(p=p&&V.synchronous,d.unshift(V.fulfilled,V.rejected))});const y=[];this.interceptors.response.forEach(function(V){y.push(V.fulfilled,V.rejected)});let _,E=0,S;if(!p){const x=[g0.bind(this),void 0];for(x.unshift.apply(x,d),x.push.apply(x,y),S=x.length,_=Promise.resolve(t);E<S;)_=_.then(x[E++],x[E++]);return _}S=d.length;let P=t;for(E=0;E<S;){const x=d[E++],V=d[E++];try{P=x(P)}catch(b){V.call(this,b);break}}try{_=g0.call(this,P)}catch(x){return Promise.reject(x)}for(E=0,S=y.length;E<S;)_=_.then(y[E++],y[E++]);return _}getUri(e){e=uo(this.defaults,e);const t=LT(e.baseURL,e.url);return xT(t,e.params,e.paramsSerializer)}}W.forEach(["delete","get","head","options"],function(e){no.prototype[e]=function(t,i){return this.request(uo(i||{},{method:e,url:t,data:(i||{}).data}))}});W.forEach(["post","put","patch"],function(e){function t(i){return function(l,c,d){return this.request(uo(d||{},{method:e,headers:i?{"Content-Type":"multipart/form-data"}:{},url:l,data:c}))}}no.prototype[e]=t(),no.prototype[e+"Form"]=t(!0)});class hg{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(l){t=l});const i=this;this.promise.then(o=>{if(!i._listeners)return;let l=i._listeners.length;for(;l-- >0;)i._listeners[l](o);i._listeners=null}),this.promise.then=o=>{let l;const c=new Promise(d=>{i.subscribe(d),l=d}).then(o);return c.cancel=function(){i.unsubscribe(l)},c},e(function(l,c,d){i.reason||(i.reason=new qa(l,c,d),t(i.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);t!==-1&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=i=>{e.abort(i)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new hg(function(o){e=o}),cancel:e}}}function sN(n){return function(t){return n.apply(null,t)}}function oN(n){return W.isObject(n)&&n.isAxiosError===!0}const om={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(om).forEach(([n,e])=>{om[e]=n});function zT(n){const e=new no(n),t=vT(no.prototype.request,e);return W.extend(t,no.prototype,e,{allOwnKeys:!0}),W.extend(t,e,null,{allOwnKeys:!0}),t.create=function(o){return zT(uo(n,o))},t}const gt=zT(Pu);gt.Axios=no;gt.CanceledError=qa;gt.CancelToken=hg;gt.isCancel=OT;gt.VERSION=jT;gt.toFormData=pd;gt.AxiosError=xe;gt.Cancel=gt.CanceledError;gt.all=function(e){return Promise.all(e)};gt.spread=sN;gt.isAxiosError=oN;gt.mergeConfig=uo;gt.AxiosHeaders=Tn;gt.formToJSON=n=>NT(W.isHTMLForm(n)?new FormData(n):n);gt.getAdapter=UT.getAdapter;gt.HttpStatusCode=om;gt.default=gt;const aN=({children:n})=>{const{currentUser:e}=pi(),[t,i]=le.useState({query:"",includeAdult:!1,language:"en-US",primaryReleaseYear:"",year:"",region:"",searchType:"multi",excludeIncomplete:!1,page:1}),o=async()=>{var S;if(!e)throw new Error("User not authenticated. Please log in.");const y=(S=e==null?void 0:e.stsTokenManager)==null?void 0:S.accessToken;return(await gt.get("https://watchlist-duo-backend.onrender.com/api/search",{headers:{Authorization:`Bearer ${y}`,"Content-Type":"application/json"},params:{query:t.query.trim(),includeAdult:t.includeAdult,language:t.language,primaryReleaseYear:t.primaryReleaseYear||void 0,year:t.year||void 0,region:t.region||void 0,searchType:t.searchType,page:t.page}})).data.results},{data:l=[],isLoading:c,refetch:d,error:p}=cd({queryKey:["searchResults",t],queryFn:o,enabled:!!t.query,retry:!1,staleTime:1e3*60*5});return le.useEffect(()=>{p&&(ke.error("Error fetching results. Please refresh and try again."),console.error("Error fetching results:",p))},[p]),U.jsx(Cw.Provider,{value:{isLoadingSearchResults:c,results:l,searchOptions:t,setSearchOptions:y=>i(_=>({..._,...y})),refetchSearchResults:d},children:n})},lN=({children:n})=>{const{currentUser:e}=pi(),t=async()=>{var c;if(!e)throw new Error("User not authenticated");try{const d=(c=e==null?void 0:e.stsTokenManager)==null?void 0:c.accessToken,p=await fetch("https://watchlist-duo-backend.onrender.com/api/duoPartnerList",{headers:{Authorization:`Bearer ${d}`,"Content-Type":"application/json"}});if(!p.ok)throw new Error(`Failed to fetch: ${p.statusText}`);return await p.json()}catch(d){throw console.error("Error fetching Duo Partner List:",d),d}},{data:i=[],isLoading:o,refetch:l}=cd({queryKey:["duoPartnerList",e==null?void 0:e.uid],queryFn:t,enabled:!!e,staleTime:1e3*60*5,gcTime:1e3*60*10});return U.jsx(xw.Provider,{value:{isLoadingDuoPartnerList:o,duoPartnerList:i,refreshDuoPartnerList:l},children:n})},uN=({children:n})=>{const{currentUser:e}=pi(),[t,i]=le.useState({language:"en-US",mediaType:"movie",discoverType:"popular",timeWindow:"week",excludeIncomplete:!1,page:1}),o=async()=>{var S;if(!e)throw ke.error("User not authenticated. Please log in."),new Error("User not authenticated");const p=(S=e==null?void 0:e.stsTokenManager)==null?void 0:S.accessToken,_=`https://watchlist-duo-backend.onrender.com/api/${{popular:"popular",trending:"trending"}[t.discoverType]}`;return(await gt.get(_,{headers:{Authorization:`Bearer ${p}`,"Content-Type":"application/json"},params:{language:t.language,mediaType:t.mediaType,discoverType:t.discoverType,timeWindow:t.timeWindow,page:t.page}})).data.results},{data:l=[],isLoading:c,refetch:d}=cd({queryKey:["discoverResults",t],queryFn:o,enabled:!!e,staleTime:1e3*60*5});return U.jsx(bw.Provider,{value:{isLoadingDiscoverResults:c,results:l,discoverOptions:t,setDiscoverOptions:p=>i(y=>({...y,...p})),refreshDiscoverResults:d},children:n})},cN=new db;eI.createRoot(document.getElementById("root")).render(U.jsx(qe.StrictMode,{children:U.jsx(yb,{client:cN,children:U.jsx(xb,{children:U.jsx(bb,{children:U.jsx(lN,{children:U.jsx(aN,{children:U.jsx(uN,{children:U.jsx(Jx,{})})})})})})})}));
